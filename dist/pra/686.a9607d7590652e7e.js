"use strict";(self.webpackChunkpra=self.webpackChunkpra||[]).push([[686],{5686:(dn,J,_)=>{_.r(J),_.d(J,{ProcurmentModuleModule:()=>pn});var f=_(6895),g=_(9299),E=_(1283),s=_(4006),d=_(8608),b=_(5439),m=_(2340),e=_(4650),T=_(2126),y=_(6104),P=_(529),L=_(2894),M=_(4961),k=_(7957),N=_(3238),q=_(9549),I=_(3546),x=_(9602),A=_(4850),Q=_(7392),C=_(4144),R=_(4385),w=_(3683);function B(o,c){if(1&o&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function H(o,c){if(1&o&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function z(o,c){if(1&o&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.site_name," ")}}function G(o,c){if(1&o&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.vendor_name," ")}}function V(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",26)(1,"label",27),e._uU(2,"Vendor"),e.TgZ(3,"span",28),e._uU(4,"*"),e.qZA()(),e.TgZ(5,"mat-select",46),e.NdJ("selectionChange",function(n){e.CHM(t);const r=e.oxw(3);return e.KtG(r.onVendorSelection(n))}),e.YNc(6,G,2,2,"mat-option",30),e.qZA()()}if(2&o){const t=e.oxw(3);e.xp6(6),e.Q6J("ngForOf",t.vendorList)}}function K(o,c){if(1&o&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.item_name," ")}}function W(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"mat-option",72),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw().index,l=e.oxw(4);return e.KtG(l.toggleUOMSelection(r._id,a))}),e._uU(1),e.qZA()}if(2&o){const t=c.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.uom_name," ")}}function X(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"mat-option",72),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw().index,l=e.oxw(4);return e.KtG(l.toggleBrandSelection(r._id,a))}),e._uU(1),e.qZA()}if(2&o){const t=c.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.brand_name," ")}}function ee(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"li",74),e._uU(1),e.TgZ(2,"button",75),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2).index,l=e.oxw(4);return e.KtG(l.removeFile(a,r))}),e._uU(3," x "),e.qZA()()}if(2&o){const t=c.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function te(o,c){if(1&o&&(e.TgZ(0,"div")(1,"ul"),e.YNc(2,ee,4,1,"li",73),e.qZA()()),2&o){const t=e.oxw().index,i=e.oxw(4);let n;e.xp6(2),e.Q6J("ngForOf",null==i.items||null==i.items.value||null==(n=i.items.value.at(t))?null:n.files)}}function ne(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"a",76),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().index,r=e.oxw(4);return e.KtG(r.delete(n))}),e._UZ(1,"i",77),e.qZA()}}function ie(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"tr",55)(1,"td",56),e._uU(2),e.qZA(),e.ynx(3,57),e.TgZ(4,"td")(5,"mat-form-field",58)(6,"input",59),e.NdJ("input",function(n){e.CHM(t);const r=e.oxw(4);return e.KtG(r.searchItem(n))}),e.qZA(),e.TgZ(7,"mat-autocomplete",60,61),e.NdJ("optionSelected",function(n){const a=e.CHM(t).index,l=e.oxw(4);return e.KtG(l.selectedItem(n,a))}),e.YNc(9,K,2,2,"mat-option",30),e.qZA()()(),e.TgZ(10,"td",62),e._uU(11),e.qZA(),e.TgZ(12,"td",62),e._uU(13),e.qZA(),e.TgZ(14,"td",62),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td")(19,"mat-select",63),e.YNc(20,W,2,2,"mat-option",64),e.qZA()(),e.TgZ(21,"td"),e._UZ(22,"input",65),e.qZA(),e.TgZ(23,"td")(24,"mat-select",66),e.YNc(25,X,2,2,"mat-option",64),e.qZA()(),e.TgZ(26,"td"),e._UZ(27,"input",67),e.qZA(),e.TgZ(28,"td"),e._UZ(29,"input",68),e.qZA(),e.TgZ(30,"td")(31,"input",69),e.NdJ("change",function(n){const a=e.CHM(t).index,l=e.oxw(4);return e.KtG(l.onFilesSelected(n,a))}),e.qZA(),e.YNc(32,te,3,1,"div",22),e.qZA(),e.TgZ(33,"td")(34,"div",70),e.YNc(35,ne,2,0,"a",71),e.qZA()(),e.BQk(),e.qZA()}if(2&o){const t=c.$implicit,i=c.index,n=e.MAs(8),r=e.oxw(4);let a,l,p,u,h;e.xp6(2),e.hij(" ",i+1," "),e.xp6(1),e.Q6J("formGroupName",i),e.xp6(3),e.Q6J("matAutocomplete",n),e.xp6(1),e.Q6J("panelWidth","auto")("displayWith",r.displayItemFn),e.xp6(2),e.Q6J("ngForOf",r.filteredItemList),e.xp6(2),e.hij(" ",null==(a=t.get(" item_code"))?null:a.value," "),e.xp6(2),e.hij(" ",null==(l=t.get("category"))?null:l.value," "),e.xp6(2),e.hij(" ",null==(p=t.get("subCategory"))?null:p.value," "),e.xp6(2),e.hij(" ",null==(u=t.get("HSNcode"))?null:u.value," "),e.xp6(3),e.Q6J("ngForOf",r.filteredUOMLists[i]),e.xp6(5),e.Q6J("ngForOf",r.filteredBrandLists[i]),e.xp6(7),e.Q6J("ngIf",null==r.items||null==r.items.value||null==(h=r.items.value.at(i))?null:h.files),e.xp6(3),e.Q6J("ngIf",i>0)}}function oe(o,c){1&o&&(e.TgZ(0,"button",78),e._uU(1," Submit "),e.qZA())}function re(o,c){1&o&&(e.TgZ(0,"h2",79),e._uU(1," You don't have permission to add "),e.qZA())}function ae(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",47)(2,"table",48)(3,"tr")(4,"th"),e._uU(5,"S\xa0No"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Item*"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Item Code"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Item specification"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Category"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Sub\xa0category"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"HSN Code"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Uom*"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Quantity*"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Make List"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Rate"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Remarks"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Upload"),e.qZA(),e.TgZ(30,"th"),e._uU(31,"Action"),e.qZA()(),e.TgZ(32,"tbody"),e.YNc(33,ie,36,14,"tr",49),e.qZA()()(),e.TgZ(34,"div",50)(35,"div")(36,"button",51),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.addItem())}),e._uU(37," Add Item + "),e.qZA()()(),e.TgZ(38,"div",52),e.YNc(39,oe,2,0,"button",53),e.YNc(40,re,2,0,"h2",54),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(3);e.xp6(33),e.Q6J("ngForOf",t.purchaseRequestForm.get("items").controls),e.xp6(6),e.Q6J("ngIf",t.addPermission),e.xp6(1),e.Q6J("ngIf",!t.addPermission)}}function se(o,c){if(1&o&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.item_name," ")}}function le(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"mat-option",72),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw().index,l=e.oxw(4);return e.KtG(l.toggleUOMSelection(r.uom_name,a))}),e._uU(1),e.qZA()}if(2&o){const t=c.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.uom_name," ")}}function ce(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"mat-option",72),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw().index,l=e.oxw(4);return e.KtG(l.toggleBrandSelection(r._id,a))}),e._uU(1),e.qZA()}if(2&o){const t=c.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.brand_name," ")}}function pe(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"li",74),e._uU(1),e.TgZ(2,"button",80),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2).index,l=e.oxw(4);return e.KtG(l.removeFile(a,r))}),e._uU(3," x "),e.qZA()()}if(2&o){const t=c.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function ue(o,c){if(1&o&&(e.TgZ(0,"div")(1,"ul"),e.YNc(2,pe,4,1,"li",73),e.qZA()()),2&o){const t=e.oxw().index,i=e.oxw(4);let n;e.xp6(2),e.Q6J("ngForOf",null==i.items||null==i.items.value||null==(n=i.items.value.at(t))?null:n.files)}}function de(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"a",76),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().index,r=e.oxw(4);return e.KtG(r.delete(n))}),e._UZ(1,"i",77),e.qZA()}}function _e(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"tr",55)(1,"td",56),e._uU(2),e.qZA(),e.ynx(3,57),e.TgZ(4,"td")(5,"mat-form-field",58)(6,"input",59),e.NdJ("input",function(n){e.CHM(t);const r=e.oxw(4);return e.KtG(r.searchItem(n))}),e.qZA(),e.TgZ(7,"mat-autocomplete",60,61),e.NdJ("optionSelected",function(n){const a=e.CHM(t).index,l=e.oxw(4);return e.KtG(l.selectedItem(n,a))}),e.YNc(9,se,2,2,"mat-option",30),e.qZA()()(),e.TgZ(10,"td",62),e._uU(11),e.qZA(),e.TgZ(12,"td",62),e._uU(13),e.qZA(),e.TgZ(14,"td",62),e._uU(15),e.qZA(),e.TgZ(16,"td",62),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td")(21,"mat-select",63),e.YNc(22,le,2,2,"mat-option",64),e.qZA()(),e.TgZ(23,"td"),e._UZ(24,"input",65),e.qZA(),e.TgZ(25,"td")(26,"mat-select",66),e.YNc(27,ce,2,2,"mat-option",64),e.qZA()(),e.TgZ(28,"td"),e._UZ(29,"input",68),e.qZA(),e.TgZ(30,"td")(31,"input",69),e.NdJ("change",function(n){const a=e.CHM(t).index,l=e.oxw(4);return e.KtG(l.onFilesSelected(n,a))}),e.qZA(),e.YNc(32,ue,3,1,"div",22),e.qZA(),e.TgZ(33,"td")(34,"div",70),e.YNc(35,de,2,0,"a",71),e.qZA()(),e.BQk(),e.qZA()}if(2&o){const t=c.$implicit,i=c.index,n=e.MAs(8),r=e.oxw(4);let a,l,p,u,h,Z;e.xp6(2),e.hij(" ",i+1," "),e.xp6(1),e.Q6J("formGroupName",i),e.xp6(3),e.Q6J("matAutocomplete",n),e.xp6(1),e.Q6J("panelWidth","auto")("displayWith",r.displayItemFn),e.xp6(2),e.Q6J("ngForOf",r.filteredItemList),e.xp6(2),e.hij(" ",null==(a=t.get(" item_code"))?null:a.value," "),e.xp6(2),e.hij(" ",null==(l=t.get("specification"))?null:l.value," "),e.xp6(2),e.hij(" ",null==(p=t.get("category"))?null:p.value," "),e.xp6(2),e.hij(" ",null==(u=t.get("subCategory"))?null:u.value," "),e.xp6(2),e.hij(" ",null==(h=t.get("HSNcode"))?null:h.value," "),e.xp6(3),e.Q6J("ngForOf",r.filteredUOMLists[i]),e.xp6(5),e.Q6J("ngForOf",r.filteredBrandLists[i]),e.xp6(5),e.Q6J("ngIf",null==r.items||null==r.items.value||null==(Z=r.items.value.at(i))?null:Z.files),e.xp6(3),e.Q6J("ngIf",i>0)}}function me(o,c){1&o&&(e.TgZ(0,"button",78),e._uU(1," Submit "),e.qZA())}function ge(o,c){1&o&&(e.TgZ(0,"h2",79),e._uU(1," You don't have permission to add "),e.qZA())}function he(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",47)(1,"table",48)(2,"tr")(3,"th"),e._uU(4,"S\xa0No"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Item*"),e.qZA(),e.TgZ(7,"th"),e._uU(8," Item Code"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Item specification"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Category"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Sub\xa0category"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"HSN Code"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Uom*"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Quantity*"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Make List"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Remarks"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Upload"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Action"),e.qZA()(),e.TgZ(29,"tbody"),e.YNc(30,_e,36,15,"tr",49),e.qZA()()(),e.TgZ(31,"div",50)(32,"div")(33,"button",51),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.addItem())}),e._uU(34," Add Item + "),e.qZA()()(),e.TgZ(35,"div",52),e.YNc(36,me,2,0,"button",53),e.YNc(37,ge,2,0,"h2",54),e.qZA()}if(2&o){const t=e.oxw(3);e.xp6(30),e.Q6J("ngForOf",t.purchaseRequestForm.get("items").controls),e.xp6(6),e.Q6J("ngIf",t.addPermission),e.xp6(1),e.Q6J("ngIf",!t.addPermission)}}function fe(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",23),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onSubmit())}),e.TgZ(2,"mat-card",24)(3,"div",25)(4,"div",26)(5,"label",27),e._uU(6,"Request Type "),e.TgZ(7,"span",28),e._uU(8,"*"),e.qZA()(),e.TgZ(9,"mat-select",29),e.YNc(10,B,2,2,"mat-option",30),e.qZA()(),e.TgZ(11,"div",26)(12,"label",27),e._uU(13,"Request title "),e.TgZ(14,"span",28),e._uU(15,"*"),e.qZA()(),e.TgZ(16,"mat-select",31),e.NdJ("selectionChange",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectedTitle(n))}),e.YNc(17,H,2,2,"mat-option",30),e.qZA()(),e.TgZ(18,"div",26)(19,"label",27),e._uU(20,"Request date"),e.qZA(),e.TgZ(21,"mat-form-field",32),e._UZ(22,"input",33)(23,"mat-datepicker-toggle",34)(24,"mat-datepicker"),e.qZA()(),e.TgZ(25,"div",26)(26,"label",35),e._uU(27," Required By "),e.TgZ(28,"span",28),e._uU(29,"*"),e.qZA()(),e.TgZ(30,"mat-form-field",32)(31,"input",36),e.NdJ("click",function(){e.CHM(t);const n=e.MAs(34);return e.KtG(n.open())}),e.qZA(),e._UZ(32,"mat-datepicker-toggle",37)(33,"mat-datepicker",null,38),e.qZA()(),e.TgZ(35,"div",26)(36,"label",27),e._uU(37,"Site name "),e.TgZ(38,"span",28),e._uU(39,"*"),e.qZA()(),e.TgZ(40,"mat-select",39),e.NdJ("selectionChange",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectedSite(n))}),e.YNc(41,z,2,2,"mat-option",30),e.qZA()(),e.TgZ(42,"div",26)(43,"label",40),e._uU(44,"Local Purchase "),e.TgZ(45,"input",41),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.handleLocalPurchaseChange())}),e.qZA()()(),e.TgZ(46,"div",26)(47,"label",27),e._uU(48,"Purchase request no "),e.qZA(),e._UZ(49,"input",42),e.qZA(),e.YNc(50,V,7,1,"div",43),e.qZA()(),e.YNc(51,ae,41,3,"ng-container",18),e.YNc(52,he,38,3,"ng-template",null,44,e.W1O),e.qZA(),e.BQk()}if(2&o){const t=e.MAs(34),i=e.MAs(53),n=e.oxw(2);let r,a;e.xp6(1),e.Q6J("formGroup",n.purchaseRequestForm),e.xp6(9),e.Q6J("ngForOf",n.prType),e.xp6(6),e.Q6J("disabled",n.itemSelected),e.xp6(1),e.Q6J("ngForOf",n.categoryList),e.xp6(5),e.Q6J("readonly",!0),e.xp6(9),e.Q6J("matDatepicker",t)("min",n.requredByMinDate),e.xp6(1),e.Q6J("for",t),e.xp6(9),e.Q6J("ngForOf",n.siteList),e.xp6(8),e.Q6J("value",n.requestNo),e.xp6(1),e.Q6J("ngIf","yes"===(null==(r=n.purchaseRequestForm.get("local_purchase"))?null:r.value)),e.xp6(1),e.Q6J("ngIf","yes"===(null==(a=n.purchaseRequestForm.get("local_purchase"))?null:a.value))("ngIfElse",i)}}function xe(o,c){if(1&o&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}const F=function(o){return["/procurement/details",o]};function Ze(o,c){if(1&o&&(e.TgZ(0,"td",102)(1,"a",103),e._uU(2," View\xa0details "),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(1,F,t._id))}}function qe(o,c){if(1&o&&(e.TgZ(0,"td",102)(1,"a",104),e._uU(2," Approved ticket "),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(1,F,t._id))}}function be(o,c){if(1&o&&(e.TgZ(0,"td",102)(1,"a",105),e._uU(2," Rejected "),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(1,F,t._id))}}const ve=function(o){return["/procurement/revise",o]};function Te(o,c){if(1&o&&(e.TgZ(0,"a",108),e._uU(1," Revise "),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.Q6J("routerLink",e.VKq(1,ve,t._id))}}function ye(o,c){1&o&&(e.TgZ(0,"span",109),e._uU(1," No permission to revise "),e.qZA())}function Ae(o,c){if(1&o&&(e.TgZ(0,"td",102),e.YNc(1,Te,2,3,"a",106),e.YNc(2,ye,2,0,"ng-template",null,107,e.W1O),e.qZA()),2&o){const t=e.MAs(3),i=e.oxw(4);e.xp6(1),e.Q6J("ngIf",i.editPermission)("ngIfElse",t)}}function Ce(o,c){if(1&o&&(e.TgZ(0,"tr")(1,"td",96),e._uU(2),e.qZA(),e.TgZ(3,"td",97),e._uU(4),e.qZA(),e.TgZ(5,"td",98),e._uU(6),e.qZA(),e.TgZ(7,"td",99),e._uU(8),e.qZA(),e.YNc(9,Ze,3,3,"td",100),e.YNc(10,qe,3,3,"td",100),e.YNc(11,be,3,3,"td",100),e.YNc(12,Ae,4,2,"td",100),e.TgZ(13,"td",101)(14,"mat-icon"),e._uU(15," arrow_forward_ios "),e.qZA()()()),2&o){const t=c.$implicit;e.xp6(2),e.hij(" Request\xa0no: ",t.purchase_request_number," "),e.xp6(2),e.hij(" Requested on: ",t.date," "),e.xp6(2),e.hij(" Title: ",t.title," "),e.xp6(2),e.hij(" Site: ",t.siteData.site_name," "),e.xp6(1),e.Q6J("ngIf","pending"==t.status),e.xp6(1),e.Q6J("ngIf","approved"==t.status),e.xp6(1),e.Q6J("ngIf","rejected"==t.status),e.xp6(1),e.Q6J("ngIf","revise"==t.status)}}function we(o,c){1&o&&(e.TgZ(0,"div",110),e._UZ(1,"img",111),e.TgZ(2,"span"),e._uU(3," No record found"),e.qZA()())}function Ue(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",81)(2,"div")(3,"div",82)(4,"span"),e._uU(5,"Filter by title "),e.qZA()(),e.TgZ(6,"mat-form-field",83)(7,"mat-icon",34),e._uU(8,"search"),e.qZA(),e.TgZ(9,"input",84),e.NdJ("input",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.search(n,"title"))}),e.qZA()()(),e.TgZ(10,"div")(11,"div",82)(12,"span"),e._uU(13,"Filter by date"),e.qZA()(),e.TgZ(14,"div")(15,"mat-form-field",85)(16,"input",86),e.NdJ("dateChange",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.dateFilter(n))})("click",function(){e.CHM(t);const n=e.MAs(19);return e.KtG(n.open())}),e.qZA(),e._UZ(17,"mat-datepicker-toggle",37)(18,"mat-datepicker",null,87),e.qZA()()(),e.TgZ(20,"div")(21,"div",82)(22,"span"),e._uU(23,"Filter by site"),e.qZA()(),e.TgZ(24,"div")(25,"mat-form-field",85)(26,"input",88),e.NdJ("input",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.search(n,"site"))}),e.qZA()()()(),e.TgZ(27,"div",89)(28,"div",82)(29,"span"),e._uU(30,"Filter by Status"),e.qZA()(),e.TgZ(31,"div",90)(32,"mat-form-field",32)(33,"mat-select",91),e.NdJ("selectionChange",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onStatusChange(n))}),e.YNc(34,xe,2,2,"mat-option",30),e.qZA()()()()(),e.TgZ(35,"div",92)(36,"table",93)(37,"tbody"),e.YNc(38,Ce,16,8,"tr",94),e.qZA()(),e.YNc(39,we,4,0,"div",95),e.qZA(),e.BQk()}if(2&o){const t=e.MAs(19),i=e.oxw(2);e.xp6(16),e.Q6J("matDatepicker",t),e.xp6(1),e.Q6J("for",t),e.xp6(16),e.Q6J("formControl",i.statusOption),e.xp6(1),e.Q6J("ngForOf",i.statusList),e.xp6(4),e.Q6J("ngForOf",i.purchaseList),e.xp6(1),e.Q6J("ngIf",!(i.purchaseList&&i.purchaseList.length>0))}}const D=function(o){return{active:o}};function Pe(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",20)(2,"div",21),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.createRequest())}),e._uU(3," Create request "),e.qZA(),e.TgZ(4,"div",21),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return n.option=2,e.KtG(n.getPurchaseList({filter_by:n.filter_by,filter_value:n.statusOption.value}))}),e._uU(5," Request list "),e.qZA()(),e.YNc(6,fe,54,13,"ng-container",22),e.YNc(7,Ue,40,6,"ng-container",22),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngClass",e.VKq(4,D,1==t.option)),e.xp6(2),e.Q6J("ngClass",e.VKq(6,D,2==t.option)),e.xp6(2),e.Q6J("ngIf",1==t.option),e.xp6(1),e.Q6J("ngIf",2==t.option)}}function ke(o,c){1&o&&(e.TgZ(0,"h3",112),e._uU(1," You don't have permissions to view. "),e.qZA())}const Ne=function(){return["/procurement"]},Ie=function(){return["/procurement/prlist"]},Re=function(){return["/rate-comparative"]},Le=function(){return["/rate-approval"]},Me=function(){return["/purchase-order"]};let Fe=(()=>{class o{constructor(t,i,n,r,a,l,p,u){this.router=t,this.httpService=i,this.snack=n,this.formBuilder=r,this.http=a,this.route=l,this.auth=p,this.userService=u,this.statusOption=new s.NI("pending"),this.statusList=[{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"revise",label:"Revise"}],this.requredByMinDate=new Date,this.brandNotSelected=!1,this.UOMNotSelected=!1,this.vendorSearch="",this.filteredVendorList=[],this.load=!1,this.items=[],this.itemSelected=!1,this.filteredUOMLists=[],this.filteredBrandLists=[],this.option=2,this.purchaseList=[],this.filter_by="status",this.originalPurchaseList=[],this.filter_value="pending",this.requestNo=0,this.prType=["Site Establishment","Normal"],this.details={},this.brandSelections=this.formBuilder.array([]),this.purchaseRequestForm=new s.cw({title:new s.NI("",s.kI.required),prType:new s.NI("",s.kI.required),date:new s.NI(b().format("DD-MM-YYYY"),s.kI.required),expected_delivery_date:new s.NI(b().add(1,"days").format("DD-MM-YYYY"),s.kI.required),purchase_request_number:new s.NI(null,s.kI.required),site:new s.NI("",s.kI.required),local_purchase:new s.NI("no",s.kI.required),remarks:new s.NI(""),items:this.formBuilder.array([]),vendor:new s.NI})}onSubmit(){if(!this.purchaseRequestForm.valid)return console.log("Form is invalid",this.purchaseRequestForm),void Object.keys(this.purchaseRequestForm.controls).forEach(a=>{const l=this.purchaseRequestForm.get(a);l&&l.invalid&&console.log(`Validation error in ${a}:`,l.errors)});let t=this.purchaseRequestForm.value;this.load=!1,console.log("here",t),console.log(t.title);const i=this.categoryList.find(a=>a._id===t.title);if(console.log(i),t.title=i.name,t.requestNo=this.requestNo,t.date=b(t.date,"DD-MM-YYYY").toDate(),t.expected_delivery_date=new Date(t.expected_delivery_date),console.log("Hamra Console log",t),"yes"===this.purchaseRequestForm.get("local_purchase").value){let a=[],l={Vendor:t.vendor||null,items:[]};if(t.items&&this.itemList)for(let p of t.items){let u={item:this.itemList.find(h=>h._id===p.item_id)||null,RequiredQuantity:p.qty,Rate:p.rate,SubTotalAmount:p.qty*p.rate,Total:0};u.item&&(delete u.item.category,delete u.item.created_at,delete u.item.gst,u.item.gstDetail&&(u.item.tax={amount:u.item.gstDetail.gst_percentage||0,name:u.item.gstDetail.gst_name||""},delete u.item.gstDetail),delete u.item.item_number,delete u.item.specification,delete u.item.sub_category,delete u.item.uom,delete u.item.updated_at,u.item.qty=parseFloat(u.RequiredQuantity),u.item.item_id=p.item_id,u.item.remark=p.remark,u.Total=p.qty*p.rate+p.qty*p.rate*(u.item.tax?u.item.tax.amount:0)/100,l.items.push(u))}a.push(l),t.vendorItems=a}console.log("Payload",t);const n=new FormData,r=t;if(n.append("title",r.title),n.append("handle_by",this.handleby),n.append("prType",r.prType),n.append("date",r.date),n.append("expected_delivery_date",r.expected_delivery_date),n.append("purchase_request_number",r.purchase_request_number),n.append("site",r.site),n.append("local_purchase",r.local_purchase),n.append("remarks",r.remarks),n.append("requestNo",r.requestNo),"no"===this.purchaseRequestForm.get("local_purchase").value?r.items.forEach((a,l)=>{try{if(!a)return void console.error(`Item at index ${l} is null or undefined`);if(n.append(`items[${l}][item_id]`,a.item_id&&a.item_id._id?a.item_id._id:""),n.append(`items[${l}][specification]`,a.specification||""),n.append(`items[${l}][qty]`,a.qty||""),n.append(`items[${l}][item_code]`,a.item_code),n.append(`items[${l}][category]`,a.category||""),n.append(`items[${l}][subCategory]`,a.subCategory||""),n.append(`items[${l}][hsnCode]`,a.HSNcode||""),n.append(`items[${l}][remark]`,a.remark||""),n.append(`items[${l}][uom]`,a.uom||""),0===a.brandSelections.length)return this.snack.notify("Select Atleast one Brand for every Item",2),void(this.brandNotSelected=!0);Array.isArray(a.brandSelections)?(a.brandName=a.brandSelections.map(p=>p),a.brandSelections.forEach((p,u)=>{p&&n.append(`items[${l}][brandName]`,p)})):console.warn(`brandSelections for item ${l} is not an array`),a.files&&Array.isArray(a.files)?a.files.forEach((p,u)=>{p&&p.name?(console.log(`Appending file for item ${l}:`,p.name),n.append(`items[${l}][attachment]`,p,p.name)):console.warn(`Invalid file object for item ${l}, file index ${u}`)}):console.log(`No files to process for item ${l}`)}catch(p){console.error(`Error processing item ${l}:`,p)}}):(n.append("vendor",r.vendor),n.append("vendorItems[0][Vendor]",""),n.append("vendorItems[0][items]",""),r.items.forEach((a,l)=>{try{if(!a)return void console.error(`Item at index ${l} is null or undefined`);n.append(`items[${l}][item_id]`,a.item_id._id),n.append(`items[${l}][specification]`,a.specification||""),n.append(`items[${l}][qty]`,a.qty),n.append(`items[${l}][category]`,a.category),n.append(`items[${l}][item_code]`,a.item_code),n.append(`items[${l}][hsnCode]`,a.HSNcode||""),n.append(`items[${l}][subCategory]`,a.subCategory),n.append(`items[${l}][remark]`,a.remark),n.append(`items[${l}][uom]`,a.uom||""),n.append(`items[${l}][brandName]`,a.brandName._id),n.append(`items[${l}][rate]`,a.rate),n.append(`items[${l}][gst]`,""),n.append(`items[${l}][freight]`,""),Array.isArray(a.brandSelections)?(a.brandName=a.brandSelections.map(p=>p),a.brandSelections.forEach((p,u)=>{p&&n.append(`items[${l}][brandName]`,p)})):console.warn(`brandSelections for item ${l} is not an array`),a.files&&Array.isArray(a.files)?a.files.forEach((p,u)=>{p&&p.name?(console.log(`Appending file for item ${l}:`,p.name),n.append(`items[${l}][attachment]`,p,p.name)):console.warn(`Invalid file object for item ${l}, file index ${u}`)}):console.log(`No files to process for item ${l}`)}catch(p){console.error(`Error processing item ${l}:`,p)}})),console.log("THERE",n),!0===this.brandNotSelected)return console.log(this.brandNotSelected),void(this.brandNotSelected=!1);this.httpService.POST(d.Fj,n).subscribe({next:a=>{this.load=!1,this.snack.notify("Purchase request has been created.",1),this.purchaseRequestForm.reset(),this.purchaseRequestForm.markAsUntouched(),this.option=2,this.getPurchaseList({filter_by:this.filter_by,filter_value:this.statusOption.value})},error:a=>{if(this.load=!1,console.log(a),a.errors&&Object.keys(a.errors).length>0){let l="<ul>";for(let p in a.errors)l+=`<li>${a.errors[p][0]}</li>`;l+="</ul>",this.snack.notifyHtml(a.message,2)}else console.log("there",a.message),this.snack.notify(a.errors||"An error occurred",2)}})}createRequest(){this.option=1,this.purchaseRequestForm.get("date").setValue(b().format("DD-MM-YYYY"))}getList(){const t=this.http.get(`${m.N.api_path}${d.PE}`),i=this.http.get(`${m.N.api_path}${d.o7}`),n=this.http.get(`${m.N.api_path}${d.S3}`),r=this.http.get(`${m.N.api_path}${d.ds}`),a=this.http.get(`${m.N.api_path}${d.Lk}`),l=this.http.get(`${m.N.api_path}${d.jz}`);this.httpService.multipleRequests([t,i,r,a,n,l],{}).subscribe(p=>{p&&(this.uomList=p[0].data,this.itemList=p[1].data,this.vendorList=p[2].data,this.brandList=p[3].data,console.log(this.brandList),this.superSiteList=p[4].data,this.categoryList=p[5].data,this.filteredItemList=this.itemList,this.filteredBrandLists.push(this.brandList),this.filteredUOMLists.push(this.uomList),"superadmin"===this.permissions.user.role&&(this.siteList=this.superSiteList,console.log(this.siteList)))})}addItem(){this.items=this.purchaseRequestForm.get("items"),"yes"===this.purchaseRequestForm.get("local_purchase").value?this.items.push(this.createLocalItem()):this.items.push(this.createItem()),this.filteredBrandLists.push(this.brandList),this.filteredUOMLists.push(this.uomList),console.log("checking List",this.filteredBrandLists)}createItem(){return this.formBuilder.group({item_id:new s.NI("",s.kI.required),HSNcode:new s.NI(""),item_code:new s.NI(""),qty:new s.NI("",[s.kI.required,s.kI.pattern(/^\d+(\.\d{1,2})?$/)]),category:new s.NI(null),subCategory:new s.NI(null),attachment:new s.NI([]),files:new s.NI([]),remark:new s.NI(""),uom:new s.NI("",s.kI.required),brandSelections:this.formBuilder.array([])})}createLocalItem(){return this.formBuilder.group({item_id:new s.NI("",s.kI.required),HSNcode:new s.NI(""),item_code:new s.NI(""),qty:new s.NI("",[s.kI.required,s.kI.pattern(/^\d+(\.\d{1,2})?$/)]),category:new s.NI(null),subCategory:new s.NI(null),attachment:new s.NI([]),remark:new s.NI(""),uom:new s.NI(""),files:new s.NI([]),rate:new s.NI("",[s.kI.required,s.kI.pattern(/^\d+(\.\d{1,2})?$/)]),gst:new s.NI(""),freight:new s.NI(""),brandSelections:this.formBuilder.array([])})}handleLocalPurchaseChange(){"yes"===this.purchaseRequestForm.get("local_purchase").value?this.purchaseRequestForm.get("local_purchase").setValue("no"):this.purchaseRequestForm.get("local_purchase").setValue("yes"),this.purchaseRequestForm.get("items").clear(),this.addItem()}onVendorSelection(t){const i=this.vendorList.find(n=>n._id===t.value);i?this.filteredItemList=this.itemList.filter(n=>{const r=i.category.some(l=>l===n.category),a=i.SubCategory.some(l=>l===n.sub_category);return r&&a}):(console.warn("No matching vendor found for the selected ID."),this.filteredItemList=[])}toggleBrandSelection(t,i){const n=this.purchaseRequestForm.get("items").controls[i].get("brandSelections"),r=n.controls.findIndex(a=>a.value===t);-1!==r?n.removeAt(r):n.push(new s.NI(t)),console.log("brandSelections",n)}toggleUOMSelection(t,i){console.log("here check this",t);const n=this.purchaseRequestForm.get("items").controls[i];n.get("uom").setValue(t),console.log("checking",n)}delete(t){this.purchaseRequestForm.get("items").removeAt(t)}onStatusChange(t){this.getPurchaseList({filter_by:this.filter_by,filter_value:t.value})}selectedTitle(t){this.categoryList.find(a=>a._id==t.value).name.replace(/[ ,]/g,"_"),this.filteredItemList=this.itemList.filter(a=>a.category===t.value),this.itemCategoryList=this.itemList.filter(a=>a.category===t.value),this.items=[];const r=this.purchaseRequestForm.get("items");for(;0!==r.length;)r.removeAt(0);this.filteredBrandLists=[],this.filteredUOMLists=[],this.addItem(),console.log("check for filtered",this.filteredItemList),console.log("titleSelected",this.purchaseRequestForm)}selectedSite(t){const i=this.siteList.find(l=>l._id==t.value);i.site_name.replace(/[ ,]/g,"_"),console.log("title",this.purchaseRequestForm);const a=this.http.get(`${m.N.api_path}${d.Fj}`);this.httpService.multipleRequests([a],{}).subscribe(l=>{if(l){this.purchaseList=l[0].data;const p=this.purchaseList.filter(u=>u.siteData.site_name.includes(i.site_name));console.log(p),this.requestNo=0===p.length?1:parseInt(p[0].purchase_request_number)+1,this.purchaseRequestForm.controls.purchase_request_number.setValue(this.requestNo)}})}getPurchaseList(t){this.httpService.GET(d.Fj,t).subscribe({next:i=>{if(console.log("checking Data",i.data),i.data.forEach(n=>{n.date=b(n.updated_at).format("DD-MM-YYYY")}),console.log("check Data once",i.data),"superadmin"===this.permissions.user.role)this.originalPurchaseList=i.data,this.purchaseList=i.data;else{const r=i.data.filter(a=>this.siteList.some(l=>l._id===a.site));this.originalPurchaseList=r,this.purchaseList=r}}})}dateFilter(t){this.originalPurchaseList&&this.originalPurchaseList.length>0&&(this.purchaseList=t.value?this.originalPurchaseList.filter(i=>new Date(i.date)==new Date(t.value)):this.originalPurchaseList)}onFilesSelected(t,i){const n=t.target.files;if(console.log("file",n),n.length>5)this.snack.notify("Can upload Maximum 5 Files",2);else if(n.length>0){const r=Array.from(n);this.items.at(i).patchValue({files:r}),console.log(this.items)}}removeFile(t,i){const n=this.items.at(t).get("files");console.log("here",n);const r=n.value.filter(a=>a.name!==i.name);console.log("there",r),this.items.at(t).patchValue({files:r}),console.log(this.items)}files(t){return this.items.at(t).get("files").controls.map(i=>i.value)}search(t,i){this.originalPurchaseList&&this.originalPurchaseList.length>0&&(this.purchaseList="site"==i?t.target.value?this.originalPurchaseList.filter(n=>n.siteData.site_name.toLowerCase().includes(t.target.value.toLowerCase())):this.originalPurchaseList:t.target.value?this.originalPurchaseList.filter(n=>n.title.toLowerCase().includes(t.target.value.toLowerCase())):this.originalPurchaseList)}displayItemFn(t){return t?t.item_name:""}displayBrandFn(t){return t?t.brand_name:""}selectedItem(t,i){const n=t.option.value,r=n._id;console.log(n);const a=this.purchaseRequestForm.get("items");console.log("itemsArray",a.value);const l=a.value.map((p,u)=>({index:u,id:p.item_id._id})).filter(p=>p.id===r).map(p=>p.index);if(console.log("Indices of duplicate items:",l),l.length>=2)return a.removeAt(l.pop()),this.snack.notify("Item already exists",2),void this.items.at(i).reset();if(1===l.length){let p=n.categoryDetail.name,u=n.subCategoryDetail.subcategory_name,h=n.item_code,Z=n.HSNcode||"",O=n.specification;this.items.length>1&&(this.itemSelected=!0),this.items.at(i).patchValue({category:p,subCategory:u,item_code:h||"",HSNcode:Z,specification:O});let U=this.getBrandsForItem(n),un=this.getUOMFormItem(n);this.filteredUOMLists[i]=un,this.filteredBrandLists[i]=U,console.log("check filteredList",U)}}getBrandsForItem(t){if(console.log("checking item for brand",t),t.brands){console.log("here check this");const i=t.brands;let n=this.brandList.filter(r=>i.includes(r._id));return console.log("check List",n),n}return this.brandList}getUOMFormItem(t){if(console.log("checking item for uom",t),t.uom){console.log("here check this",t.uom);const i=Array.isArray(t.uom)?t.uom:[t.uom];console.log("here check this",this.uomList);let n=this.uomList.filter(r=>i.includes(r._id));return console.log("check List",n),n}return this.uomList}searchItem(t){const i=t.target.value.toLowerCase();this.itemList&&this.itemList.length>0&&(this.filteredItemList=t.target.value?this.itemCategoryList.filter(n=>n.item_name.toLowerCase().includes(i)):this.itemCategoryList)}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.userService.getUserss().subscribe(t=>{t.find(n=>n._id===this.permissions.user._id)?(this.handleby=this.permissions.user.name,this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:a=>{this.viewPermission=a.dashboard_permissions[0].ParentChildchecklist[18].childList[0].isSelected,this.addPermission=a.dashboard_permissions[0].ParentChildchecklist[18].childList[1].isSelected,this.editPermission=a.dashboard_permissions[0].ParentChildchecklist[18].childList[2].isSelected},error:a=>{console.log(a)}}),this.siteList=this.permissions.user.sites,console.log("SiteSelect",this.siteList),this.getList(),this.addItem(),this.getPurchaseList({filter_by:this.filter_by,filter_value:this.statusOption.value})):(this.snack.notify("Invalid Credentials - User Details not Valid",1),this.auth.removeUser(),this.userService.updateLogin("logout"),this.router.navigate(["/login"]))})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.F0),e.Y36(T.s),e.Y36(y.o),e.Y36(s.qu),e.Y36(P.eN),e.Y36(g.gz),e.Y36(L.e),e.Y36(M.f))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-purchase-request"]],decls:46,vars:12,consts:[[1,"main-container"],[2,"height","100px","background-color","#fff"],[2,"margin-top","40px","margin-left","20px"],["src","./assets/images/preq.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1e293b","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #c5c5c5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/prl.svg"],[2,"color","#233a61","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],[2,"color","#97989d","margin-left","5px","font-size","14px"],["src","./assets/images/rc.svg"],[2,"width","100px","margin-left","10px","margin-top","10px","border","1px dashed"],["src","./assets/images/po.svg"],[4,"ngIf","ngIfElse"],["noView",""],[1,"requests"],[3,"ngClass","click"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","20px","width","100%","justify-content","space-between"],[2,"flex","1 1 calc(25% - 20px)","display","flex","flex-direction","column"],[2,"color","#4272bf","font-size","14px"],[1,"star"],["id","prType","placeholder","Select Type","formControlName","prType",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9f9f9f","cursor","pointer","margin-top","10px","font-family","Poppins"],[3,"value",4,"ngFor","ngForOf"],["id","title","placeholder","Select title","formControlName","title",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9f9f9f","cursor","pointer","margin-top","10px","font-family","Poppins",3,"disabled","selectionChange"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Enter Required by date",3,"readonly"],["matSuffix",""],["for","",1,"custom-label",2,"color","#4272bf","font-size","14px"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by date",2,"width","100%",3,"matDatepicker","min","click"],["matSuffix","",3,"for"],["requiredByStartDate",""],["id","site","placeholder","Select site","formControlName","site",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9f9f9f","cursor","pointer","margin-top","10px","font-family","Poppins",3,"selectionChange"],[2,"color","#4272bf"],["type","checkbox","name","local_purchase_checkbox",2,"transform","scale(1.5)","margin-top","30px",3,"change"],["placeholder","Select Site Name First","formControlName","purchase_request_number","readonly","",1,"reqNO",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9f9f9f","cursor","pointer","margin-top","10px","font-family","Poppins",3,"value"],["style","flex: 1 1 calc(25% - 20px); display: flex; flex-direction: column",4,"ngIf"],["noLocalPurchase",""],[3,"value"],["id","site","placeholder","Select Vendor","formControlName","vendor",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9f9f9f","cursor","pointer","margin-top","10px","font-family","Poppins",3,"selectionChange"],[1,"scroll-bar1"],[1,"items-table",2,"direction","ltr !important","border-left","2px solid #000 !important"],["style","background-color: #f4f4f5","formArrayName","items",4,"ngFor","ngForOf"],[2,"display","flex","flex-direction","row","gap","40px","margin-left","38px","margin-bottom","100px","margin-top","100px","top","-50px","position","relative"],[2,"padding","8px","width","120px","background-color","#fff","cursor","pointer","border","0.5px solid #94a3b8","border-radius","5px","font-size","14px","font-family","Poppins",3,"click"],[2,"display","flex","justify-content","center","margin-top","-126px","margin-bottom","20px"],["style","\n                padding: 8px;\n                width: 120px;\n                background-color: #233a61;\n                color: #fff;\n                border-radius: 5px;\n                border-color: lightgrey;\n                font-size: 14px;\n                font-family: 'Poppins';\n              ",4,"ngIf"],["style","color: red",4,"ngIf"],["formArrayName","items",2,"background-color","#f4f4f5"],[2,"text-align","center"],[3,"formGroupName"],[1,"example-full-width"],["type","text","placeholder","Select Item","aria-label","Item","matInput","","formControlName","item_id",3,"matAutocomplete","input"],[3,"panelWidth","displayWith","optionSelected"],["auto","matAutocomplete"],[2,"color","#000"],["placeholder","Select UOM",1,"pr-form-field"],[3,"value","click",4,"ngFor","ngForOf"],["type","text","formControlName","qty","placeholder","Enter","pattern","^\\d+(\\.\\d{1,2})?$",1,"pr-form-field"],["multiple","","placeholder","Select Brand",1,"pr-form-field"],["type","text","formControlName","rate","placeholder","Enter","pattern","^\\d+(\\.\\d{1,2})?$",1,"pr-form-field"],["placeholder","Enter","formControlName","remark",1,"pr-form-field"],["type","file","multiple","",3,"change"],[1,"action-btn-wrapper"],["class","action-btn","title","Delete",3,"click",4,"ngIf"],[3,"value","click"],["style","\n                              margin: 10px;\n                              display: flex;\n                              flex-direction: row;\n                            ",4,"ngFor","ngForOf"],[2,"margin","10px","display","flex","flex-direction","row"],[2,"border","none","color","red","font-weight","bold",3,"click"],["title","Delete",1,"action-btn",3,"click"],[1,"fa","fa-trash"],[2,"padding","8px","width","120px","background-color","#233a61","color","#fff","border-radius","5px","border-color","lightgrey","font-size","14px","font-family","Poppins"],[2,"color","red"],[2,"border","none","color","red","font-weight","bold","margin-left","5px",3,"click"],[2,"display","flex","flex-direction","row","gap","10px","margin","0 27px"],[2,"margin-top","15px","color","#94a3b8"],["appearance","outline",1,"searchbar"],["matInput","","type","search","placeholder","search title",1,"search-input",3,"input"],["appearance","outline",1,"datebar"],["matInput","","placeholder","Date",3,"matDatepicker","dateChange","click"],["startPicker",""],["matInput","","placeholder","Site",3,"input"],[1,"custom-form-group"],[1,"custom-form-control",2,"position","relative"],[3,"formControl","selectionChange"],[1,"scroll-bar1",2,"width","96%"],[1,"r-list",2,"direction","ltr !important","margin-top","-20px"],[4,"ngFor","ngForOf"],["class","no-record-found",4,"ngIf"],[2,"color","#4272bf","width","200px","text-align","left","padding","18px"],[2,"color","#4272bf","width","500px"],[2,"color","#4272bf","width","400px"],[2,"color","#4272bf","width","700px","text-align","left","padding","18px"],["style","width: 20%; text-align: right",4,"ngIf"],[2,"width","100px"],[2,"width","20%","text-align","right"],[1,"viewdetail-btn",3,"routerLink"],[1,"viewdetail-btn",2,"background-color","#54aa52","color","#fff",3,"routerLink"],[1,"viewdetail-btn",2,"background-color","#c7323b","color","#fff",3,"routerLink"],["class","viewdetail-btn","style","background-color: #ecd172; color: #fff",3,"routerLink",4,"ngIf","ngIfElse"],["disabledState",""],[1,"viewdetail-btn",2,"background-color","#ecd172","color","#fff",3,"routerLink"],[1,"viewdetail-btn",2,"background-color","#ecd172","color","#fff"],[1,"no-record-found"],["src","./assets/images/inbox_empty.png","alt",""],[2,"display","flex","justify-content","center","margin-top","2%","font-size","160%","font-weight","bolder","color","grey"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"mat-toolbar",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"span",4),e._uU(5,"Purchase Request "),e.qZA(),e._UZ(6,"span",5),e.qZA(),e.TgZ(7,"div"),e._UZ(8,"hr",6),e.qZA(),e.TgZ(9,"div",7)(10,"div",8)(11,"div"),e._UZ(12,"img",9),e.qZA(),e.TgZ(13,"span",10),e._uU(14,"Purchase\xa0request"),e.qZA(),e.TgZ(15,"div"),e._UZ(16,"mat-divider",11),e.qZA()(),e.TgZ(17,"div",12)(18,"div"),e._UZ(19,"img",13),e.qZA(),e.TgZ(20,"span",14),e._uU(21,"Approvals"),e.qZA(),e.TgZ(22,"div"),e._UZ(23,"mat-divider",11),e.qZA()(),e.TgZ(24,"div",12)(25,"div"),e._UZ(26,"img",15),e.qZA(),e.TgZ(27,"span",14),e._uU(28,"Rate\xa0Comparative"),e.qZA(),e.TgZ(29,"div"),e._UZ(30,"mat-divider",11),e.qZA()(),e.TgZ(31,"div",12)(32,"div"),e._UZ(33,"img",13),e.qZA(),e.TgZ(34,"span",14),e._uU(35,"Rate\xa0Approvals"),e.qZA(),e.TgZ(36,"div"),e._UZ(37,"mat-divider",16),e.qZA()(),e.TgZ(38,"div",12)(39,"div"),e._UZ(40,"img",17),e.qZA(),e.TgZ(41,"span",14),e._uU(42,"Purchase\xa0orders"),e.qZA()()(),e.YNc(43,Pe,8,8,"ng-container",18),e.YNc(44,ke,2,0,"ng-template",null,19,e.W1O),e.qZA()),2&t){const n=e.MAs(45);e.xp6(10),e.Q6J("routerLink",e.DdM(7,Ne)),e.xp6(7),e.Q6J("routerLink",e.DdM(8,Ie)),e.xp6(7),e.Q6J("routerLink",e.DdM(9,Re)),e.xp6(7),e.Q6J("routerLink",e.DdM(10,Le)),e.xp6(7),e.Q6J("routerLink",e.DdM(11,Me)),e.xp6(5),e.Q6J("ngIf",i.viewPermission)("ngIfElse",n)}},dependencies:[k.XC,k.ZL,N.ey,q.KE,q.R9,I.a8,x.Mq,x.hl,x.nW,A.d,Q.Hw,C.Nt,R.gD,w.Ye,f.mk,f.sg,f.O5,s._Y,s.Fj,s.JJ,s.JL,s.c5,s.oH,s.sg,s.u,s.x0,s.CE,g.rH,g.yS,g.Od],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.requests[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:40px;width:250px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;flex:1}.requests[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.2)}.requests[_ngcontent-%COMP%]   div.active[_ngcontent-%COMP%]{background-color:#233a61!important;color:#fff}.topcard[_ngcontent-%COMP%]{width:1140px;height:auto;margin-left:30px;margin-top:30px;box-shadow:0 2px 12px #00000040;font-family:Poppins}table.items-table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;font-size:14px;margin:8px 20px 20px 10px}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;width:1000px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}.items-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}.scroll-bar1[_ngcontent-%COMP%]{height:auto;width:calc(100% - 25px);margin-left:25px;margin-bottom:10px;margin-top:50px;overflow:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background:none}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.r-list[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0 25px}.r-list[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#e5e6eb!important}.viewdetail-btn[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;cursor:pointer;text-align:center;padding:18px 25px}.no-record-found[_ngcontent-%COMP%]{text-align:center;display:flex;gap:10px;flex-direction:column;align-items:center;justify-content:center}.no-record-found[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:188px}.mat-radio-button[_ngcontent-%COMP%]   .mat-radio-label[_ngcontent-%COMP%]{margin-right:5px!important}.flex-div[_ngcontent-%COMP%]{width:31%}.main-container[_ngcontent-%COMP%]{margin:10px 20px 0 15px}']}),o})();var $=_(4327),v=_(1948);function Se(o,c){if(1&o&&(e.TgZ(0,"mat-option",52),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.site_name," ")}}function Oe(o,c){if(1&o&&(e.TgZ(0,"div",53)(1,"label",24),e._uU(2,"Vendor "),e.qZA(),e._UZ(3,"input",54),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("readonly",!0)("value",t.selectedVendor)}}function Je(o,c){if(1&o&&(e.TgZ(0,"div")(1,"a",62)(2,"p",63),e._uU(3),e.qZA()()()),2&o){const t=c.$implicit,i=c.index;e.xp6(1),e.Q6J("href",t,e.LSH),e.xp6(2),e.hij(" Attachment ",i+1," ")}}function Qe(o,c){if(1&o&&(e.TgZ(0,"tr",58)(1,"td",59),e._uU(2),e.qZA(),e.ynx(3),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td",60),e._uU(13),e.qZA(),e.TgZ(14,"td",60),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td",60),e._uU(19),e.qZA(),e.TgZ(20,"td",60),e._uU(21),e.qZA(),e.TgZ(22,"td",60),e._uU(23),e.qZA(),e.TgZ(24,"td",60),e._uU(25),e.qZA(),e.TgZ(26,"td"),e.YNc(27,Je,4,2,"div",61),e.qZA(),e.BQk(),e.qZA()),2&o){const t=c.$implicit,i=c.index,n=e.oxw(2);e.xp6(2),e.hij(" ",i+1," "),e.xp6(3),e.hij(" ",n.getItemName(t.item_id)," "),e.xp6(2),e.Oqu(t.item_code),e.xp6(2),e.Oqu(t.specification),e.xp6(2),e.hij(" ",t.hsnCode," "),e.xp6(2),e.hij(" ",t.categoryDetail.name," "),e.xp6(2),e.hij(" ",t.subCategoryDetail.subcategory_name," "),e.xp6(2),e.hij(" ",t.uomDetail.uom_name," "),e.xp6(2),e.hij(" ",t.qty," "),e.xp6(2),e.hij(" ",n.myBrandName(t.brandName)," "),e.xp6(2),e.hij(" ",t.rate," "),e.xp6(2),e.hij(" ",t.remark," "),e.xp6(2),e.Q6J("ngForOf",t.attachment)}}function De(o,c){if(1&o&&(e.TgZ(0,"div")(1,"div",55)(2,"table",56)(3,"tr")(4,"th"),e._uU(5,"S\xa0No"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Item*"),e.qZA(),e.TgZ(8,"th"),e._uU(9," Item Code"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Specification"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"HSN Code"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Category"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Sub\xa0category"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Uom*"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Quantity*"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Make List"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Rate"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Remarks"),e.qZA(),e.TgZ(28,"th"),e._uU(29," Attachments/th> "),e.qZA()(),e.TgZ(30,"tbody"),e.YNc(31,Qe,28,13,"tr",57),e.qZA()()()()),2&o){const t=e.oxw();e.xp6(31),e.Q6J("ngForOf",null==t.details?null:t.details.items)}}function $e(o,c){if(1&o&&(e.TgZ(0,"div")(1,"a",62)(2,"p",63),e._uU(3),e.qZA()()()),2&o){const t=c.$implicit,i=c.index;e.xp6(1),e.Q6J("href",t,e.LSH),e.xp6(2),e.hij(" Attachment ",i+1," ")}}function Ye(o,c){if(1&o&&(e.TgZ(0,"tr",58)(1,"td",59),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",60),e._uU(12),e.qZA(),e.TgZ(13,"td",60),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e.YNc(24,$e,4,2,"div",61),e.qZA()()),2&o){const t=c.$implicit,i=c.index,n=e.oxw(2);e.xp6(2),e.hij(" ",i+1," "),e.xp6(2),e.hij(" ",n.getItemName(t.item_id)," "),e.xp6(2),e.Oqu(t.item_code),e.xp6(2),e.hij(" ",t.specification," "),e.xp6(2),e.hij(" ",t.hsnCode," "),e.xp6(2),e.hij(" ",t.categoryDetail.name," "),e.xp6(2),e.hij(" ",t.subCategoryDetail.subcategory_name," "),e.xp6(2),e.hij(" ",t.uomDetail.uom_name," "),e.xp6(2),e.hij(" ",t.qty," "),e.xp6(2),e.hij(" ",n.getFormattedBrandNames(t.brandName)," "),e.xp6(2),e.hij(" ",t.remark," "),e.xp6(2),e.Q6J("ngForOf",t.attachment)}}function je(o,c){if(1&o&&(e.TgZ(0,"div",55)(1,"table",64)(2,"tr")(3,"th"),e._uU(4,"S\xa0No"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Item*"),e.qZA(),e.TgZ(7,"th"),e._uU(8," Item Code"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Specification"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"HSN Code"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Category"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Sub\xa0category"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Uom*"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Quantity*"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Make List"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Remarks"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Attachments"),e.qZA()(),e.TgZ(27,"tbody"),e.YNc(28,Ye,25,12,"tr",57),e.qZA()()()),2&o){const t=e.oxw();e.xp6(28),e.Q6J("ngForOf",null==t.details?null:t.details.items)}}function Ee(o,c){1&o&&(e.TgZ(0,"button",65),e._uU(1,"Pending"),e.qZA())}function Be(o,c){1&o&&(e.TgZ(0,"button",66),e._uU(1," Approved "),e.qZA())}function He(o,c){1&o&&(e.TgZ(0,"button",67),e._uU(1," Rejected "),e.qZA())}const ze=function(){return["/procurement"]},Ge=function(){return["/procurement/prlist"]},Ve=function(){return["/rate-comparative"]},Ke=function(){return["/rate-approval"]},We=function(){return["/purchase-order"]};let Xe=(()=>{class o{constructor(t,i,n,r,a,l){this.router=t,this.httpService=i,this.snack=n,this.formBuilder=r,this.route=a,this.http=l,this.downloadLoading=!1,this.load=!1,this.purchaseRequestForm=new s.cw({title:new s.NI("",s.kI.required),prType:new s.NI("",s.kI.required),date:new s.NI("",s.kI.required),expected_delivery_date:new s.NI("",s.kI.required),purchase_request_number:new s.NI(""),site:new s.NI({value:"",disabled:!0},s.kI.required),local_purchase:new s.NI({value:"",disabled:!0},s.kI.required),remarks:new s.NI("",[]),items:this.formBuilder.array([]),_id:new s.NI}),this.details={},this.getList(),this.route.params.subscribe(p=>{this.pageId=p.id})}getList(){const t=this.http.get(`${m.N.api_path}${d.PE}`),i=this.http.get(`${m.N.api_path}${d.o7}`),n=this.http.get(`${m.N.api_path}${d.S3}`),r=this.http.get(`${m.N.api_path}${d.Lk}`);this.httpService.multipleRequests([t,i,n,r],{}).subscribe(a=>{a&&(this.uomList=a[0].data,this.itemList=a[1].data,this.siteList=a[2].data,this.brandList=a[3].data,this.siteName=this.siteList.filter(l=>{if(l._id===this.details.site)return l}),console.log(this.siteName))})}patchData(t){console.log("lets see data",t),this.purchaseRequestForm.patchValue({title:t.title,prType:t.prType||"Site Establishment",date:t.date,expected_delivery_date:t.expected_delivery_date,purchase_request_number:t.purchase_request_number,site:t.site,local_purchase:t.local_purchase,remarks:t.remarks}),this.purchaseRequestForm.controls.remarks.disable()}createItemArrayForm(){return new s.cw({item_id:new s.NI("",s.kI.required),qty:new s.NI("",s.kI.required),item_code:new s.NI(""),category:new s.NI(""),subCategory:new s.NI(""),attachment:new s.NI(""),remark:new s.NI("",s.kI.required),uom:new s.NI("",s.kI.required),brandName:new s.NI("")})}addItems(t){this.items=this.purchaseRequestForm.get("items"),t&&this.items.push(this.createItem(t))}createItem(t){if(t)return new s.cw({item_id:new s.NI(t.item_id,s.kI.required),qty:new s.NI(t.qty,s.kI.required),item_code:new s.NI(t?.item_code||""),category:new s.NI(t.categoryDetail.name),subCategory:new s.NI(t.subCategoryDetail.subcategory_name),attachment:new s.NI(t.attachment),remark:new s.NI(t.remark,s.kI.required),uom:new s.NI(t.uomDetail._id,s.kI.required),brandName:new s.NI(t.brandName)})}myBrandName(t){if(this.brandList){let i=this.brandList.filter(n=>n._id==t);return console.log(i),i[0].brand_name}}isArray(t){return Array.isArray(t)}getFormattedBrandNames(t){return console.log("see BrandName",t),this.isArray(t)?t.map(i=>""===i.trim()?"others":this.myBrandName(i)).join(" / "):""===t.trim()?"others":this.myBrandName(t)}getSiteList(){this.httpService.GET(d.S3,{}).subscribe(t=>{this.siteList=t})}getItemName(t){if(this.itemList&&this.itemList.length>0)return this.itemList.filter(i=>i._id==t)[0].item_name}updateRequest(t){this.httpService.PUT(d.Fj,{_id:this.details._id,status:t,remarks:this.purchaseRequestForm.value.remarks}).subscribe(i=>{this.router.navigate(["/procurement/prlist"])})}getVendorName(){if(this.details.vendor){const t=this.http.get(`${m.N.api_path}${d.Iy}?_id=${this.details.vendor}`);this.httpService.multipleRequests(t,{}).subscribe(i=>{i&&(console.log(i[0]),this.selectedVendor=i[0].data[0].vendor_name)})}}downloadPRPDF(){this.downloadLoading=!0,this.httpService.GETPDF("generate/prpdf",{template:"pr",id:this.pageId}).subscribe(t=>{this.downloadLoading=!1;var i=new Blob([t],{type:"application/pdf"});(new Date).getTime(),(0,$.saveAs)(i,`pr-${this.siteName[0].code}_${this.details.purchase_request_number}_${this.details.title}.pdf`)})}ngOnInit(){this.route.params.subscribe(t=>{t.id&&this.httpService.GET(`${d.Fj}/detail`,{_id:t.id}).subscribe({next:i=>{this.details=i.data[0],console.log(this.details),this.getVendorName(),console.log("check data",i.data[0]),this.patchData(i.data[0])},error:i=>{this.router.navigate(["/procurement/prlist"])}})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.F0),e.Y36(T.s),e.Y36(y.o),e.Y36(s.qu),e.Y36(g.gz),e.Y36(P.eN))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-purchase-request-details"]],decls:109,vars:28,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-left","20px"],["src","./assets/images/preq.svg",2,"width","30px"],[2,"font-family","Poppins","font-style","normal","font-weight","600","font-size","22px","color","#1e293b","margin-left","10px"],[1,"example-spacer"],[2,"width","100%","border","2px solid #c5c5c5"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/prl.svg"],[2,"color","#233a61","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],[2,"color","#97989d","margin-left","5px","font-size","14px"],["src","./assets/images/rc.svg"],[2,"width","100px","margin-left","10px","margin-top","10px","border","1px dashed"],["src","./assets/images/po.svg"],[3,"formGroup"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","10px","max-width","100%"],[1,"flex-div",2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],[1,"star"],["placeholder","Enter Type","formControlName","prType",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","3px","font-family","Poppins","height","50px",3,"readonly"],[2,"color","#4272bf","font-size","14px"],["placeholder","Enter title","formControlName","title",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","3px","font-family","Poppins","height","50px",3,"readonly"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Auto generate Request Date",3,"matDatepicker","readonly"],["matSuffix","",3,"for"],["date",""],[1,"flex-div","custom-form-group"],["for","",1,"custom-label",2,"color","#4272bf","font-size","14px"],[1,"custom-form-control"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by",3,"matDatepicker","readonly"],["requiredByStartDate",""],["placeholder","Auto generate","formControlName","purchase_request_number","readonly","",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","10px","font-family","Poppins"],["id","site","placeholder","Select site","formControlName","site",2,"padding","10px","width","100","border","1px solid #ccc","border-radius","6px","cursor","pointer","margin-top","10px","font-family","Poppins"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-div",2,"display","flex","flex-direction","column","align-items","center"],[2,"color","#4272bf","margin-bottom","10px"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group"],[1,"example-radio-button",3,"value"],["style","display: flex; flex-direction: column",4,"ngIf"],[4,"ngIf","ngIfElse"],["noLocalPurchase",""],[1,"text-area-section"],["name","","id","","cols","30","rows","5","formControlName","remarks"],[1,"button-list"],[2,"padding","8px","width","120px","background-color","#f7f3f3","color","#233a61","border","1px solid #94a3b8","border-radius","5px","font-size","14px","font-family","Poppins",3,"click"],["class","pending",4,"ngIf"],["style","\n        padding: 8px;\n        width: 120px;\n        background-color: #35b568;\n        color: #fff;\n        border-radius: 5px;\n        border-color: lightgrey;\n        font-size: 14px;\n        font-family: 'Poppins';\n      ",4,"ngIf"],["style","\n        padding: 8px;\n        width: 120px;\n        background-color: #c7323b;\n        color: #233a61;\n        border: 1px solid #94a3b8;\n        border-radius: 5px;\n        font-size: 14px;\n        font-family: 'Poppins';\n      ",4,"ngIf"],[3,"value"],[2,"display","flex","flex-direction","column"],["placeholder","Enter Vendor",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9f9f9f","cursor","pointer","margin-top","10px","font-family","Poppins",3,"readonly","value"],[1,"scroll-bar1"],[2,"direction","ltr !important","border-left","2px solid #000 !important"],["style","background-color: #f4f4f5",4,"ngFor","ngForOf"],[2,"background-color","#f4f4f5"],[2,"text-align","center"],[2,"color","#000"],[4,"ngFor","ngForOf"],[3,"href"],[2,"color","blue","text-decoration","underline","font-size","12px","margin-top","-10px"],[2,"direction","ltr !important","border-left","2px solid #000 !important","width","100%"],[1,"pending"],[2,"padding","8px","width","120px","background-color","#35b568","color","#fff","border-radius","5px","border-color","lightgrey","font-size","14px","font-family","Poppins"],[2,"padding","8px","width","120px","background-color","#c7323b","color","#233a61","border","1px solid #94a3b8","border-radius","5px","font-size","14px","font-family","Poppins"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-toolbar",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"span",3),e._uU(4,"Summary "),e.qZA(),e._UZ(5,"span",4),e.qZA(),e.TgZ(6,"div"),e._UZ(7,"hr",5),e.qZA(),e.TgZ(8,"div",6)(9,"div",7)(10,"div"),e._UZ(11,"img",8),e.qZA(),e.TgZ(12,"span",9),e._uU(13,"Purchase\xa0request"),e.qZA(),e.TgZ(14,"div"),e._UZ(15,"mat-divider",10),e.qZA()(),e.TgZ(16,"div",11)(17,"div"),e._UZ(18,"img",12),e.qZA(),e.TgZ(19,"span",13),e._uU(20,"Approvals"),e.qZA(),e.TgZ(21,"div"),e._UZ(22,"mat-divider",10),e.qZA()(),e.TgZ(23,"div",11)(24,"div"),e._UZ(25,"img",14),e.qZA(),e.TgZ(26,"span",13),e._uU(27,"Rate\xa0Comparative"),e.qZA(),e.TgZ(28,"div"),e._UZ(29,"mat-divider",10),e.qZA()(),e.TgZ(30,"div",11)(31,"div"),e._UZ(32,"img",12),e.qZA(),e.TgZ(33,"span",13),e._uU(34,"Rate\xa0Approvals"),e.qZA(),e.TgZ(35,"div"),e._UZ(36,"mat-divider",15),e.qZA()(),e.TgZ(37,"div",11)(38,"div"),e._UZ(39,"img",16),e.qZA(),e.TgZ(40,"span",13),e._uU(41,"Purchase\xa0orders"),e.qZA()()(),e.TgZ(42,"form",17)(43,"mat-card",18)(44,"div",19)(45,"div",20)(46,"label",21),e._uU(47,"Request Type "),e.TgZ(48,"span",22),e._uU(49,"*"),e.qZA()(),e._UZ(50,"input",23),e.qZA(),e.TgZ(51,"div",20)(52,"label",24),e._uU(53,"Request title "),e.qZA(),e._UZ(54,"input",25),e.qZA(),e.TgZ(55,"div",20)(56,"label",24),e._uU(57,"Request date"),e.qZA(),e.TgZ(58,"mat-form-field",26),e._UZ(59,"input",27)(60,"mat-datepicker-toggle",28)(61,"mat-datepicker",null,29),e.qZA()(),e.TgZ(63,"div",30)(64,"label",31),e._uU(65," Required by "),e.TgZ(66,"span",22),e._uU(67,"*"),e.qZA()(),e.TgZ(68,"div",32)(69,"mat-form-field",26),e._UZ(70,"input",33)(71,"mat-datepicker-toggle",28)(72,"mat-datepicker",null,34),e.qZA()()(),e.TgZ(74,"div",20)(75,"label",24),e._uU(76,"Purchase request no "),e.qZA(),e._UZ(77,"input",35),e.qZA(),e.TgZ(78,"div",20)(79,"label",24),e._uU(80,"Site name "),e.TgZ(81,"span",22),e._uU(82,"*"),e.qZA()(),e.TgZ(83,"mat-select",36),e.YNc(84,Se,2,2,"mat-option",37),e.qZA()(),e.TgZ(85,"div",38)(86,"label",39),e._uU(87,"Local Purchase "),e.TgZ(88,"span",22),e._uU(89,"*"),e.qZA()(),e.TgZ(90,"mat-radio-group",40)(91,"mat-radio-button",41),e._uU(92," Yes "),e.qZA(),e.TgZ(93,"mat-radio-button",41),e._uU(94," No "),e.qZA()()(),e.YNc(95,Oe,4,2,"div",42),e.qZA()(),e.YNc(96,De,32,1,"div",43),e.YNc(97,je,29,1,"ng-template",null,44,e.W1O),e.TgZ(99,"div",45)(100,"label",24),e._uU(101,"Remarks "),e.qZA(),e._UZ(102,"textarea",46),e.qZA(),e.TgZ(103,"div",47)(104,"button",48),e.NdJ("click",function(){return i.downloadPRPDF()}),e._uU(105," Download PR "),e.qZA(),e.YNc(106,Ee,2,0,"button",49),e.YNc(107,Be,2,0,"button",50),e.YNc(108,He,2,0,"button",51),e.qZA()()),2&t){const n=e.MAs(62),r=e.MAs(73),a=e.MAs(98);e.xp6(9),e.Q6J("routerLink",e.DdM(23,ze)),e.xp6(7),e.Q6J("routerLink",e.DdM(24,Ge)),e.xp6(7),e.Q6J("routerLink",e.DdM(25,Ve)),e.xp6(7),e.Q6J("routerLink",e.DdM(26,Ke)),e.xp6(7),e.Q6J("routerLink",e.DdM(27,We)),e.xp6(5),e.Q6J("formGroup",i.purchaseRequestForm),e.xp6(8),e.Q6J("readonly",!0),e.xp6(4),e.Q6J("readonly",!0),e.xp6(5),e.Q6J("matDatepicker",n)("readonly",!0),e.xp6(1),e.Q6J("for",n),e.xp6(10),e.Q6J("matDatepicker",r)("readonly",!0),e.xp6(1),e.Q6J("for",r),e.xp6(13),e.Q6J("ngForOf",i.siteList),e.xp6(7),e.Q6J("value","yes"),e.xp6(2),e.Q6J("value","no"),e.xp6(2),e.Q6J("ngIf","yes"==(null==i.details?null:i.details.local_purchase)),e.xp6(1),e.Q6J("ngIf","yes"==(null==i.details?null:i.details.local_purchase))("ngIfElse",a),e.xp6(10),e.Q6J("ngIf","pending"==i.details.status),e.xp6(1),e.Q6J("ngIf","approved"==i.details.status),e.xp6(1),e.Q6J("ngIf","rejected"==i.details.status)}},dependencies:[N.ey,q.KE,q.R9,I.a8,x.Mq,x.hl,x.nW,A.d,C.Nt,v.VQ,v.U0,R.gD,w.Ye,f.sg,f.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,g.rH,g.Od],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:100%;height:auto;font-family:Poppins;box-shadow:none;border:1px solid #ccc;border-radius:4px}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;font-size:14px;margin-bottom:20px;margin-right:20px;margin-top:8px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}form[_ngcontent-%COMP%]{padding:10px 20px}.scroll-bar1[_ngcontent-%COMP%]{height:auto;width:calc(100% - 25px);margin-left:25px;margin-bottom:10px;margin-top:50px;overflow:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background-color:"Transparent"}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 0 20px;float:right;gap:10px}.text-area-section[_ngcontent-%COMP%]{width:100%;height:auto;margin:30px 0 0}.text-area-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:100%}.flex-div[_ngcontent-%COMP%]{width:31%}.mat-form-field[_ngcontent-%COMP%]{display:block}.pending[_ngcontent-%COMP%]{padding:8px;width:120px;background-color:#ccc;color:#333;font-size:14px;font-family:Poppins;height:50px;border:none}.main-container[_ngcontent-%COMP%]{margin:10px 20px 0 15px}']}),o})();var et=_(8898),S=_(7489);function tt(o,c){if(1&o&&(e.TgZ(0,"td",48),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.Udp("color",i.getRemainingDays(t.expected_delivery_date)>=0?"green":"red"),e.xp6(1),e.hij(" \xa0 ",i.getRemainingDays(t.expected_delivery_date)>=0?i.getRemainingDays(t.expected_delivery_date)+" days left":"Delayed by "+-1*i.getRemainingDays(t.expected_delivery_date)+" days"," ")}}function nt(o,c){1&o&&e._UZ(0,"td",49)}const it=function(o){return{"background-color":o}},ot=function(o){return["/procurement/update",o]};function rt(o,c){if(1&o&&(e.TgZ(0,"tr")(1,"td",39),e._uU(2),e.qZA(),e._UZ(3,"hr",40),e.TgZ(4,"td",41),e._uU(5),e.qZA(),e._UZ(6,"hr",40),e.TgZ(7,"td",42),e._uU(8),e.qZA(),e._UZ(9,"hr",40),e.TgZ(10,"td",43),e._uU(11),e.qZA(),e._UZ(12,"hr",40),e.YNc(13,tt,2,3,"td",44),e.YNc(14,nt,1,0,"td",45),e.TgZ(15,"td",46),e._uU(16," View\xa0details "),e.qZA(),e.TgZ(17,"td",47)(18,"mat-icon"),e._uU(19," arrow_forward_ios "),e.qZA()()()),2&o){const t=c.$implicit,i=e.oxw(2);e.xp6(2),e.hij("Request\xa0no :\xa0 ",t.purchase_request_number,""),e.xp6(3),e.hij("Requested on : \xa0 ",t.formattedDate,""),e.xp6(3),e.hij("Title : \xa0 ",t.title,""),e.xp6(3),e.hij("Site :\xa0 ",t.siteData.site_name," "),e.xp6(2),e.Q6J("ngIf",void 0!==i.getRemainingDays(t.expected_delivery_date)&&i.getRemainingDays(t.expected_delivery_date)<=2),e.xp6(1),e.Q6J("ngIf",void 0===i.getRemainingDays(t.expected_delivery_date)||i.getRemainingDays(t.expected_delivery_date)>2),e.xp6(1),e.Q6J("ngStyle",e.VKq(8,it,"new"==i.requestType?"#233A61":"#1abcfe"))("routerLink",e.VKq(10,ot,t._id))}}function at(o,c){1&o&&(e.TgZ(0,"div",50),e._UZ(1,"img",51),e.TgZ(2,"span"),e._uU(3," No record found"),e.qZA()())}function st(o,c){if(1&o&&(e.ynx(0),e.TgZ(1,"div",35)(2,"table",36)(3,"tbody"),e.YNc(4,rt,20,12,"tr",37),e.qZA()(),e.YNc(5,at,4,0,"div",38),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.purchaseList),e.xp6(1),e.Q6J("ngIf",!(t.purchaseList&&t.purchaseList.length>0))}}function lt(o,c){1&o&&(e.TgZ(0,"h3",52),e._uU(1,"You don't have permissions to view."),e.qZA())}const ct=function(){return["/procurement"]},pt=function(){return["/procurement/prlist"]},ut=function(){return["/rate-comparative"]},dt=function(){return["/rate-approval"]},_t=function(){return["/purchase-order"]},Y=function(o){return[o]};let mt=(()=>{class o{constructor(t,i,n,r,a,l){this.router=t,this.httpService=i,this.snack=n,this.datePipe=r,this.auth=a,this.userService=l,this.filter_by="status",this.filter_value="pending",this.requestType="new",this.originalPurchaseList=[],this.getList({filter_by:this.filter_by,filter_value:this.filter_value})}getList(t){this.httpService.GET(d.Fj,t).subscribe({next:i=>{console.log("check DATA HERE",i.data);const n=i.data.map(r=>({...r,formattedDate:b(r.updated_at).format("DD-MM-YYYY")}));if("superadmin"===this.permissions.user.role)this.originalPurchaseList=n,this.purchaseList=n;else{const r=n.filter(a=>this.siteList.some(l=>l._id===a.site));console.log(r),this.originalPurchaseList=r,this.purchaseList=r}this.httpService.GET(d.Fj,{filter_by:this.filter_by,filter_value:"revised"}).subscribe({next:r=>{console.log("check revise DATA for this HERE",r.data),this.revisePR=r.data.length,console.log("number of revise",this.revisePR)},error:r=>{if(r.errors&&!(0,S.isEmpty)(r.errors)){let a="<ul>";for(let l in r.errors)a+=`<li>${r.errors[l][0]}</li>`;a+="</ul>",this.snack.notifyHtml(a,2)}else this.snack.notify(r.message,2)}})},error:i=>{if(i.errors&&!(0,S.isEmpty)(i.errors)){let n="<ul>";for(let r in i.errors)n+=`<li>${i.errors[r][0]}</li>`;n+="</ul>",this.snack.notifyHtml(n,2)}else this.snack.notify(i.message,2)}})}getRemainingDays(t){const i=new Date(t),n=new Date;i.setHours(0,0,0,0),n.setHours(0,0,0,0);const r=i.getTime()-n.getTime();return Math.floor(r/864e5)}dateFilter(t){this.originalPurchaseList&&this.originalPurchaseList.length>0&&(this.purchaseList=t.value?this.originalPurchaseList.filter(i=>new Date(i.date).getTime()===t.value.getTime()):this.originalPurchaseList)}search(t,i){this.originalPurchaseList&&this.originalPurchaseList.length>0&&(this.purchaseList="site"==i?t.target.value?this.originalPurchaseList.filter(n=>n.siteData.site_name.toLowerCase().includes(t.target.value.toLowerCase())):this.originalPurchaseList:t.target.value?this.originalPurchaseList.filter(n=>n.title.toLowerCase().includes(t.target.value.toLowerCase())):this.originalPurchaseList)}changeRequestType(t){this.requestType=t,"new"==t?(this.filter_value="pending",this.getList({filter_by:this.filter_by,filter_value:this.filter_value})):(this.filter_value="revised",this.getList({filter_by:this.filter_by,filter_value:this.filter_value}))}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.userService.getUserss().subscribe(t=>{t.find(n=>n._id===this.permissions.user._id)?(this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:a=>{console.log(a),this.viewPermission=a.dashboard_permissions[0].ParentChildchecklist[19].childList[0].isSelected},error:a=>{console.log(a)}}),this.siteList=this.permissions.user.sites,console.log("SiteSelect",this.siteList)):(this.snack.notify("Invalid Credentials - User Details not Valid",1),this.auth.removeUser(),this.userService.updateLogin("logout"),this.router.navigate(["/login"]))})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.F0),e.Y36(T.s),e.Y36(y.o),e.Y36(f.uU),e.Y36(L.e),e.Y36(M.f))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-purchase-request-list"]],features:[e._Bn([f.uU])],decls:73,vars:21,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","40px","margin-left","20px"],["src","./assets/images/preq.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","20px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/app.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/rc.svg"],["src","./assets/images/approval.svg"],["src","./assets/images/po.svg"],[2,"display","flex","flex-direction","row","gap","10px"],[2,"margin-left","40px","width","100%","margin-top","30px"],["appearance","outline",1,"searchbar"],["matSuffix",""],["matInput","","type","search","placeholder","search title",1,"search-input",3,"input"],[2,"margin-right","600px","margin-top","30px","display","flex","gap","10px"],[2,"margin-top","15px","color","#94A3B8","margin-left","30px"],["appearance","outline",1,"datebar"],["matInput","","placeholder","Date",3,"matDatepicker","dateChange","click"],["matSuffix","",3,"for"],["startPicker",""],[2,"margin-top","30px","display","flex","position","relative","right","570px","gap","10px"],[2,"margin-top","15px","color","#94A3B8","margin-left","-10px"],["matInput","","placeholder","Site",3,"input"],[2,"margin-top","50px","position","relative","right","500px","white-space","nowrap"],[2,"cursor","pointer",3,"ngClass","click"],[4,"ngIf","ngIfElse"],["noView",""],[1,"scroll-bar1",2,"width","96%"],[2,"direction","ltr !important","margin-top","-20px"],[4,"ngFor","ngForOf"],["class","no-record-found",4,"ngIf"],[2,"color","#4272BF","width","200px","text-align","left","padding","10px"],[2,"border","1px solid #D9D9D9","height","30px"],[2,"color","#4272BF","width","500px","padding","10px"],[2,"color","#4272BF","width","400px","padding","10px"],[2,"color","#4272BF","width","700px","text-align","left","padding","10px"],["style","width:250px; font-size: 12px;",3,"color",4,"ngIf"],["style","width:200px; ",4,"ngIf"],[2,"color","#fff","width","150px","cursor","pointer",3,"ngStyle","routerLink"],[2,"width","100px"],[2,"width","250px","font-size","12px"],[2,"width","200px"],[1,"no-record-found"],["src","./assets/images/inbox_empty.png","alt",""],[2,"display","flex","justify-content","center","margin-top","2%","font-size","160%","font-weight","bolder","color","grey"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"mat-toolbar",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"span",3),e._uU(4,"Purchase request list"),e.qZA(),e._UZ(5,"span",4),e.qZA(),e.TgZ(6,"div"),e._UZ(7,"hr",5),e.qZA(),e.TgZ(8,"div",6)(9,"div",7)(10,"div"),e._UZ(11,"img",8),e.qZA(),e.TgZ(12,"span",9),e._uU(13,"Purchase\xa0request"),e.qZA(),e.TgZ(14,"div"),e._UZ(15,"mat-divider",10),e.qZA()(),e.TgZ(16,"div",11)(17,"div"),e._UZ(18,"img",12),e.qZA(),e.TgZ(19,"span",13),e._uU(20,"Approvals"),e.qZA(),e.TgZ(21,"div"),e._UZ(22,"mat-divider",10),e.qZA()(),e.TgZ(23,"div",11)(24,"div"),e._UZ(25,"img",14),e.qZA(),e.TgZ(26,"span",9),e._uU(27,"Rate\xa0Comparative"),e.qZA(),e.TgZ(28,"div"),e._UZ(29,"mat-divider",10),e.qZA()(),e.TgZ(30,"div",11)(31,"div"),e._UZ(32,"img",15),e.qZA(),e.TgZ(33,"span",9),e._uU(34,"Rate\xa0Approvals"),e.qZA(),e.TgZ(35,"div"),e._UZ(36,"mat-divider",10),e.qZA()(),e.TgZ(37,"div",11)(38,"div"),e._UZ(39,"img",16),e.qZA(),e.TgZ(40,"span",9),e._uU(41,"Purchase\xa0orders"),e.qZA()()(),e.TgZ(42,"div",17)(43,"div",18)(44,"mat-form-field",19)(45,"mat-icon",20),e._uU(46,"search"),e.qZA(),e.TgZ(47,"input",21),e.NdJ("input",function(a){return i.search(a,"title")}),e.qZA()()(),e.TgZ(48,"div",22)(49,"div",23)(50,"span"),e._uU(51,"Filter\xa0by"),e.qZA()(),e.TgZ(52,"div")(53,"mat-form-field",24)(54,"input",25),e.NdJ("dateChange",function(a){return i.dateFilter(a)})("click",function(){e.CHM(n);const a=e.MAs(57);return e.KtG(a.open())}),e.qZA(),e._UZ(55,"mat-datepicker-toggle",26)(56,"mat-datepicker",null,27),e.qZA()()(),e.TgZ(58,"div",28)(59,"div",29)(60,"span"),e._uU(61,"Filter\xa0by"),e.qZA()(),e.TgZ(62,"div")(63,"mat-form-field",24)(64,"input",30),e.NdJ("input",function(a){return i.search(a,"site")}),e.qZA()()()(),e.TgZ(65,"div",31)(66,"span",32),e.NdJ("click",function(){return i.changeRequestType("new")}),e._uU(67," New request\xa0| "),e.qZA(),e.TgZ(68,"span",32),e.NdJ("click",function(){return i.changeRequestType("revise")}),e._uU(69),e.qZA()()(),e.YNc(70,st,6,2,"ng-container",33),e.YNc(71,lt,2,0,"ng-template",null,34,e.W1O)}if(2&t){const n=e.MAs(57),r=e.MAs(72);e.xp6(9),e.Q6J("routerLink",e.DdM(12,ct)),e.xp6(7),e.Q6J("routerLink",e.DdM(13,pt)),e.xp6(7),e.Q6J("routerLink",e.DdM(14,ut)),e.xp6(7),e.Q6J("routerLink",e.DdM(15,dt)),e.xp6(7),e.Q6J("routerLink",e.DdM(16,_t)),e.xp6(17),e.Q6J("matDatepicker",n),e.xp6(1),e.Q6J("for",n),e.xp6(11),e.Q6J("ngClass",e.VKq(17,Y,"new"==i.requestType?"active":"inactive")),e.xp6(2),e.Q6J("ngClass",e.VKq(19,Y,"revise"==i.requestType?"active":"inactive")),e.xp6(1),e.hij(" \xa0Revised request (",i.revisePR,") "),e.xp6(1),e.Q6J("ngIf",i.viewPermission)("ngIfElse",r)}},dependencies:[q.KE,q.R9,x.Mq,x.hl,x.nW,A.d,Q.Hw,C.Nt,w.Ye,f.mk,f.sg,f.O5,f.PC,g.rH,g.Od],styles:[".mat-form-field-appearance-outline .mat-form-field-infix{padding:.6em;width:250px}mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.searchbar[_ngcontent-%COMP%]{width:350px;border-radius:20px;font-family:Poppins}.active[_ngcontent-%COMP%]{color:#233a61}.inactive[_ngcontent-%COMP%]{color:#94a3b8}.datebar[_ngcontent-%COMP%]{width:140px;border-radius:20px;font-family:Poppins}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:separate;border-spacing:0 25px;text-align:left;width:100%;font-size:14px;margin-left:30px;margin-bottom:20px;margin-right:-10px}td[_ngcontent-%COMP%]{border:none;text-align:center;padding:8px 1px;color:#233a61;font-style:normal;font-size:14px}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f4f4f5!important}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f4f4f5!important}.scroll-bar1[_ngcontent-%COMP%]{height:600px;width:93%;margin-left:20px;margin-bottom:100px;margin-top:10px;overflow:auto;direction:rtl;overflow-x:hidden}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.no-record-found[_ngcontent-%COMP%]{text-align:center;display:flex;gap:10px;flex-direction:column;align-items:center;justify-content:center}.no-record-found[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:188px}"]}),o})();var j=_(5861),gt=_(4564);function ht(o,c){if(1&o&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ft(o,c){if(1&o&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function xt(o,c){if(1&o&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.site_name," ")}}function Zt(o,c){if(1&o&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.vendor_name," ")}}function qt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",36)(1,"label",26),e._uU(2,"Vendor"),e.TgZ(3,"span",22),e._uU(4,"*"),e.qZA()(),e.TgZ(5,"mat-select",50),e.NdJ("selectionChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onVendorSelection(n))}),e.YNc(6,Zt,2,2,"mat-option",24),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.vendorList)}}function bt(o,c){if(1&o&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.item_name," ")}}function vt(o,c){if(1&o&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.brand_name," ")}}function Tt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",75)(1,"a",76)(2,"p",77),e._uU(3),e.qZA()(),e.TgZ(4,"button",78),e.NdJ("click",function(){const r=e.CHM(t).index,a=e.oxw().index,l=e.oxw(2);return e.KtG(l.removeAttachment(a,r))}),e._uU(5,"\xd7"),e.qZA()()}if(2&o){const t=c.$implicit,i=c.index;e.xp6(1),e.Q6J("href",t,e.LSH),e.xp6(2),e.hij("Attachment ",i+1,"")}}function yt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"li",80),e._uU(1),e.TgZ(2,"button",81),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2).index,l=e.oxw(2);return e.KtG(l.removeFile(a,r))}),e._uU(3," x"),e.qZA()()}if(2&o){const t=c.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function At(o,c){if(1&o&&(e.TgZ(0,"div")(1,"ul"),e.YNc(2,yt,4,1,"li",79),e.qZA()()),2&o){const t=e.oxw().index,i=e.oxw(2);let n;e.xp6(2),e.Q6J("ngForOf",null==i.items||null==i.items.value||null==(n=i.items.value.at(t))?null:n.files)}}function Ct(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"a",82),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().index,r=e.oxw(2);return e.KtG(r.delete(n))}),e._UZ(1,"i",83),e.qZA()}}function wt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"tr",56)(1,"td",57),e._uU(2),e.qZA(),e.ynx(3,58),e.TgZ(4,"td")(5,"mat-form-field",59)(6,"input",60),e.NdJ("input",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.searchItem(n))}),e.qZA(),e.TgZ(7,"mat-autocomplete",61,62),e.NdJ("optionSelected",function(n){const a=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.selectedItem(n,a))}),e.YNc(9,bt,2,2,"mat-option",24),e.qZA()()(),e.TgZ(10,"td",63),e._uU(11),e.qZA(),e.TgZ(12,"td",63),e._uU(13),e.qZA(),e.TgZ(14,"td",63),e._uU(15),e.qZA(),e.TgZ(16,"td",63),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._UZ(21,"input",64),e.qZA(),e.TgZ(22,"td"),e._UZ(23,"input",65),e.qZA(),e.TgZ(24,"td"),e._UZ(25,"input",66),e.qZA(),e.TgZ(26,"td"),e._UZ(27,"input",67),e.qZA(),e.TgZ(28,"td")(29,"mat-select",68),e.YNc(30,vt,2,2,"mat-option",24),e.qZA()(),e.TgZ(31,"td"),e.YNc(32,Tt,6,2,"div",69),e.qZA(),e.TgZ(33,"td")(34,"input",70),e.NdJ("change",function(n){const a=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.onFilesSelected(n,a))}),e.qZA(),e.YNc(35,At,3,1,"div",71),e.qZA(),e.TgZ(36,"td"),e._UZ(37,"input",72),e.qZA(),e.TgZ(38,"td")(39,"div",73),e.YNc(40,Ct,2,0,"a",74),e.qZA()(),e.BQk(),e.qZA()}if(2&o){const t=c.$implicit,i=c.index,n=e.MAs(8),r=e.oxw(2);let a,l,p,u,h,Z;e.xp6(2),e.hij(" ",i+1," "),e.xp6(1),e.Q6J("formGroupName",i),e.xp6(3),e.Q6J("matAutocomplete",n),e.xp6(1),e.Q6J("panelWidth","auto")("displayWith",r.displayItemFn),e.xp6(2),e.Q6J("ngForOf",r.filteredItemList),e.xp6(2),e.hij(" ",null==(a=t.get("item_code"))?null:a.value," "),e.xp6(2),e.hij(" ",null==(l=t.get("specification"))?null:l.value," "),e.xp6(2),e.hij(" ",null==(p=t.get("category"))?null:p.value," "),e.xp6(2),e.hij(" ",null==(u=t.get("subCategory"))?null:u.value," "),e.xp6(2),e.hij(" ",null==(h=t.get("uom"))?null:h.value," "),e.xp6(10),e.Q6J("formControlName","brandSelections"),e.xp6(1),e.Q6J("ngForOf",r.filteredBrandLists[i]),e.xp6(2),e.Q6J("ngForOf",t.get("attachment").value),e.xp6(3),e.Q6J("ngIf",null==r.items||null==r.items.value||null==(Z=r.items.value.at(i))?null:Z.files),e.xp6(5),e.Q6J("ngIf",i>0)}}function Ut(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",51)(2,"table",52)(3,"tr")(4,"th"),e._uU(5,"S\xa0No"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Item*"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Item Code>"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Specification"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Category"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Sub\xa0category"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Uom*"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"HSN Code"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Quantity*"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Rate"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Make List"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Attachments"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Upload"),e.qZA(),e.TgZ(30,"th"),e._uU(31,"Remarks"),e.qZA(),e.TgZ(32,"th"),e._uU(33,"Action"),e.qZA()(),e.TgZ(34,"tbody"),e.YNc(35,wt,41,16,"tr",53),e.qZA()()(),e.TgZ(36,"div",54)(37,"div")(38,"button",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addItem())}),e._uU(39," Add Item + "),e.qZA()()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(35),e.Q6J("ngForOf",t.purchaseRequestForm.get("items").controls)}}function Pt(o,c){if(1&o&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.item_name," ")}}function kt(o,c){if(1&o&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.brand_name," ")}}function Nt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",75)(1,"a",76)(2,"p",77),e._uU(3),e.qZA()(),e.TgZ(4,"button",78),e.NdJ("click",function(){const r=e.CHM(t).index,a=e.oxw().index,l=e.oxw(2);return e.KtG(l.removeAttachment(a,r))}),e._uU(5,"\xd7"),e.qZA()()}if(2&o){const t=c.$implicit,i=c.index;e.xp6(1),e.Q6J("href",t,e.LSH),e.xp6(2),e.hij("Attachment ",i+1,"")}}function It(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"li",80),e._uU(1),e.TgZ(2,"button",81),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2).index,l=e.oxw(2);return e.KtG(l.removeFile(a,r))}),e._uU(3," x"),e.qZA()()}if(2&o){const t=c.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Rt(o,c){if(1&o&&(e.TgZ(0,"div")(1,"ul"),e.YNc(2,It,4,1,"li",79),e.qZA()()),2&o){const t=e.oxw().index,i=e.oxw(2);let n;e.xp6(2),e.Q6J("ngForOf",null==i.items||null==i.items.value||null==(n=i.items.value.at(t))?null:n.files)}}function Lt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"a",82),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().index,r=e.oxw(2);return e.KtG(r.delete(n))}),e._UZ(1,"i",83),e.qZA()}}function Mt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"tr",56)(1,"td",57),e._uU(2),e.qZA(),e.ynx(3,58),e.TgZ(4,"td")(5,"mat-form-field",59)(6,"input",60),e.NdJ("input",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.searchItem(n))}),e.qZA(),e.TgZ(7,"mat-autocomplete",61,62),e.NdJ("optionSelected",function(n){const a=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.selectedItem(n,a))}),e.YNc(9,Pt,2,2,"mat-option",24),e.qZA()()(),e.TgZ(10,"td",63),e._uU(11),e.qZA(),e.TgZ(12,"td",63),e._uU(13),e.qZA(),e.TgZ(14,"td",63),e._uU(15),e.qZA(),e.TgZ(16,"td",63),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._UZ(21,"input",64),e.qZA(),e.TgZ(22,"td"),e._UZ(23,"input",65),e.qZA(),e.TgZ(24,"td")(25,"mat-select",68),e.YNc(26,kt,2,2,"mat-option",24),e.qZA()(),e.TgZ(27,"td"),e.YNc(28,Nt,6,2,"div",69),e.qZA(),e.TgZ(29,"td")(30,"input",70),e.NdJ("change",function(n){const a=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.onFilesSelected(n,a))}),e.qZA(),e.YNc(31,Rt,3,1,"div",71),e.qZA(),e.TgZ(32,"td"),e._UZ(33,"input",72),e.qZA(),e.TgZ(34,"td")(35,"div",73),e.YNc(36,Lt,2,0,"a",74),e.qZA()(),e.BQk(),e.qZA()}if(2&o){const t=c.$implicit,i=c.index,n=e.MAs(8),r=e.oxw(2);let a,l,p,u,h,Z;e.xp6(2),e.hij(" ",i+1," "),e.xp6(1),e.Q6J("formGroupName",i),e.xp6(3),e.Q6J("matAutocomplete",n),e.xp6(1),e.Q6J("panelWidth","auto")("displayWith",r.displayItemFn),e.xp6(2),e.Q6J("ngForOf",r.filteredItemList),e.xp6(2),e.hij(" ",null==(a=t.get("item_code"))?null:a.value," "),e.xp6(2),e.hij(" ",null==(l=t.get("specification"))?null:l.value," "),e.xp6(2),e.hij(" ",null==(p=t.get("category"))?null:p.value," "),e.xp6(2),e.hij(" ",null==(u=t.get("subCategory"))?null:u.value," "),e.xp6(2),e.hij(" ",null==(h=t.get("uom"))?null:h.value," "),e.xp6(6),e.Q6J("formControlName","brandSelections"),e.xp6(1),e.Q6J("ngForOf",r.filteredBrandLists[i]),e.xp6(2),e.Q6J("ngForOf",t.get("attachment").value),e.xp6(3),e.Q6J("ngIf",null==r.items||null==r.items.value||null==(Z=r.items.value.at(i))?null:Z.files),e.xp6(5),e.Q6J("ngIf",i>0)}}function Ft(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",51)(1,"table",52)(2,"tr")(3,"th"),e._uU(4,"S\xa0No"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Item*"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Item Code>"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Specification"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Category"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Sub\xa0category"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Uom*"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"HSN Code"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Quantity*"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Make List"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Attachments"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Upload"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Remarks"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Action"),e.qZA()(),e.TgZ(31,"tbody"),e.YNc(32,Mt,37,16,"tr",53),e.qZA()()(),e.TgZ(33,"div",54)(34,"div")(35,"button",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addItem())}),e._uU(36," Add Item + "),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(32),e.Q6J("ngForOf",t.purchaseRequestForm.get("items").controls)}}const St=function(){return["/procurement"]},Ot=function(){return["/procurement/prlist"]},Jt=function(){return["/rate-comparative"]},Qt=function(){return["/rate-approval"]},Dt=function(){return["/purchase-order"]};let $t=(()=>{class o{constructor(t,i,n,r,a,l){this.router=t,this.route=i,this.httpService=n,this.snack=r,this.formBuilder=a,this.http=l,this.requredByMinDate=new Date,this.load=!1,this.filteredBrandLists=[],this.prType=["Site Establishment","Normal"],this.brandSelections=this.formBuilder.array([]),this.purchaseRequestForm=new s.cw({title:new s.NI("",s.kI.required),prType:new s.NI("",s.kI.required),date:new s.NI(b().format("DD-MM-YYYY"),s.kI.required),expected_delivery_date:new s.NI(b().add(1,"days").format("DD-MM-YYYY"),s.kI.required),purchase_request_number:new s.NI(""),site:new s.NI("",s.kI.required),local_purchase:new s.NI("yes",s.kI.required),remarks:new s.NI(""),items:this.formBuilder.array([]),_id:new s.NI(""),vendor:new s.NI("")})}handleLocalPurchaseChange(){this.purchaseRequestForm.get("items").clear(),this.addItem()}onVendorSelection(t){if(console.log(t),null==t.value)return;const i=this.vendorList.find(n=>n._id===t.value);i?this.filteredItemList=this.itemList.filter(n=>{const r=i.category.some(l=>l===n.category),a=i.SubCategory.some(l=>l===n.sub_category);return r&&a}):(console.warn("No matching vendor found for the selected ID."),this.filteredItemList=[]),t.value!==this.initialVendor.vendor&&(this.purchaseRequestForm.get("items").clear(),this.addItem())}createItemArrayForm(){return new s.cw({item_id:new s.NI("",s.kI.required),HSNcode:new s.NI(""),item_code:new s.NI(""),rate:new s.NI("",s.kI.required),qty:new s.NI("",s.kI.required),category:new s.NI(null),subCategory:new s.NI(null),attachment:new s.NI([]),files:new s.NI([]),remark:new s.NI(null),uom:new s.NI(null),itemName:new s.NI(null),brandSelections:new s.NI(null)})}onSubmit(){if(this.load)return;if(console.log(this.purchaseRequestForm),console.log(this.purchaseRequestForm.valid),!this.purchaseRequestForm.valid)return console.log("Form is invalid",this.purchaseRequestForm),void Object.keys(this.purchaseRequestForm.controls).forEach(r=>{const a=this.purchaseRequestForm.get(r);a&&a.invalid&&console.log(`Validation error in ${r}:`,a.errors)});let t=this.purchaseRequestForm.value;const i=this.categoryList.find(r=>r._id==t.title);console.log(i),t.title=i.name,t.date=b(t.date,"DD-MM-YYYY").toDate(),t.expected_delivery_date=new Date(t.expected_delivery_date),t.status="revised",this.load=!0,console.log("there",t);const n=new FormData;"no"===t.local_purchase?(n.append("_id",t._id),n.append("title",t.title),n.append("prType",t.prType),n.append("handle_by",""),n.append("date",t.date),n.append("expected_delivery_date",t.expected_delivery_date),n.append("purchase_request_number",t.purchase_request_number),n.append("site",t.site),n.append("local_purchase",t.local_purchase),n.append("status",t.status),t.items.forEach((r,a)=>{n.append(`items[${a}][item_id]`,r.item_id._id),n.append(`items[${a}][specification]`,r.specification||""),n.append(`items[${a}][item_code]`,r.item_code),n.append(`items[${a}][qty]`,r.qty),n.append(`items[${a}][category]`,r.category),n.append(`items[${a}][subCategory]`,r.subCategory),n.append(`items[${a}][uom]`,r.uom),n.append(`items[${a}][hsnCode]`,r.HSNcode||""),r.brandSelections.forEach(l=>{n.append(`items[${a}][brandName]`,l)}),r.attachment.forEach((l,p)=>{n.append(`items[${a}][file][${p}]`,l)}),r.files.forEach((l,p)=>{n.append(`items[${a}][attachment][${p}]`,l,l.name)})})):(n.append("title",t.title),n.append("date",t.date),n.append("expected_delivery_date",t.expected_delivery_date),n.append("purchase_request_number",t.purchase_request_number),n.append("site",t.site),n.append("local_purchase",t.local_purchase),n.append("_id",t._id),n.append("vendor",t.vendor),n.append("status",t.status),t.items.forEach((r,a)=>{n.append(`items[${a}][item_id]`,r.item_id._id),n.append(`items[${a}][item_code]`,r.item_code),n.append(`items[${a}][specification]`,r.specification||""),n.append(`items[${a}][qty]`,r.qty.toString()),n.append(`items[${a}][rate]`,r.rate.toString()),n.append(`items[${a}][category]`,r.category),n.append(`items[${a}][subCategory]`,r.subCategory),n.append(`items[${a}][remark]`,r.remark),n.append(`items[${a}][uom]`,r.uom),n.append(`items[${a}][hsnCode]`,r.HSNcode||""),r.brandSelections.forEach(l=>{n.append(`items[${a}][brandName]`,l)}),r.attachment.forEach((l,p)=>{n.append(`items[${a}][file][${p}]`,l)}),r.files.forEach((l,p)=>{n.append(`items[${a}][attachment][${p}]`,l,l.name)})})),console.log(n),this.httpService.PUT(d.Fj,n).subscribe({next:r=>{this.load=!1,this.snack.notify("Record has been updated.",1),this.router.navigate(["/procurement/prlist"])},error:r=>{if(this.load=!1,r.errors&&!(0,S.isEmpty)(r.errors)){let a="<ul>";for(let l in r.errors)a+=`<li>${r.errors[l][0]}</li>`;a+="</ul>",this.snack.notifyHtml(a,2)}else this.snack.notify(r.message,2)}})}getList(){var t=this;return(0,j.Z)(function*(){const i=t.http.get(`${m.N.api_path}${d.PE}`),n=t.http.get(`${m.N.api_path}${d.o7}`),r=t.http.get(`${m.N.api_path}${d.S3}`),a=t.http.get(`${m.N.api_path}${d.ds}`),l=t.http.get(`${m.N.api_path}${d.Lk}`),p=t.http.get(`${m.N.api_path}${d.jz}`);try{const u=yield t.httpService.multipleRequests([i,n,r,a,l,p],{}).toPromise();u&&(t.uomList=u[0].data,t.itemList=u[1].data,t.siteList=u[2].data,t.vendorList=u[3].data,t.brandList=u[4].data,t.categoryList=u[5].data)}catch(u){console.error("Error fetching data:",u)}})()}toggleBrandSelection(t,i){const n=this.purchaseRequestForm.get("items").at(i).get("brandSelections"),r=n.value.findIndex(a=>a===t);-1!==r?n.removeAt(r):n.push(new s.NI(t))}isBrandSelected(t,i){return this.purchaseRequestForm.get("items").at(i).get("brandSelections").value.includes(t)}selectedItem(t,i){const n=t.option.value,r=n._id;console.log(n);const a=this.purchaseRequestForm.get("items");console.log("itemsArray",a.value);const l=a.value.map((p,u)=>({index:u,id:p.item_id._id})).filter(p=>p.id===r).map(p=>p.index);if(console.log("Indices of duplicate items:",l),l.length>=2)return a.removeAt(l.pop()),this.snack.notify("Item already exists",2),void this.items.at(i).reset();if(1===l.length){let p=n.categoryDetail.name,u=n.subCategoryDetail.subcategory_name,h=n.item_code,Z=n.uomDetail.uom_name,O=n.specification;this.items.at(i).patchValue({category:p,subCategory:u,item_code:h||"",uom:Z,specification:O});let U=this.getBrandsForItem(n);this.filteredBrandLists[i]=U,console.log("check filteredList",U)}}removeAttachment(t,i){const n=this.items.at(t).get("attachment").value;n.splice(i,1),this.items.at(t).get("attachment").setValue(n)}getBrandsForItem(t){if(console.log("checking item for brand",t),t.brands){console.log("here check this");const i=t.brands;let n=this.brandList.filter(r=>i.includes(r._id));return console.log("check List",n),n}return this.brandList}getBrandsForExistingItem(t){const i=this.itemList.filter(n=>n._id===t.item_id);if(console.log("check received Item",i),i[0].brands){console.log("here");const n=i[0].brands;let r=this.brandList.filter(a=>n.includes(a._id));return console.log("check List",r),r}return this.brandList}searchItem(t){const i=t.target.value.toLowerCase();this.itemList&&this.itemList.length>0&&(this.filteredItemList=t.target.value?this.itemList.filter(n=>n.item_name.toLowerCase().includes(i)):this.itemList)}createItem(t){if(t){let i;console.log("item Here",t.attachment),Array.isArray(t.brandName)?(i=t.brandName,console.log("check BrandSelections",i)):i="string"==typeof t.brandName?[t.brandName]:[];const n=this.itemList.filter(r=>r._id===t.item_id);return new s.cw({item_id:new s.NI(n[0],s.kI.required),HSNcode:new s.NI(t.hsnCode),item_code:new s.NI(t.item_code),qty:new s.NI(t.qty,s.kI.required),rate:new s.NI(t.rate),category:new s.NI(t.categoryDetail.name),subCategory:new s.NI(t.subCategoryDetail.subcategory_name),attachment:new s.NI(t.attachment),files:new s.NI([]),remark:new s.NI(t.remark),uom:new s.NI(t.uomDetail.uom_name),brandSelections:new s.NI(i||[])})}return new s.cw({item_id:new s.NI("",s.kI.required),HSNcode:new s.NI(""),item_code:new s.NI(""),qty:new s.NI("",s.kI.required),rate:new s.NI(""),category:new s.NI(""),subCategory:new s.NI(""),attachment:new s.NI([]),files:new s.NI([]),remark:new s.NI(""),uom:new s.NI(""),brandSelections:new s.NI([])})}delete(t){this.purchaseRequestForm.get("items").removeAt(t)}displayItemFn(t){return t?t.item_name:""}selectedTitle(t){this.categoryList.find(r=>r._id==t.value).name.replace(/[ ,]/g,"_"),this.filteredItemList=this.itemList.filter(r=>r.category===t.value),console.log("check for filtered",this.filteredItemList),console.log("titleSelected",this.purchaseRequestForm)}patchData(t){const i=this.categoryList.find(n=>n.name===t.title);this.filteredItemList=this.itemList.filter(n=>n.category===i._id),console.log("check filtered",this.filteredItemList),this.purchaseRequestForm.patchValue({title:i._id,prType:t.prType||"Site Establishment",date:t.updated_at,expected_delivery_date:t.expected_delivery_date,purchase_request_number:t.purchase_request_number,site:t.site,local_purchase:t.local_purchase,remarks:t.remarks,_id:t._id,vendor:t.vendor}),t.items&&t.items.length>0&&t.items.map((n,r)=>{this.addItems(n);let a=this.getBrandsForExistingItem(n);this.filteredBrandLists.push(a)}),console.log("checkForm",this.purchaseRequestForm),this.purchaseRequestForm.controls.remarks.disable()}addItem(){this.items=this.purchaseRequestForm.get("items"),this.items.push(this.createItem()),this.filteredBrandLists.push(this.brandList)}addItems(t){this.items=this.purchaseRequestForm.get("items"),t&&this.items.push(this.createItem(t))}onFilesSelected(t,i){const n=t.target.files;if(console.log("file",n),n.length>5)this.snack.notify("Can upload Maximum 5 Files",2);else if(n.length>0){const r=Array.from(n);this.items.at(i).patchValue({files:r}),console.log(this.items)}}removeFile(t,i){const n=this.items.at(t).get("files");console.log("here",n);const r=n.value.filter(a=>a.name!==i.name);console.log("there",r),this.items.at(t).patchValue({files:r}),console.log(this.items)}files(t){return this.items.at(t).get("files").controls.map(i=>i.value)}ngOnInit(){var t=this;this.route.params.subscribe(i=>{i.id&&this.httpService.GET(`${d.Fj}/detail`,{_id:i.id}).subscribe(function(){var n=(0,j.Z)(function*(r){yield t.getList(),t.initialVendor=r.data[0],t.onVendorSelection({value:t.initialVendor.vendor}),t.patchData(r.data[0])});return function(r){return n.apply(this,arguments)}}())})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.F0),e.Y36(g.gz),e.Y36(T.s),e.Y36(y.o),e.Y36(s.qu),e.Y36(P.eN))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-revise-purchase-request"]],decls:111,vars:24,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","40px","margin-left","20px"],["src","./assets/images/preq.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/prl.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],["src","./assets/images/rc.svg"],[2,"width","100px","margin-left","10px","margin-top","10px","border","1px dashed"],["src","./assets/images/po.svg"],[3,"formGroup","ngSubmit"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","50px","width","1200px"],[1,"flex-div",2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px","margin-bottom","3px"],[1,"star"],["id","title","placeholder","Select Type","formControlName","prType",2,"padding","10px","width","200px","margin-right","-20px","height","50px","border","1px solid #ccc","border-radius","6px","cursor","pointer","font-family","Poppins"],[3,"value",4,"ngFor","ngForOf"],["id","title","placeholder","Select title","formControlName","title",2,"padding","10px","width","200px","margin-right","-20px","height","50px","border","1px solid #ccc","border-radius","6px","cursor","pointer","font-family","Poppins",3,"selectionChange"],[2,"color","#4272BF","font-size","14px"],[1,"custom-form-control"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Enter base Line Start Date",3,"matDatepicker","click"],["matSuffix","",3,"for"],["date",""],[1,"custom-form-group"],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter base Line Start Date",3,"matDatepicker","min","click"],["requiredByStartDate",""],[2,"display","flex","flex-direction","column"],["placeholder","Auto generate","formControlName","purchase_request_number","readonly","",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9F9F9F","cursor","pointer","margin-top","10px","font-family","Poppins"],["id","site","placeholder","Select site","formControlName","site",2,"padding","10px","width","200px","border","1px solid #9F9F9F","border-radius","6px","cursor","pointer","margin-top","10px","font-family","Poppins"],[2,"color","#4272BF"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group",3,"change"],[1,"example-radio-button",3,"value"],["style","display: flex;flex-direction: column;",4,"ngIf"],[4,"ngIf","ngIfElse"],["noLocalPurchase",""],[1,"row","text-area-section"],["name","","id","","cols","30","rows","10","formControlName","remarks"],[1,"row","button-list"],[2,"padding","8px","width","auto","background-color","#233A61","color","#fff","border-radius","5px","border-color","lightgrey","font-size","14px","font-family","Poppins"],[3,"value"],["id","site","placeholder","Select Vendor","formControlName","vendor",2,"padding","10px","width","200px","border","1px solid #ccc","border-radius","6px","cursor","pointer","font-family","Poppins",3,"selectionChange"],[1,"scroll-bar1"],[1,"items-table",2,"direction","ltr !important","border-left","2px solid #000 !important"],["style","background-color: #F4F4F5;","formArrayName","items",4,"ngFor","ngForOf"],[2,"display","flex","flex-direction","row","gap","40px","margin-left","38px","margin-bottom","100px","margin-top","100px","top","-50px","position","relative"],[2,"padding","8px","width","120px","background-color","#fff","cursor","pointer","border","0.5px solid #94A3B8","border-radius","5px","font-size","14px","font-family","Poppins",3,"click"],["formArrayName","items",2,"background-color","#F4F4F5"],[2,"text-align","center"],[3,"formGroupName"],[1,"example-full-width"],["type","text","placeholder","Select Item","aria-label","Item","matInput","","formControlName","item_id",3,"matAutocomplete","input"],[3,"panelWidth","displayWith","optionSelected"],["auto","matAutocomplete"],[2,"color","#000"],["placeholder","Enter","formControlName","HSNcode",1,"pr-form-field"],["type","text","placeholder","Enter","digitOnly","","formControlName","qty",1,"pr-form-field"],["type","text","placeholder","Enter","digitOnly","","formControlName","rate",1,"pr-form-field"],["type","text","formControlName","qty","placeholder","Enter","pattern","^\\d+(\\.\\d{1,2})?$",1,"pr-form-field"],["multiple","","placeholder","Select Brand",1,"pr-form-field",3,"formControlName"],["style","display: flex; align-items: center;",4,"ngFor","ngForOf"],["type","file","multiple","",3,"change"],[4,"ngIf"],["placeholder","Enter","formControlName","remark",1,"pr-form-field"],[1,"action-btn-wrapper"],["class","action-btn","title","Delete",3,"click",4,"ngIf"],[2,"display","flex","align-items","center"],["target","_blank",3,"href"],[2,"color","blue","text-decoration","underline","font-size","12px"],[2,"border","none","color","red","background","transparent","font-weight","bold","margin-left","10px","margin-top","-15px",3,"click"],["style","margin:10px; display: flex; flex-direction: row ;",4,"ngFor","ngForOf"],[2,"margin","10px","display","flex","flex-direction","row"],[2,"border","none","color","red","font-weight","bold","margin-left","5px",3,"click"],["title","Delete",1,"action-btn",3,"click"],[1,"fa","fa-trash"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"mat-toolbar",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"span",3),e._uU(4,"Revise purchase request "),e.qZA(),e._UZ(5,"span",4),e.qZA(),e.TgZ(6,"div"),e._UZ(7,"hr",5),e.qZA(),e.TgZ(8,"div",6)(9,"div",7)(10,"div"),e._UZ(11,"img",8),e.qZA(),e.TgZ(12,"span",9),e._uU(13,"Purchase\xa0request"),e.qZA(),e.TgZ(14,"div"),e._UZ(15,"mat-divider",10),e.qZA()(),e.TgZ(16,"div",11)(17,"div"),e._UZ(18,"img",12),e.qZA(),e.TgZ(19,"span",13),e._uU(20,"Approvals"),e.qZA(),e.TgZ(21,"div"),e._UZ(22,"mat-divider",10),e.qZA()(),e.TgZ(23,"div",11)(24,"div"),e._UZ(25,"img",14),e.qZA(),e.TgZ(26,"span",13),e._uU(27,"Rate\xa0Comparative"),e.qZA(),e.TgZ(28,"div"),e._UZ(29,"mat-divider",10),e.qZA()(),e.TgZ(30,"div",11)(31,"div"),e._UZ(32,"img",12),e.qZA(),e.TgZ(33,"span",13),e._uU(34,"Rate\xa0Approvals"),e.qZA(),e.TgZ(35,"div"),e._UZ(36,"mat-divider",15),e.qZA()(),e.TgZ(37,"div",11)(38,"div"),e._UZ(39,"img",16),e.qZA(),e.TgZ(40,"span",13),e._uU(41,"Purchase\xa0orders"),e.qZA()()(),e.TgZ(42,"form",17),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(43,"mat-card",18)(44,"div",19)(45,"div",20)(46,"label",21),e._uU(47,"Request Type "),e.TgZ(48,"span",22),e._uU(49,"*"),e.qZA()(),e.TgZ(50,"mat-select",23),e.YNc(51,ht,2,2,"mat-option",24),e.qZA()(),e.TgZ(52,"div",20)(53,"label",21),e._uU(54,"Request title "),e.TgZ(55,"span",22),e._uU(56,"*"),e.qZA()(),e.TgZ(57,"mat-select",25),e.NdJ("selectionChange",function(a){return i.selectedTitle(a)}),e.YNc(58,ft,2,2,"mat-option",24),e.qZA()(),e.TgZ(59,"div",20)(60,"label",26),e._uU(61,"Request date"),e.qZA(),e.TgZ(62,"div",27)(63,"mat-form-field",28)(64,"input",29),e.NdJ("click",function(){e.CHM(n);const a=e.MAs(67);return e.KtG(a.open())}),e.qZA(),e._UZ(65,"mat-datepicker-toggle",30)(66,"mat-datepicker",null,31),e.qZA()()(),e.TgZ(68,"div",32)(69,"label",33),e._uU(70," Required by "),e.TgZ(71,"span",22),e._uU(72,"*"),e.qZA()(),e.TgZ(73,"div",27)(74,"mat-form-field",28)(75,"input",34),e.NdJ("click",function(){e.CHM(n);const a=e.MAs(78);return e.KtG(a.open())}),e.qZA(),e._UZ(76,"mat-datepicker-toggle",30)(77,"mat-datepicker",null,35),e.qZA()()(),e.TgZ(79,"div",36)(80,"label",26),e._uU(81,"Purchase request no "),e.qZA(),e._UZ(82,"input",37),e.qZA(),e.TgZ(83,"div",36)(84,"label",26),e._uU(85,"Site name "),e.TgZ(86,"span",22),e._uU(87,"*"),e.qZA()(),e.TgZ(88,"mat-select",38),e.YNc(89,xt,2,2,"mat-option",24),e.qZA()(),e.TgZ(90,"div",36)(91,"label",39),e._uU(92,"Local Purchase "),e.TgZ(93,"span",22),e._uU(94,"*"),e.qZA()(),e.TgZ(95,"mat-radio-group",40),e.NdJ("change",function(){return i.handleLocalPurchaseChange()}),e.TgZ(96,"mat-radio-button",41),e._uU(97," Yes "),e.qZA(),e.TgZ(98,"mat-radio-button",41),e._uU(99," No "),e.qZA()()(),e.YNc(100,qt,7,1,"div",42),e.qZA()(),e.YNc(101,Ut,40,1,"ng-container",43),e.YNc(102,Ft,37,1,"ng-template",null,44,e.W1O),e.TgZ(104,"div",45)(105,"label",26),e._uU(106,"Remarks "),e.qZA(),e._UZ(107,"textarea",46),e.qZA(),e.TgZ(108,"div",47)(109,"button",48),e._uU(110,"Update Material Request"),e.qZA()()()}if(2&t){const n=e.MAs(67),r=e.MAs(78),a=e.MAs(103);let l,p;e.xp6(9),e.Q6J("routerLink",e.DdM(19,St)),e.xp6(7),e.Q6J("routerLink",e.DdM(20,Ot)),e.xp6(7),e.Q6J("routerLink",e.DdM(21,Jt)),e.xp6(7),e.Q6J("routerLink",e.DdM(22,Qt)),e.xp6(7),e.Q6J("routerLink",e.DdM(23,Dt)),e.xp6(5),e.Q6J("formGroup",i.purchaseRequestForm),e.xp6(9),e.Q6J("ngForOf",i.prType),e.xp6(7),e.Q6J("ngForOf",i.categoryList),e.xp6(6),e.Q6J("matDatepicker",n),e.xp6(1),e.Q6J("for",n),e.xp6(10),e.Q6J("matDatepicker",r)("min",i.requredByMinDate),e.xp6(1),e.Q6J("for",r),e.xp6(13),e.Q6J("ngForOf",i.siteList),e.xp6(7),e.Q6J("value","yes"),e.xp6(2),e.Q6J("value","no"),e.xp6(2),e.Q6J("ngIf","yes"===(null==(l=i.purchaseRequestForm.get("local_purchase"))?null:l.value)),e.xp6(1),e.Q6J("ngIf","yes"===(null==(p=i.purchaseRequestForm.get("local_purchase"))?null:p.value))("ngIfElse",a)}},dependencies:[k.XC,k.ZL,N.ey,q.KE,q.R9,I.a8,x.Mq,x.hl,x.nW,A.d,C.Nt,v.VQ,v.U0,R.gD,w.Ye,f.sg,f.O5,s._Y,s.Fj,s.JJ,s.JL,s.c5,s.sg,s.u,s.x0,s.CE,gt.L,g.rH,g.Od],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:1110px;height:auto;margin-left:30px;margin-top:30px;box-shadow:0 2px 12px #00000040;font-family:Poppins}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;font-size:14px;margin:8px 20px 20px 10px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;width:1000px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}.scroll-bar1[_ngcontent-%COMP%]{height:auto;width:auto;margin-left:25px;margin-bottom:100px;margin-top:50px;overflow:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background:none}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.text-area-section[_ngcontent-%COMP%]{width:1334px;height:auto;margin-left:30px}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 30px 20px 0;float:right;gap:10px}']}),o})();function Yt(o,c){if(1&o&&(e.TgZ(0,"mat-option",52),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.site_name," ")}}function jt(o,c){if(1&o&&(e.TgZ(0,"div",53)(1,"label",22),e._uU(2,"Vendor "),e.TgZ(3,"span",30),e._uU(4,"*"),e.qZA()(),e._UZ(5,"input",54),e.qZA()),2&o){const t=e.oxw();e.xp6(5),e.Q6J("readonly",!0)("value",t.selectedVendor)}}function Et(o,c){if(1&o&&(e.TgZ(0,"div")(1,"a",62)(2,"p",63),e._uU(3),e.qZA()()()),2&o){const t=c.$implicit,i=c.index;e.xp6(1),e.Q6J("href",t,e.LSH),e.xp6(2),e.hij(" Attachment ",i+1,"")}}function Bt(o,c){if(1&o&&(e.TgZ(0,"tr",58)(1,"td",59),e._uU(2),e.qZA(),e.ynx(3),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td",60),e._uU(13),e.qZA(),e.TgZ(14,"td",60),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td",60),e._uU(19),e.qZA(),e.TgZ(20,"td",60),e._uU(21),e.qZA(),e.TgZ(22,"td",60),e._uU(23),e.qZA(),e.TgZ(24,"td",60),e._uU(25),e.qZA(),e.TgZ(26,"td",60),e.YNc(27,Et,4,2,"div",61),e.qZA(),e.BQk(),e.qZA()),2&o){const t=c.$implicit,i=c.index,n=e.oxw(2);e.xp6(2),e.hij(" ",i+1," "),e.xp6(3),e.hij(" ",n.getItemName(t.item_id)," "),e.xp6(2),e.Oqu(t.item_code),e.xp6(2),e.Oqu(t.specification),e.xp6(2),e.hij(" ",t.hsnCode," "),e.xp6(2),e.hij(" ",t.categoryDetail.name," "),e.xp6(2),e.hij(" ",t.subCategoryDetail.subcategory_name," "),e.xp6(2),e.hij(" ",t.uomDetail.uom_name," "),e.xp6(2),e.hij(" ",t.qty," "),e.xp6(2),e.hij(" ",n.getFormattedBrandNames(t.brandName)," "),e.xp6(2),e.hij(" ",t.rate," "),e.xp6(2),e.hij(" ",t.remark," "),e.xp6(2),e.Q6J("ngForOf",t.attachment)}}function Ht(o,c){if(1&o&&(e.TgZ(0,"div",55)(1,"table",56)(2,"tr")(3,"th"),e._uU(4,"S\xa0No"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Item*"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Item Code"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Specification"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"HSN Code"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Category"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Sub\xa0category"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Uom*"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Quantity*"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Make List"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Rate"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Remarks"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Attachments"),e.qZA()(),e.TgZ(29,"tbody"),e.YNc(30,Bt,28,13,"tr",57),e.qZA()()()),2&o){const t=e.oxw();e.xp6(30),e.Q6J("ngForOf",null==t.details?null:t.details.items)}}function zt(o,c){if(1&o&&(e.TgZ(0,"div")(1,"a",62)(2,"p",63),e._uU(3),e.qZA()()()),2&o){const t=c.$implicit,i=c.index;e.xp6(1),e.Q6J("href",t,e.LSH),e.xp6(2),e.hij(" Attachment ",i+1,"")}}function Gt(o,c){if(1&o&&(e.TgZ(0,"tr",58)(1,"td",59),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",60),e._uU(12),e.qZA(),e.TgZ(13,"td",60),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td",60),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e.YNc(24,zt,4,2,"div",61),e.qZA()()),2&o){const t=c.$implicit,i=c.index,n=e.oxw(2);e.xp6(2),e.hij(" ",i+1," "),e.xp6(2),e.hij(" ",n.getItemName(t.item_id)," "),e.xp6(2),e.Oqu(t.item_code),e.xp6(2),e.Oqu(t.specification),e.xp6(2),e.hij(" ",t.hsnCode," "),e.xp6(2),e.hij(" ",t.categoryDetail.name," "),e.xp6(2),e.hij(" ",t.subCategoryDetail.subcategory_name," "),e.xp6(2),e.hij(" ",t.uomDetail.uom_name," "),e.xp6(2),e.hij(" ",t.qty," "),e.xp6(2),e.hij(" ",n.getFormattedBrandNames(t.brandName)," "),e.xp6(2),e.hij(" ",t.remark," "),e.xp6(2),e.Q6J("ngForOf",t.attachment)}}function Vt(o,c){if(1&o&&(e.TgZ(0,"div",55)(1,"table",56)(2,"tr")(3,"th"),e._uU(4,"S\xa0No"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Item*"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Item Code"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Specification"),e.qZA(),e.TgZ(11,"th"),e._uU(12," HSN Code"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Category"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Sub\xa0category"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Uom*"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Quantity*"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Make List"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Remarks"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Attachments"),e.qZA()(),e.TgZ(27,"tbody"),e.YNc(28,Gt,25,12,"tr",57),e.qZA()()()),2&o){const t=e.oxw();e.xp6(28),e.Q6J("ngForOf",null==t.details?null:t.details.items)}}function Kt(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",64),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateRequest("approved"))}),e._uU(2," Approve "),e.qZA(),e.BQk()}}function Wt(o,c){1&o&&(e.TgZ(0,"button",65),e._uU(1," No Permission to Approve\n"),e.qZA())}function Xt(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",49),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateRequest("rejected"))}),e._uU(2," Rejected "),e.qZA(),e.BQk()}}function en(o,c){1&o&&(e.TgZ(0,"button",66),e._uU(1," No Permission To Reject "),e.qZA())}function tn(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",49),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateRequest("revise"))}),e._uU(2," Revise Request "),e.qZA(),e.BQk()}}function nn(o,c){1&o&&(e.TgZ(0,"button",66),e._uU(1," No Permission To Revise Request "),e.qZA())}const on=function(){return["/procurement"]},rn=function(){return["/procurement/prlist"]},an=function(){return["/rate-comparative"]},sn=function(){return["/rate-approval"]},ln=function(){return["/purchase-order"]},cn=[{path:"",component:Fe},{path:"prlist",component:mt},{path:"details/:id",component:Xe},{path:"update/:id",component:(()=>{class o{constructor(t,i,n,r,a,l,p,u){this.router=t,this.httpService=i,this.snack=n,this.formBuilder=r,this.route=a,this.http=l,this.auth=p,this.userService=u,this.downloadLoading=!1,this.load=!1,this.purchaseRequestForm=new s.cw({title:new s.NI("",s.kI.required),prType:new s.NI("",s.kI.required),date:new s.NI("",s.kI.required),expected_delivery_date:new s.NI("",s.kI.required),purchase_request_number:new s.NI(""),site:new s.NI({value:"",disabled:!0},s.kI.required),local_purchase:new s.NI({value:"",disabled:!0},s.kI.required),remarks:new s.NI(""),items:this.formBuilder.array([]),_id:new s.NI}),this.details={},this.getList(),this.route.params.subscribe(h=>{this.pageId=h.id})}getList(){const t=this.http.get(`${m.N.api_path}${d.PE}`),i=this.http.get(`${m.N.api_path}${d.o7}`),n=this.http.get(`${m.N.api_path}${d.S3}`),r=this.http.get(`${m.N.api_path}${d.Lk}`);this.httpService.multipleRequests([t,i,n,r],{}).subscribe(a=>{a&&(this.uomList=a[0].data,this.itemList=a[1].data,this.siteList=a[2].data,this.brandList=a[3].data)})}patchData(t){this.purchaseRequestForm.patchValue({title:t.title,prType:t.prType||"Site Establishment",date:t.date,expected_delivery_date:t.expected_delivery_date,purchase_request_number:t.purchase_request_number,site:t.site,local_purchase:t.local_purchase,remarks:t.remarks})}createItemArrayForm(){return new s.cw({item_id:new s.NI("",s.kI.required),item_code:new s.NI(""),qty:new s.NI("",s.kI.required),hsnCode:new s.NI(""),category:new s.NI(""),subCategory:new s.NI(""),attachment:new s.NI(""),remark:new s.NI("",s.kI.required),uom:new s.NI("",s.kI.required),brandName:new s.NI("",s.kI.required)})}addItems(t){this.items=this.purchaseRequestForm.get("items"),t&&this.items.push(this.createItem(t))}createItem(t){if(t)return new s.cw({item_id:new s.NI(t.item_id,s.kI.required),qty:new s.NI(t.qty,s.kI.required),hsnCode:new s.NI(t.hsnCode),item_code:new s.NI(t?.item_code||""),category:new s.NI(t.categoryDetail.name),subCategory:new s.NI(t.subCategoryDetail.subcategory_name),attachment:new s.NI(t.attachment),remark:new s.NI(t.remark,s.kI.required),uom:new s.NI(t.uomDetail._id,s.kI.required),brandName:new s.NI(t.brandName,s.kI.required)});console.log("itemCheck",t)}isArray(t){return Array.isArray(t)}getFormattedBrandNames(t){return console.log("see BrandName",t),this.isArray(t)?t.map(i=>""===i.trim()?"others":this.myBrandName(i)).join(" / "):""===t.trim()?"others":this.myBrandName(t)}myBrandName(t){return null==this.brandList?void 0:this.brandList.filter(n=>n._id==t)[0].brand_name}getSiteList(){this.httpService.GET(d.S3,{}).subscribe(t=>{this.siteList=t})}getItemName(t){if(this.itemList&&t)return this.itemList.filter(i=>i._id==t)[0].item_name}updateRequest(t){console.log("meaafsdfs",this.details._id,this.purchaseRequestForm.value.remarks,t),this.httpService.PUT(d.Fj,{_id:this.details._id,status:t,approvedBy:this.permissions.user.name,remarks:this.purchaseRequestForm.value.remarks}).subscribe(i=>{this.router.navigate(["/procurement/prlist"])})}getVendorList(){if(null!=this.details.vendor){const t=this.http.get(`${m.N.api_path}${d.Iy}?_id=${this.details.vendor}`);console.log("this is res : "),this.httpService.multipleRequests(t,{}).subscribe(i=>{i&&(this.selectedVendor=i[0].data[0].vendor_name)})}}downloadPRPDF(){this.downloadLoading=!0,this.httpService.GETPDF("generate/prpdf",{template:"pr",id:this.pageId}).subscribe(t=>{this.downloadLoading=!1;var i=new Blob([t],{type:"application/pdf"});let n=(new Date).getTime();(0,$.saveAs)(i,`pr-${n}.pdf`)})}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.userService.getUserss().subscribe(t=>{t.find(n=>n._id===this.permissions.user._id)?(this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:a=>{console.log(a),this.viewPermission=a.dashboard_permissions[0].ParentChildchecklist[19].childList[0].isSelected,this.addPermission=a.dashboard_permissions[0].ParentChildchecklist[19].childList[1].isSelected,this.editPermission=a.dashboard_permissions[0].ParentChildchecklist[19].childList[2].isSelected,this.deletePermission=a.dashboard_permissions[0].ParentChildchecklist[19].childList[3].isSelected},error:a=>{console.log(a)}}),this.route.params.subscribe(a=>{a.id&&this.httpService.GET(`${d.Fj}/detail`,{_id:a.id}).subscribe({next:l=>{this.details=l.data[0],this.getVendorList(),console.log(l.data[0]),this.patchData(l.data[0])},error:l=>{this.router.navigate(["/procurement/prlist"])}})})):(this.snack.notify("Invalid Credentials - User Details not Valid",1),this.auth.removeUser(),this.userService.updateLogin("logout"),this.router.navigate(["/login"]))})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.F0),e.Y36(T.s),e.Y36(y.o),e.Y36(s.qu),e.Y36(g.gz),e.Y36(P.eN),e.Y36(L.e),e.Y36(M.f))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-update-pr-status"]],decls:114,vars:31,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","40px","margin-left","20px"],["src","./assets/images/approval.svg","height","45px"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/app.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/rc.svg"],["src","./assets/images/approval.svg"],[2,"width","100px","margin-left","10px","margin-top","10px","border","1px dashed"],["src","./assets/images/po.svg"],[3,"formGroup"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","20px","width","1100px"],[2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],["placeholder","Enter Type","formControlName","prType",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9F9F9F","cursor","pointer","margin-top","10px","font-family","Poppins",3,"readonly"],["placeholder","Enter title","formControlName","title",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9F9F9F","cursor","pointer","margin-top","10px","font-family","Poppins",3,"readonly"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Auto generate Request Date",3,"matDatepicker","readonly"],["matSuffix","",3,"for"],["date",""],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],[1,"star"],[1,"custom-form-control"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by",3,"matDatepicker","readonly"],["requiredByStartDate",""],["placeholder","Auto generate","formControlName","purchase_request_number","readonly","",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9F9F9F","cursor","pointer","margin-top","10px","font-family","Poppins"],["id","site","placeholder","Select site","formControlName","site",2,"padding","10px","width","200px","border","1px solid #9F9F9F","border-radius","6px","cursor","pointer","margin-top","10px","font-family","Poppins"],[3,"value",4,"ngFor","ngForOf"],["class","flex-div","style","display: flex; flex-direction: column;",4,"ngIf"],[1,"flex-div",2,"display","flex","flex-direction","column","margin","auto"],[2,"color","#4272BF"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group"],[1,"example-radio-button",3,"value"],["class","scroll-bar1",4,"ngIf","ngIfElse"],["noLocalPurchase",""],[1,"row","text-area-section"],["name","","id","","cols","30","rows","10","formControlName","remarks"],[1,"row","button-list"],[4,"ngIf","ngIfElse"],["noAddPermission",""],[2,"padding","8px","width","120px","background-color","#fff","color","#233A61","border","1px solid #94A3B8","border-radius","5px","font-size","14px","font-family","Poppins",3,"click"],["noDeletePermission",""],["noEditPermission",""],[3,"value"],[1,"flex-div",2,"display","flex","flex-direction","column"],["placeholder","Enter Vendor",2,"padding","10px","width","75%","border","1px solid #ccc","border-radius","6px","cursor","pointer","font-family","Poppins",3,"readonly","value"],[1,"scroll-bar1"],[2,"direction","ltr !important","border-left","2px solid #000 !important"],["style","background-color: #F4F4F5;",4,"ngFor","ngForOf"],[2,"background-color","#F4F4F5"],[2,"text-align","center"],[2,"color","#000"],[4,"ngFor","ngForOf"],[3,"href"],[2,"color","blue","text-decoration","underline","font-size","12px","margin-top","-10px"],[2,"padding","8px","width","120px","background-color","#233A61","color","#fff","border-radius","5px","border-color","lightgrey","font-size","14px","font-family","Poppins",3,"click"],["disabled","",2,"padding","8px","width","120px","background-color","#233A61","color","#fff","border-radius","5px","border-color","lightgrey","font-size","14px","font-family","Poppins"],["disabled","",2,"padding","8px","width","120px","background-color","#fff","color","#233A61","border","1px solid #94A3B8","border-radius","5px","font-size","14px","font-family","Poppins"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-toolbar",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"span",3),e._uU(4,"Requisition Approvals"),e.qZA(),e._UZ(5,"span",4),e.qZA(),e.TgZ(6,"div"),e._UZ(7,"hr",5),e.qZA(),e.TgZ(8,"div",6)(9,"div",7)(10,"div"),e._UZ(11,"img",8),e.qZA(),e.TgZ(12,"span",9),e._uU(13,"Purchase\xa0request"),e.qZA(),e.TgZ(14,"div"),e._UZ(15,"mat-divider",10),e.qZA()(),e.TgZ(16,"div",11)(17,"div"),e._UZ(18,"img",12),e.qZA(),e.TgZ(19,"span",13),e._uU(20,"Approvals"),e.qZA(),e.TgZ(21,"div"),e._UZ(22,"mat-divider",10),e.qZA()(),e.TgZ(23,"div",11)(24,"div"),e._UZ(25,"img",14),e.qZA(),e.TgZ(26,"span",9),e._uU(27,"Rate\xa0Comparative"),e.qZA(),e.TgZ(28,"div"),e._UZ(29,"mat-divider",10),e.qZA()(),e.TgZ(30,"div",11)(31,"div"),e._UZ(32,"img",15),e.qZA(),e.TgZ(33,"span",9),e._uU(34,"Rate\xa0Approvals"),e.qZA(),e.TgZ(35,"div"),e._UZ(36,"mat-divider",16),e.qZA()(),e.TgZ(37,"div",11)(38,"div"),e._UZ(39,"img",17),e.qZA(),e.TgZ(40,"span",9),e._uU(41,"Purchase\xa0orders"),e.qZA()()(),e.TgZ(42,"form",18)(43,"mat-card",19)(44,"div",20)(45,"div",21)(46,"label",22),e._uU(47,"Request Type "),e.qZA(),e._UZ(48,"input",23),e.qZA(),e.TgZ(49,"div",21)(50,"label",22),e._uU(51,"Request title "),e.qZA(),e._UZ(52,"input",24),e.qZA(),e.TgZ(53,"div",21)(54,"label",22),e._uU(55,"Request date"),e.qZA(),e.TgZ(56,"mat-form-field",25),e._UZ(57,"input",26)(58,"mat-datepicker-toggle",27)(59,"mat-datepicker",null,28),e.qZA()(),e.TgZ(61,"div",21)(62,"label",29),e._uU(63," Required by "),e.TgZ(64,"span",30),e._uU(65,"*"),e.qZA()(),e.TgZ(66,"div",31)(67,"mat-form-field",25),e._UZ(68,"input",32)(69,"mat-datepicker-toggle",27)(70,"mat-datepicker",null,33),e.qZA()()(),e.TgZ(72,"div",21)(73,"label",22),e._uU(74,"Purchase request no "),e.qZA(),e._UZ(75,"input",34),e.qZA(),e.TgZ(76,"div",21)(77,"label",22),e._uU(78,"Site name "),e.TgZ(79,"span",30),e._uU(80,"*"),e.qZA()(),e.TgZ(81,"mat-select",35),e.YNc(82,Yt,2,2,"mat-option",36),e.qZA()(),e.YNc(83,jt,6,2,"div",37),e.TgZ(84,"div",38)(85,"label",39),e._uU(86,"Local Purchase "),e.TgZ(87,"span",30),e._uU(88,"*"),e.qZA()(),e.TgZ(89,"mat-radio-group",40)(90,"mat-radio-button",41),e._uU(91," Yes "),e.qZA(),e.TgZ(92,"mat-radio-button",41),e._uU(93," No "),e.qZA()()()()(),e.YNc(94,Ht,31,1,"div",42),e.YNc(95,Vt,29,1,"ng-template",null,43,e.W1O),e.TgZ(97,"div",44)(98,"label",22),e._uU(99,"Remarks "),e.qZA(),e._UZ(100,"textarea",45),e.qZA()(),e.TgZ(101,"div",46),e.YNc(102,Kt,3,0,"ng-container",47),e.YNc(103,Wt,2,0,"ng-template",null,48,e.W1O),e.ynx(105),e.TgZ(106,"button",49),e.NdJ("click",function(){return i.downloadPRPDF()}),e._uU(107," Download PR "),e.qZA(),e.BQk(),e.YNc(108,Xt,3,0,"ng-container",47),e.YNc(109,en,2,0,"ng-template",null,50,e.W1O),e.YNc(111,tn,3,0,"ng-container",47),e.YNc(112,nn,2,0,"ng-template",null,51,e.W1O),e.qZA()),2&t){const n=e.MAs(60),r=e.MAs(71),a=e.MAs(96),l=e.MAs(104),p=e.MAs(110),u=e.MAs(113);e.xp6(9),e.Q6J("routerLink",e.DdM(26,on)),e.xp6(7),e.Q6J("routerLink",e.DdM(27,rn)),e.xp6(7),e.Q6J("routerLink",e.DdM(28,an)),e.xp6(7),e.Q6J("routerLink",e.DdM(29,sn)),e.xp6(7),e.Q6J("routerLink",e.DdM(30,ln)),e.xp6(5),e.Q6J("formGroup",i.purchaseRequestForm),e.xp6(6),e.Q6J("readonly",!0),e.xp6(4),e.Q6J("readonly",!0),e.xp6(5),e.Q6J("matDatepicker",n)("readonly",!0),e.xp6(1),e.Q6J("for",n),e.xp6(10),e.Q6J("matDatepicker",r)("readonly",!0),e.xp6(1),e.Q6J("for",r),e.xp6(13),e.Q6J("ngForOf",i.siteList),e.xp6(1),e.Q6J("ngIf","yes"==(null==i.details?null:i.details.local_purchase)),e.xp6(7),e.Q6J("value","yes"),e.xp6(2),e.Q6J("value","no"),e.xp6(2),e.Q6J("ngIf","yes"==(null==i.details?null:i.details.local_purchase))("ngIfElse",a),e.xp6(8),e.Q6J("ngIf",i.addPermission||i.editPermission)("ngIfElse",l),e.xp6(6),e.Q6J("ngIf",i.deletePermission)("ngIfElse",p),e.xp6(3),e.Q6J("ngIf",i.editPermission)("ngIfElse",u)}},dependencies:[N.ey,q.KE,q.R9,I.a8,x.Mq,x.hl,x.nW,A.d,C.Nt,v.VQ,v.U0,R.gD,w.Ye,f.sg,f.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,g.rH,g.Od],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.flex-div[_ngcontent-%COMP%]{width:31%}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:1110px;height:auto;margin-left:30px;margin-top:30px;box-shadow:0 2px 12px #00000040;font-family:Poppins}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;font-size:14px;margin:8px 20px 20px 10px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;width:1000px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}.scroll-bar1[_ngcontent-%COMP%]{height:auto;width:auto;margin-left:25px;margin-bottom:100px;margin-top:50px;overflow:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background-color:"Transparent"}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 30px 20px 0;float:right;gap:10px}.text-area-section[_ngcontent-%COMP%]{width:95%;height:auto;margin-left:30px}']}),o})()},{path:"revise/:id",component:$t}];let pn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[et.S,f.ez,s.UX,E.Z,[g.Bz.forChild(cn)]]}),o})()}}]);