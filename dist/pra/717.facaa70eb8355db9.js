"use strict";(self.webpackChunkpra=self.webpackChunkpra||[]).push([[717],{3717:(te,I,d)=>{d.r(I),d.d(I,{RateComparativeModule:()=>Wt});var g=d(6895),c=d(9299),S=d(1283),r=d(4006),u=d(8608),k=d(7489),U=d(2340),J=d(5439),t=d(4650),b=d(2126),C=d(529),Z=d(6104),y=d(3238),_=d(9549),O=d(4859),A=d(4850),P=d(7392),q=d(4144),T=d(4385),w=d(3683);function Q(i,s){if(1&i&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.label)}}const M=function(i){return["/rate-comparative/update",i]};function V(i,s){if(1&i&&(t.TgZ(0,"td",54),t._uU(1,"Create\xa0Comparative"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,M,e._id))}}const N=function(i){return["/rate-comparative/details",i]};function Y(i,s){if(1&i&&(t.TgZ(0,"td",55),t._uU(1,"Approved Vendors"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,N,e._id))}}function B(i,s){if(1&i&&(t.TgZ(0,"td",56),t._uU(1,"Rejected Rates"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,N,e._id))}}function z(i,s){if(1&i&&(t.TgZ(0,"td",58),t._uU(1,"Revise\xa0Comparative"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,M,e._id))}}function j(i,s){if(1&i&&(t.ynx(0),t.YNc(1,z,2,3,"td",57),t.BQk()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf","revise"==e.status&&"rate_comparitive"==n.stage)}}function E(i,s){1&i&&(t.TgZ(0,"td",60),t._uU(1,"No Permission to Revise Comparative"),t.qZA())}function G(i,s){if(1&i&&t.YNc(0,E,2,0,"td",59),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.Q6J("ngIf","revise"==e.status&&"rate_comparitive"==n.stage)}}function K(i,s){if(1&i&&(t.TgZ(0,"tr")(1,"td",42),t._uU(2," Request\xa0no\xa0 "),t.TgZ(3,"span",43),t._uU(4),t.qZA()(),t._UZ(5,"hr",44),t.TgZ(6,"td",45),t._uU(7),t.qZA(),t._UZ(8,"hr",44),t.TgZ(9,"td",46),t._uU(10,"Title\xa0"),t.TgZ(11,"span",43),t._uU(12),t.qZA()(),t._UZ(13,"hr",44),t.TgZ(14,"td",47),t._uU(15," Site\xa0"),t.TgZ(16,"span",43),t._uU(17),t.qZA()(),t.YNc(18,V,2,3,"td",48),t.YNc(19,Y,2,3,"td",49),t.YNc(20,B,2,3,"td",50),t.YNc(21,j,2,1,"ng-container",51),t.YNc(22,G,1,1,"ng-template",null,52,t.W1O),t.TgZ(24,"td",53)(25,"mat-icon"),t._uU(26," arrow_forward_ios "),t.qZA()()()),2&i){const e=s.$implicit,n=t.MAs(23),o=t.oxw(2);t.xp6(4),t.Oqu(o.reqNo(e.purchase_request_id)),t.xp6(3),t.hij("Requested on: ",e.date,""),t.xp6(5),t.Oqu(e.title),t.xp6(5),t.Oqu(e.siteData.site_name),t.xp6(1),t.Q6J("ngIf","pending"==e.status&&"rate_comparitive"==o.stage),t.xp6(1),t.Q6J("ngIf","rate_approval"==o.stage),t.xp6(1),t.Q6J("ngIf","rejected"==e.status&&"rate_comparitive"==o.stage),t.xp6(1),t.Q6J("ngIf",o.editPermission)("ngIfElse",n)}}function H(i,s){1&i&&(t.TgZ(0,"div",61),t._UZ(1,"img",62),t.TgZ(2,"span"),t._uU(3," No record found"),t.qZA()())}function W(i,s){if(1&i){const e=t.EpF();t.ynx(0,20),t.TgZ(1,"div",21)(2,"div",22)(3,"mat-form-field",23)(4,"mat-icon",24),t._uU(5,"search"),t.qZA(),t.TgZ(6,"input",25),t.NdJ("input",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.search(o,"title"))}),t.qZA()()(),t._UZ(7,"div",26),t.TgZ(8,"div",27)(9,"div",28)(10,"span"),t._uU(11,"Filter\xa0by"),t.qZA()(),t.TgZ(12,"div")(13,"mat-form-field",29)(14,"input",30),t.NdJ("input",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.search(o,"site"))}),t.qZA()()()(),t.TgZ(15,"div",31)(16,"div",32)(17,"span"),t._uU(18,"Filter by Status"),t.qZA()(),t.TgZ(19,"div",33)(20,"mat-form-field",34)(21,"mat-select",35),t.NdJ("selectionChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.onStatusChange(o))}),t.YNc(22,Q,2,2,"mat-option",36),t.qZA()()()()(),t.TgZ(23,"div",37)(24,"table",38)(25,"tbody"),t.YNc(26,K,27,9,"tr",39),t.qZA()(),t.YNc(27,H,4,0,"div",40),t.qZA(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(21),t.Q6J("formControl",e.statusOption),t.xp6(1),t.Q6J("ngForOf",e.statusList),t.xp6(4),t.Q6J("ngForOf",e.rateComparativeList),t.xp6(1),t.Q6J("ngIf",!(e.rateComparativeList&&e.rateComparativeList.length>0))}}function X(i,s){1&i&&(t.TgZ(0,"h3",63),t._uU(1,"You don't have permissions to view."),t.qZA())}const tt=function(){return["/procurement"]},et=function(){return["/procurement/prlist"]},nt=function(){return["/rate-comparative"]},ot=function(){return["/rate-approval"]},it=function(){return["/purchase-order"]};let rt=(()=>{class i{constructor(e,n,o){this.httpService=e,this.http=n,this.snack=o,this.statusOption=new r.NI("pending"),this.statusList=[{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"revise",label:"Revise"}],this.filter_by="status",this.filter_value="pending",this.requestType="new",this.originalRateComparativeList=[],this.stage="rate_comparitive",this.purchaseList=[],this.getList({filter_by:this.filter_by,filter_value:this.filter_value,stage:"rate_comparitive"})}getList(e){this.httpService.GET(u.lu,e).subscribe({next:n=>{if(n.data.forEach(o=>{o.date=J(o.date).format("YYYY-MM-DD")}),console.log(n.data),"superadmin"===this.permissions.user.role)this.originalRateComparativeList=n.data,this.rateComparativeList=n.data;else{const a=n.data.filter(l=>this.siteList.some(p=>p._id===l.site));console.log(a),this.originalRateComparativeList=a,this.rateComparativeList=a}},error:n=>{if(n.errors&&!(0,k.isEmpty)(n.errors)){let o="<ul>";for(let a in n.errors)o+=`<li>${n.errors[a][0]}</li>`;o+="</ul>",this.snack.notifyHtml(o,2)}else this.snack.notify(n.message,2)}})}getReqNO(){const e=this.http.get(`${U.N.api_path}${u.Fj}`);this.httpService.multipleRequests([e],{}).subscribe(n=>{n&&(this.purchaseList=n[0].data)})}reqNo(e){return this.purchaseList.filter(o=>o._id===e)[0].purchase_request_number}onStatusChange(e){let n;"pending"==e.value||"revise"==e.value||"rejected"==e.value?(n="rate_comparitive",this.getList({filter_by:this.filter_by,filter_value:e.value,stage:n})):(n="rate_approval",this.getList({filter_by:this.filter_by,stage:n})),this.stage=n}dateFilter(e){this.originalRateComparativeList&&this.originalRateComparativeList.length>0&&(this.rateComparativeList=e.value?this.originalRateComparativeList.filter(n=>new Date(n.date)==new Date(e.value)):this.originalRateComparativeList)}search(e,n){this.originalRateComparativeList&&this.originalRateComparativeList.length>0&&(this.rateComparativeList="site"==n?e.target.value?this.originalRateComparativeList.filter(o=>o.siteData.site_name.toLowerCase().includes(e.target.value.toLowerCase())):this.originalRateComparativeList:e.target.value?this.originalRateComparativeList.filter(o=>o.title.toLowerCase().includes(e.target.value.toLowerCase())):this.originalRateComparativeList)}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:o=>{this.viewPermission=o.dashboard_permissions[0].ParentChildchecklist[20].childList[0].isSelected,this.addPermission=o.dashboard_permissions[0].ParentChildchecklist[20].childList[1].isSelected,this.editPermission=o.dashboard_permissions[0].ParentChildchecklist[20].childList[2].isSelected},error:o=>{console.log(o)}}),this.getReqNO(),this.siteList=this.permissions.user.sites,console.log("SiteSelect",this.siteList)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.s),t.Y36(C.eN),t.Y36(Z.o))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-rate-comparative-list"]],decls:48,vars:12,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","50px","margin-left","20px"],["src","./assets/images/ratehead.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],["mat-icon-button","",2,"margin-right","40px"],[2,"margin-top","40px"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],["src","./assets/images/ratedown.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/po.svg"],["class","section-body",4,"ngIf","ngIfElse"],["noView",""],[1,"section-body"],[2,"display","flex","flex-direction","row","gap","10px","width","100%"],[2,"margin-left","40px","width","100%","margin-top","30px"],["appearance","outline",1,"searchbar"],["matSuffix",""],["matInput","","type","search","placeholder","search title",1,"search-input",3,"input"],[2,"margin-right","600px","margin-top","30px","display","flex","gap","10px","width","100%"],[2,"margin-top","30px","display","flex","position","relative","right","570px","gap","10px","width","100%"],[2,"margin-top","15px","color","#94A3B8"],["appearance","outline",1,"datebar"],["matInput","","placeholder","Site",3,"input"],[2,"margin-top","30px","display","flex","position","relative","right","570px","gap","10px"],[2,"margin-top","15px","color","#94A3B8","width","110px"],[1,"custom-form-control",2,"position","relative"],["appearance","outline"],[3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"scroll-bar1",2,"width","96%"],[2,"direction","ltr !important","margin-top","-20px"],[4,"ngFor","ngForOf"],["class","no-record-found",4,"ngIf"],[3,"value"],[2,"color","#4272BF","width","200px","text-align","left","padding","10px","font-size","15px"],[2,"color","#000000"],[2,"border","1px solid #D9D9D9","height","30px"],[2,"color","#4272BF","width","500px"],[2,"color","#4272BF","width","300px","font-size","15px","padding","10px"],[2,"color","#4272BF","width","700px","text-align","left","padding","10px","font-size","15px"],["style","background-color: #233A61;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],["style","background-color: #54AA52;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],["style","background-color: #C7323B;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],[4,"ngIf","ngIfElse"],["noEditPermission",""],[2,"width","100px"],[2,"background-color","#233A61","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],[2,"background-color","#54AA52","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],[2,"background-color","#C7323B","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],["style","background-color: rgb(26, 188, 254); color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],[2,"background-color","rgb(26, 188, 254)","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],["style","background-color: rgb(26, 188, 254); color:#fff;width:200px;font-size: 14px;cursor: pointer;","disabled","",4,"ngIf"],["disabled","",2,"background-color","rgb(26, 188, 254)","color","#fff","width","200px","font-size","14px","cursor","pointer"],[1,"no-record-found"],["src","./assets/images/inbox_empty.png","alt",""],[2,"display","flex","justify-content","center","margin-top","2%","font-size","160%","font-weight","bolder","color","grey"]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Rate comparative"),t.qZA(),t._UZ(5,"span",4),t.TgZ(6,"button",5)(7,"mat-icon",6),t._uU(8,"notifications"),t.qZA()()(),t.TgZ(9,"div"),t._UZ(10,"hr",7),t.qZA(),t.TgZ(11,"div",8)(12,"div",9)(13,"div"),t._UZ(14,"img",10),t.qZA(),t.TgZ(15,"span",11),t._uU(16,"Purchase\xa0request"),t.qZA(),t.TgZ(17,"div"),t._UZ(18,"mat-divider",12),t.qZA()(),t.TgZ(19,"div",13)(20,"div"),t._UZ(21,"img",14),t.qZA(),t.TgZ(22,"span",11),t._uU(23,"Approvals"),t.qZA(),t.TgZ(24,"div"),t._UZ(25,"mat-divider",12),t.qZA()(),t.TgZ(26,"div",13)(27,"div"),t._UZ(28,"img",15),t.qZA(),t.TgZ(29,"span",16),t._uU(30,"Rate\xa0Comparative"),t.qZA(),t.TgZ(31,"div"),t._UZ(32,"mat-divider",12),t.qZA()(),t.TgZ(33,"div",13)(34,"div"),t._UZ(35,"img",14),t.qZA(),t.TgZ(36,"span",11),t._uU(37,"Rate\xa0Approvals"),t.qZA(),t.TgZ(38,"div"),t._UZ(39,"mat-divider",12),t.qZA()(),t.TgZ(40,"div",13)(41,"div"),t._UZ(42,"img",17),t.qZA(),t.TgZ(43,"span",11),t._uU(44,"Purchase\xa0orders"),t.qZA()()(),t.YNc(45,W,28,4,"ng-container",18),t.YNc(46,X,2,0,"ng-template",null,19,t.W1O)),2&e){const o=t.MAs(47);t.xp6(12),t.Q6J("routerLink",t.DdM(7,tt)),t.xp6(7),t.Q6J("routerLink",t.DdM(8,et)),t.xp6(7),t.Q6J("routerLink",t.DdM(9,nt)),t.xp6(7),t.Q6J("routerLink",t.DdM(10,ot)),t.xp6(7),t.Q6J("routerLink",t.DdM(11,it)),t.xp6(5),t.Q6J("ngIf",n.viewPermission)("ngIfElse",o)}},dependencies:[g.sg,g.O5,c.rH,c.Od,y.ey,_.KE,_.R9,O.lW,A.d,P.Hw,q.Nt,T.gD,w.Ye,r.JJ,r.oH],styles:[".mat-form-field-appearance-outline .mat-form-field-infix{padding:.6em;width:250px}mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}input[type=text][_ngcontent-%COMP%]{width:60%;border-radius:8px;padding:12px 20px;margin:8px 0;box-sizing:border-box;border:.5px solid #94A3B8;transition:.5s;outline:none;font-family:Poppins;font-size:15px}.requests[_ngcontent-%COMP%]{height:40px;width:1120px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:15px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:15px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:15px;display:flex;align-items:center;justify-content:center}.searchbar[_ngcontent-%COMP%]{width:350px;border-radius:20px;font-family:Poppins}.datebar[_ngcontent-%COMP%]{width:180px;border-radius:20px;font-family:Poppins}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:separate;border-spacing:0 25px;text-align:left;width:100%;font-size:12px;margin-left:30px;margin-bottom:20px;margin-right:-10px}td[_ngcontent-%COMP%]{border:none;text-align:center;padding:8px 1px;color:#233a61;font-style:normal;font-size:medium}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f4f4f5!important}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f4f4f5!important}.scroll-bar1[_ngcontent-%COMP%]{height:600px;width:93%;margin-left:20px;margin-bottom:100px;margin-top:10px;overflow:auto;direction:rtl;overflow-x:hidden}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1E293B;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.no-record-found[_ngcontent-%COMP%]{text-align:center;display:flex;gap:10px;flex-direction:column;align-items:center;justify-content:center}.no-record-found[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:188px}"]}),i})();var f=d(5938),at=d(7009);function st(i,s){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"input",10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._UZ(14,"input",11),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA()()),2&i){const e=s.$implicit,n=s.index,o=t.oxw(2);t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(e.item.item_name),t.xp6(2),t.Oqu(e.item.uomDetail.uom_name),t.xp6(2),t.Oqu(e.item.qty),t.xp6(2),t.Q6J("disabled",!0)("value",e.RequiredQuantity),t.xp6(2),t.Oqu(o.myBrandName(e.item.brandName)),t.xp6(2),t.Q6J("disabled",!0)("value",e.Rate),t.xp6(2),t.hij(" ",e.SubTotalAmount," "),t.xp6(2),t.AsE(" ",e.item.tax.amount,"%(",e.item.tax.name,") "),t.xp6(2),t.hij(" ",e.Total," ")}}function lt(i,s){if(1&i&&(t.ynx(0),t.TgZ(1,"tbody"),t.YNc(2,st,21,13,"tr",9),t.qZA(),t.BQk()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.filledData.items)}}const L=function(i){return{"invalid-input":i}};function pt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr",14),t.ynx(1,15),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td")(11,"input",16),t.NdJ("keypress",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.validateFloat(o))}),t.qZA()(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td")(15,"input",17),t.NdJ("keypress",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.validateFloat(o))}),t.qZA()(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.BQk(),t.qZA()}if(2&i){const e=s.$implicit,n=s.index,o=t.oxw(2);t.xp6(1),t.Q6J("formGroupName",n),t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(e.item_name),t.xp6(2),t.Oqu(e.uomDetail.uom_name),t.xp6(2),t.Oqu(e.qty),t.xp6(2),t.s9C("max",e.qty),t.Q6J("ngClass",t.VKq(12,L,o.vendorItemsForm.get("items").get(n.toString()).get("RequiredQuantity").invalid&&(o.formSubmitted||o.vendorItemsForm.get("items").get(n.toString()).get("RequiredQuantity").touched))),t.xp6(2),t.Oqu(o.myBrandName(e.brandName)),t.xp6(2),t.Q6J("ngClass",t.VKq(14,L,o.vendorItemsForm.get("items").get(n.toString()).get("Rate").invalid&&(o.formSubmitted||o.vendorItemsForm.get("items").get(n.toString()).get("Rate").touched))),t.xp6(2),t.hij(" ",o.calculateSubTotalAmount(n)," "),t.xp6(2),t.hij(" ",e.tax.amount,"% "),t.xp6(2),t.hij(" ",o.calculateTotalAmount(n)," ")}}function dt(i,s){if(1&i&&(t.TgZ(0,"tbody",12),t.YNc(1,pt,22,16,"tr",13),t.qZA()),2&i){const e=t.oxw();t.Q6J("formGroup",e.vendorItemsForm),t.xp6(1),t.Q6J("ngForOf",e.tempFilteredItems)}}function ct(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",18)(2,"button",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onNoClick())}),t._uU(3," Back "),t.qZA()(),t.BQk()}}function mt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",18)(1,"button",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onNoClick())}),t._uU(2," Cancel "),t.qZA(),t.TgZ(3,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onClickSubmit())}),t._uU(4," Submit "),t.qZA()()}}let R=(()=>{class i{constructor(e,n,o,a,l){if(this._snackBar=e,this.formBuilder=n,this.snack=o,this.dialogRef=a,this.data=l,this.formSubmitted=!1,this.firstItemFreight=0,this.brandList=l.brandList,l.type)this.pageDetail=l.dataObj,this.vendorsList=l.vendorsList,this.items=l.items,this.type=l.type,this.filledData=l.filledData,this.VendorDetails=this.vendorsList.find(p=>p._id==this.pageDetail);else{this.pageDetail=l.dataObj,this.vendorsList=l.vendorsList,this.items=l.items,this.vendors=l.vendors,this.filledData=l.filledData,this.category=this.vendors.get("Item_category").value,this.subCategory=this.vendors.get("Item_subCategory").value,this.VendorDetails=this.vendorsList.find(p=>p._id==this.pageDetail),this.tempFilteredItems=this.items.filter(p=>p.categoryDetail._id==this.category._id&&p.subCategoryDetail._id==this.subCategory._id),this.vendorItemsForm=new r.cw({Vendor:new r.NI(this.pageDetail,r.kI.required),category:new r.NI(this.category._id,r.kI.required),subCategory:new r.NI(this.subCategory._id,r.kI.required),items:this.formBuilder.array([])});for(let p=0;p<this.tempFilteredItems.length;p++){const m=this.formBuilder.group({item:new r.NI(this.tempFilteredItems[p]),RequiredQuantity:new r.NI(this.tempFilteredItems[p].qty,r.kI.required),Rate:new r.NI("",[r.kI.required,r.kI.pattern("^[-+]?[0-9]*\\.?[0-9]+$")]),SubTotalAmount:new r.NI("",r.kI.required),Freight:new r.NI(0,r.kI.required),Total:new r.NI("",r.kI.required)});this.vendorItemsForm.get("items").push(m)}this.filledData&&this.fillPage(this.filledData)}}ngOnInit(){this.updateFirstItemFreight(),this.vendorItemsForm.get("items").at(0).get("Freight").valueChanges.subscribe(()=>{this.updateFirstItemFreight()})}fillPage(e){this.vendorItemsForm=e.data}myBrandName(e){return this.brandList.filter(o=>o._id==e)[0].brand_name}calculateSubTotalAmount(e){const n=this.vendorItemsForm.get("items").get(e.toString()).get("Rate").value,o=this.vendorItemsForm.get("items").get(e.toString()).get("RequiredQuantity").value;return this.vendorItemsForm.get("items").get(e.toString()).get("SubTotalAmount").setValue(n*o),n*o}calculateTotalAmount(e){const n=this.vendorItemsForm.get("items").get(e.toString()).get("SubTotalAmount").value+this.vendorItemsForm.get("items").get(e.toString()).get("SubTotalAmount").value*this.tempFilteredItems[e].tax.amount/100,l=(this.vendorItemsForm.get("items").get(e.toString()).get("Freight"),parseInt(n.toString(),10)+0);return this.vendorItemsForm.get("items").get(e.toString()).get("Total").setValue(l),l.toString()}onFreightChange(e){const o=parseFloat(e.target.value)||0;this.firstItemFreight=o;const a=this.vendorItemsForm.get("items");a.length>0&&(a.at(0).get("Freight").setValue(o),this.calculateSubTotalAmount(0),this.calculateTotalAmount(0))}validateFloat(e){const a=String.fromCharCode(e.charCode);!/[0-9\.\-+]/.test(a)&&!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(e.key)&&e.preventDefault()}updateFirstItemFreight(){const e=this.vendorItemsForm.get("items");this.firstItemFreight=e.length>0?e.at(0).get("Freight").value:0}onNoClick(){this.dialogRef.close()}onClickSubmit(){if(this.formSubmitted=!0,this.vendorItemsForm.valid){const e=this.vendorItemsForm.get("items");for(let n=0;n<e.length;n++){const o=e.at(n),a=o.get("Rate");if(!a||""===a.value)return void this._snackBar.open("Please fill in the Rate field for all items","Close",{duration:3e3});const l=o.get("RequiredQuantity");if(!l||""===l.value)return void this._snackBar.open("Please fill in the Quantity field for all items","Close",{duration:3e3})}this.dialogRef.close({option:1,data:this.vendorItemsForm.value})}else this._snackBar.open("Please fill all the required fields","Close",{duration:3e3})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(at.ux),t.Y36(r.qu),t.Y36(Z.o),t.Y36(f.so),t.Y36(f.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-rate-comparative-vendors"]],decls:38,vars:6,consts:[["mat-dialog-title","",1,"mat-dialog-title"],[2,"padding","10px"],[2,"margin-right","20px"],["type","text","placeholder","Freight",1,"cstm-input",3,"value","keypress","input"],["mat-dialog-content","",1,"mat-dialog-content-cstm"],[1,"vendor_list_table"],[4,"ngIf","ngIfElse"],["enterDetails",""],["action",""],[4,"ngFor","ngForOf"],["type","text","placeholder","Quantity",1,"cstm-input",3,"disabled","value"],["type","text","placeholder","Rate",1,"cstm-input",3,"disabled","value"],[3,"formGroup"],["formArrayName","items",4,"ngFor","ngForOf"],["formArrayName","items"],[3,"formGroupName"],["formControlName","RequiredQuantity","placeholder","Quantity","min","0","type","text",1,"cstm-input",2,"width","150px",3,"ngClass","max","keypress"],["formControlName","Rate","type","text","placeholder","Rate",1,"cstm-input",3,"ngClass","keypress"],[1,"footer-template"],["type","button",1,"cstm-btn","theme-btn-color",3,"click"],["type","button",1,"cancel-btn","cstm-btn",3,"click"],["type","submit","color","primary",1,"cstm-btn","theme-btn-color",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2),t.qZA()(),t.TgZ(3,"div",1),t.ynx(4),t.TgZ(5,"label",2),t._uU(6,"Freight + GST "),t.qZA(),t.TgZ(7,"input",3),t.NdJ("keypress",function(a){return n.validateFloat(a)})("input",function(a){return n.onFreightChange(a)}),t.qZA(),t.BQk(),t.qZA(),t.TgZ(8,"div",4)(9,"table",5)(10,"thead")(11,"tr")(12,"th"),t._uU(13,"SNo."),t.qZA(),t.TgZ(14,"th"),t._uU(15," Item name "),t.qZA(),t.TgZ(16,"th"),t._uU(17," UOM "),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Requested Qty"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Required Qty"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Brand Name"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Rate"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Sub Total Amount"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Gst"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Total"),t.qZA()()(),t.YNc(32,lt,3,1,"ng-container",6),t.YNc(33,dt,2,2,"ng-template",null,7,t.W1O),t.qZA()(),t.YNc(35,ct,4,0,"ng-container",6),t.YNc(36,mt,5,0,"ng-template",null,8,t.W1O)),2&e){const o=t.MAs(34),a=t.MAs(37);t.xp6(2),t.Oqu(n.VendorDetails.vendor_name),t.xp6(5),t.Q6J("value",n.firstItemFreight),t.xp6(25),t.Q6J("ngIf",null!=n.type)("ngIfElse",o),t.xp6(3),t.Q6J("ngIf",null!=n.type)("ngIfElse",a)}},dependencies:[g.mk,g.sg,g.O5,r.Fj,r.JJ,r.JL,r.sg,r.u,r.x0,r.CE,f.uh,f.xY],styles:[".mat-mdc-dialog-title[_ngcontent-%COMP%]{border-bottom:0;padding:14px;background:#f3f3f3;display:flex;justify-content:space-between;align-items:center;font-style:normal;font-weight:400;font-size:14px;line-height:16px;text-transform:capitalize;color:#28313b}.mat-mdc-dialog-content-cstm[_ngcontent-%COMP%]{padding-top:10px}.cancel-btn[_ngcontent-%COMP%]{background:#f3f3f3;color:#333}.space-btn[_ngcontent-%COMP%]{margin:0 5px}.mat-mdc-dialog-content[_ngcontent-%COMP%]{margin:0;padding:0 15px}.close-icon[_ngcontent-%COMP%]{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:13px;width:0px;margin-top:-5px;cursor:pointer}.vendor_list_table[_ngcontent-%COMP%]{border:1px solid #ccc;width:100%;overflow:hidden}.vendor_list_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;padding:10px 20px;font-weight:400}.vendor_list_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 20px}.vendor_list_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#eee}.cstm-btn[_ngcontent-%COMP%]{border:0;border-radius:4px;padding:10px 23px;outline:none}.cstm-btn.theme-btn-color[_ngcontent-%COMP%]{background-color:#233a61;color:#fff}.footer-template[_ngcontent-%COMP%]{text-align:center;border-top:1px solid #ccc;margin:30px 0 0;padding-top:22px;display:flex;align-items:center;justify-content:center;gap:10px}.cstm-input[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;padding:5px 10px}.td-subtitle[_ngcontent-%COMP%]{font-size:11px;font-weight:400}.header-subtitle[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.empty-input[_ngcontent-%COMP%]{border:1px solid red}.invalid-input[_ngcontent-%COMP%]{border:2px solid red}"]}),i})();var F=d(4961),D=d(3546),h=d(9602),v=d(1948);function gt(i,s){if(1&i&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function ut(i,s){if(1&i&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.site_name," ")}}function _t(i,s){1&i&&(t.TgZ(0,"div"),t._uU(1," No vendor available "),t.qZA())}function ft(i,s){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=s.$implicit,n=t.oxw(2);t.xp6(1),t.hij(" ",n.detailsOfVendor(e,"topview",0)," ")}}function ht(i,s){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.YNc(6,_t,2,0,"div",53),t.YNc(7,ft,2,1,"p",44),t.qZA()()),2&i){const e=s.$implicit,n=t.oxw();t.xp6(2),t.Oqu(e.categoryDetail.name),t.xp6(2),t.Oqu(e.subCategoryDetail.subcategory_name),t.xp6(2),t.Q6J("ngIf",0===n.isVendorSelected(e).length),t.xp6(1),t.Q6J("ngForOf",n.isVendorSelected(e))}}function xt(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr")(2,"td",54),t._uU(3),t.qZA(),t.TgZ(4,"td",54),t._uU(5),t.qZA(),t.TgZ(6,"td",54),t._uU(7),t.qZA(),t.TgZ(8,"td")(9,"a",55),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.ItemData(a))}),t._uU(10," Items Rates"),t.qZA()()(),t.BQk()}if(2&i){const e=s.$implicit,n=s.index,o=t.oxw();t.xp6(3),t.hij(" ",o.detailsOfVendor(e,"name",n)," "),t.xp6(2),t.hij(" ",(null==e.items[0]||null==e.items[0].item||null==e.items[0].item.categoryDetail?null:e.items[0].item.categoryDetail.name)||"N/A"," "),t.xp6(2),t.hij(" ",(null==e.items[0]||null==e.items[0].item||null==e.items[0].item.subCategoryDetail?null:e.items[0].item.subCategoryDetail.subcategory_name)||"N/A"," ")}}const vt=function(){return["/procurement"]},bt=function(){return["/procurement/prlist"]},Ct=function(){return["/rate-comparative"]},Zt=function(){return["/rate-approval"]},yt=function(){return["/purchase-order"]},At=function(i){return{"background-color":i}};let qt=(()=>{class i{constructor(e,n,o,a,l,p,m){this.router=e,this.httpService=n,this.dialog=o,this.formBuilder=a,this.route=l,this.userService=p,this.http=m,this.load=!1,this.finalVendorArray=[],this.VendorItems=this.formBuilder.array([]),this.purchaseRequestForm=new r.cw({title:new r.NI("",r.kI.required),date:new r.NI("",r.kI.required),expected_delivery_date:new r.NI("",r.kI.required),handle_by:new r.NI({value:"",disabled:!0},r.kI.required),rate_approval_number:new r.NI(""),site:new r.NI({value:"",disabled:!0},r.kI.required),local_purchase:new r.NI({value:"",disabled:!0},r.kI.required),remarks:new r.NI("",[]),items:this.formBuilder.array([]),_id:new r.NI}),this.details={},this.vendorsList=[],this.vendorAssociatedData=[],this.getSiteList(),this.getBrandList(),this.userService.getUserss().subscribe(x=>{this.users=x})}vendorData(e){let n=e._id;$(`.vendor-detail-button-${n}`).hasClass("collapsed")?($(`.vendor-detail-button-${n}`).removeClass("collapsed"),$(`.vendor-detail-${n}`).removeClass("cl-show")):($(`.vendor-detail-button-${n}`).addClass("collapsed"),$(`.vendor-detail-${n}`).addClass("cl-show"))}createItemArrayForm(){return new r.cw({item_id:new r.NI("",r.kI.required),qty:new r.NI("",r.kI.required),category:new r.NI(""),subCategory:new r.NI(""),attachment:new r.NI(""),remark:new r.NI("",r.kI.required),uom:new r.NI("",r.kI.required)})}createItem(e){if(e)return new r.cw({item_id:new r.NI(e.item_id,r.kI.required),qty:new r.NI(e.qty,r.kI.required),category:new r.NI(e.categoryDetail.name),subCategory:new r.NI(e.subCategoryDetail.subcategory_name),attachment:new r.NI(e.attachment),remark:new r.NI(e.remark,r.kI.required),uom:new r.NI(e.uomDetail._id,r.kI.required)})}ItemData(e){console.log("==dataObj==",e),this.dialog.open(R,{data:{dataObj:e.Vendor,vendorsList:this.vendorsList,items:this.details?.items,filledData:e,brandList:this.brandList,type:"detailsPage"}}).afterClosed().subscribe(o=>{})}objectBackToFormGroup(){this.VendorItems.clear();for(let e=0;e<this.details.vendorItems.length;e++){const n={Vendor:this.details.vendorItems[e].Vendor,category:"GST",subCategory:"GST",items:this.details.vendorItems[e].items},o=this.formBuilder.group({Vendor:[n.Vendor,r.kI.required],category:[n.category,r.kI.required],subCategory:[n.subCategory,r.kI.required],items:this.formBuilder.array([])});this.VendorItems.push(o)}}patchData(e){this.purchaseRequestForm.patchValue({title:e.title,date:e.date,expected_delivery_date:e.expected_delivery_date,rate_approval_number:e.rate_approval_number,handle_by:e.handle_by,site:e.site,local_purchase:e.local_purchase,remarks:e.remarks}),this.purchaseRequestForm.controls.remarks.disable()}getSiteList(){this.httpService.GET(u.S3,{}).subscribe(e=>{this.siteList=e.data})}isVendorSelected(e){return this.details.vendorItems.filter(o=>o.category==e.categoryDetail._id&&o.subCategory==e.subCategoryDetail._id)}detailsOfVendor(e,n,o){return this.vendorsList.find(l=>l._id==e.Vendor).vendor_name}getBrandList(){this.httpService.GET(u.Lk,{}).subscribe(e=>{this.brandList=e.data})}ngOnInit(){this.route.params.subscribe(e=>{e.id&&this.httpService.GET(`${u.bG}`,{_id:e.id}).subscribe({next:n=>{this.details=n.data.details,this.objectBackToFormGroup(),this.vendorsList=n.data.vendorsList,this.vendorsList.map(a=>(this.vendorAssociatedData[a._id]=a,a));let o=[];this.filteredItems=this.details?.items.filter(a=>{let l=a.categoryDetail._id+"$"+a.subCategoryDetail._id;return!o.includes(l)&&(o.push(l),!0)}),this.patchData(n.data.details)},error:n=>{this.router.navigate(["/rate-comparative"])}})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.F0),t.Y36(b.s),t.Y36(f.uw),t.Y36(r.qu),t.Y36(c.gz),t.Y36(F.f),t.Y36(C.eN))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-rate-comparative-details"]],decls:137,vars:26,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","50px","margin-left","20px"],["src","./assets/images/RA.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],["mat-icon-button","",2,"margin-right","40px"],[2,"margin-top","40px"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],["src","./assets/images/ratedown.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/po.svg"],[3,"formGroup"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","10px","max-width","100%"],[1,"flex-div",2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],["placeholder","Enter title","formControlName","title","readonly","",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","3px","font-family","Poppins","height","50px"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Auto generate Request Date","readonly","",3,"matDatepicker"],["matSuffix","",3,"for"],["date",""],[1,"flex-div","custom-form-group"],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],[1,"star"],[1,"custom-form-control"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by","readonly","",3,"matDatepicker"],["requiredByStartDate",""],["matInput","","formControlName","handle_by"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Auto generate","formControlName","rate_approval_number","readonly","",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","10px","font-family","Poppins"],["id","site","placeholder","Select site","formControlName","site",2,"padding","10px","width","100","border","1px solid #ccc","border-radius","6px","cursor","pointer","margin-top","10px","font-family","Poppins"],[1,"flex-div",2,"display","flex","flex-direction","column","align-items","center"],[2,"color","#4272BF","margin-bottom","10px"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group"],[1,"example-radio-button",3,"value"],[1,"topcard",2,"margin-top","40px"],[1,"scroll-bar1"],[4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center"],[1,"p-btns-button",3,"disabled"],[2,"direction","ltr !important","border-left","2px solid #000 !important"],[1,"text-area-section"],["name","","id","","cols","30","rows","5","formControlName","remarks"],[1,"button-list"],[1,"p-btns-button",3,"ngStyle","disabled"],[3,"value"],[4,"ngIf"],[2,"text-align","center"],[1,"p-btns",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Rate approvals details"),t.qZA(),t._UZ(5,"span",4),t.TgZ(6,"button",5)(7,"mat-icon",6),t._uU(8,"notifications"),t.qZA()()(),t.TgZ(9,"div"),t._UZ(10,"hr",7),t.qZA(),t.TgZ(11,"div",8)(12,"div",9)(13,"div"),t._UZ(14,"img",10),t.qZA(),t.TgZ(15,"span",11),t._uU(16,"Purchase\xa0request"),t.qZA(),t.TgZ(17,"div"),t._UZ(18,"mat-divider",12),t.qZA()(),t.TgZ(19,"div",13)(20,"div"),t._UZ(21,"img",14),t.qZA(),t.TgZ(22,"span",11),t._uU(23,"Approvals"),t.qZA(),t.TgZ(24,"div"),t._UZ(25,"mat-divider",12),t.qZA()(),t.TgZ(26,"div",13)(27,"div"),t._UZ(28,"img",15),t.qZA(),t.TgZ(29,"span",16),t._uU(30,"Rate\xa0Comparative"),t.qZA(),t.TgZ(31,"div"),t._UZ(32,"mat-divider",12),t.qZA()(),t.TgZ(33,"div",13)(34,"div"),t._UZ(35,"img",14),t.qZA(),t.TgZ(36,"span",11),t._uU(37,"Rate\xa0Approvals"),t.qZA(),t.TgZ(38,"div"),t._UZ(39,"mat-divider",12),t.qZA()(),t.TgZ(40,"div",13)(41,"div"),t._UZ(42,"img",17),t.qZA(),t.TgZ(43,"span",11),t._uU(44,"Purchase\xa0orders"),t.qZA()()(),t.TgZ(45,"form",18)(46,"mat-card",19)(47,"div",20)(48,"div",21)(49,"label",22),t._uU(50,"Request title "),t.qZA(),t._UZ(51,"input",23),t.qZA(),t.TgZ(52,"div",21)(53,"label",22),t._uU(54,"Request date"),t.qZA(),t.TgZ(55,"mat-form-field",24),t._UZ(56,"input",25)(57,"mat-datepicker-toggle",26)(58,"mat-datepicker",null,27),t.qZA()(),t.TgZ(60,"div",28)(61,"label",29),t._uU(62," Required by "),t.TgZ(63,"span",30),t._uU(64,"*"),t.qZA()(),t.TgZ(65,"div",31)(66,"mat-form-field",24),t._UZ(67,"input",32)(68,"mat-datepicker-toggle",26)(69,"mat-datepicker",null,33),t.qZA()()(),t.TgZ(71,"div",28)(72,"label",29),t._uU(73," Handle by "),t.TgZ(74,"span",30),t._uU(75,"*"),t.qZA()(),t.TgZ(76,"div",31)(77,"mat-form-field",24)(78,"mat-select",34),t.YNc(79,gt,2,2,"mat-option",35),t.qZA()()()(),t.TgZ(80,"div",21)(81,"label",22),t._uU(82,"Request no "),t.qZA(),t._UZ(83,"input",36),t.qZA(),t.TgZ(84,"div",21)(85,"label",22),t._uU(86,"Site name "),t.TgZ(87,"span",30),t._uU(88,"*"),t.qZA()(),t.TgZ(89,"mat-select",37),t.YNc(90,ut,2,2,"mat-option",35),t.qZA()(),t.TgZ(91,"div",38)(92,"label",39),t._uU(93,"Local Purchase "),t.TgZ(94,"span",30),t._uU(95,"*"),t.qZA()(),t.TgZ(96,"mat-radio-group",40)(97,"mat-radio-button",41),t._uU(98," Yes "),t.qZA(),t.TgZ(99,"mat-radio-button",41),t._uU(100," No "),t.qZA()()()()(),t.TgZ(101,"mat-card",42)(102,"form")(103,"div",43)(104,"table")(105,"tr")(106,"th"),t._uU(107,"Category"),t.qZA(),t.TgZ(108,"th"),t._uU(109,"Sub Category"),t.qZA(),t.TgZ(110,"th"),t._uU(111,"Vendor"),t.qZA()(),t.YNc(112,ht,8,4,"tr",44),t.qZA()(),t.TgZ(113,"div",45)(114,"button",46),t._uU(115,"Save"),t.qZA()()()(),t.TgZ(116,"div",43)(117,"table",47)(118,"tr")(119,"th"),t._uU(120,"Vendor*"),t.qZA(),t.TgZ(121,"th"),t._uU(122,"Category"),t.qZA(),t.TgZ(123,"th"),t._uU(124,"Sub\xa0category"),t.qZA(),t.TgZ(125,"th"),t._uU(126,"Item"),t.qZA()(),t.TgZ(127,"tbody"),t.YNc(128,xt,11,3,"ng-container",44),t.qZA()()(),t.TgZ(129,"div",48)(130,"label",22),t._uU(131,"Remarks "),t.qZA(),t._UZ(132,"textarea",49),t.qZA(),t.TgZ(133,"div",50)(134,"button",51)(135,"span"),t._uU(136,"Approved"),t.qZA()()()()),2&e){const o=t.MAs(59),a=t.MAs(70);t.xp6(12),t.Q6J("routerLink",t.DdM(19,vt)),t.xp6(7),t.Q6J("routerLink",t.DdM(20,bt)),t.xp6(7),t.Q6J("routerLink",t.DdM(21,Ct)),t.xp6(7),t.Q6J("routerLink",t.DdM(22,Zt)),t.xp6(7),t.Q6J("routerLink",t.DdM(23,yt)),t.xp6(5),t.Q6J("formGroup",n.purchaseRequestForm),t.xp6(11),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(10),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(11),t.Q6J("ngForOf",n.users),t.xp6(11),t.Q6J("ngForOf",n.siteList),t.xp6(7),t.Q6J("value","yes"),t.xp6(2),t.Q6J("value","no"),t.xp6(13),t.Q6J("ngForOf",n.filteredItems),t.xp6(2),t.Q6J("disabled",!0),t.xp6(14),t.Q6J("ngForOf",null==n.details?null:n.details.vendorItems),t.xp6(6),t.Q6J("ngStyle",t.VKq(24,At,"approved"==n.details.status?"#54AA52":"rejected"==n.details.status?"#C7323B":"#233A61"))("disabled",n.load)}},dependencies:[g.sg,g.O5,g.PC,c.rH,c.Od,y.ey,_.KE,_.R9,O.lW,D.a8,h.Mq,h.hl,h.nW,A.d,P.Hw,q.Nt,v.VQ,v.U0,T.gD,w.Ye,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:100%;height:auto;font-family:Poppins;box-shadow:none;border:1px solid #ccc;border-radius:4px}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;width:100%;font-size:14px;margin-bottom:20px;margin-right:20px;margin-top:8px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}form[_ngcontent-%COMP%]{padding:10px 20px}.scroll-bar1[_ngcontent-%COMP%]{margin-top:50px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background-color:"Transparent"}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 0 20px;float:right;gap:10px}.text-area-section[_ngcontent-%COMP%]{width:100%;height:auto;margin:30px 0 0}.text-area-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:100%}.flex-div[_ngcontent-%COMP%]{width:31%}.mat-form-field[_ngcontent-%COMP%]{display:block}.pending[_ngcontent-%COMP%]{padding:8px;width:120px;background-color:#ccc;color:#333;font-size:14px;font-family:Poppins;height:50px;border:none}.p-btns[_ngcontent-%COMP%]{background:#233a61;padding:5px 10px;border-radius:4px;font-size:12px;cursor:pointer}.p-btns[_ngcontent-%COMP%]:hover{opacity:.7}.p-btns-button[_ngcontent-%COMP%]{background:#233a61;padding:7px 40px;border-radius:4px;font-size:12px;cursor:pointer;color:#fff;opacity:.7}.vendor-wapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:40px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-name-cl[_ngcontent-%COMP%]{padding:6px 15px;background:#233a61;color:#fff}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:rgba(7,59,76,.0509803922);padding:6px 15px;margin-bottom:10px;gap:10px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80px;border:1px solid #ccc;border-radius:2px;padding:5px;outline:none}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-label[_ngcontent-%COMP%]{min-width:144px}input[readonly=true][_ngcontent-%COMP%], input[readonly][_ngcontent-%COMP%], .mat-select-disabled[_ngcontent-%COMP%]{opacity:.6}.vendor-detail[_ngcontent-%COMP%]{display:none}.vendor-detail.cl-show[_ngcontent-%COMP%]{display:table-row}']}),i})();function Tt(i,s){if(1&i&&(t.TgZ(0,"mat-option",53),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function wt(i,s){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function It(i,s){if(1&i&&(t.TgZ(0,"mat-option",53),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.site_name," ")}}function kt(i,s){1&i&&(t.TgZ(0,"div"),t._uU(1," No vendor available "),t.qZA())}function Ut(i,s){if(1&i&&(t.TgZ(0,"mat-option",61),t._uU(1),t.qZA()),2&i){const e=s.$implicit,n=t.oxw(3);t.Q6J("value",e._id)("disabled",n.isSelectDisabled),t.xp6(1),t.hij(" ",null==e?null:e.vendor_name," ")}}function Ot(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",57)(1,"mat-form-field",58)(2,"mat-label"),t._uU(3,"Select Vendors"),t.qZA(),t.TgZ(4,"mat-select",59),t.NdJ("selectionChange",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handleVendorChange())}),t.YNc(5,Ut,2,3,"mat-option",60),t.qZA()()()}if(2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(5),t.Q6J("ngForOf",n.isVendorSelected(e))}}function Pt(i,s){if(1&i&&(t.TgZ(0,"tr",54)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.YNc(6,kt,2,0,"div",51),t.YNc(7,Ot,6,1,"ng-template",55,56,t.W1O),t.qZA()()),2&i){const e=s.$implicit,n=s.index,o=t.MAs(8),a=t.oxw();t.xp6(2),t.Oqu(e.categoryDetail.name),t.xp6(2),t.Oqu(e.subCategoryDetail.subcategory_name),t.xp6(2),t.Q6J("ngIf",0===a.isVendorSelected(e).length)("ngIfElse",o),t.xp6(1),t.Q6J("formGroupName",n)}}function Mt(i,s){1&i&&(t.ynx(0),t.TgZ(1,"p",67),t._uU(2,"Completed"),t.qZA(),t.BQk())}function Nt(i,s){1&i&&(t.TgZ(0,"p",68),t._uU(1,"Pending"),t.qZA())}function Lt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",64),t._uU(2),t.qZA(),t.TgZ(3,"td",64),t._uU(4),t.qZA(),t.TgZ(5,"td",64),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"a",65),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw(),p=l.$implicit,m=l.index,x=t.oxw(2);return t.KtG(x.ItemData(a,p,m))}),t._uU(9," Items Rates"),t.qZA()(),t.TgZ(10,"td"),t.YNc(11,Mt,3,0,"ng-container",51),t.YNc(12,Nt,2,0,"ng-template",null,66,t.W1O),t.qZA()()}if(2&i){const e=s.$implicit,n=t.MAs(13),o=t.oxw(),a=o.$implicit,l=o.index,p=t.oxw(2);t.xp6(2),t.hij(" ",p.detailsOfVendor(e)," "),t.xp6(2),t.hij(" ",a.get("Item_category").value.name," "),t.xp6(2),t.hij(" ",a.get("Item_subCategory").value.subcategory_name," "),t.xp6(5),t.Q6J("ngIf",p.ItemwiseVendorRate.has(e[l]))("ngIfElse",n)}}function Rt(i,s){if(1&i&&(t.ynx(0),t.YNc(1,Lt,14,5,"tr",63),t.BQk()),2&i){const e=s.$implicit;t.xp6(1),t.Q6J("ngForOf",e.get("selectedVendors").value)}}function Ft(i,s){if(1&i&&(t.TgZ(0,"div",43)(1,"table",62)(2,"tr")(3,"th"),t._uU(4,"Vendor*"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Category"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Sub\xa0category"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Item"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Status"),t.qZA()(),t.TgZ(13,"tbody"),t.YNc(14,Rt,2,1,"ng-container",63),t.qZA()()()),2&i){const e=t.oxw();t.xp6(14),t.Q6J("ngForOf",e.vendorArray.controls)}}function Dt(i,s){1&i&&(t.TgZ(0,"span"),t._uU(1,"Submit"),t.qZA())}function St(i,s){1&i&&(t.TgZ(0,"span"),t._uU(1,"Please wait..."),t.qZA())}function Jt(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",46),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.updateRequest())}),t.YNc(2,Dt,2,0,"span",34),t.YNc(3,St,2,0,"span",34),t.qZA(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.load),t.xp6(1),t.Q6J("ngIf",!e.load),t.xp6(1),t.Q6J("ngIf",e.load)}}function Qt(i,s){1&i&&(t.TgZ(0,"span"),t._uU(1,"No Permission to Submit"),t.qZA())}function Vt(i,s){if(1&i&&(t.TgZ(0,"button",69),t.YNc(1,Qt,2,0,"span",34),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.load)}}const Yt=function(){return["/procurement"]},Bt=function(){return["/procurement/prlist"]},zt=function(){return["/rate-comparative"]},jt=function(){return["/rate-approval"]},Et=function(){return["/purchase-order"]};let $t=(()=>{class i{constructor(e,n,o,a,l,p,m,x){this.router=e,this.httpService=n,this.snack=o,this.formBuilder=a,this.route=l,this.dialog=p,this.http=m,this.userService=x,this.load=!1,this.flag=!1,this.finalVendorArray=[],this.VendorItems=[],this.isButtonDisabled=!0,this.isSelectDisabled=!1,this.ItemwiseVendorRate=new Map,this.rateComparativeForm=new r.cw({title:new r.NI("",r.kI.required),date:new r.NI("",r.kI.required),expected_delivery_date:new r.NI("",r.kI.required),handle_by:new r.NI({value:"",disabled:!0},r.kI.required),rate_approval_number:new r.NI(""),site:new r.NI({value:"",disabled:!0},r.kI.required),local_purchase:new r.NI({value:"",disabled:!0},r.kI.required),remarks:new r.NI("",[]),_id:new r.NI}),this.details={},this.vendorsList=[],this.vendorAssociatedData=[],this.filteredItems=[],this.vendorForm=this.formBuilder.group({vendor:this.formBuilder.array([])}),this.getBrandList(),this.getList(),this.userService.getUserss().subscribe(Xt=>{this.users=Xt})}ItemData(e,n,o){let a=this.finalVendorArray.findIndex(p=>p[o]==e[o]);console.log("dataObj",e[o]),console.log("vndorsList",this.vendorsList),console.log("filledData",this.VendorItems[a]),this.dialog.open(R,{data:{dataObj:e[0],vendorsList:this.vendorsList,items:this.details?.items,vendors:n,filledData:this.VendorItems[a],brandList:this.brandList}}).afterClosed().subscribe(p=>{p&&1===p.option?(this.VendorItems[a]=p,this.ItemwiseVendorRate.set(e[o],p.data.status)):this.ItemwiseVendorRate.delete(e[o]),console.log("VendorItems[index]",this.VendorItems[a]),console.log("itemWiseVendorRate",this.ItemwiseVendorRate)})}getList(){const e=this.http.get(`${U.N.api_path}${u.S3}`);this.httpService.multipleRequests([e],{}).subscribe(n=>{n&&(this.siteList=n[0].data)})}patchData(e){let n=JSON.parse(localStorage.getItem("loginData"));this.rateComparativeForm.patchValue({title:e.title,date:e.date,expected_delivery_date:e.expected_delivery_date,rate_approval_number:e.rate_approval_number,handle_by:n.user._id,site:e.site,local_purchase:e.local_purchase})}createItemArrayForm(){return new r.cw({item_id:new r.NI("",r.kI.required),qty:new r.NI("",r.kI.required),category:new r.NI(""),subCategory:new r.NI(""),attachment:new r.NI(""),remark:new r.NI("",r.kI.required),uom:new r.NI("",r.kI.required)})}addItems(e){}createItem(e){if(e)return new r.cw({item_id:new r.NI(e.item_id,r.kI.required),qty:new r.NI(e.qty,r.kI.required),category:new r.NI(e.categoryDetail.name),subCategory:new r.NI(e.subCategoryDetail.subcategory_name),attachment:new r.NI(e.attachment),remark:new r.NI(e.remark,r.kI.required),uom:new r.NI(e.uomDetail._id,r.kI.required)})}getSiteList(){this.httpService.GET(u.S3,{}).subscribe(e=>{this.siteList=e})}updateRequest(){if(this.VendorItems.some(o=>""===o))return void this.snack.notify("Some items rates are pending",2);if(!this.rateComparativeForm.valid)return;let e=JSON.parse(localStorage.getItem("loginData")),n=this.rateComparativeForm.value;n._id=this.details._id,n.items=this.details.items,n.stage="rate_approval",n.handle_by=e.user._id;for(let o=0;o<this.VendorItems.length;o++)this.VendorItems[o]=this.VendorItems[o].data;n.vendorItems=this.VendorItems,this.load=!0,console.log("there",n),this.httpService.PUT(u.lu,n).subscribe({next:o=>{this.snack.notify("Detail has been updated",1),this.router.navigate(["/rate-comparative"]),this.load=!1},error:o=>{if(this.load=!1,o.errors&&!(0,k.isEmpty)(o.errors)){let a="<ul>";for(let l in o.errors)a+=`<li>${o.errors[l][0]}</li>`;a+="</ul>",this.snack.notifyHtml(a,2)}else this.snack.notify(o.message,2)}})}isVendorSelected(e){return this.vendorsList.filter(o=>o.category.includes(e.categoryDetail._id)&&o.SubCategory.includes(e.subCategoryDetail._id))}get vendorArray(){return this.vendorForm.get("vendor")}handleVendorChange(){this.flag=!1,this.isButtonDisabled=!1}getBrandList(){this.httpService.GET(u.Lk,{}).subscribe(e=>{this.brandList=e.data})}save(){let e=0;this.flag=!0,this.isButtonDisabled=!0,this.isSelectDisabled=!0,this.finalVendorArray.length=0,this.VendorItems.length=0;for(let o of this.vendorArray.controls)for(let a of o.get("selectedVendors").value)this.finalVendorArray.push([a,e]),this.VendorItems.push(""),e++,console.log(e,"I");let n=0;for(let o=0;o<this.vendorForm.get("vendor").value.length;o++){let a=this.vendorForm.get("vendor").value[o].selectedVendors;for(let l=0;l<a.length;l++)a[l]=[a[l],n],n++}}detailsOfVendor(e){return this.vendorsList.find(o=>o._id==e[0]).vendor_name}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:o=>{this.viewPermission=o.dashboard_permissions[0].ParentChildchecklist[20].childList[0].isSelected,this.addPermission=o.dashboard_permissions[0].ParentChildchecklist[20].childList[1].isSelected,this.editPermission=o.dashboard_permissions[0].ParentChildchecklist[20].childList[2].isSelected},error:o=>{console.log(o)}}),this.route.params.subscribe(o=>{o.id&&this.httpService.GET(`${u.bG}`,{_id:o.id}).subscribe({next:a=>{this.details=a.data.details,this.vendorsList=a.data.vendorsList,this.vendorsList.map(p=>(this.vendorAssociatedData[p._id]=p,p));let l=[];this.filteredItems=this.details?.items.filter(p=>{let m=p.categoryDetail._id+"$"+p.subCategoryDetail._id;return!l.includes(m)&&(l.push(m),!0)}),this.filteredItems.forEach(p=>{let m=this.formBuilder.group({Item_category:p.categoryDetail,Item_subCategory:p.subCategoryDetail,selectedVendors:new r.NI([])});this.vendorForm.get("vendor").push(m)}),this.patchData(a.data.details)},error:a=>{}})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.F0),t.Y36(b.s),t.Y36(Z.o),t.Y36(r.qu),t.Y36(c.gz),t.Y36(f.uw),t.Y36(C.eN),t.Y36(F.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-rate-comparative-update"]],decls:121,vars:26,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","50px","margin-left","20px"],["src","./assets/images/RA.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],["src","./assets/images/ratedown.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/po.svg"],[3,"formGroup"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","10px","max-width","100%"],[1,"flex-div",2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],["placeholder","Enter title","formControlName","title","readonly","",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","3px","font-family","Poppins","height","50px"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Auto generate Request Date","readonly","",3,"matDatepicker"],["matSuffix","",3,"for"],["date",""],[1,"flex-div","custom-form-group"],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],[1,"star"],[1,"custom-form-control"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by","readonly","",3,"matDatepicker"],["requiredByStartDate",""],["matInput","","formControlName","handle_by"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"custom-form-control","flex-div"],["id","site","placeholder","Select site","matInput","","formControlName","site"],[1,"flex-div",2,"display","flex","flex-direction","column","margin-left","10px"],[2,"color","#4272BF","margin-bottom","10px"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group"],[1,"example-radio-button",2,"margin-right","10px",3,"value"],[1,"example-radio-button",3,"value"],[1,"topcard",2,"margin-top","40px"],[1,"scroll-bar1"],["formArrayName","vendor",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center"],[1,"p-btns-button",3,"disabled","click"],["class","scroll-bar1",4,"ngIf"],[1,"text-area-section"],["name","","id","","cols","30","rows","5","formControlName","remarks"],[1,"button-list"],[4,"ngIf","ngIfElse"],["noAddPermission",""],[3,"value"],["formArrayName","vendor"],[3,"formGroupName"],["Option",""],[1,"col-md-3"],["appearance","outline",2,"width","max-content"],["matInput","","multiple","","formControlName","selectedVendors",3,"selectionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],[2,"direction","ltr !important","border-left","2px solid #000 !important"],[4,"ngFor","ngForOf"],[2,"text-align","center"],[1,"p-btns",3,"click"],["pendingView",""],[2,"color","green"],[2,"color","red"],["disabled","",1,"p-btns-button"]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Rate comparative "),t.qZA(),t._UZ(5,"span",4),t.qZA(),t.TgZ(6,"div"),t._UZ(7,"hr",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7)(10,"div"),t._UZ(11,"img",8),t.qZA(),t.TgZ(12,"span",9),t._uU(13,"Purchase\xa0request"),t.qZA(),t.TgZ(14,"div"),t._UZ(15,"mat-divider",10),t.qZA()(),t.TgZ(16,"div",11)(17,"div"),t._UZ(18,"img",12),t.qZA(),t.TgZ(19,"span",9),t._uU(20,"Approvals"),t.qZA(),t.TgZ(21,"div"),t._UZ(22,"mat-divider",10),t.qZA()(),t.TgZ(23,"div",11)(24,"div"),t._UZ(25,"img",13),t.qZA(),t.TgZ(26,"span",14),t._uU(27,"Rate\xa0Comparative"),t.qZA(),t.TgZ(28,"div"),t._UZ(29,"mat-divider",10),t.qZA()(),t.TgZ(30,"div",11)(31,"div"),t._UZ(32,"img",12),t.qZA(),t.TgZ(33,"span",9),t._uU(34,"Rate\xa0Approvals"),t.qZA(),t.TgZ(35,"div"),t._UZ(36,"mat-divider",10),t.qZA()(),t.TgZ(37,"div",11)(38,"div"),t._UZ(39,"img",15),t.qZA(),t.TgZ(40,"span",9),t._uU(41,"Purchase\xa0orders"),t.qZA()()(),t.TgZ(42,"form",16)(43,"mat-card",17)(44,"div",18)(45,"div",19)(46,"label",20),t._uU(47,"Request title "),t.qZA(),t._UZ(48,"input",21),t.qZA(),t.TgZ(49,"div",19)(50,"label",20),t._uU(51,"Request date"),t.qZA(),t.TgZ(52,"mat-form-field",22),t._UZ(53,"input",23)(54,"mat-datepicker-toggle",24)(55,"mat-datepicker",null,25),t.qZA()(),t.TgZ(57,"div",26)(58,"label",27),t._uU(59," Required by "),t.TgZ(60,"span",28),t._uU(61,"*"),t.qZA()(),t.TgZ(62,"div",29)(63,"mat-form-field",22),t._UZ(64,"input",30)(65,"mat-datepicker-toggle",24)(66,"mat-datepicker",null,31),t.qZA()()(),t.TgZ(68,"div",26)(69,"label",27),t._uU(70," Handle by "),t.TgZ(71,"span",28),t._uU(72,"*"),t.qZA()(),t.TgZ(73,"div",29)(74,"mat-form-field",22)(75,"mat-select",32),t.YNc(76,Tt,2,2,"mat-option",33),t.qZA(),t.YNc(77,wt,2,0,"mat-error",34),t.qZA()()(),t.TgZ(78,"div",35)(79,"label",20),t._uU(80,"Site name "),t.TgZ(81,"span",28),t._uU(82,"*"),t.qZA()(),t.TgZ(83,"mat-form-field",22)(84,"mat-select",36),t.YNc(85,It,2,2,"mat-option",33),t.qZA()()(),t.TgZ(86,"div",37)(87,"label",38),t._uU(88,"Local Purchase "),t.TgZ(89,"span",28),t._uU(90,"*"),t.qZA()(),t.TgZ(91,"mat-radio-group",39)(92,"mat-radio-button",40),t._uU(93," Yes "),t.qZA(),t.TgZ(94,"mat-radio-button",41),t._uU(95," No "),t.qZA()()()()(),t.TgZ(96,"mat-card",42),t._uU(97," Select your vendor for each Category and Subcategory "),t.TgZ(98,"form",16)(99,"div",43)(100,"table")(101,"tr")(102,"th"),t._uU(103,"Category"),t.qZA(),t.TgZ(104,"th"),t._uU(105,"Sub Category"),t.qZA(),t.TgZ(106,"th"),t._uU(107,"Vendor"),t.qZA()(),t.YNc(108,Pt,9,5,"tr",44),t.qZA()(),t.TgZ(109,"div",45)(110,"button",46),t.NdJ("click",function(){return n.save()}),t._uU(111,"Save"),t.qZA()()()(),t.YNc(112,Ft,15,1,"div",47),t.TgZ(113,"div",48)(114,"label",20),t._uU(115,"Remarks "),t.qZA(),t._UZ(116,"textarea",49),t.qZA(),t.TgZ(117,"div",50),t.YNc(118,Jt,4,3,"ng-container",51),t.YNc(119,Vt,2,1,"ng-template",null,52,t.W1O),t.qZA()()),2&e){const o=t.MAs(56),a=t.MAs(67),l=t.MAs(120);t.xp6(9),t.Q6J("routerLink",t.DdM(21,Yt)),t.xp6(7),t.Q6J("routerLink",t.DdM(22,Bt)),t.xp6(7),t.Q6J("routerLink",t.DdM(23,zt)),t.xp6(7),t.Q6J("routerLink",t.DdM(24,jt)),t.xp6(7),t.Q6J("routerLink",t.DdM(25,Et)),t.xp6(5),t.Q6J("formGroup",n.rateComparativeForm),t.xp6(11),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(10),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(11),t.Q6J("ngForOf",n.users),t.xp6(1),t.Q6J("ngIf",null==n.rateComparativeForm.controls.handle_by.errors?null:n.rateComparativeForm.controls.handle_by.errors.required),t.xp6(8),t.Q6J("ngForOf",n.siteList),t.xp6(7),t.Q6J("value","yes"),t.xp6(2),t.Q6J("value","no"),t.xp6(4),t.Q6J("formGroup",n.vendorForm),t.xp6(10),t.Q6J("ngForOf",n.filteredItems),t.xp6(2),t.Q6J("disabled",n.isButtonDisabled),t.xp6(2),t.Q6J("ngIf",n.flag),t.xp6(6),t.Q6J("ngIf",n.addPermission||n.editPermission)("ngIfElse",l)}},dependencies:[g.sg,g.O5,c.rH,c.Od,y.ey,_.TO,_.KE,_.hX,_.R9,D.a8,h.Mq,h.hl,h.nW,A.d,q.Nt,v.VQ,v.U0,T.gD,w.Ye,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,r.x0,r.CE],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.p-btns-button[_ngcontent-%COMP%]:disabled{opacity:.5}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:100%;height:auto;font-family:Poppins;box-shadow:none;border:1px solid #ccc;border-radius:4px}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;width:100%;font-size:14px;margin-bottom:20px;margin-right:20px;margin-top:8px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}form[_ngcontent-%COMP%]{padding:10px 20px}.scroll-bar1[_ngcontent-%COMP%]{margin-top:50px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background-color:"Transparent"}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 0 20px;float:right;gap:10px}.text-area-section[_ngcontent-%COMP%]{width:100%;height:auto;margin:30px 0 0}.text-area-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:100%}.flex-div[_ngcontent-%COMP%]{width:31%}.mat-form-field[_ngcontent-%COMP%]{display:block}.pending[_ngcontent-%COMP%]{padding:8px;width:120px;background-color:#ccc;color:#333;font-size:14px;font-family:Poppins;height:50px;border:none}.p-btns[_ngcontent-%COMP%]{background:#233a61;padding:5px 10px;border-radius:4px;font-size:12px;cursor:pointer}.p-btns[_ngcontent-%COMP%]:hover{opacity:.7}.p-btns-button[_ngcontent-%COMP%]{background:#233a61;border:1px solid #233a61;padding:7px 40px;border-radius:4px;font-size:12px;cursor:pointer;color:#fff}.p-btns-button[_ngcontent-%COMP%]:hover{opacity:.7}.vendor-wapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:40px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-name-cl[_ngcontent-%COMP%]{padding:6px 15px;background:#233a61;color:#fff}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:rgba(7,59,76,.0509803922);padding:6px 15px;margin-bottom:10px;gap:10px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80px;border:1px solid #ccc;border-radius:2px;padding:5px;outline:none}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-label[_ngcontent-%COMP%]{min-width:144px}input[readonly=true][_ngcontent-%COMP%], input[readonly][_ngcontent-%COMP%], .mat-select-disabled[_ngcontent-%COMP%]{opacity:.6}']}),i})();var Gt=d(8898),Kt=d(9836);const Ht=[{path:"",component:rt},{path:"details/:id",component:qt},{path:"update/:id",component:$t}];let Wt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.ez,c.Bz,Gt.S,r.UX,Kt.w,S.Z,[c.Bz.forChild(Ht)]]}),i})()}}]);