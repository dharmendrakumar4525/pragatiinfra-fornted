"use strict";(self.webpackChunkpra=self.webpackChunkpra||[]).push([[686],{5686:(en,I,_)=>{_.r(I),_.d(I,{ProcurmentModuleModule:()=>Xt});var h=_(6895),g=_(9299),D=_(1283),o=_(4006),d=_(8608),q=_(5439),m=_(2340),e=_(4650),v=_(2126),A=_(6104),P=_(529),R=_(7957),w=_(3238),Z=_(9549),U=_(3546),f=_(9602),y=_(4850),F=_(7392),T=_(4144),k=_(4385),C=_(3683);function S(r,l){if(1&r&&(e.TgZ(0,"mat-option",48),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function Y(r,l){if(1&r&&(e.TgZ(0,"mat-option",48),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.site_name," ")}}function $(r,l){if(1&r&&(e.TgZ(0,"mat-option",48),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.vendor_name," ")}}function j(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",26)(1,"label",27),e._uU(2,"Vendor"),e.TgZ(3,"span",28),e._uU(4,"*"),e.qZA()(),e.TgZ(5,"mat-select",49),e.NdJ("selectionChange",function(n){e.CHM(t);const a=e.oxw(3);return e.KtG(a.onVendorSelection(n))}),e.YNc(6,$,2,2,"mat-option",30),e.qZA()()}if(2&r){const t=e.oxw(3);e.xp6(6),e.Q6J("ngForOf",t.vendorList)}}function E(r,l){if(1&r&&(e.TgZ(0,"mat-option",48),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.item_name," ")}}function B(r,l){if(1&r&&(e.TgZ(0,"mat-option",48),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.brand_name," ")}}function z(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"li",76),e._uU(1),e.TgZ(2,"button",77),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw(2).index,c=e.oxw(4);return e.KtG(c.removeFile(s,a))}),e._uU(3," x"),e.qZA()()}if(2&r){const t=l.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function G(r,l){if(1&r&&(e.TgZ(0,"div")(1,"ul"),e.YNc(2,z,4,1,"li",75),e.qZA()()),2&r){const t=e.oxw().index,i=e.oxw(4);let n;e.xp6(2),e.Q6J("ngForOf",null==i.items||null==i.items.value||null==(n=i.items.value.at(t))?null:n.files)}}function H(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"a",78),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().index,a=e.oxw(4);return e.KtG(a.delete(n))}),e._UZ(1,"i",79),e.qZA()}}function V(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr",58)(1,"td",59),e._uU(2),e.qZA(),e.ynx(3,60),e.TgZ(4,"td")(5,"mat-form-field",61)(6,"input",62),e.NdJ("input",function(n){e.CHM(t);const a=e.oxw(4);return e.KtG(a.searchItem(n))}),e.qZA(),e.TgZ(7,"mat-autocomplete",63,64),e.NdJ("optionSelected",function(n){const s=e.CHM(t).index,c=e.oxw(4);return e.KtG(c.selectedItem(n,s))}),e.YNc(9,E,2,2,"mat-option",30),e.qZA()()(),e.TgZ(10,"td",65),e._uU(11),e.qZA(),e.TgZ(12,"td",65),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._UZ(17,"input",66),e.qZA(),e.TgZ(18,"td")(19,"mat-form-field",61)(20,"input",67),e.NdJ("input",function(n){e.CHM(t);const a=e.oxw(4);return e.KtG(a.searchBrand(n))}),e.qZA(),e.TgZ(21,"mat-autocomplete",68,69),e.YNc(23,B,2,2,"mat-option",30),e.qZA()()(),e.TgZ(24,"td"),e._UZ(25,"input",70),e.qZA(),e.TgZ(26,"td"),e._UZ(27,"input",71),e.qZA(),e.TgZ(28,"td")(29,"input",72),e.NdJ("change",function(n){const s=e.CHM(t).index,c=e.oxw(4);return e.KtG(c.onFilesSelected(n,s))}),e.qZA(),e.YNc(30,G,3,1,"div",22),e.qZA(),e.TgZ(31,"td")(32,"div",73),e.YNc(33,H,2,0,"a",74),e.qZA()(),e.BQk(),e.qZA()}if(2&r){const t=l.$implicit,i=l.index,n=e.MAs(8),a=e.MAs(22),s=e.oxw(4);let c,p,u,x;e.xp6(2),e.hij(" ",i+1," "),e.xp6(1),e.Q6J("formGroupName",i),e.xp6(3),e.Q6J("matAutocomplete",n),e.xp6(1),e.Q6J("panelWidth","auto")("displayWith",s.displayItemFn),e.xp6(2),e.Q6J("ngForOf",s.filteredItemList),e.xp6(2),e.hij(" ",null==(c=t.get("category"))?null:c.value," "),e.xp6(2),e.hij(" ",null==(p=t.get("subCategory"))?null:p.value," "),e.xp6(2),e.hij(" ",null==(u=t.get("uom"))?null:u.value," "),e.xp6(5),e.Q6J("matAutocomplete",a),e.xp6(1),e.Q6J("displayWith",s.displayBrandFn)("panelWidth","auto"),e.xp6(2),e.Q6J("ngForOf",s.filteredBrandList),e.xp6(7),e.Q6J("ngIf",null==s.items||null==s.items.value||null==(x=s.items.value.at(i))?null:x.files),e.xp6(3),e.Q6J("ngIf",i>0)}}function K(r,l){1&r&&(e.TgZ(0,"button",80),e._uU(1," Submit "),e.qZA())}function W(r,l){1&r&&(e.TgZ(0,"h2",81),e._uU(1," You don't have permission to add "),e.qZA())}function X(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",50)(2,"table",51)(3,"tr")(4,"th"),e._uU(5,"S\xa0No"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Item*"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Category"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Sub\xa0category"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Uom*"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Quantity*"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Brand Name"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Rate"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Remarks"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Upload"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Action"),e.qZA()(),e.TgZ(26,"tbody"),e.YNc(27,V,34,15,"tr",52),e.qZA()()(),e.TgZ(28,"div",53)(29,"div")(30,"button",54),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.addItem())}),e._uU(31," Add Item + "),e.qZA()()(),e.TgZ(32,"div",55),e.YNc(33,K,2,0,"button",56),e.YNc(34,W,2,0,"h2",57),e.qZA(),e.BQk()}if(2&r){const t=e.oxw(3);e.xp6(27),e.Q6J("ngForOf",t.purchaseRequestForm.get("items").controls),e.xp6(6),e.Q6J("ngIf",t.addPermission),e.xp6(1),e.Q6J("ngIf",!t.addPermission)}}function ee(r,l){if(1&r&&(e.TgZ(0,"mat-option",48),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.item_name," ")}}function te(r,l){if(1&r&&(e.TgZ(0,"mat-option",48),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.brand_name," ")}}function ne(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"li",76),e._uU(1),e.TgZ(2,"button",83),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw(2).index,c=e.oxw(4);return e.KtG(c.removeFile(s,a))}),e._uU(3," x"),e.qZA()()}if(2&r){const t=l.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function ie(r,l){if(1&r&&(e.TgZ(0,"div")(1,"ul"),e.YNc(2,ne,4,1,"li",75),e.qZA()()),2&r){const t=e.oxw().index,i=e.oxw(4);let n;e.xp6(2),e.Q6J("ngForOf",null==i.items||null==i.items.value||null==(n=i.items.value.at(t))?null:n.files)}}function re(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"a",78),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().index,a=e.oxw(4);return e.KtG(a.delete(n))}),e._UZ(1,"i",79),e.qZA()}}function oe(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr",58)(1,"td",59),e._uU(2),e.qZA(),e.ynx(3,60),e.TgZ(4,"td")(5,"mat-form-field",61)(6,"input",62),e.NdJ("input",function(n){e.CHM(t);const a=e.oxw(4);return e.KtG(a.searchItem(n))}),e.qZA(),e.TgZ(7,"mat-autocomplete",63,64),e.NdJ("optionSelected",function(n){const s=e.CHM(t).index,c=e.oxw(4);return e.KtG(c.selectedItem(n,s))}),e.YNc(9,ee,2,2,"mat-option",30),e.qZA()()(),e.TgZ(10,"td",65),e._uU(11),e.qZA(),e.TgZ(12,"td",65),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._UZ(17,"input",66),e.qZA(),e.TgZ(18,"td")(19,"mat-form-field",61)(20,"input",67),e.NdJ("input",function(n){e.CHM(t);const a=e.oxw(4);return e.KtG(a.searchBrand(n))}),e.qZA(),e.TgZ(21,"mat-autocomplete",68,69),e.YNc(23,te,2,2,"mat-option",30),e.qZA()()(),e.TgZ(24,"td"),e._UZ(25,"input",71),e.qZA(),e.TgZ(26,"td")(27,"input",72),e.NdJ("change",function(n){const s=e.CHM(t).index,c=e.oxw(4);return e.KtG(c.onFilesSelected(n,s))}),e.qZA(),e.YNc(28,ie,3,1,"div",22),e.qZA(),e.TgZ(29,"td")(30,"div",73),e.YNc(31,re,2,0,"a",74),e.qZA()(),e.BQk(),e.qZA()}if(2&r){const t=l.$implicit,i=l.index,n=e.MAs(8),a=e.MAs(22),s=e.oxw(4);let c,p,u,x;e.xp6(2),e.hij(" ",i+1," "),e.xp6(1),e.Q6J("formGroupName",i),e.xp6(3),e.Q6J("matAutocomplete",n),e.xp6(1),e.Q6J("panelWidth","auto")("displayWith",s.displayItemFn),e.xp6(2),e.Q6J("ngForOf",s.filteredItemList),e.xp6(2),e.hij(" ",null==(c=t.get("category"))?null:c.value," "),e.xp6(2),e.hij(" ",null==(p=t.get("subCategory"))?null:p.value," "),e.xp6(2),e.hij(" ",null==(u=t.get("uom"))?null:u.value," "),e.xp6(5),e.Q6J("matAutocomplete",a),e.xp6(1),e.Q6J("displayWith",s.displayBrandFn)("panelWidth","auto"),e.xp6(2),e.Q6J("ngForOf",s.filteredBrandList),e.xp6(5),e.Q6J("ngIf",null==s.items||null==s.items.value||null==(x=s.items.value.at(i))?null:x.files),e.xp6(3),e.Q6J("ngIf",i>0)}}function ae(r,l){1&r&&(e.TgZ(0,"button",80),e._uU(1," Submit "),e.qZA())}function se(r,l){1&r&&(e.TgZ(0,"h2",81),e._uU(1," You don't have permission to add "),e.qZA())}function le(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",50)(1,"table",51)(2,"tr")(3,"th"),e._uU(4,"S\xa0No"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Item*"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Category"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Sub\xa0category"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Uom*"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Quantity*"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Brand Name"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Remarks"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Upload"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Action"),e.qZA()(),e.TgZ(23,"tbody"),e.YNc(24,oe,32,15,"tr",52),e.qZA()()(),e.TgZ(25,"div",53)(26,"div")(27,"button",54),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.addItem())}),e._uU(28," Add Item + "),e.qZA()()(),e.TgZ(29,"div",55),e.YNc(30,ae,2,0,"button",82),e.YNc(31,se,2,0,"h2",57),e.qZA()}if(2&r){const t=e.oxw(3);e.xp6(24),e.Q6J("ngForOf",t.purchaseRequestForm.get("items").controls),e.xp6(6),e.Q6J("ngIf",t.addPermission),e.xp6(1),e.Q6J("ngIf",!t.addPermission)}}function ce(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",23),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onSubmit())}),e.TgZ(2,"mat-card",24)(3,"div",25)(4,"div",26)(5,"label",27),e._uU(6,"Request title "),e.TgZ(7,"span",28),e._uU(8,"*"),e.qZA()(),e.TgZ(9,"mat-select",29),e.NdJ("selectionChange",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.selectedTitle(n))}),e.YNc(10,S,2,2,"mat-option",30),e.qZA()(),e.TgZ(11,"div",31)(12,"label",27),e._uU(13,"Request date"),e.qZA(),e.TgZ(14,"div",32)(15,"mat-form-field",33),e._UZ(16,"input",34)(17,"mat-datepicker-toggle",35)(18,"mat-datepicker"),e.qZA()()(),e.TgZ(19,"div",36)(20,"label",37),e._uU(21," Required By "),e.TgZ(22,"span",28),e._uU(23,"*"),e.qZA()(),e.TgZ(24,"div",32)(25,"mat-form-field",33)(26,"input",38),e.NdJ("click",function(){e.CHM(t);const n=e.MAs(29);return e.KtG(n.open())}),e.qZA(),e._UZ(27,"mat-datepicker-toggle",39)(28,"mat-datepicker",null,40),e.qZA()()(),e.TgZ(30,"div",26)(31,"label",27),e._uU(32,"Site name "),e.TgZ(33,"span",28),e._uU(34,"*"),e.qZA()(),e.TgZ(35,"mat-select",41),e.NdJ("selectionChange",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.selectedSite(n))}),e.YNc(36,Y,2,2,"mat-option",30),e.qZA()(),e.TgZ(37,"div",26)(38,"label",42),e._uU(39,"Local Purchase "),e.TgZ(40,"input",43),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.handleLocalPurchaseChange())}),e.qZA()()(),e.TgZ(41,"div",44)(42,"label",27),e._uU(43,"Purchase request no "),e.qZA(),e._UZ(44,"input",45),e.qZA(),e.YNc(45,j,7,1,"div",46),e.qZA()(),e.YNc(46,X,35,3,"ng-container",18),e.YNc(47,le,32,3,"ng-template",null,47,e.W1O),e.qZA(),e.BQk()}if(2&r){const t=e.MAs(29),i=e.MAs(48),n=e.oxw(2);let a,s;e.xp6(1),e.Q6J("formGroup",n.purchaseRequestForm),e.xp6(9),e.Q6J("ngForOf",n.categoryList),e.xp6(6),e.Q6J("readonly",!0),e.xp6(10),e.Q6J("matDatepicker",t)("min",n.requredByMinDate),e.xp6(1),e.Q6J("for",t),e.xp6(9),e.Q6J("ngForOf",n.siteList),e.xp6(8),e.Q6J("value",n.requestNo),e.xp6(1),e.Q6J("ngIf","yes"===(null==(a=n.purchaseRequestForm.get("local_purchase"))?null:a.value)),e.xp6(1),e.Q6J("ngIf","yes"===(null==(s=n.purchaseRequestForm.get("local_purchase"))?null:s.value))("ngIfElse",i)}}function pe(r,l){if(1&r&&(e.TgZ(0,"mat-option",48),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}const N=function(r){return["/procurement/details",r]};function ue(r,l){if(1&r&&(e.TgZ(0,"td",105)(1,"a",106),e._uU(2," View\xa0details "),e.qZA()()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(1,N,t._id))}}function de(r,l){if(1&r&&(e.TgZ(0,"td",105)(1,"a",107),e._uU(2," Approved ticket "),e.qZA()()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(1,N,t._id))}}function _e(r,l){if(1&r&&(e.TgZ(0,"td",105)(1,"a",108),e._uU(2," Rejected "),e.qZA()()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(1,N,t._id))}}const me=function(r){return["/procurement/revise",r]};function ge(r,l){if(1&r&&(e.TgZ(0,"a",111),e._uU(1," Revise "),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.Q6J("routerLink",e.VKq(1,me,t._id))}}function he(r,l){1&r&&(e.TgZ(0,"span",112),e._uU(1," No permission to revise "),e.qZA())}function fe(r,l){if(1&r&&(e.TgZ(0,"td",105),e.YNc(1,ge,2,3,"a",109),e.YNc(2,he,2,0,"ng-template",null,110,e.W1O),e.qZA()),2&r){const t=e.MAs(3),i=e.oxw(4);e.xp6(1),e.Q6J("ngIf",i.editPermission)("ngIfElse",t)}}function xe(r,l){if(1&r&&(e.TgZ(0,"tr")(1,"td",99),e._uU(2),e.qZA(),e.TgZ(3,"td",100),e._uU(4),e.qZA(),e.TgZ(5,"td",101),e._uU(6),e.qZA(),e.TgZ(7,"td",102),e._uU(8),e.qZA(),e.YNc(9,ue,3,3,"td",103),e.YNc(10,de,3,3,"td",103),e.YNc(11,_e,3,3,"td",103),e.YNc(12,fe,4,2,"td",103),e.TgZ(13,"td",104)(14,"mat-icon"),e._uU(15," arrow_forward_ios "),e.qZA()()()),2&r){const t=l.$implicit;e.xp6(2),e.hij("Request\xa0no: ",t.purchase_request_number,""),e.xp6(2),e.hij("Requested on: ",t.date,""),e.xp6(2),e.hij("Title: ",t.title,""),e.xp6(2),e.hij("Site: ",t.siteData.site_name," "),e.xp6(1),e.Q6J("ngIf","pending"==t.status),e.xp6(1),e.Q6J("ngIf","approved"==t.status),e.xp6(1),e.Q6J("ngIf","rejected"==t.status),e.xp6(1),e.Q6J("ngIf","revise"==t.status)}}function Ze(r,l){1&r&&(e.TgZ(0,"div",113),e._UZ(1,"img",114),e.TgZ(2,"span"),e._uU(3," No record found"),e.qZA()())}function qe(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",84)(2,"div")(3,"div",85)(4,"span"),e._uU(5,"Filter by title "),e.qZA()(),e.TgZ(6,"mat-form-field",86)(7,"mat-icon",35),e._uU(8,"search"),e.qZA(),e.TgZ(9,"input",87),e.NdJ("input",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.search(n,"title"))}),e.qZA()()(),e.TgZ(10,"div")(11,"div",85)(12,"span"),e._uU(13,"Filter by date"),e.qZA()(),e.TgZ(14,"div")(15,"mat-form-field",88)(16,"input",89),e.NdJ("dateChange",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.dateFilter(n))})("click",function(){e.CHM(t);const n=e.MAs(19);return e.KtG(n.open())}),e.qZA(),e._UZ(17,"mat-datepicker-toggle",39)(18,"mat-datepicker",null,90),e.qZA()()(),e.TgZ(20,"div")(21,"div",85)(22,"span"),e._uU(23,"Filter by site"),e.qZA()(),e.TgZ(24,"div")(25,"mat-form-field",88)(26,"input",91),e.NdJ("input",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.search(n,"site"))}),e.qZA()()()(),e.TgZ(27,"div",92)(28,"div",85)(29,"span"),e._uU(30,"Filter by Status"),e.qZA()(),e.TgZ(31,"div",93)(32,"mat-form-field",33)(33,"mat-select",94),e.NdJ("selectionChange",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onStatusChange(n))}),e.YNc(34,pe,2,2,"mat-option",30),e.qZA()()()()(),e.TgZ(35,"div",95)(36,"table",96)(37,"tbody"),e.YNc(38,xe,16,8,"tr",97),e.qZA()(),e.YNc(39,Ze,4,0,"div",98),e.qZA(),e.BQk()}if(2&r){const t=e.MAs(19),i=e.oxw(2);e.xp6(16),e.Q6J("matDatepicker",t),e.xp6(1),e.Q6J("for",t),e.xp6(16),e.Q6J("formControl",i.statusOption),e.xp6(1),e.Q6J("ngForOf",i.statusList),e.xp6(4),e.Q6J("ngForOf",i.purchaseList),e.xp6(1),e.Q6J("ngIf",!(i.purchaseList&&i.purchaseList.length>0))}}const M=function(r){return{active:r}};function be(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",20)(2,"div",21),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.createRequest())}),e._uU(3,"Create request"),e.qZA(),e.TgZ(4,"div",21),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return n.option=2,e.KtG(n.getPurchaseList({filter_by:n.filter_by,filter_value:n.statusOption.value}))}),e._uU(5," Request list "),e.qZA()(),e.YNc(6,ce,49,11,"ng-container",22),e.YNc(7,qe,40,6,"ng-container",22),e.BQk()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("ngClass",e.VKq(4,M,1==t.option)),e.xp6(2),e.Q6J("ngClass",e.VKq(6,M,2==t.option)),e.xp6(2),e.Q6J("ngIf",1==t.option),e.xp6(1),e.Q6J("ngIf",2==t.option)}}function ve(r,l){1&r&&(e.TgZ(0,"h3",115),e._uU(1,"You don't have permissions to view."),e.qZA())}const Ae=function(){return["/procurement"]},ye=function(){return["/procurement/prlist"]},Te=function(){return["/rate-comparative"]},Ce=function(){return["/rate-approval"]},Pe=function(){return["/purchase-order"]};let we=(()=>{class r{constructor(t,i,n,a,s,c){this.router=t,this.httpService=i,this.snack=n,this.formBuilder=a,this.http=s,this.route=c,this.statusOption=new o.NI("pending"),this.statusList=[{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"revise",label:"Revise"}],this.requredByMinDate=new Date,this.vendorSearch="",this.filteredVendorList=[],this.load=!1,this.items=[],this.option=1,this.purchaseList=[],this.filter_by="status",this.originalPurchaseList=[],this.filter_value="pending",this.requestNo=0,this.details={},this.purchaseRequestForm=new o.cw({title:new o.NI("",o.kI.required),date:new o.NI(q().format("DD-MM-YYYY"),o.kI.required),expected_delivery_date:new o.NI(q().add(1,"days").format("DD-MM-YYYY"),o.kI.required),purchase_request_number:new o.NI(null,o.kI.required),site:new o.NI("",o.kI.required),local_purchase:new o.NI("no",o.kI.required),remarks:new o.NI(""),items:this.formBuilder.array([]),vendor:new o.NI})}onSubmit(){if(this.load)return;if(!this.purchaseRequestForm.valid)return console.log("Form is invalid",this.purchaseRequestForm),void Object.keys(this.purchaseRequestForm.controls).forEach(s=>{const c=this.purchaseRequestForm.get(s);c&&c.invalid&&console.log(`Validation error in ${s}:`,c.errors)});let t=this.purchaseRequestForm.value;const i=this.categoryList.find(s=>s._id==t.title);if(console.log(i),t.title=i.name,t.requestNo=this.requestNo,t.date=q(t.date,"DD-MM-YYYY").toDate(),t.expected_delivery_date=new Date(t.expected_delivery_date),console.log("Hamra Console log",t),"yes"===this.purchaseRequestForm.get("local_purchase").value){let s=[],c={Vendor:t.vendor||null,items:[]};if(t.items&&this.itemList)for(let p of t.items){let u={item:this.itemList.find(x=>x._id===p.item_id)||null,RequiredQuantity:p.qty,Rate:p.rate,SubTotalAmount:p.qty*p.rate,Total:0};u.item&&(delete u.item.category,delete u.item.created_at,delete u.item.gst,u.item.gstDetail&&(u.item.tax={amount:u.item.gstDetail.gst_percentage||0,name:u.item.gstDetail.gst_name||""},delete u.item.gstDetail),delete u.item.item_number,delete u.item.specification,delete u.item.sub_category,delete u.item.uom,delete u.item.updated_at,u.item.qty=parseFloat(u.RequiredQuantity),u.item.item_id=p.item_id,u.item.remark=p.remark,u.Total=p.qty*p.rate+p.qty*p.rate*(u.item.tax?u.item.tax.amount:0)/100,c.items.push(u))}s.push(c),t.vendorItems=s}this.load=!0,console.log("Payload",t);const n=new FormData,a=t;n.append("title",a.title),n.append("handle_by",a.handle_by),n.append("date",a.date),n.append("expected_delivery_date",a.expected_delivery_date),n.append("purchase_request_number",a.purchase_request_number),n.append("site",a.site),n.append("local_purchase",a.local_purchase),n.append("remarks",a.remarks),n.append("requestNo",a.requestNo),"no"===this.purchaseRequestForm.get("local_purchase").value?a.items.forEach((s,c)=>{n.append(`items[${c}][item_id]`,s.item_id._id),n.append(`items[${c}][qty]`,s.qty),n.append(`items[${c}][category]`,s.category),n.append(`items[${c}][subCategory]`,s.subCategory),n.append(`items[${c}][remark]`,s.remark),n.append(`items[${c}][uom]`,s.uom),n.append(`items[${c}][brandName]`,s.brandName._id),s.files.forEach((p,u)=>{n.append(`items[${c}][attachment]`,p,p.name)})}):(n.append("vendor",a.vendor),n.append("vendorItems[0][Vendor]",""),n.append("vendorItems[0][items]",""),a.items.forEach((s,c)=>{n.append(`items[${c}][item_id]`,s.item_id._id),n.append(`items[${c}][qty]`,s.qty),n.append(`items[${c}][category]`,s.category),n.append(`items[${c}][subCategory]`,s.subCategory),n.append(`items[${c}][remark]`,s.remark),n.append(`items[${c}][uom]`,s.uom),n.append(`items[${c}][brandName]`,s.brandName._id),n.append(`items[${c}][rate]`,s.rate),n.append(`items[${c}][gst]`,""),n.append(`items[${c}][freight]`,""),s.files.forEach((p,u)=>{n.append(`items[${c}][attachment]`,p,p.name)})})),console.log("THERE",n),this.httpService.POST(d.Fj,n).subscribe({next:s=>{this.load=!1,this.snack.notify("Purchase request has been created.",1),this.purchaseRequestForm.reset(),this.purchaseRequestForm.markAsUntouched(),this.option=2,this.getPurchaseList({filter_by:this.filter_by,filter_value:this.statusOption.value})},error:s=>{if(this.load=!1,s.errors&&Object.keys(s.errors).length>0){let c="<ul>";for(let p in s.errors)c+=`<li>${s.errors[p][0]}</li>`;c+="</ul>",this.snack.notifyHtml(c,2)}else console.log("there",s),this.snack.notify(s.errors||"An error occurred",2)}})}createRequest(){this.option=1,window.location.reload()}getList(){const t=this.http.get(`${m.N.api_path}${d.PE}`),i=this.http.get(`${m.N.api_path}${d.o7}`),n=this.http.get(`${m.N.api_path}${d.S3}`),a=this.http.get(`${m.N.api_path}${d.ds}`),s=this.http.get(`${m.N.api_path}${d.Lk}`),c=this.http.get(`${m.N.api_path}${d.jz}`);this.httpService.multipleRequests([t,i,a,s,n,c],{}).subscribe(p=>{p&&(this.uomList=p[0].data,this.itemList=p[1].data,this.vendorList=p[2].data,this.brandList=p[3].data,console.log(this.brandList),this.superSiteList=p[4].data,this.categoryList=p[5].data,this.filteredItemList=this.itemList,this.filteredBrandList=this.brandList,"superadmin"===this.permissions.user.role&&(this.siteList=this.superSiteList,console.log(this.siteList)))})}addItem(){this.items=this.purchaseRequestForm.get("items"),"yes"===this.purchaseRequestForm.get("local_purchase").value?this.items.push(this.createLocalItem()):this.items.push(this.createItem())}createItem(){return this.formBuilder.group({item_id:new o.NI("",o.kI.required),qty:new o.NI("",[o.kI.required,o.kI.pattern(/^\d+(\.\d{1,2})?$/)]),category:new o.NI(null),subCategory:new o.NI(null),attachment:new o.NI([]),files:new o.NI([]),remark:new o.NI(""),uom:new o.NI(""),brandName:new o.NI("",o.kI.required)})}createLocalItem(){return this.formBuilder.group({item_id:new o.NI("",o.kI.required),qty:new o.NI("",[o.kI.required,o.kI.pattern(/^\d+(\.\d{1,2})?$/)]),category:new o.NI(null),subCategory:new o.NI(null),attachment:new o.NI([]),remark:new o.NI(""),uom:new o.NI(""),files:new o.NI([]),brandName:new o.NI("",o.kI.required),rate:new o.NI("",[o.kI.required,o.kI.pattern(/^\d+(\.\d{1,2})?$/)]),gst:new o.NI(""),freight:new o.NI("")})}handleLocalPurchaseChange(){"yes"===this.purchaseRequestForm.get("local_purchase").value?this.purchaseRequestForm.get("local_purchase").setValue("no"):this.purchaseRequestForm.get("local_purchase").setValue("yes"),this.purchaseRequestForm.get("items").clear(),this.addItem()}onVendorSelection(t){const i=this.vendorList.find(n=>n._id===t.value);i?this.filteredItemList=this.itemList.filter(n=>{const a=i.category.some(c=>c===n.category),s=i.SubCategory.some(c=>c===n.sub_category);return a&&s}):(console.warn("No matching vendor found for the selected ID."),this.filteredItemList=[])}delete(t){this.purchaseRequestForm.get("items").removeAt(t)}onStatusChange(t){this.getPurchaseList({filter_by:this.filter_by,filter_value:t.value})}selectedTitle(t){this.categoryList.find(a=>a._id==t.value).name.replace(/[ ,]/g,"_"),console.log("titleSelected",this.purchaseRequestForm)}selectedSite(t){const i=this.siteList.find(c=>c._id==t.value);i.site_name.replace(/[ ,]/g,"_"),console.log("title",this.purchaseRequestForm);const s=this.http.get(`${m.N.api_path}${d.Fj}`);this.httpService.multipleRequests([s],{}).subscribe(c=>{if(c){this.purchaseList=c[0].data;const p=this.purchaseList.filter(u=>u.siteData.site_name.includes(i.site_name));this.requestNo=p.length+1,this.purchaseRequestForm.controls.purchase_request_number.setValue(this.requestNo),console.log("PO Numer",this.purchaseRequestForm.value.purchase_request_number)}})}getPurchaseList(t){this.httpService.GET(d.Fj,t).subscribe({next:i=>{if(console.log(i.data),i.data.forEach(n=>{n.date=q(n.date).format("YYYY-MM-DD")}),"superadmin"===this.permissions.user.role)this.originalPurchaseList=i.data,this.purchaseList=i.data;else{const a=i.data.filter(s=>this.siteList.some(c=>c._id===s.site));console.log(a),this.originalPurchaseList=a,this.purchaseList=a}}})}dateFilter(t){this.originalPurchaseList&&this.originalPurchaseList.length>0&&(this.purchaseList=t.value?this.originalPurchaseList.filter(i=>new Date(i.date)==new Date(t.value)):this.originalPurchaseList)}onFilesSelected(t,i){const n=t.target.files;if(console.log("file",n),n.length>5)this.snack.notify("Can upload Maximum 5 Files",2);else if(n.length>0){const a=Array.from(n);this.items.at(i).patchValue({files:a}),console.log(this.items)}}removeFile(t,i){const n=this.items.at(t).get("files");console.log("here",n);const a=n.value.filter(s=>s.name!==i.name);console.log("there",a),this.items.at(t).patchValue({files:a}),console.log(this.items)}files(t){return this.items.at(t).get("files").controls.map(i=>i.value)}search(t,i){this.originalPurchaseList&&this.originalPurchaseList.length>0&&(this.purchaseList="site"==i?t.target.value?this.originalPurchaseList.filter(n=>n.siteData.site_name.toLowerCase().includes(t.target.value.toLowerCase())):this.originalPurchaseList:t.target.value?this.originalPurchaseList.filter(n=>n.title.toLowerCase().includes(t.target.value.toLowerCase())):this.originalPurchaseList)}displayItemFn(t){return t?t.item_name:""}displayBrandFn(t){return t?t.brand_name:""}selectedItem(t,i){const n=t.option.value,a=n._id;console.log(n);const s=this.purchaseRequestForm.get("items");console.log("itemsArray",s.value);const c=s.value.map((p,u)=>({index:u,id:p.item_id._id})).filter(p=>p.id===a).map(p=>p.index);if(console.log("Indices of duplicate items:",c),c.length>=2)return s.removeAt(c.pop()),this.snack.notify("Item already exists",2),void this.items.at(i).reset();if(1===c.length){let p=n.categoryDetail.name,u=n.subCategoryDetail.subcategory_name,x=n.uomDetail.uom_name;this.items.at(i).patchValue({category:p,subCategory:u,uom:x})}}searchItem(t){const i=t.target.value.toLowerCase();this.itemList&&this.itemList.length>0&&(this.filteredItemList=t.target.value?this.itemList.filter(n=>n.item_name.toLowerCase().includes(i)):this.itemList)}searchBrand(t){const i=t.target.value.toLowerCase();this.brandList&&this.brandList.length>0&&(this.filteredBrandList=t.target.value?this.brandList.filter(n=>n.brand_name.toLowerCase().includes(i)):this.brandList)}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:n=>{this.viewPermission=n.dashboard_permissions[0].ParentChildchecklist[18].childList[0].isSelected,this.addPermission=n.dashboard_permissions[0].ParentChildchecklist[18].childList[1].isSelected,this.editPermission=n.dashboard_permissions[0].ParentChildchecklist[18].childList[2].isSelected},error:n=>{console.log(n)}}),this.siteList=this.permissions.user.sites,console.log("SiteSelect",this.siteList),this.getList(),this.addItem()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.F0),e.Y36(v.s),e.Y36(A.o),e.Y36(o.qu),e.Y36(P.eN),e.Y36(g.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-purchase-request"]],decls:46,vars:12,consts:[[1,"main-container"],[2,"height","100px","background-color","#fff"],[2,"margin-top","40px","margin-left","20px"],["src","./assets/images/preq.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/prl.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],["src","./assets/images/rc.svg"],[2,"width","100px","margin-left","10px","margin-top","10px","border","1px dashed"],["src","./assets/images/po.svg"],[4,"ngIf","ngIfElse"],["noView",""],[1,"requests"],[3,"ngClass","click"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","10px","max-width","100%"],[1,"flex-div",2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],[1,"star"],["id","title","placeholder","Select title","formControlName","title",2,"padding","10px","width","75%","border","1px solid #ccc","border-radius","6px","cursor","pointer","font-family","Poppins",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-div","custom-form-group"],[1,"custom-form-control"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Enter Required by date",3,"readonly"],["matSuffix",""],[1,"flex-div","custom-form-group",2,"margin-right","45px"],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by date",2,"width","100%",3,"matDatepicker","min","click"],["matSuffix","",3,"for"],["requiredByStartDate",""],["id","site","placeholder","Select site","formControlName","site",2,"padding","10px","width","75%","border","1px solid #ccc","border-radius","6px","cursor","pointer","font-family","Poppins",3,"selectionChange"],[2,"color","#4272BF"],["type","checkbox","name","local_purchase_checkbox",2,"transform","scale(1.5)","margin-left","20px","margin-top","30px",3,"change"],[2,"display","flex","flex-direction","column"],["placeholder","Select Site Name First","formControlName","purchase_request_number","readonly","",1,"reqNO",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9F9F9F","cursor","pointer","margin-top","10px","font-family","Poppins",3,"value"],["class","flex-div","style","display: flex; flex-direction: column;",4,"ngIf"],["noLocalPurchase",""],[3,"value"],["id","site","placeholder","Select Vendor","formControlName","vendor",2,"padding","10px","width","75%","border","1px solid #ccc","border-radius","6px","cursor","pointer","font-family","Poppins",3,"selectionChange"],[1,"scroll-bar1"],[1,"items-table",2,"direction","ltr !important","border-left","2px solid #000 !important"],["style","background-color: #F4F4F5;","formArrayName","items",4,"ngFor","ngForOf"],[2,"display","flex","flex-direction","row","gap","40px","margin-left","38px","margin-bottom","100px","margin-top","100px","top","-50px","position","relative"],[2,"padding","8px","width","120px","background-color","#fff","cursor","pointer","border","0.5px solid #94A3B8","border-radius","5px","font-size","14px","font-family","Poppins",3,"click"],[2,"display","flex","justify-content","center","margin-top","-126px","margin-bottom","20px"],["style","\n            padding: 8px;\n            width: 120px;\n            background-color: #233A61;\n            color: #fff;\n            border-radius: 5px;\n            border-color: lightgrey;\n            font-size: 14px;\n            font-family: 'Poppins';\n          ",4,"ngIf"],["style","color: red;",4,"ngIf"],["formArrayName","items",2,"background-color","#F4F4F5"],[2,"text-align","center"],[3,"formGroupName"],[1,"example-full-width"],["type","text","placeholder","Select Item","aria-label","Item","matInput","","formControlName","item_id",3,"matAutocomplete","input"],[3,"panelWidth","displayWith","optionSelected"],["auto","matAutocomplete"],[2,"color","#000"],["type","text","formControlName","qty","placeholder","Enter","pattern","^\\d+(\\.\\d{1,2})?$",1,"pr-form-field"],["type","text","placeholder","Select Brand","aria-label","Brand","matInput","","formControlName","brandName",3,"matAutocomplete","input"],[3,"displayWith","panelWidth"],["fill","matAutocomplete"],["type","text","formControlName","rate","placeholder","Enter","pattern","^\\d+(\\.\\d{1,2})?$",1,"pr-form-field"],["placeholder","Enter","formControlName","remark",1,"pr-form-field"],["type","file","multiple","",3,"change"],[1,"action-btn-wrapper"],["class","action-btn","title","Delete",3,"click",4,"ngIf"],["style","margin:10px; display: flex; flex-direction: row ;",4,"ngFor","ngForOf"],[2,"margin","10px","display","flex","flex-direction","row"],[2,"border","none","color","red","font-weight","bold",3,"click"],["title","Delete",1,"action-btn",3,"click"],[1,"fa","fa-trash"],[2,"padding","8px","width","120px","background-color","#233A61","color","#fff","border-radius","5px","border-color","lightgrey","font-size","14px","font-family","Poppins"],[2,"color","red"],["style","\n              padding: 8px;\n              width: 120px;\n              background-color: #233A61;\n              color: #fff;\n              border-radius: 5px;\n              border-color: lightgrey;\n              font-size: 14px;\n              font-family: 'Poppins';\n            ",4,"ngIf"],[2,"border","none","color","red","font-weight","bold","margin-left","5px",3,"click"],[2,"display","flex","flex-direction","row","gap","10px","margin","0 27px"],[2,"margin-top","15px","color","#94A3B8"],["appearance","outline",1,"searchbar"],["matInput","","type","search","placeholder","search title",1,"search-input",3,"input"],["appearance","outline",1,"datebar"],["matInput","","placeholder","Date",3,"matDatepicker","dateChange","click"],["startPicker",""],["matInput","","placeholder","Site",3,"input"],[1,"custom-form-group"],[1,"custom-form-control",2,"position","relative"],[3,"formControl","selectionChange"],[1,"scroll-bar1",2,"width","96%"],[1,"r-list",2,"direction","ltr !important","margin-top","-20px"],[4,"ngFor","ngForOf"],["class","no-record-found",4,"ngIf"],[2,"color","#4272BF","width","200px","text-align","left","padding","18px"],[2,"color","#4272BF","width","500px"],[2,"color","#4272BF","width","400px"],[2,"color","#4272BF","width","700px","text-align","left","padding","18px"],["style","width: 20%;\n            text-align: right;",4,"ngIf"],[2,"width","100px"],[2,"width","20%","text-align","right"],[1,"viewdetail-btn",3,"routerLink"],[1,"viewdetail-btn",2,"background-color","#54AA52","color","#fff",3,"routerLink"],[1,"viewdetail-btn",2,"background-color","#C7323B","color","#fff",3,"routerLink"],["class","viewdetail-btn","style","background-color: #ECD172;color:#fff;",3,"routerLink",4,"ngIf","ngIfElse"],["disabledState",""],[1,"viewdetail-btn",2,"background-color","#ECD172","color","#fff",3,"routerLink"],[1,"viewdetail-btn",2,"background-color","#ECD172","color","#fff"],[1,"no-record-found"],["src","./assets/images/inbox_empty.png","alt",""],[2,"display","flex","justify-content","center","margin-top","2%","font-size","160%","font-weight","bolder","color","grey"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"mat-toolbar",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"span",4),e._uU(5,"Purchase Request "),e.qZA(),e._UZ(6,"span",5),e.qZA(),e.TgZ(7,"div"),e._UZ(8,"hr",6),e.qZA(),e.TgZ(9,"div",7)(10,"div",8)(11,"div"),e._UZ(12,"img",9),e.qZA(),e.TgZ(13,"span",10),e._uU(14,"Purchase\xa0request"),e.qZA(),e.TgZ(15,"div"),e._UZ(16,"mat-divider",11),e.qZA()(),e.TgZ(17,"div",12)(18,"div"),e._UZ(19,"img",13),e.qZA(),e.TgZ(20,"span",14),e._uU(21,"Approvals"),e.qZA(),e.TgZ(22,"div"),e._UZ(23,"mat-divider",11),e.qZA()(),e.TgZ(24,"div",12)(25,"div"),e._UZ(26,"img",15),e.qZA(),e.TgZ(27,"span",14),e._uU(28,"Rate\xa0Comparative"),e.qZA(),e.TgZ(29,"div"),e._UZ(30,"mat-divider",11),e.qZA()(),e.TgZ(31,"div",12)(32,"div"),e._UZ(33,"img",13),e.qZA(),e.TgZ(34,"span",14),e._uU(35,"Rate\xa0Approvals"),e.qZA(),e.TgZ(36,"div"),e._UZ(37,"mat-divider",16),e.qZA()(),e.TgZ(38,"div",12)(39,"div"),e._UZ(40,"img",17),e.qZA(),e.TgZ(41,"span",14),e._uU(42,"Purchase\xa0orders"),e.qZA()()(),e.YNc(43,be,8,8,"ng-container",18),e.YNc(44,ve,2,0,"ng-template",null,19,e.W1O),e.qZA()),2&t){const n=e.MAs(45);e.xp6(10),e.Q6J("routerLink",e.DdM(7,Ae)),e.xp6(7),e.Q6J("routerLink",e.DdM(8,ye)),e.xp6(7),e.Q6J("routerLink",e.DdM(9,Te)),e.xp6(7),e.Q6J("routerLink",e.DdM(10,Ce)),e.xp6(7),e.Q6J("routerLink",e.DdM(11,Pe)),e.xp6(5),e.Q6J("ngIf",i.viewPermission)("ngIfElse",n)}},dependencies:[R.XC,R.ZL,w.ey,Z.KE,Z.R9,U.a8,f.Mq,f.hl,f.nW,y.d,F.Hw,T.Nt,k.gD,C.Ye,h.mk,h.sg,h.O5,o._Y,o.Fj,o.JJ,o.JL,o.c5,o.oH,o.sg,o.u,o.x0,o.CE,g.rH,g.yS,g.Od],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.requests[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:40px;width:250px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;flex:1}.requests[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.2)}.requests[_ngcontent-%COMP%]   div.active[_ngcontent-%COMP%]{background-color:#233a61!important;color:#fff}.topcard[_ngcontent-%COMP%]{width:1140px;height:auto;margin-left:30px;margin-top:30px;box-shadow:0 2px 12px #00000040;font-family:Poppins}table.items-table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;font-size:14px;margin:8px 20px 20px 10px}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;width:1000px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}.items-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}.scroll-bar1[_ngcontent-%COMP%]{height:auto;width:calc(100% - 25px);margin-left:25px;margin-bottom:10px;margin-top:50px;overflow:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background:none}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.r-list[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0 25px}.r-list[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#e5e6eb!important}.viewdetail-btn[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;cursor:pointer;text-align:center;padding:18px 25px}.no-record-found[_ngcontent-%COMP%]{text-align:center;display:flex;gap:10px;flex-direction:column;align-items:center;justify-content:center}.no-record-found[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:188px}.mat-radio-button[_ngcontent-%COMP%]   .mat-radio-label[_ngcontent-%COMP%]{margin-right:5px!important}.flex-div[_ngcontent-%COMP%]{width:31%}.main-container[_ngcontent-%COMP%]{margin:10px 20px 0 15px}']}),r})();var L=_(4327),b=_(1948);function Ue(r,l){if(1&r&&(e.TgZ(0,"mat-option",50),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.site_name," ")}}function ke(r,l){if(1&r&&(e.TgZ(0,"div",51)(1,"label",21),e._uU(2,"Vendor "),e.qZA(),e._UZ(3,"input",52),e.qZA()),2&r){const t=e.oxw();e.xp6(3),e.Q6J("readonly",!0)("value",t.selectedVendor)}}function Ne(r,l){if(1&r&&(e.TgZ(0,"div")(1,"a",60)(2,"p",61),e._uU(3),e.qZA()()()),2&r){const t=l.$implicit,i=l.index;e.xp6(1),e.Q6J("href",t,e.LSH),e.xp6(2),e.hij(" Attachment ",i+1,"")}}function Ie(r,l){if(1&r&&(e.TgZ(0,"tr",56)(1,"td",57),e._uU(2),e.qZA(),e.ynx(3),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td",58),e._uU(7),e.qZA(),e.TgZ(8,"td",58),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td",58),e._uU(13),e.qZA(),e.TgZ(14,"td",58),e._uU(15),e.qZA(),e.TgZ(16,"td",58),e._uU(17),e.qZA(),e.TgZ(18,"td",58),e._uU(19),e.qZA(),e.TgZ(20,"td"),e.YNc(21,Ne,4,2,"div",59),e.qZA(),e.BQk(),e.qZA()),2&r){const t=l.$implicit,i=l.index,n=e.oxw(2);e.xp6(2),e.hij(" ",i+1," "),e.xp6(3),e.hij(" ",n.getItemName(t.item_id)," "),e.xp6(2),e.hij(" ",t.categoryDetail.name," "),e.xp6(2),e.hij(" ",t.subCategoryDetail.subcategory_name," "),e.xp6(2),e.hij(" ",t.uomDetail.uom_name," "),e.xp6(2),e.hij(" ",t.qty," "),e.xp6(2),e.hij(" ",n.myBrandName(t.brandName)," "),e.xp6(2),e.hij(" ",t.rate," "),e.xp6(2),e.hij(" ",t.remark," "),e.xp6(2),e.Q6J("ngForOf",t.attachment)}}function Re(r,l){if(1&r&&(e.TgZ(0,"div")(1,"div",53)(2,"table",54)(3,"tr")(4,"th"),e._uU(5,"S\xa0No"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Item*"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Category"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Sub\xa0category"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Uom*"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Quantity*"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Brand Name"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Rate"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Remarks"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Attachments/th> "),e.qZA()(),e.TgZ(24,"tbody"),e.YNc(25,Ie,22,10,"tr",55),e.qZA()()()()),2&r){const t=e.oxw();e.xp6(25),e.Q6J("ngForOf",null==t.details?null:t.details.items)}}function Fe(r,l){if(1&r&&(e.TgZ(0,"div")(1,"a",60)(2,"p",61),e._uU(3),e.qZA()()()),2&r){const t=l.$implicit,i=l.index;e.xp6(1),e.Q6J("href",t,e.LSH),e.xp6(2),e.hij(" Attachment ",i+1,"")}}function Me(r,l){if(1&r&&(e.TgZ(0,"tr",56)(1,"td",57),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",58),e._uU(6),e.qZA(),e.TgZ(7,"td",58),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e.YNc(18,Fe,4,2,"div",59),e.qZA()()),2&r){const t=l.$implicit,i=l.index,n=e.oxw(2);e.xp6(2),e.hij(" ",i+1," "),e.xp6(2),e.hij(" ",n.getItemName(t.item_id)," "),e.xp6(2),e.hij(" ",t.categoryDetail.name," "),e.xp6(2),e.hij(" ",t.subCategoryDetail.subcategory_name," "),e.xp6(2),e.hij(" ",t.uomDetail.uom_name," "),e.xp6(2),e.hij(" ",t.qty," "),e.xp6(2),e.hij(" ",n.myBrandName(t.brandName)," "),e.xp6(2),e.hij(" ",t.remark," "),e.xp6(2),e.Q6J("ngForOf",t.attachment)}}function Le(r,l){if(1&r&&(e.TgZ(0,"div",53)(1,"table",62)(2,"tr")(3,"th"),e._uU(4,"S\xa0No"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Item*"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Category"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Sub\xa0category"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Uom*"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Quantity*"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Brand Name"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Remarks"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Attachments"),e.qZA()(),e.TgZ(21,"tbody"),e.YNc(22,Me,19,9,"tr",55),e.qZA()()()),2&r){const t=e.oxw();e.xp6(22),e.Q6J("ngForOf",null==t.details?null:t.details.items)}}function Oe(r,l){1&r&&(e.TgZ(0,"button",63),e._uU(1,"Pending"),e.qZA())}function Je(r,l){1&r&&(e.TgZ(0,"button",64),e._uU(1,"Approved"),e.qZA())}function Qe(r,l){1&r&&(e.TgZ(0,"button",65),e._uU(1,"Rejected"),e.qZA())}const De=function(){return["/procurement"]},Se=function(){return["/procurement/prlist"]},Ye=function(){return["/rate-comparative"]},$e=function(){return["/rate-approval"]},je=function(){return["/purchase-order"]};let Ee=(()=>{class r{constructor(t,i,n,a,s,c){this.router=t,this.httpService=i,this.snack=n,this.formBuilder=a,this.route=s,this.http=c,this.downloadLoading=!1,this.load=!1,this.purchaseRequestForm=new o.cw({title:new o.NI("",o.kI.required),date:new o.NI("",o.kI.required),expected_delivery_date:new o.NI("",o.kI.required),purchase_request_number:new o.NI(""),site:new o.NI({value:"",disabled:!0},o.kI.required),local_purchase:new o.NI({value:"",disabled:!0},o.kI.required),remarks:new o.NI("",[]),items:this.formBuilder.array([]),_id:new o.NI}),this.details={},this.getList(),this.route.params.subscribe(p=>{this.pageId=p.id})}getList(){const t=this.http.get(`${m.N.api_path}${d.PE}`),i=this.http.get(`${m.N.api_path}${d.o7}`),n=this.http.get(`${m.N.api_path}${d.S3}`),a=this.http.get(`${m.N.api_path}${d.Lk}`);this.httpService.multipleRequests([t,i,n,a],{}).subscribe(s=>{s&&(this.uomList=s[0].data,this.itemList=s[1].data,this.siteList=s[2].data,this.brandList=s[3].data)})}patchData(t){this.purchaseRequestForm.patchValue({title:t.title,date:t.date,expected_delivery_date:t.expected_delivery_date,purchase_request_number:t.purchase_request_number,site:t.site,local_purchase:t.local_purchase,remarks:t.remarks}),this.purchaseRequestForm.controls.remarks.disable()}createItemArrayForm(){return new o.cw({item_id:new o.NI("",o.kI.required),qty:new o.NI("",o.kI.required),category:new o.NI(""),subCategory:new o.NI(""),attachment:new o.NI(""),remark:new o.NI("",o.kI.required),uom:new o.NI("",o.kI.required),brandName:new o.NI("")})}addItems(t){this.items=this.purchaseRequestForm.get("items"),t&&this.items.push(this.createItem(t))}createItem(t){if(t)return new o.cw({item_id:new o.NI(t.item_id,o.kI.required),qty:new o.NI(t.qty,o.kI.required),category:new o.NI(t.categoryDetail.name),subCategory:new o.NI(t.subCategoryDetail.subcategory_name),attachment:new o.NI(t.attachment),remark:new o.NI(t.remark,o.kI.required),uom:new o.NI(t.uomDetail._id,o.kI.required),brandName:new o.NI(t.brandName)})}myBrandName(t){if(this.brandList){let i=this.brandList.filter(n=>n._id==t);return console.log(i),i[0].brand_name}}getSiteList(){this.httpService.GET(d.S3,{}).subscribe(t=>{this.siteList=t})}getItemName(t){if(this.itemList&&this.itemList.length>0)return this.itemList.filter(i=>i._id==t)[0].item_name}updateRequest(t){this.httpService.PUT(d.Fj,{_id:this.details._id,status:t,remarks:this.purchaseRequestForm.value.remarks}).subscribe(i=>{this.router.navigate(["/procurement/prlist"])})}getVendorName(){if(this.details.vendor){const t=this.http.get(`${m.N.api_path}${d.Iy}?_id=${this.details.vendor}`);this.httpService.multipleRequests(t,{}).subscribe(i=>{i&&(console.log(i[0]),this.selectedVendor=i[0].data[0].vendor_name)})}}downloadPRPDF(){this.downloadLoading=!0,this.httpService.GETPDF("generate/prpdf",{template:"pr",id:this.pageId}).subscribe(t=>{this.downloadLoading=!1;var i=new Blob([t],{type:"application/pdf"});let n=(new Date).getTime();(0,L.saveAs)(i,`pr-${n}.pdf`)})}ngOnInit(){this.route.params.subscribe(t=>{t.id&&this.httpService.GET(`${d.Fj}/detail`,{_id:t.id}).subscribe({next:i=>{this.details=i.data[0],console.log(this.details),this.getVendorName(),this.patchData(i.data[0])},error:i=>{this.router.navigate(["/procurement/prlist"])}})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.F0),e.Y36(v.s),e.Y36(A.o),e.Y36(o.qu),e.Y36(g.gz),e.Y36(P.eN))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-purchase-request-details"]],decls:103,vars:27,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-left","20px"],["src","./assets/images/preq.svg",2,"width","30px"],[2,"font-family","Poppins","font-style","normal","font-weight","600","font-size","22px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","100%","border","2px solid #C5C5C5"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/prl.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],["src","./assets/images/rc.svg"],[2,"width","100px","margin-left","10px","margin-top","10px","border","1px dashed"],["src","./assets/images/po.svg"],[3,"formGroup"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","10px","max-width","100%"],[1,"flex-div",2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],["placeholder","Enter title","formControlName","title",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","3px","font-family","Poppins","height","50px",3,"readonly"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Auto generate Request Date",3,"matDatepicker","readonly"],["matSuffix","",3,"for"],["date",""],[1,"flex-div","custom-form-group"],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],[1,"star"],[1,"custom-form-control"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by",3,"matDatepicker","readonly"],["requiredByStartDate",""],["placeholder","Auto generate","formControlName","purchase_request_number","readonly","",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","10px","font-family","Poppins"],["id","site","placeholder","Select site","formControlName","site",2,"padding","10px","width","100","border","1px solid #ccc","border-radius","6px","cursor","pointer","margin-top","10px","font-family","Poppins"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-div",2,"display","flex","flex-direction","column","align-items","center"],[2,"color","#4272BF","margin-bottom","10px"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group"],[1,"example-radio-button",3,"value"],["style","display: flex;flex-direction: column;",4,"ngIf"],[4,"ngIf","ngIfElse"],["noLocalPurchase",""],[1,"text-area-section"],["name","","id","","cols","30","rows","5","formControlName","remarks"],[1,"button-list"],[2,"padding","8px","width","120px","background-color","#f7f3f3","color","#233A61","border","1px solid #94A3B8","border-radius","5px","font-size","14px","font-family","Poppins",3,"click"],["class","pending",4,"ngIf"],["style","padding: 8px;width: 120px;background-color: #35B568;color: #fff;border-radius: 5px;border-color: lightgrey;font-size: 14px;font-family: 'Poppins';",4,"ngIf"],["style","padding: 8px;width: 120px;background-color: #C7323B;color: #233A61;border: 1px solid #94A3B8;border-radius: 5px;font-size: 14px;font-family: 'Poppins';",4,"ngIf"],[3,"value"],[2,"display","flex","flex-direction","column"],["placeholder","Enter Vendor",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9F9F9F","cursor","pointer","margin-top","10px","font-family","Poppins",3,"readonly","value"],[1,"scroll-bar1"],[2,"direction","ltr !important","border-left","2px solid #000 !important"],["style","background-color: #F4F4F5;",4,"ngFor","ngForOf"],[2,"background-color","#F4F4F5"],[2,"text-align","center"],[2,"color","#000"],[4,"ngFor","ngForOf"],[3,"href"],[2,"color","blue","text-decoration","underline","font-size","12px","margin-top","-10px"],[2,"direction","ltr !important","border-left","2px solid #000 !important","width","100%"],[1,"pending"],[2,"padding","8px","width","120px","background-color","#35B568","color","#fff","border-radius","5px","border-color","lightgrey","font-size","14px","font-family","Poppins"],[2,"padding","8px","width","120px","background-color","#C7323B","color","#233A61","border","1px solid #94A3B8","border-radius","5px","font-size","14px","font-family","Poppins"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-toolbar",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"span",3),e._uU(4,"Summary "),e.qZA(),e._UZ(5,"span",4),e.qZA(),e.TgZ(6,"div"),e._UZ(7,"hr",5),e.qZA(),e.TgZ(8,"div",6)(9,"div",7)(10,"div"),e._UZ(11,"img",8),e.qZA(),e.TgZ(12,"span",9),e._uU(13,"Purchase\xa0request"),e.qZA(),e.TgZ(14,"div"),e._UZ(15,"mat-divider",10),e.qZA()(),e.TgZ(16,"div",11)(17,"div"),e._UZ(18,"img",12),e.qZA(),e.TgZ(19,"span",13),e._uU(20,"Approvals"),e.qZA(),e.TgZ(21,"div"),e._UZ(22,"mat-divider",10),e.qZA()(),e.TgZ(23,"div",11)(24,"div"),e._UZ(25,"img",14),e.qZA(),e.TgZ(26,"span",13),e._uU(27,"Rate\xa0Comparative"),e.qZA(),e.TgZ(28,"div"),e._UZ(29,"mat-divider",10),e.qZA()(),e.TgZ(30,"div",11)(31,"div"),e._UZ(32,"img",12),e.qZA(),e.TgZ(33,"span",13),e._uU(34,"Rate\xa0Approvals"),e.qZA(),e.TgZ(35,"div"),e._UZ(36,"mat-divider",15),e.qZA()(),e.TgZ(37,"div",11)(38,"div"),e._UZ(39,"img",16),e.qZA(),e.TgZ(40,"span",13),e._uU(41,"Purchase\xa0orders"),e.qZA()()(),e.TgZ(42,"form",17)(43,"mat-card",18)(44,"div",19)(45,"div",20)(46,"label",21),e._uU(47,"Request title "),e.qZA(),e._UZ(48,"input",22),e.qZA(),e.TgZ(49,"div",20)(50,"label",21),e._uU(51,"Request date"),e.qZA(),e.TgZ(52,"mat-form-field",23),e._UZ(53,"input",24)(54,"mat-datepicker-toggle",25)(55,"mat-datepicker",null,26),e.qZA()(),e.TgZ(57,"div",27)(58,"label",28),e._uU(59," Required by "),e.TgZ(60,"span",29),e._uU(61,"*"),e.qZA()(),e.TgZ(62,"div",30)(63,"mat-form-field",23),e._UZ(64,"input",31)(65,"mat-datepicker-toggle",25)(66,"mat-datepicker",null,32),e.qZA()()(),e.TgZ(68,"div",20)(69,"label",21),e._uU(70,"Purchase request no "),e.qZA(),e._UZ(71,"input",33),e.qZA(),e.TgZ(72,"div",20)(73,"label",21),e._uU(74,"Site name "),e.TgZ(75,"span",29),e._uU(76,"*"),e.qZA()(),e.TgZ(77,"mat-select",34),e.YNc(78,Ue,2,2,"mat-option",35),e.qZA()(),e.TgZ(79,"div",36)(80,"label",37),e._uU(81,"Local Purchase "),e.TgZ(82,"span",29),e._uU(83,"*"),e.qZA()(),e.TgZ(84,"mat-radio-group",38)(85,"mat-radio-button",39),e._uU(86," Yes "),e.qZA(),e.TgZ(87,"mat-radio-button",39),e._uU(88," No "),e.qZA()()(),e.YNc(89,ke,4,2,"div",40),e.qZA()(),e.YNc(90,Re,26,1,"div",41),e.YNc(91,Le,23,1,"ng-template",null,42,e.W1O),e.TgZ(93,"div",43)(94,"label",21),e._uU(95,"Remarks "),e.qZA(),e._UZ(96,"textarea",44),e.qZA(),e.TgZ(97,"div",45)(98,"button",46),e.NdJ("click",function(){return i.downloadPRPDF()}),e._uU(99,"Download PR"),e.qZA(),e.YNc(100,Oe,2,0,"button",47),e.YNc(101,Je,2,0,"button",48),e.YNc(102,Qe,2,0,"button",49),e.qZA()()),2&t){const n=e.MAs(56),a=e.MAs(67),s=e.MAs(92);e.xp6(9),e.Q6J("routerLink",e.DdM(22,De)),e.xp6(7),e.Q6J("routerLink",e.DdM(23,Se)),e.xp6(7),e.Q6J("routerLink",e.DdM(24,Ye)),e.xp6(7),e.Q6J("routerLink",e.DdM(25,$e)),e.xp6(7),e.Q6J("routerLink",e.DdM(26,je)),e.xp6(5),e.Q6J("formGroup",i.purchaseRequestForm),e.xp6(6),e.Q6J("readonly",!0),e.xp6(5),e.Q6J("matDatepicker",n)("readonly",!0),e.xp6(1),e.Q6J("for",n),e.xp6(10),e.Q6J("matDatepicker",a)("readonly",!0),e.xp6(1),e.Q6J("for",a),e.xp6(13),e.Q6J("ngForOf",i.siteList),e.xp6(7),e.Q6J("value","yes"),e.xp6(2),e.Q6J("value","no"),e.xp6(2),e.Q6J("ngIf","yes"==(null==i.details?null:i.details.local_purchase)),e.xp6(1),e.Q6J("ngIf","yes"==(null==i.details?null:i.details.local_purchase))("ngIfElse",s),e.xp6(10),e.Q6J("ngIf","pending"==i.details.status),e.xp6(1),e.Q6J("ngIf","approved"==i.details.status),e.xp6(1),e.Q6J("ngIf","rejected"==i.details.status)}},dependencies:[w.ey,Z.KE,Z.R9,U.a8,f.Mq,f.hl,f.nW,y.d,T.Nt,b.VQ,b.U0,k.gD,C.Ye,h.sg,h.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,g.rH,g.Od],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:100%;height:auto;font-family:Poppins;box-shadow:none;border:1px solid #ccc;border-radius:4px}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;font-size:14px;margin-bottom:20px;margin-right:20px;margin-top:8px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}form[_ngcontent-%COMP%]{padding:10px 20px}.scroll-bar1[_ngcontent-%COMP%]{height:auto;width:calc(100% - 25px);margin-left:25px;margin-bottom:10px;margin-top:50px;overflow:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background-color:"Transparent"}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 0 20px;float:right;gap:10px}.text-area-section[_ngcontent-%COMP%]{width:100%;height:auto;margin:30px 0 0}.text-area-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:100%}.flex-div[_ngcontent-%COMP%]{width:31%}.mat-form-field[_ngcontent-%COMP%]{display:block}.pending[_ngcontent-%COMP%]{padding:8px;width:120px;background-color:#ccc;color:#333;font-size:14px;font-family:Poppins;height:50px;border:none}.main-container[_ngcontent-%COMP%]{margin:10px 20px 0 15px}']}),r})();var Be=_(8898),O=_(7489);function ze(r,l){if(1&r&&(e.TgZ(0,"td",48),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit,i=e.oxw(2);e.Udp("color",i.getRemainingDays(t.expected_delivery_date)>=0?"green":"red"),e.xp6(1),e.hij(" \xa0 ",i.getRemainingDays(t.expected_delivery_date)>=0?i.getRemainingDays(t.expected_delivery_date)+" days left":"Delayed by "+-1*i.getRemainingDays(t.expected_delivery_date)+" days"," ")}}function Ge(r,l){1&r&&e._UZ(0,"td",49)}const He=function(r){return{"background-color":r}},Ve=function(r){return["/procurement/update",r]};function Ke(r,l){if(1&r&&(e.TgZ(0,"tr")(1,"td",39),e._uU(2),e.qZA(),e._UZ(3,"hr",40),e.TgZ(4,"td",41),e._uU(5),e.qZA(),e._UZ(6,"hr",40),e.TgZ(7,"td",42),e._uU(8),e.qZA(),e._UZ(9,"hr",40),e.TgZ(10,"td",43),e._uU(11),e.qZA(),e._UZ(12,"hr",40),e.YNc(13,ze,2,3,"td",44),e.YNc(14,Ge,1,0,"td",45),e.TgZ(15,"td",46),e._uU(16," View\xa0details "),e.qZA(),e.TgZ(17,"td",47)(18,"mat-icon"),e._uU(19," arrow_forward_ios "),e.qZA()()()),2&r){const t=l.$implicit,i=e.oxw(2);e.xp6(2),e.hij("Request\xa0no :\xa0 ",t.purchase_request_number,""),e.xp6(3),e.hij("Requested on : \xa0 ",t.formattedDate,""),e.xp6(3),e.hij("Title : \xa0 ",t.title,""),e.xp6(3),e.hij("Site :\xa0 ",t.siteData.site_name," "),e.xp6(2),e.Q6J("ngIf",void 0!==i.getRemainingDays(t.expected_delivery_date)&&i.getRemainingDays(t.expected_delivery_date)<=2),e.xp6(1),e.Q6J("ngIf",void 0===i.getRemainingDays(t.expected_delivery_date)||i.getRemainingDays(t.expected_delivery_date)>2),e.xp6(1),e.Q6J("ngStyle",e.VKq(8,He,"new"==i.requestType?"#233A61":"#1abcfe"))("routerLink",e.VKq(10,Ve,t._id))}}function We(r,l){1&r&&(e.TgZ(0,"div",50),e._UZ(1,"img",51),e.TgZ(2,"span"),e._uU(3," No record found"),e.qZA()())}function Xe(r,l){if(1&r&&(e.ynx(0),e.TgZ(1,"div",35)(2,"table",36)(3,"tbody"),e.YNc(4,Ke,20,12,"tr",37),e.qZA()(),e.YNc(5,We,4,0,"div",38),e.qZA(),e.BQk()),2&r){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.purchaseList),e.xp6(1),e.Q6J("ngIf",!(t.purchaseList&&t.purchaseList.length>0))}}function et(r,l){1&r&&(e.TgZ(0,"h3",52),e._uU(1,"You don't have permissions to view."),e.qZA())}const tt=function(){return["/procurement"]},nt=function(){return["/procurement/prlist"]},it=function(){return["/rate-comparative"]},rt=function(){return["/rate-approval"]},ot=function(){return["/purchase-order"]},J=function(r){return[r]};let at=(()=>{class r{constructor(t,i,n,a){this.router=t,this.httpService=i,this.snack=n,this.datePipe=a,this.filter_by="status",this.filter_value="pending",this.requestType="new",this.originalPurchaseList=[],this.getList({filter_by:this.filter_by,filter_value:this.filter_value})}getList(t){this.httpService.GET(d.Fj,t).subscribe({next:i=>{console.log(i.data);const n=i.data.map(a=>({...a,formattedDate:this.datePipe.transform(a.date,"yyyy-MM-dd")}));if("superadmin"===this.permissions.user.role)this.originalPurchaseList=n,this.purchaseList=n;else{const a=n.filter(s=>this.siteList.some(c=>c._id===s.site));console.log(a),this.originalPurchaseList=a,this.purchaseList=a}},error:i=>{if(i.errors&&!(0,O.isEmpty)(i.errors)){let n="<ul>";for(let a in i.errors)n+=`<li>${i.errors[a][0]}</li>`;n+="</ul>",this.snack.notifyHtml(n,2)}else this.snack.notify(i.message,2)}})}getRemainingDays(t){const i=new Date(t),n=new Date;i.setHours(0,0,0,0),n.setHours(0,0,0,0);const a=i.getTime()-n.getTime();return Math.floor(a/864e5)}dateFilter(t){this.originalPurchaseList&&this.originalPurchaseList.length>0&&(this.purchaseList=t.value?this.originalPurchaseList.filter(i=>new Date(i.date).getTime()===t.value.getTime()):this.originalPurchaseList)}search(t,i){this.originalPurchaseList&&this.originalPurchaseList.length>0&&(this.purchaseList="site"==i?t.target.value?this.originalPurchaseList.filter(n=>n.siteData.site_name.toLowerCase().includes(t.target.value.toLowerCase())):this.originalPurchaseList:t.target.value?this.originalPurchaseList.filter(n=>n.title.toLowerCase().includes(t.target.value.toLowerCase())):this.originalPurchaseList)}changeRequestType(t){this.requestType=t,"new"==t?(this.filter_value="pending",this.getList({filter_by:this.filter_by,filter_value:this.filter_value})):(this.filter_value="revised",this.getList({filter_by:this.filter_by,filter_value:this.filter_value}))}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:n=>{console.log(n),this.viewPermission=n.dashboard_permissions[0].ParentChildchecklist[19].childList[0].isSelected},error:n=>{console.log(n)}}),this.siteList=this.permissions.user.sites,console.log("SiteSelect",this.siteList)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.F0),e.Y36(v.s),e.Y36(A.o),e.Y36(h.uU))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-purchase-request-list"]],features:[e._Bn([h.uU])],decls:73,vars:20,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","40px","margin-left","20px"],["src","./assets/images/preq.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","20px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/app.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/rc.svg"],["src","./assets/images/approval.svg"],["src","./assets/images/po.svg"],[2,"display","flex","flex-direction","row","gap","10px"],[2,"margin-left","40px","width","100%","margin-top","30px"],["appearance","outline",1,"searchbar"],["matSuffix",""],["matInput","","type","search","placeholder","search title",1,"search-input",3,"input"],[2,"margin-right","600px","margin-top","30px","display","flex","gap","10px"],[2,"margin-top","15px","color","#94A3B8","margin-left","30px"],["appearance","outline",1,"datebar"],["matInput","","placeholder","Date",3,"matDatepicker","dateChange","click"],["matSuffix","",3,"for"],["startPicker",""],[2,"margin-top","30px","display","flex","position","relative","right","570px","gap","10px"],[2,"margin-top","15px","color","#94A3B8","margin-left","-10px"],["matInput","","placeholder","Site",3,"input"],[2,"margin-top","50px","position","relative","right","520px"],[2,"cursor","pointer",3,"ngClass","click"],[4,"ngIf","ngIfElse"],["noView",""],[1,"scroll-bar1",2,"width","96%"],[2,"direction","ltr !important","margin-top","-20px"],[4,"ngFor","ngForOf"],["class","no-record-found",4,"ngIf"],[2,"color","#4272BF","width","200px","text-align","left","padding","10px"],[2,"border","1px solid #D9D9D9","height","30px"],[2,"color","#4272BF","width","500px","padding","10px"],[2,"color","#4272BF","width","400px","padding","10px"],[2,"color","#4272BF","width","700px","text-align","left","padding","10px"],["style","width:250px; font-size: 12px;",3,"color",4,"ngIf"],["style","width:200px; ",4,"ngIf"],[2,"color","#fff","width","150px","cursor","pointer",3,"ngStyle","routerLink"],[2,"width","100px"],[2,"width","250px","font-size","12px"],[2,"width","200px"],[1,"no-record-found"],["src","./assets/images/inbox_empty.png","alt",""],[2,"display","flex","justify-content","center","margin-top","2%","font-size","160%","font-weight","bolder","color","grey"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"mat-toolbar",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"span",3),e._uU(4,"Purchase request list"),e.qZA(),e._UZ(5,"span",4),e.qZA(),e.TgZ(6,"div"),e._UZ(7,"hr",5),e.qZA(),e.TgZ(8,"div",6)(9,"div",7)(10,"div"),e._UZ(11,"img",8),e.qZA(),e.TgZ(12,"span",9),e._uU(13,"Purchase\xa0request"),e.qZA(),e.TgZ(14,"div"),e._UZ(15,"mat-divider",10),e.qZA()(),e.TgZ(16,"div",11)(17,"div"),e._UZ(18,"img",12),e.qZA(),e.TgZ(19,"span",13),e._uU(20,"Approvals"),e.qZA(),e.TgZ(21,"div"),e._UZ(22,"mat-divider",10),e.qZA()(),e.TgZ(23,"div",11)(24,"div"),e._UZ(25,"img",14),e.qZA(),e.TgZ(26,"span",9),e._uU(27,"Rate\xa0Comparative"),e.qZA(),e.TgZ(28,"div"),e._UZ(29,"mat-divider",10),e.qZA()(),e.TgZ(30,"div",11)(31,"div"),e._UZ(32,"img",15),e.qZA(),e.TgZ(33,"span",9),e._uU(34,"Rate\xa0Approvals"),e.qZA(),e.TgZ(35,"div"),e._UZ(36,"mat-divider",10),e.qZA()(),e.TgZ(37,"div",11)(38,"div"),e._UZ(39,"img",16),e.qZA(),e.TgZ(40,"span",9),e._uU(41,"Purchase\xa0orders"),e.qZA()()(),e.TgZ(42,"div",17)(43,"div",18)(44,"mat-form-field",19)(45,"mat-icon",20),e._uU(46,"search"),e.qZA(),e.TgZ(47,"input",21),e.NdJ("input",function(s){return i.search(s,"title")}),e.qZA()()(),e.TgZ(48,"div",22)(49,"div",23)(50,"span"),e._uU(51,"Filter\xa0by"),e.qZA()(),e.TgZ(52,"div")(53,"mat-form-field",24)(54,"input",25),e.NdJ("dateChange",function(s){return i.dateFilter(s)})("click",function(){e.CHM(n);const s=e.MAs(57);return e.KtG(s.open())}),e.qZA(),e._UZ(55,"mat-datepicker-toggle",26)(56,"mat-datepicker",null,27),e.qZA()()(),e.TgZ(58,"div",28)(59,"div",29)(60,"span"),e._uU(61,"Filter\xa0by"),e.qZA()(),e.TgZ(62,"div")(63,"mat-form-field",24)(64,"input",30),e.NdJ("input",function(s){return i.search(s,"site")}),e.qZA()()()(),e.TgZ(65,"div",31)(66,"span",32),e.NdJ("click",function(){return i.changeRequestType("new")}),e._uU(67,"New\xa0request\xa0|"),e.qZA(),e.TgZ(68,"span",32),e.NdJ("click",function(){return i.changeRequestType("revise")}),e._uU(69,"\xa0Revised\xa0request"),e.qZA()()(),e.YNc(70,Xe,6,2,"ng-container",33),e.YNc(71,et,2,0,"ng-template",null,34,e.W1O)}if(2&t){const n=e.MAs(57),a=e.MAs(72);e.xp6(9),e.Q6J("routerLink",e.DdM(11,tt)),e.xp6(7),e.Q6J("routerLink",e.DdM(12,nt)),e.xp6(7),e.Q6J("routerLink",e.DdM(13,it)),e.xp6(7),e.Q6J("routerLink",e.DdM(14,rt)),e.xp6(7),e.Q6J("routerLink",e.DdM(15,ot)),e.xp6(17),e.Q6J("matDatepicker",n),e.xp6(1),e.Q6J("for",n),e.xp6(11),e.Q6J("ngClass",e.VKq(16,J,"new"==i.requestType?"active":"inactive")),e.xp6(2),e.Q6J("ngClass",e.VKq(18,J,"revise"==i.requestType?"active":"inactive")),e.xp6(2),e.Q6J("ngIf",i.viewPermission)("ngIfElse",a)}},dependencies:[Z.KE,Z.R9,f.Mq,f.hl,f.nW,y.d,F.Hw,T.Nt,C.Ye,h.mk,h.sg,h.O5,h.PC,g.rH,g.Od],styles:[".mat-form-field-appearance-outline .mat-form-field-infix{padding:.6em;width:250px}mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.searchbar[_ngcontent-%COMP%]{width:350px;border-radius:20px;font-family:Poppins}.active[_ngcontent-%COMP%]{color:#233a61}.inactive[_ngcontent-%COMP%]{color:#94a3b8}.datebar[_ngcontent-%COMP%]{width:140px;border-radius:20px;font-family:Poppins}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:separate;border-spacing:0 25px;text-align:left;width:100%;font-size:14px;margin-left:30px;margin-bottom:20px;margin-right:-10px}td[_ngcontent-%COMP%]{border:none;text-align:center;padding:8px 1px;color:#233a61;font-style:normal;font-size:14px}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f4f4f5!important}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f4f4f5!important}.scroll-bar1[_ngcontent-%COMP%]{height:600px;width:93%;margin-left:20px;margin-bottom:100px;margin-top:10px;overflow:auto;direction:rtl;overflow-x:hidden}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.no-record-found[_ngcontent-%COMP%]{text-align:center;display:flex;gap:10px;flex-direction:column;align-items:center;justify-content:center}.no-record-found[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:188px}"]}),r})();var Q=_(5861),st=_(4564);function lt(r,l){if(1&r&&(e.TgZ(0,"mat-option",47),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.site_name," ")}}function ct(r,l){if(1&r&&(e.TgZ(0,"mat-option",47),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.vendor_name," ")}}function pt(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",20)(1,"label",21),e._uU(2,"Vendor"),e.TgZ(3,"span",22),e._uU(4,"*"),e.qZA()(),e.TgZ(5,"mat-select",48),e.NdJ("selectionChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.onVendorSelection(n))}),e.YNc(6,ct,2,2,"mat-option",36),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.vendorList)}}function ut(r,l){if(1&r&&(e.TgZ(0,"mat-option",47),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.item_name," ")}}function dt(r,l){if(1&r&&(e.TgZ(0,"mat-option",47),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.brand_name," ")}}function _t(r,l){if(1&r&&(e.TgZ(0,"div")(1,"a",68)(2,"p",69),e._uU(3),e.qZA()()()),2&r){const t=l.$implicit,i=l.index;e.xp6(1),e.Q6J("href",t,e.LSH),e.xp6(2),e.hij(" Attachment ",i+1,"")}}function mt(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"li",71),e._uU(1),e.TgZ(2,"button",72),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw(2).index,c=e.oxw(2);return e.KtG(c.removeFile(s,a))}),e._uU(3," x"),e.qZA()()}if(2&r){const t=l.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function gt(r,l){if(1&r&&(e.TgZ(0,"div")(1,"ul"),e.YNc(2,mt,4,1,"li",70),e.qZA()()),2&r){const t=e.oxw().index,i=e.oxw(2);let n;e.xp6(2),e.Q6J("ngForOf",null==i.items||null==i.items.value||null==(n=i.items.value.at(t))?null:n.files)}}function ht(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"a",73),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().index,a=e.oxw(2);return e.KtG(a.delete(n))}),e._UZ(1,"i",74),e.qZA()}}function ft(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr",54)(1,"td",55),e._uU(2),e.qZA(),e.ynx(3,56),e.TgZ(4,"td")(5,"mat-select",57),e.NdJ("selectionChange",function(n){const s=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.selectedItem(n,s))}),e.YNc(6,ut,2,2,"mat-option",36),e.qZA()(),e.TgZ(7,"td",58),e._uU(8),e.qZA(),e.TgZ(9,"td",58),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._UZ(14,"input",59),e.qZA(),e.TgZ(15,"td"),e._UZ(16,"input",60),e.qZA(),e.TgZ(17,"td")(18,"mat-select",61),e.YNc(19,dt,2,2,"mat-option",36),e.qZA()(),e.TgZ(20,"td"),e.YNc(21,_t,4,2,"div",62),e.qZA(),e.TgZ(22,"td")(23,"input",63),e.NdJ("change",function(n){const s=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.onFilesSelected(n,s))}),e.qZA(),e.YNc(24,gt,3,1,"div",64),e.qZA(),e.TgZ(25,"td"),e._UZ(26,"input",65),e.qZA(),e.TgZ(27,"td")(28,"div",66),e.YNc(29,ht,2,0,"a",67),e.qZA()(),e.BQk(),e.qZA()}if(2&r){const t=l.$implicit,i=l.index,n=e.oxw(2);let a,s,c,p;e.xp6(2),e.hij(" ",i+1," "),e.xp6(1),e.Q6J("formGroupName",i),e.xp6(3),e.Q6J("ngForOf",n.filteredItemList),e.xp6(2),e.hij(" ",null==(a=t.get("category"))?null:a.value," "),e.xp6(2),e.hij(" ",null==(s=t.get("subCategory"))?null:s.value," "),e.xp6(2),e.hij(" ",null==(c=t.get("uom"))?null:c.value," "),e.xp6(7),e.Q6J("ngForOf",n.brandList),e.xp6(2),e.Q6J("ngForOf",t.get("attachment").value),e.xp6(3),e.Q6J("ngIf",null==n.items||null==n.items.value||null==(p=n.items.value.at(i))?null:p.files),e.xp6(5),e.Q6J("ngIf",i>0)}}function xt(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",49)(2,"table",50)(3,"tr")(4,"th"),e._uU(5,"S\xa0No"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Item*"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Category"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Sub\xa0category"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Uom*"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Quantity*"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Rate"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Brand Name"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Attachments"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Upload"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Remarks"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Action"),e.qZA()(),e.TgZ(28,"tbody"),e.YNc(29,ft,30,10,"tr",51),e.qZA()()(),e.TgZ(30,"div",52)(31,"div")(32,"button",53),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addItem())}),e._uU(33," Add Item + "),e.qZA()()(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(29),e.Q6J("ngForOf",t.purchaseRequestForm.get("items").controls)}}function Zt(r,l){if(1&r&&(e.TgZ(0,"mat-option",47),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.item_name," ")}}function qt(r,l){if(1&r&&(e.TgZ(0,"mat-option",47),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.brand_name," ")}}function bt(r,l){if(1&r&&(e.TgZ(0,"div")(1,"a",68)(2,"p",69),e._uU(3),e.qZA()()()),2&r){const t=l.$implicit,i=l.index;e.xp6(1),e.Q6J("href",t,e.LSH),e.xp6(2),e.hij(" Attachment ",i+1,"")}}function vt(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"li",71),e._uU(1),e.TgZ(2,"button",72),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw(2).index,c=e.oxw(2);return e.KtG(c.removeFile(s,a))}),e._uU(3," x"),e.qZA()()}if(2&r){const t=l.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function At(r,l){if(1&r&&(e.TgZ(0,"div")(1,"ul"),e.YNc(2,vt,4,1,"li",70),e.qZA()()),2&r){const t=e.oxw().index,i=e.oxw(2);let n;e.xp6(2),e.Q6J("ngForOf",null==i.items||null==i.items.value||null==(n=i.items.value.at(t))?null:n.files)}}function yt(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"a",73),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().index,a=e.oxw(2);return e.KtG(a.delete(n))}),e._UZ(1,"i",74),e.qZA()}}function Tt(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr",54)(1,"td",55),e._uU(2),e.qZA(),e.ynx(3,56),e.TgZ(4,"td")(5,"mat-select",57),e.NdJ("selectionChange",function(n){const s=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.selectedItem(n,s))}),e.YNc(6,Zt,2,2,"mat-option",36),e.qZA()(),e.TgZ(7,"td",58),e._uU(8),e.qZA(),e.TgZ(9,"td",58),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._UZ(14,"input",59),e.qZA(),e.TgZ(15,"td")(16,"mat-select",61),e.YNc(17,qt,2,2,"mat-option",36),e.qZA()(),e.TgZ(18,"td"),e.YNc(19,bt,4,2,"div",62),e.qZA(),e.TgZ(20,"td")(21,"input",63),e.NdJ("change",function(n){const s=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.onFilesSelected(n,s))}),e.qZA(),e.YNc(22,At,3,1,"div",64),e.qZA(),e.TgZ(23,"td"),e._UZ(24,"input",65),e.qZA(),e.TgZ(25,"td")(26,"div",66),e.YNc(27,yt,2,0,"a",67),e.qZA()(),e.BQk(),e.qZA()}if(2&r){const t=l.$implicit,i=l.index,n=e.oxw(2);let a,s,c,p;e.xp6(2),e.hij(" ",i+1," "),e.xp6(1),e.Q6J("formGroupName",i),e.xp6(3),e.Q6J("ngForOf",n.itemList),e.xp6(2),e.hij(" ",null==(a=t.get("category"))?null:a.value," "),e.xp6(2),e.hij(" ",null==(s=t.get("subCategory"))?null:s.value," "),e.xp6(2),e.hij(" ",null==(c=t.get("uom"))?null:c.value," "),e.xp6(5),e.Q6J("ngForOf",n.brandList),e.xp6(2),e.Q6J("ngForOf",t.get("attachment").value),e.xp6(3),e.Q6J("ngIf",null==n.items||null==n.items.value||null==(p=n.items.value.at(i))?null:p.files),e.xp6(5),e.Q6J("ngIf",i>0)}}function Ct(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",49)(1,"table",50)(2,"tr")(3,"th"),e._uU(4,"S\xa0No"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Item*"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Category"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Sub\xa0category"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Uom*"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Quantity*"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Brand Name"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Attachments"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Upload"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Remarks"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Action"),e.qZA()(),e.TgZ(25,"tbody"),e.YNc(26,Tt,28,10,"tr",51),e.qZA()()(),e.TgZ(27,"div",52)(28,"div")(29,"button",53),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addItem())}),e._uU(30," Add Item + "),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(26),e.Q6J("ngForOf",t.purchaseRequestForm.get("items").controls)}}const Pt=function(){return["/procurement"]},wt=function(){return["/procurement/prlist"]},Ut=function(){return["/rate-comparative"]},kt=function(){return["/rate-approval"]},Nt=function(){return["/purchase-order"]};let It=(()=>{class r{constructor(t,i,n,a,s,c){this.router=t,this.route=i,this.httpService=n,this.snack=a,this.formBuilder=s,this.http=c,this.requredByMinDate=new Date,this.load=!1,this.purchaseRequestForm=new o.cw({title:new o.NI("",o.kI.required),date:new o.NI(q().format("DD-MM-YYYY"),o.kI.required),expected_delivery_date:new o.NI(q().add(1,"days").format("DD-MM-YYYY"),o.kI.required),purchase_request_number:new o.NI(""),site:new o.NI("",o.kI.required),local_purchase:new o.NI("yes",o.kI.required),remarks:new o.NI(""),items:this.formBuilder.array([]),_id:new o.NI(""),vendor:new o.NI("")})}handleLocalPurchaseChange(){this.purchaseRequestForm.get("items").clear(),this.addItem()}onVendorSelection(t){if(console.log(t),null==t.value)return;const i=this.vendorList.find(n=>n._id===t.value);i?this.filteredItemList=this.itemList.filter(n=>{const a=i.category.some(c=>c===n.category),s=i.SubCategory.some(c=>c===n.sub_category);return a&&s}):(console.warn("No matching vendor found for the selected ID."),this.filteredItemList=[]),t.value!==this.initialVendor.vendor&&(this.purchaseRequestForm.get("items").clear(),this.addItem())}createItemArrayForm(){return new o.cw({item_id:new o.NI("",o.kI.required),rate:new o.NI("",o.kI.required),qty:new o.NI("",o.kI.required),category:new o.NI(null),subCategory:new o.NI(null),attachment:new o.NI([]),files:new o.NI([]),remark:new o.NI(null),uom:new o.NI(null),itemName:new o.NI(null),brandName:new o.NI(null)})}onSubmit(){if(this.load)return;if(console.log(this.purchaseRequestForm),console.log(this.purchaseRequestForm.valid),!this.purchaseRequestForm.valid)return console.log("Form is invalid",this.purchaseRequestForm),void Object.keys(this.purchaseRequestForm.controls).forEach(n=>{const a=this.purchaseRequestForm.get(n);a&&a.invalid&&console.log(`Validation error in ${n}:`,a.errors)});let t=this.purchaseRequestForm.value;t.date=q(t.date,"DD-MM-YYYY").toDate(),t.expected_delivery_date=new Date(t.expected_delivery_date),t.status="revised",this.load=!0,console.log("there",t);const i=new FormData;"no"===t.local_purchase?(i.append("_id",t._id),i.append("title",t.title),i.append("handle_by",""),i.append("date",t.date),i.append("expected_delivery_date",t.expected_delivery_date),i.append("purchase_request_number",t.purchase_request_number),i.append("site",t.site),i.append("local_purchase",t.local_purchase),i.append("status",t.status),t.items.forEach((n,a)=>{i.append(`items[${a}][item_id]`,n.item_id),i.append(`items[${a}][qty]`,n.qty),i.append(`items[${a}][category]`,n.category),i.append(`items[${a}][subCategory]`,n.subCategory),i.append(`items[${a}][uom]`,n.uom),i.append(`items[${a}][brandName]`,n.brandName),n.files.forEach((s,c)=>{i.append(`items[${a}][attachment][${c}]`,s,s.name)})})):(i.append("title",t.title),i.append("date",t.date),i.append("expected_delivery_date",t.expected_delivery_date),i.append("purchase_request_number",t.purchase_request_number),i.append("site",t.site),i.append("local_purchase",t.local_purchase),i.append("_id",t._id),i.append("vendor",t.vendor),i.append("status",t.status),t.items.forEach((n,a)=>{i.append(`items[${a}][item_id]`,n.item_id),i.append(`items[${a}][qty]`,n.qty.toString()),i.append(`items[${a}][rate]`,n.rate.toString()),i.append(`items[${a}][category]`,n.category),i.append(`items[${a}][subCategory]`,n.subCategory),i.append(`items[${a}][remark]`,n.remark),i.append(`items[${a}][uom]`,n.uom),i.append(`items[${a}][brandName]`,n.brandName),n.files.forEach((s,c)=>{i.append(`items[${a}][attachment][${c}]`,s,s.name)})})),console.log(i),this.httpService.PUT(d.Fj,i).subscribe({next:n=>{this.load=!1,this.snack.notify("Record has been updated.",1),this.router.navigate(["/procurement/prlist"])},error:n=>{if(this.load=!1,n.errors&&!(0,O.isEmpty)(n.errors)){let a="<ul>";for(let s in n.errors)a+=`<li>${n.errors[s][0]}</li>`;a+="</ul>",this.snack.notifyHtml(a,2)}else this.snack.notify(n.message,2)}})}getList(){var t=this;return(0,Q.Z)(function*(){const i=t.http.get(`${m.N.api_path}${d.PE}`),n=t.http.get(`${m.N.api_path}${d.o7}`),a=t.http.get(`${m.N.api_path}${d.S3}`),s=t.http.get(`${m.N.api_path}${d.ds}`),c=t.http.get(`${m.N.api_path}${d.Lk}`);try{const p=yield t.httpService.multipleRequests([i,n,a,s,c],{}).toPromise();p&&(t.uomList=p[0].data,t.itemList=p[1].data,t.siteList=p[2].data,t.vendorList=p[3].data,t.brandList=p[4].data)}catch(p){console.error("Error fetching data:",p)}})()}selectedItem(t,i){let n=this.itemList.filter(c=>c._id==t.value)[0]?.categoryDetail.name,a=this.itemList.filter(c=>c._id==t.value)[0]?.subCategoryDetail.subcategory_name,s=this.itemList.filter(c=>c._id==t.value)[0]?.uomDetail.uom_name;this.items.at(i).patchValue({category:n,subCategory:a,uom:s})}createItem(t){return t?(console.log("item Here",t.attachment),new o.cw({item_id:new o.NI(t.item_id,o.kI.required),qty:new o.NI(t.qty,o.kI.required),rate:new o.NI(t.rate),category:new o.NI(t.categoryDetail.name),subCategory:new o.NI(t.subCategoryDetail.subcategory_name),attachment:new o.NI(t.attachment),files:new o.NI([]),remark:new o.NI(t.remark),uom:new o.NI(t.uomDetail.uom_name),brandName:new o.NI(t.brandName)})):new o.cw({item_id:new o.NI("",o.kI.required),qty:new o.NI("",o.kI.required),rate:new o.NI(""),category:new o.NI(""),subCategory:new o.NI(""),attachment:new o.NI([]),files:new o.NI([]),remark:new o.NI(""),uom:new o.NI(""),brandName:new o.NI("")})}delete(t){this.purchaseRequestForm.get("items").removeAt(t)}patchData(t){this.purchaseRequestForm.patchValue({title:t.title,date:t.date,expected_delivery_date:t.expected_delivery_date,purchase_request_number:t.purchase_request_number,site:t.site,local_purchase:t.local_purchase,remarks:t.remarks,_id:t._id,vendor:t.vendor}),t.items&&t.items.length>0&&t.items.map(i=>{this.addItems(i)}),console.log(this.purchaseRequestForm),this.purchaseRequestForm.controls.remarks.disable()}addItem(){this.items=this.purchaseRequestForm.get("items"),this.items.push(this.createItem())}addItems(t){this.items=this.purchaseRequestForm.get("items"),t&&this.items.push(this.createItem(t))}onFilesSelected(t,i){const n=t.target.files;if(console.log("file",n),n.length>5)this.snack.notify("Can upload Maximum 5 Files",2);else if(n.length>0){const a=Array.from(n);this.items.at(i).patchValue({files:a}),console.log(this.items)}}removeFile(t,i){const n=this.items.at(t).get("files");console.log("here",n);const a=n.value.filter(s=>s.name!==i.name);console.log("there",a),this.items.at(t).patchValue({files:a}),console.log(this.items)}files(t){return this.items.at(t).get("files").controls.map(i=>i.value)}ngOnInit(){var t=this;this.route.params.subscribe(i=>{i.id&&this.httpService.GET(`${d.Fj}/detail`,{_id:i.id}).subscribe(function(){var n=(0,Q.Z)(function*(a){yield t.getList(),t.initialVendor=a.data[0],t.onVendorSelection({value:t.initialVendor.vendor}),t.patchData(a.data[0])});return function(a){return n.apply(this,arguments)}}())})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.F0),e.Y36(g.gz),e.Y36(v.s),e.Y36(A.o),e.Y36(o.qu),e.Y36(P.eN))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-revise-purchase-request"]],decls:103,vars:22,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","40px","margin-left","20px"],["src","./assets/images/preq.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/prl.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],["src","./assets/images/rc.svg"],[2,"width","100px","margin-left","10px","margin-top","10px","border","1px dashed"],["src","./assets/images/po.svg"],[3,"formGroup","ngSubmit"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","40px","width","1000px"],[2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],[1,"star"],["placeholder","Enter title","formControlName","title",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9F9F9F","cursor","pointer","margin-top","10px","font-family","Poppins"],[2,"display","flex","flex-direction","column","margin-left","100px"],[1,"custom-form-control"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Enter base Line Start Date",3,"matDatepicker","click"],["matSuffix","",3,"for"],["date",""],[1,"custom-form-group"],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter base Line Start Date",3,"matDatepicker","min","click"],["requiredByStartDate",""],["placeholder","Auto generate","formControlName","purchase_request_number","readonly","",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9F9F9F","cursor","pointer","margin-top","10px","font-family","Poppins"],["id","site","placeholder","Select site","formControlName","site",2,"padding","10px","width","200px","border","1px solid #9F9F9F","border-radius","6px","cursor","pointer","margin-top","10px","font-family","Poppins"],[3,"value",4,"ngFor","ngForOf"],[2,"color","#4272BF"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group",3,"change"],[1,"example-radio-button",3,"value"],["style","display: flex;flex-direction: column;",4,"ngIf"],[4,"ngIf","ngIfElse"],["noLocalPurchase",""],[1,"row","text-area-section"],["name","","id","","cols","30","rows","10","formControlName","remarks"],[1,"row","button-list"],[2,"padding","8px","width","auto","background-color","#233A61","color","#fff","border-radius","5px","border-color","lightgrey","font-size","14px","font-family","Poppins"],[3,"value"],["id","site","placeholder","Select Vendor","formControlName","vendor",2,"padding","10px","width","200px","border","1px solid #ccc","border-radius","6px","cursor","pointer","font-family","Poppins",3,"selectionChange"],[1,"scroll-bar1"],[1,"items-table",2,"direction","ltr !important","border-left","2px solid #000 !important"],["style","background-color: #F4F4F5;","formArrayName","items",4,"ngFor","ngForOf"],[2,"display","flex","flex-direction","row","gap","40px","margin-left","38px","margin-bottom","100px","margin-top","100px","top","-50px","position","relative"],[2,"padding","8px","width","120px","background-color","#fff","cursor","pointer","border","0.5px solid #94A3B8","border-radius","5px","font-size","14px","font-family","Poppins",3,"click"],["formArrayName","items",2,"background-color","#F4F4F5"],[2,"text-align","center"],[3,"formGroupName"],["id","itemName","placeholder","Select Item","formControlName","item_id",1,"select-form-field",3,"selectionChange"],[2,"color","#000"],["type","text","placeholder","Enter","digitOnly","","formControlName","qty",1,"pr-form-field"],["type","text","placeholder","Enter","digitOnly","","formControlName","rate",1,"pr-form-field"],["id","brandName","placeholder","Select Brand","formControlName","brandName",1,"select-form-field"],[4,"ngFor","ngForOf"],["type","file","multiple","",3,"change"],[4,"ngIf"],["placeholder","Enter","formControlName","remark",1,"pr-form-field"],[1,"action-btn-wrapper"],["class","action-btn","title","Delete",3,"click",4,"ngIf"],["target","_blank",3,"href"],[2,"color","blue","text-decoration","underline","font-size","12px","margin-top","-10px"],["style","margin:10px; display: flex; flex-direction: row ;",4,"ngFor","ngForOf"],[2,"margin","10px","display","flex","flex-direction","row"],[2,"border","none","color","red","font-weight","bold","margin-left","5px",3,"click"],["title","Delete",1,"action-btn",3,"click"],[1,"fa","fa-trash"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"mat-toolbar",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"span",3),e._uU(4,"Revise purchase request "),e.qZA(),e._UZ(5,"span",4),e.qZA(),e.TgZ(6,"div"),e._UZ(7,"hr",5),e.qZA(),e.TgZ(8,"div",6)(9,"div",7)(10,"div"),e._UZ(11,"img",8),e.qZA(),e.TgZ(12,"span",9),e._uU(13,"Purchase\xa0request"),e.qZA(),e.TgZ(14,"div"),e._UZ(15,"mat-divider",10),e.qZA()(),e.TgZ(16,"div",11)(17,"div"),e._UZ(18,"img",12),e.qZA(),e.TgZ(19,"span",13),e._uU(20,"Approvals"),e.qZA(),e.TgZ(21,"div"),e._UZ(22,"mat-divider",10),e.qZA()(),e.TgZ(23,"div",11)(24,"div"),e._UZ(25,"img",14),e.qZA(),e.TgZ(26,"span",13),e._uU(27,"Rate\xa0Comparative"),e.qZA(),e.TgZ(28,"div"),e._UZ(29,"mat-divider",10),e.qZA()(),e.TgZ(30,"div",11)(31,"div"),e._UZ(32,"img",12),e.qZA(),e.TgZ(33,"span",13),e._uU(34,"Rate\xa0Approvals"),e.qZA(),e.TgZ(35,"div"),e._UZ(36,"mat-divider",15),e.qZA()(),e.TgZ(37,"div",11)(38,"div"),e._UZ(39,"img",16),e.qZA(),e.TgZ(40,"span",13),e._uU(41,"Purchase\xa0orders"),e.qZA()()(),e.TgZ(42,"form",17),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(43,"mat-card",18)(44,"div",19)(45,"div",20)(46,"label",21),e._uU(47,"Request title "),e.TgZ(48,"span",22),e._uU(49,"*"),e.qZA()(),e._UZ(50,"input",23),e.qZA(),e.TgZ(51,"div",24)(52,"label",21),e._uU(53,"Request date"),e.qZA(),e.TgZ(54,"div",25)(55,"mat-form-field",26)(56,"input",27),e.NdJ("click",function(){e.CHM(n);const s=e.MAs(59);return e.KtG(s.open())}),e.qZA(),e._UZ(57,"mat-datepicker-toggle",28)(58,"mat-datepicker",null,29),e.qZA()()(),e.TgZ(60,"div",30)(61,"label",31),e._uU(62," Required by "),e.TgZ(63,"span",22),e._uU(64,"*"),e.qZA()(),e.TgZ(65,"div",25)(66,"mat-form-field",26)(67,"input",32),e.NdJ("click",function(){e.CHM(n);const s=e.MAs(70);return e.KtG(s.open())}),e.qZA(),e._UZ(68,"mat-datepicker-toggle",28)(69,"mat-datepicker",null,33),e.qZA()()(),e.TgZ(71,"div",20)(72,"label",21),e._uU(73,"Purchase request no "),e.qZA(),e._UZ(74,"input",34),e.qZA(),e.TgZ(75,"div",24)(76,"label",21),e._uU(77,"Site name "),e.TgZ(78,"span",22),e._uU(79,"*"),e.qZA()(),e.TgZ(80,"mat-select",35),e.YNc(81,lt,2,2,"mat-option",36),e.qZA()(),e.TgZ(82,"div",24)(83,"label",37),e._uU(84,"Local Purchase "),e.TgZ(85,"span",22),e._uU(86,"*"),e.qZA()(),e.TgZ(87,"mat-radio-group",38),e.NdJ("change",function(){return i.handleLocalPurchaseChange()}),e.TgZ(88,"mat-radio-button",39),e._uU(89," Yes "),e.qZA(),e.TgZ(90,"mat-radio-button",39),e._uU(91," No "),e.qZA()()(),e.YNc(92,pt,7,1,"div",40),e.qZA()(),e.YNc(93,xt,34,1,"ng-container",41),e.YNc(94,Ct,31,1,"ng-template",null,42,e.W1O),e.TgZ(96,"div",43)(97,"label",21),e._uU(98,"Remarks "),e.qZA(),e._UZ(99,"textarea",44),e.qZA(),e.TgZ(100,"div",45)(101,"button",46),e._uU(102,"Update Material Request"),e.qZA()()()}if(2&t){const n=e.MAs(59),a=e.MAs(70),s=e.MAs(95);let c,p;e.xp6(9),e.Q6J("routerLink",e.DdM(17,Pt)),e.xp6(7),e.Q6J("routerLink",e.DdM(18,wt)),e.xp6(7),e.Q6J("routerLink",e.DdM(19,Ut)),e.xp6(7),e.Q6J("routerLink",e.DdM(20,kt)),e.xp6(7),e.Q6J("routerLink",e.DdM(21,Nt)),e.xp6(5),e.Q6J("formGroup",i.purchaseRequestForm),e.xp6(14),e.Q6J("matDatepicker",n),e.xp6(1),e.Q6J("for",n),e.xp6(10),e.Q6J("matDatepicker",a)("min",i.requredByMinDate),e.xp6(1),e.Q6J("for",a),e.xp6(13),e.Q6J("ngForOf",i.siteList),e.xp6(7),e.Q6J("value","yes"),e.xp6(2),e.Q6J("value","no"),e.xp6(2),e.Q6J("ngIf","yes"===(null==(c=i.purchaseRequestForm.get("local_purchase"))?null:c.value)),e.xp6(1),e.Q6J("ngIf","yes"===(null==(p=i.purchaseRequestForm.get("local_purchase"))?null:p.value))("ngIfElse",s)}},dependencies:[w.ey,Z.KE,Z.R9,U.a8,f.Mq,f.hl,f.nW,y.d,T.Nt,b.VQ,b.U0,k.gD,C.Ye,h.sg,h.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,o.x0,o.CE,st.L,g.rH,g.Od],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:1110px;height:auto;margin-left:30px;margin-top:30px;box-shadow:0 2px 12px #00000040;font-family:Poppins}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;font-size:14px;margin:8px 20px 20px 10px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;width:1000px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}.scroll-bar1[_ngcontent-%COMP%]{height:auto;width:auto;margin-left:25px;margin-bottom:100px;margin-top:50px;overflow:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background:none}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.text-area-section[_ngcontent-%COMP%]{width:1334px;height:auto;margin-left:30px}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 30px 20px 0;float:right;gap:10px}']}),r})();function Rt(r,l){if(1&r&&(e.TgZ(0,"mat-option",53),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.site_name," ")}}function Ft(r,l){if(1&r&&(e.TgZ(0,"div",54)(1,"label",22),e._uU(2,"Vendor "),e.TgZ(3,"span",31),e._uU(4,"*"),e.qZA()(),e._UZ(5,"input",55),e.qZA()),2&r){const t=e.oxw();e.xp6(5),e.Q6J("readonly",!0)("value",t.selectedVendor)}}function Mt(r,l){if(1&r&&(e.TgZ(0,"div")(1,"a",63)(2,"p",64),e._uU(3),e.qZA()()()),2&r){const t=l.$implicit,i=l.index;e.xp6(1),e.Q6J("href",t,e.LSH),e.xp6(2),e.hij(" Attachment ",i+1,"")}}function Lt(r,l){if(1&r&&(e.TgZ(0,"tr",59)(1,"td",60),e._uU(2),e.qZA(),e.ynx(3),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td",61),e._uU(7),e.qZA(),e.TgZ(8,"td",61),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td",61),e._uU(13),e.qZA(),e.TgZ(14,"td",61),e._uU(15),e.qZA(),e.TgZ(16,"td",61),e._uU(17),e.qZA(),e.TgZ(18,"td",61),e._uU(19),e.qZA(),e.TgZ(20,"td",61),e.YNc(21,Mt,4,2,"div",62),e.qZA(),e.BQk(),e.qZA()),2&r){const t=l.$implicit,i=l.index,n=e.oxw(2);e.xp6(2),e.hij(" ",i+1," "),e.xp6(3),e.hij(" ",n.getItemName(t.item_id)," "),e.xp6(2),e.hij(" ",t.categoryDetail.name," "),e.xp6(2),e.hij(" ",t.subCategoryDetail.subcategory_name," "),e.xp6(2),e.hij(" ",t.uomDetail.uom_name," "),e.xp6(2),e.hij(" ",t.qty," "),e.xp6(2),e.hij(" ",n.myBrandName(t.brandName)," "),e.xp6(2),e.hij(" ",t.rate," "),e.xp6(2),e.hij(" ",t.remark," "),e.xp6(2),e.Q6J("ngForOf",t.attachment)}}function Ot(r,l){if(1&r&&(e.TgZ(0,"div",56)(1,"table",57)(2,"tr")(3,"th"),e._uU(4,"S\xa0No"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Item*"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Category"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Sub\xa0category"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Uom*"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Quantity*"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Brand Name"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Rate"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Remarks"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Attachments"),e.qZA()(),e.TgZ(23,"tbody"),e.YNc(24,Lt,22,10,"tr",58),e.qZA()()()),2&r){const t=e.oxw();e.xp6(24),e.Q6J("ngForOf",null==t.details?null:t.details.items)}}function Jt(r,l){if(1&r&&(e.TgZ(0,"div")(1,"a",63)(2,"p",64),e._uU(3),e.qZA()()()),2&r){const t=l.$implicit,i=l.index;e.xp6(1),e.Q6J("href",t,e.LSH),e.xp6(2),e.hij(" Attachment ",i+1,"")}}function Qt(r,l){if(1&r&&(e.TgZ(0,"tr",59)(1,"td",60),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",61),e._uU(6),e.qZA(),e.TgZ(7,"td",61),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td",61),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e.YNc(18,Jt,4,2,"div",62),e.qZA()()),2&r){const t=l.$implicit,i=l.index,n=e.oxw(2);e.xp6(2),e.hij(" ",i+1," "),e.xp6(2),e.hij(" ",n.getItemName(t.item_id)," "),e.xp6(2),e.hij(" ",t.categoryDetail.name," "),e.xp6(2),e.hij(" ",t.subCategoryDetail.subcategory_name," "),e.xp6(2),e.hij(" ",t.uomDetail.uom_name," "),e.xp6(2),e.hij(" ",t.qty," "),e.xp6(2),e.hij(" ",n.myBrandName(t.brandName)," "),e.xp6(2),e.hij(" ",t.remark," "),e.xp6(2),e.Q6J("ngForOf",t.attachment)}}function Dt(r,l){if(1&r&&(e.TgZ(0,"div",56)(1,"table",57)(2,"tr")(3,"th"),e._uU(4,"S\xa0No"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Item*"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Category"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Sub\xa0category"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Uom*"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Quantity*"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Brand Name"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Remarks"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Attachments"),e.qZA()(),e.TgZ(21,"tbody"),e.YNc(22,Qt,19,9,"tr",58),e.qZA()()()),2&r){const t=e.oxw();e.xp6(22),e.Q6J("ngForOf",null==t.details?null:t.details.items)}}function St(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",65),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateRequest("approved"))}),e._uU(2," Approve "),e.qZA(),e.BQk()}}function Yt(r,l){1&r&&(e.TgZ(0,"button",66),e._uU(1," No Permission to Approve\n"),e.qZA())}function $t(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",50),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateRequest("rejected"))}),e._uU(2," Rejected "),e.qZA(),e.BQk()}}function jt(r,l){1&r&&(e.TgZ(0,"button",67),e._uU(1," No Permission To Reject "),e.qZA())}function Et(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",50),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateRequest("revise"))}),e._uU(2," Revise Request "),e.qZA(),e.BQk()}}function Bt(r,l){1&r&&(e.TgZ(0,"button",67),e._uU(1," No Permission To Revise Request "),e.qZA())}const zt=function(){return["/procurement"]},Gt=function(){return["/procurement/prlist"]},Ht=function(){return["/rate-comparative"]},Vt=function(){return["/rate-approval"]},Kt=function(){return["/purchase-order"]},Wt=[{path:"",component:we},{path:"prlist",component:at},{path:"details/:id",component:Ee},{path:"update/:id",component:(()=>{class r{constructor(t,i,n,a,s,c){this.router=t,this.httpService=i,this.snack=n,this.formBuilder=a,this.route=s,this.http=c,this.downloadLoading=!1,this.load=!1,this.purchaseRequestForm=new o.cw({title:new o.NI("",o.kI.required),date:new o.NI("",o.kI.required),expected_delivery_date:new o.NI("",o.kI.required),purchase_request_number:new o.NI(""),site:new o.NI({value:"",disabled:!0},o.kI.required),local_purchase:new o.NI({value:"",disabled:!0},o.kI.required),remarks:new o.NI(""),items:this.formBuilder.array([]),_id:new o.NI}),this.details={},this.getList(),this.route.params.subscribe(p=>{this.pageId=p.id})}getList(){const t=this.http.get(`${m.N.api_path}${d.PE}`),i=this.http.get(`${m.N.api_path}${d.o7}`),n=this.http.get(`${m.N.api_path}${d.S3}`),a=this.http.get(`${m.N.api_path}${d.Lk}`);this.httpService.multipleRequests([t,i,n,a],{}).subscribe(s=>{s&&(this.uomList=s[0].data,this.itemList=s[1].data,this.siteList=s[2].data,this.brandList=s[3].data)})}patchData(t){this.purchaseRequestForm.patchValue({title:t.title,date:t.date,expected_delivery_date:t.expected_delivery_date,purchase_request_number:t.purchase_request_number,site:t.site,local_purchase:t.local_purchase,remarks:t.remarks})}createItemArrayForm(){return new o.cw({item_id:new o.NI("",o.kI.required),qty:new o.NI("",o.kI.required),category:new o.NI(""),subCategory:new o.NI(""),attachment:new o.NI(""),remark:new o.NI("",o.kI.required),uom:new o.NI("",o.kI.required),brandName:new o.NI("",o.kI.required)})}addItems(t){this.items=this.purchaseRequestForm.get("items"),t&&this.items.push(this.createItem(t))}createItem(t){if(t)return new o.cw({item_id:new o.NI(t.item_id,o.kI.required),qty:new o.NI(t.qty,o.kI.required),category:new o.NI(t.categoryDetail.name),subCategory:new o.NI(t.subCategoryDetail.subcategory_name),attachment:new o.NI(t.attachment),remark:new o.NI(t.remark,o.kI.required),uom:new o.NI(t.uomDetail._id,o.kI.required),brandName:new o.NI(t.brandName,o.kI.required)})}myBrandName(t){return null==this.brandList?void 0:this.brandList.filter(n=>n._id==t)[0].brand_name}getSiteList(){this.httpService.GET(d.S3,{}).subscribe(t=>{this.siteList=t})}getItemName(t){if(this.itemList&&t)return this.itemList.filter(i=>i._id==t)[0].item_name}updateRequest(t){console.log("meaafsdfs",this.details._id,this.purchaseRequestForm.value.remarks,t),this.httpService.PUT(d.Fj,{_id:this.details._id,status:t,remarks:this.purchaseRequestForm.value.remarks}).subscribe(i=>{this.router.navigate(["/procurement/prlist"])})}getVendorList(){if(null!=this.details.vendor){const t=this.http.get(`${m.N.api_path}${d.Iy}?_id=${this.details.vendor}`);console.log("this is res : "),this.httpService.multipleRequests(t,{}).subscribe(i=>{i&&(this.selectedVendor=i[0].data[0].vendor_name)})}}downloadPRPDF(){this.downloadLoading=!0,this.httpService.GETPDF("generate/prpdf",{template:"pr",id:this.pageId}).subscribe(t=>{this.downloadLoading=!1;var i=new Blob([t],{type:"application/pdf"});let n=(new Date).getTime();(0,L.saveAs)(i,`pr-${n}.pdf`)})}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:n=>{console.log(n),this.viewPermission=n.dashboard_permissions[0].ParentChildchecklist[19].childList[0].isSelected,this.addPermission=n.dashboard_permissions[0].ParentChildchecklist[19].childList[1].isSelected,this.editPermission=n.dashboard_permissions[0].ParentChildchecklist[19].childList[2].isSelected,this.deletePermission=n.dashboard_permissions[0].ParentChildchecklist[19].childList[3].isSelected},error:n=>{console.log(n)}}),this.route.params.subscribe(n=>{n.id&&this.httpService.GET(`${d.Fj}/detail`,{_id:n.id}).subscribe({next:a=>{this.details=a.data[0],this.getVendorList(),this.patchData(a.data[0])},error:a=>{this.router.navigate(["/procurement/prlist"])}})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.F0),e.Y36(v.s),e.Y36(A.o),e.Y36(o.qu),e.Y36(g.gz),e.Y36(P.eN))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-update-pr-status"]],decls:110,vars:30,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","40px","margin-left","20px"],["src","./assets/images/approval.svg","height","45px"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/app.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/rc.svg"],["src","./assets/images/approval.svg"],[2,"width","100px","margin-left","10px","margin-top","10px","border","1px dashed"],["src","./assets/images/po.svg"],[3,"formGroup"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","40px","width","1000px"],[2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],["placeholder","Enter title","formControlName","title",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9F9F9F","cursor","pointer","margin-top","10px","font-family","Poppins",3,"readonly"],[2,"display","flex","flex-direction","column","margin-left","100px"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Auto generate Request Date",3,"matDatepicker","readonly"],["matSuffix","",3,"for"],["date",""],[1,"custom-form-group"],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],[1,"star"],[1,"custom-form-control"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by",3,"matDatepicker","readonly"],["requiredByStartDate",""],["placeholder","Auto generate","formControlName","purchase_request_number","readonly","",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9F9F9F","cursor","pointer","margin-top","10px","font-family","Poppins"],["id","site","placeholder","Select site","formControlName","site",2,"padding","10px","width","200px","border","1px solid #9F9F9F","border-radius","6px","cursor","pointer","margin-top","10px","font-family","Poppins"],[3,"value",4,"ngFor","ngForOf"],["class","flex-div","style","display: flex; flex-direction: column;",4,"ngIf"],[1,"flex-div",2,"display","flex","flex-direction","column","margin","auto"],[2,"color","#4272BF"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group"],[1,"example-radio-button",3,"value"],["class","scroll-bar1",4,"ngIf","ngIfElse"],["noLocalPurchase",""],[1,"row","text-area-section"],["name","","id","","cols","30","rows","10","formControlName","remarks"],[1,"row","button-list"],[4,"ngIf","ngIfElse"],["noAddPermission",""],[2,"padding","8px","width","120px","background-color","#fff","color","#233A61","border","1px solid #94A3B8","border-radius","5px","font-size","14px","font-family","Poppins",3,"click"],["noDeletePermission",""],["noEditPermission",""],[3,"value"],[1,"flex-div",2,"display","flex","flex-direction","column"],["placeholder","Enter Vendor",2,"padding","10px","width","75%","border","1px solid #ccc","border-radius","6px","cursor","pointer","font-family","Poppins",3,"readonly","value"],[1,"scroll-bar1"],[2,"direction","ltr !important","border-left","2px solid #000 !important"],["style","background-color: #F4F4F5;",4,"ngFor","ngForOf"],[2,"background-color","#F4F4F5"],[2,"text-align","center"],[2,"color","#000"],[4,"ngFor","ngForOf"],[3,"href"],[2,"color","blue","text-decoration","underline","font-size","12px","margin-top","-10px"],[2,"padding","8px","width","120px","background-color","#233A61","color","#fff","border-radius","5px","border-color","lightgrey","font-size","14px","font-family","Poppins",3,"click"],["disabled","",2,"padding","8px","width","120px","background-color","#233A61","color","#fff","border-radius","5px","border-color","lightgrey","font-size","14px","font-family","Poppins"],["disabled","",2,"padding","8px","width","120px","background-color","#fff","color","#233A61","border","1px solid #94A3B8","border-radius","5px","font-size","14px","font-family","Poppins"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-toolbar",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"span",3),e._uU(4,"Requisition Approvals"),e.qZA(),e._UZ(5,"span",4),e.qZA(),e.TgZ(6,"div"),e._UZ(7,"hr",5),e.qZA(),e.TgZ(8,"div",6)(9,"div",7)(10,"div"),e._UZ(11,"img",8),e.qZA(),e.TgZ(12,"span",9),e._uU(13,"Purchase\xa0request"),e.qZA(),e.TgZ(14,"div"),e._UZ(15,"mat-divider",10),e.qZA()(),e.TgZ(16,"div",11)(17,"div"),e._UZ(18,"img",12),e.qZA(),e.TgZ(19,"span",13),e._uU(20,"Approvals"),e.qZA(),e.TgZ(21,"div"),e._UZ(22,"mat-divider",10),e.qZA()(),e.TgZ(23,"div",11)(24,"div"),e._UZ(25,"img",14),e.qZA(),e.TgZ(26,"span",9),e._uU(27,"Rate\xa0Comparative"),e.qZA(),e.TgZ(28,"div"),e._UZ(29,"mat-divider",10),e.qZA()(),e.TgZ(30,"div",11)(31,"div"),e._UZ(32,"img",15),e.qZA(),e.TgZ(33,"span",9),e._uU(34,"Rate\xa0Approvals"),e.qZA(),e.TgZ(35,"div"),e._UZ(36,"mat-divider",16),e.qZA()(),e.TgZ(37,"div",11)(38,"div"),e._UZ(39,"img",17),e.qZA(),e.TgZ(40,"span",9),e._uU(41,"Purchase\xa0orders"),e.qZA()()(),e.TgZ(42,"form",18)(43,"mat-card",19)(44,"div",20)(45,"div",21)(46,"label",22),e._uU(47,"Request title "),e.qZA(),e._UZ(48,"input",23),e.qZA(),e.TgZ(49,"div",24)(50,"label",22),e._uU(51,"Request date"),e.qZA(),e.TgZ(52,"mat-form-field",25),e._UZ(53,"input",26)(54,"mat-datepicker-toggle",27)(55,"mat-datepicker",null,28),e.qZA()(),e.TgZ(57,"div",29)(58,"label",30),e._uU(59," Required by "),e.TgZ(60,"span",31),e._uU(61,"*"),e.qZA()(),e.TgZ(62,"div",32)(63,"mat-form-field",25),e._UZ(64,"input",33)(65,"mat-datepicker-toggle",27)(66,"mat-datepicker",null,34),e.qZA()()(),e.TgZ(68,"div",21)(69,"label",22),e._uU(70,"Purchase request no "),e.qZA(),e._UZ(71,"input",35),e.qZA(),e.TgZ(72,"div",24)(73,"label",22),e._uU(74,"Site name "),e.TgZ(75,"span",31),e._uU(76,"*"),e.qZA()(),e.TgZ(77,"mat-select",36),e.YNc(78,Rt,2,2,"mat-option",37),e.qZA()(),e.YNc(79,Ft,6,2,"div",38),e.TgZ(80,"div",39)(81,"label",40),e._uU(82,"Local Purchase "),e.TgZ(83,"span",31),e._uU(84,"*"),e.qZA()(),e.TgZ(85,"mat-radio-group",41)(86,"mat-radio-button",42),e._uU(87," Yes "),e.qZA(),e.TgZ(88,"mat-radio-button",42),e._uU(89," No "),e.qZA()()()()(),e.YNc(90,Ot,25,1,"div",43),e.YNc(91,Dt,23,1,"ng-template",null,44,e.W1O),e.TgZ(93,"div",45)(94,"label",22),e._uU(95,"Remarks "),e.qZA(),e._UZ(96,"textarea",46),e.qZA()(),e.TgZ(97,"div",47),e.YNc(98,St,3,0,"ng-container",48),e.YNc(99,Yt,2,0,"ng-template",null,49,e.W1O),e.ynx(101),e.TgZ(102,"button",50),e.NdJ("click",function(){return i.downloadPRPDF()}),e._uU(103," Download PR "),e.qZA(),e.BQk(),e.YNc(104,$t,3,0,"ng-container",48),e.YNc(105,jt,2,0,"ng-template",null,51,e.W1O),e.YNc(107,Et,3,0,"ng-container",48),e.YNc(108,Bt,2,0,"ng-template",null,52,e.W1O),e.qZA()),2&t){const n=e.MAs(56),a=e.MAs(67),s=e.MAs(92),c=e.MAs(100),p=e.MAs(106),u=e.MAs(109);e.xp6(9),e.Q6J("routerLink",e.DdM(25,zt)),e.xp6(7),e.Q6J("routerLink",e.DdM(26,Gt)),e.xp6(7),e.Q6J("routerLink",e.DdM(27,Ht)),e.xp6(7),e.Q6J("routerLink",e.DdM(28,Vt)),e.xp6(7),e.Q6J("routerLink",e.DdM(29,Kt)),e.xp6(5),e.Q6J("formGroup",i.purchaseRequestForm),e.xp6(6),e.Q6J("readonly",!0),e.xp6(5),e.Q6J("matDatepicker",n)("readonly",!0),e.xp6(1),e.Q6J("for",n),e.xp6(10),e.Q6J("matDatepicker",a)("readonly",!0),e.xp6(1),e.Q6J("for",a),e.xp6(13),e.Q6J("ngForOf",i.siteList),e.xp6(1),e.Q6J("ngIf","yes"==(null==i.details?null:i.details.local_purchase)),e.xp6(7),e.Q6J("value","yes"),e.xp6(2),e.Q6J("value","no"),e.xp6(2),e.Q6J("ngIf","yes"==(null==i.details?null:i.details.local_purchase))("ngIfElse",s),e.xp6(8),e.Q6J("ngIf",i.addPermission||i.editPermission)("ngIfElse",c),e.xp6(6),e.Q6J("ngIf",i.deletePermission)("ngIfElse",p),e.xp6(3),e.Q6J("ngIf",i.editPermission)("ngIfElse",u)}},dependencies:[w.ey,Z.KE,Z.R9,U.a8,f.Mq,f.hl,f.nW,y.d,T.Nt,b.VQ,b.U0,k.gD,C.Ye,h.sg,h.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,g.rH,g.Od],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.flex-div[_ngcontent-%COMP%]{width:31%}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:1110px;height:auto;margin-left:30px;margin-top:30px;box-shadow:0 2px 12px #00000040;font-family:Poppins}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;font-size:14px;margin:8px 20px 20px 10px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;width:1000px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}.scroll-bar1[_ngcontent-%COMP%]{height:auto;width:auto;margin-left:25px;margin-bottom:100px;margin-top:50px;overflow:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background-color:"Transparent"}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 30px 20px 0;float:right;gap:10px}.text-area-section[_ngcontent-%COMP%]{width:95%;height:auto;margin-left:30px}']}),r})()},{path:"revise/:id",component:It}];let Xt=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[Be.S,h.ez,o.UX,D.Z,[g.Bz.forChild(Wt)]]}),r})()}}]);