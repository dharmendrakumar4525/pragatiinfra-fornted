"use strict";(self.webpackChunkpra=self.webpackChunkpra||[]).push([[801],{6801:(W,M,r)=>{r.r(M),r.d(M,{SubCategoryModule:()=>K});var p=r(6895),a=r(4006),u=r(8608),b=r(7489),t=r(4650),h=r(9299),C=r(2126),y=r(6104),P=r(3238),m=r(9549),_=r(4859),v=r(4144),Z=r(4385);function k(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function S(o,s){if(1&o&&(t.TgZ(0,"mat-option",16),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function N(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}let D=(()=>{class o{constructor(e,n,i){this.router=e,this.httpService=n,this.snack=i,this.addForm=new a.cw({subcategory_name:new a.NI("",a.kI.required),category:new a.NI("",a.kI.required)}),this.categoryList=[],this.httpService.GET(u.jz,{}).subscribe(c=>{this.categoryList=c.data})}saveData(){this.addForm.valid?this.httpService.POST(u.eC,this.addForm.value).subscribe(e=>{this.snack.notify(" Data has been saved sucessfully.",1),this.router.navigate(["sub-category"])},e=>{if(e.errors&&!(0,b.isEmpty)(e.errors)){let n="<ul>";for(let i in e.errors)n+=`<li>${e.errors[i][0]}</li>`;n+="</ul>",this.snack.notifyHtml(n,2)}else this.snack.notify(e.message,2)}):this.addForm.markAllAsTouched()}list(){this.router.navigate(["sub-category"])}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.F0),t.Y36(C.s),t.Y36(y.o))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-data"]],decls:27,vars:4,consts:[[1,"section-wrapper"],[1,"section-header"],[1,"header-left"],[1,"header-right"],[1,"buttons-containers"],["mat-button","",1,"submit-btn",3,"click"],["mat-button","",1,"cancel-btn",3,"click"],[1,"section-body"],[3,"formGroup"],[1,"row"],[1,"col-md-3"],["appearance","outline"],["matInput","","formControlName","subcategory_name"],[4,"ngIf"],["matInput","","formControlName","category"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4,"Add Sub Category"),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"button",5),t.NdJ("click",function(){return n.saveData()}),t._uU(8,"Submit"),t.qZA(),t.TgZ(9,"button",6),t.NdJ("click",function(){return n.list()}),t._uU(10,"Cancel"),t.qZA()()()(),t.TgZ(11,"div",7)(12,"form",8)(13,"div",9)(14,"div",10)(15,"mat-form-field",11)(16,"mat-label"),t._uU(17,"Sub Category Name"),t.qZA(),t._UZ(18,"input",12),t.YNc(19,k,2,0,"mat-error",13),t.qZA()(),t.TgZ(20,"div",10)(21,"mat-form-field")(22,"mat-label"),t._uU(23,"Category"),t.qZA(),t.TgZ(24,"mat-select",14),t.YNc(25,S,2,2,"mat-option",15),t.qZA(),t.YNc(26,N,2,0,"mat-error",13),t.qZA()()()()()()),2&e&&(t.xp6(12),t.Q6J("formGroup",n.addForm),t.xp6(7),t.Q6J("ngIf",null==n.addForm.controls.subcategory_name.errors?null:n.addForm.controls.subcategory_name.errors.required),t.xp6(6),t.Q6J("ngForOf",n.categoryList),t.xp6(1),t.Q6J("ngIf",null==n.addForm.controls.category.errors?null:n.addForm.controls.category.errors.required))},dependencies:[P.ey,m.TO,m.KE,m.hX,_.lW,v.Nt,Z.gD,p.sg,p.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".section-wrapper[_ngcontent-%COMP%]{padding:0 15px}.section-wrapper[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{border-bottom:2px solid #C5C5C5;display:flex;align-items:center;justify-content:space-between;padding:18px 0}.section-wrapper[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.buttons-containers[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.submit-btn[_ngcontent-%COMP%]{background:#233a61;color:#fff}.cancel-btn[_ngcontent-%COMP%]{background:#ccc}.section-body[_ngcontent-%COMP%]{padding:20px 0 0}mat-form-field[_ngcontent-%COMP%]{display:block}"]}),o})();function F(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function L(o,s){if(1&o&&(t.TgZ(0,"mat-option",16),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function U(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}let w=(()=>{class o{constructor(e,n,i,c){this.router=e,this.httpService=n,this.snack=i,this.route=c,this.editForm=new a.cw({subcategory_name:new a.NI("",a.kI.required),category:new a.NI("",a.kI.required),_id:new a.NI}),this.categoryList=[],this.httpService.GET(u.jz,{}).subscribe(l=>{l&&l.data&&(this.categoryList=l.data)}),this.route.params.subscribe(l=>{console.log(l),console.log(l.id),l.id?this.httpService.GET(`${u.eC}/detail`,{_id:l.id}).subscribe(d=>{console.log(d),d&&this.patchValue(d.data)},d=>{if(d.errors&&!(0,b.isEmpty)(d.errors)){let g="<ul>";for(let O in d.errors)g+=`<li>${d.errors[O][0]}</li>`;g+="</ul>",this.snack.notifyHtml(g,2)}else this.snack.notify(d.message,2)}):this.list()})}patchValue(e){this.editForm.patchValue({subcategory_name:e.subcategory_name,category:e.category,_id:e._id})}saveData(){this.editForm.valid?this.httpService.PUT(u.eC,this.editForm.value).subscribe(e=>{this.snack.notify("Data has been saved sucessfully.",1),this.router.navigate(["sub-category"])},e=>{if(e.errors&&!(0,b.isEmpty)(e.errors)){let n="<ul>";for(let i in e.errors)n+=`<li>${e.errors[i][0]}</li>`;n+="</ul>",this.snack.notifyHtml(n,2)}else this.snack.notify(e.message,2)}):this.editForm.markAllAsTouched()}list(){this.router.navigate(["sub-category"])}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.F0),t.Y36(C.s),t.Y36(y.o),t.Y36(h.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-data"]],decls:27,vars:4,consts:[[1,"section-wrapper"],[1,"section-header"],[1,"header-left"],[1,"header-right"],[1,"buttons-containers"],["mat-button","",1,"submit-btn",3,"click"],["mat-button","",1,"cancel-btn",3,"click"],[1,"section-body"],[3,"formGroup"],[1,"row"],[1,"col-md-3"],["appearance","outline"],["matInput","","formControlName","subcategory_name"],[4,"ngIf"],["matInput","","formControlName","category"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4,"Edit Sub Category"),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"button",5),t.NdJ("click",function(){return n.saveData()}),t._uU(8,"Submit"),t.qZA(),t.TgZ(9,"button",6),t.NdJ("click",function(){return n.list()}),t._uU(10,"Cancel"),t.qZA()()()(),t.TgZ(11,"div",7)(12,"form",8)(13,"div",9)(14,"div",10)(15,"mat-form-field",11)(16,"mat-label"),t._uU(17,"Sub Category Name"),t.qZA(),t._UZ(18,"input",12),t.YNc(19,F,2,0,"mat-error",13),t.qZA()(),t.TgZ(20,"div",10)(21,"mat-form-field")(22,"mat-label"),t._uU(23,"Category"),t.qZA(),t.TgZ(24,"mat-select",14),t.YNc(25,L,2,2,"mat-option",15),t.qZA(),t.YNc(26,U,2,0,"mat-error",13),t.qZA()()()()()()),2&e&&(t.xp6(12),t.Q6J("formGroup",n.editForm),t.xp6(7),t.Q6J("ngIf",null==n.editForm.controls.subcategory_name.errors?null:n.editForm.controls.subcategory_name.errors.required),t.xp6(6),t.Q6J("ngForOf",n.categoryList),t.xp6(1),t.Q6J("ngIf",null==n.editForm.controls.category.errors?null:n.editForm.controls.category.errors.required))},dependencies:[P.ey,m.TO,m.KE,m.hX,_.lW,v.Nt,Z.gD,p.sg,p.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".section-wrapper[_ngcontent-%COMP%]{padding:0 15px}.section-wrapper[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{border-bottom:2px solid #C5C5C5;display:flex;align-items:center;justify-content:space-between;padding:18px 0}.section-wrapper[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.buttons-containers[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.submit-btn[_ngcontent-%COMP%]{background:#233a61;color:#fff}.cancel-btn[_ngcontent-%COMP%]{background:#ccc}.section-body[_ngcontent-%COMP%]{padding:20px 0 0}mat-form-field[_ngcontent-%COMP%]{display:block}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]}),o})();var E=r(5861),x=r(2340),q=r(9715),I=r(529),J=r(4465),Y=r(2894),j=r(4961),$=r(445);function z(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",17),t._uU(2),t.qZA(),t.TgZ(3,"td",18),t._uU(4),t.qZA(),t.TgZ(5,"td",18),t._uU(6),t.qZA(),t._UZ(7,"td",18),t.TgZ(8,"td")(9,"div",19)(10,"a",20),t.NdJ("click",function(){const c=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.edit(c._id))}),t._UZ(11,"i",21),t.qZA(),t.TgZ(12,"a",22),t.NdJ("click",function(){const c=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.delete(c._id))}),t._UZ(13,"i",23),t.qZA()()()()}if(2&o){const e=s.$implicit,n=s.index,i=t.oxw(2);t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(e.subcategory_name),t.xp6(2),t.Oqu(i.getCategory(e.category))}}function G(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",3)(2,"div",4)(3,"h2"),t._uU(4,"Sub-Category Master"),t.qZA()(),t.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"mat-form-field",9)(10,"input",10),t.NdJ("input",function(i){t.CHM(e);const c=t.oxw();return t.KtG(c.search(i))}),t.qZA()()()(),t.TgZ(11,"button",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.add())}),t._uU(12,"Add New"),t.qZA(),t.TgZ(13,"button",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.exportXlSX())}),t._uU(14," Export "),t.qZA()()()(),t.TgZ(15,"div",13)(16,"table",14)(17,"thead")(18,"tr")(19,"th",15),t._uU(20,"Sr No."),t.qZA(),t.TgZ(21,"th",15),t._uU(22,"Name"),t.qZA(),t.TgZ(23,"th",15),t._uU(24,"Category"),t.qZA(),t.TgZ(25,"th",15),t._uU(26,"Code"),t.qZA(),t.TgZ(27,"th",15),t._uU(28,"Action"),t.qZA()()(),t.TgZ(29,"tbody"),t.YNc(30,z,14,3,"tr",16),t.qZA()()(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(30),t.Q6J("ngForOf",e.subCategoryList)}}function Q(o,s){1&o&&(t.TgZ(0,"h3",24),t._uU(1," You don't have permissions to view. "),t.qZA())}let B=(()=>{class o{constructor(e,n,i,c,l,d,g,O,T){this.router=e,this.httpService=n,this.excelService=i,this.snack=c,this.route=l,this.http=d,this.toast=g,this.auth=O,this.userService=T,this.subCategoryList=[],this.permissions=JSON.parse(localStorage.getItem("loginData")),this.userService.getUserss().subscribe(V=>{V.find(A=>A._id===this.permissions.user._id)?(this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:f=>{this.addPermission=f.dashboard_permissions[0].ParentChildchecklist[17].childList[0].isSelected,this.editPermission=f.dashboard_permissions[0].ParentChildchecklist[17].childList[1].isSelected,this.deletePermission=f.dashboard_permissions[0].ParentChildchecklist[17].childList[2].isSelected,this.viewPermission=f.dashboard_permissions[0].ParentChildchecklist[17].childList[3].isSelected},error:f=>{console.log(f)}}),this.getList()):(this.snack.notify("Invalid Credentials - User Details not Valid",1),this.auth.removeUser(),this.userService.updateLogin("logout"),this.router.navigate(["/login"]))})}getList(){const e=this.http.get(`${x.N.api_path}${u.eC}`),n=this.http.get(`${x.N.api_path}${u.jz}`);this.httpService.multipleRequests([e,n],{}).subscribe(i=>{i&&(this.subCategoryList=i[0].data,console.log("Sub Category :   ",this.subCategoryList),this.categoryList=i[1].data,this.list=i[0].data)},i=>{if(i.errors&&!(0,b.isEmpty)(i.errors)){let c="<ul>";for(let l in i.errors)c+=`<li>${i.errors[l][0]}</li>`;c+="</ul>",this.snack.notifyHtml(c,2)}else this.snack.notify(i.message,2)})}edit(e){if(!this.editPermission)return void this.toast.openSnackBar("Access to Sub Category Master editing is restricted for your account.");let n="sub-category/edit/"+e;console.log(n),this.router.navigateByUrl(n)}add(){this.addPermission?this.router.navigateByUrl("sub-category/add"):this.toast.openSnackBar("Access to Sub Category Master add is restricted for your account.")}delete(e){this.deletePermission?this.httpService.DELETE(u.eC,{_id:e}).subscribe(n=>{n&&(this.snack.notify("Sub Category record has been deleted sucessfully.",1),this.getList())},n=>{if(n.errors&&!(0,b.isEmpty)(n.errors)){let i="<ul>";for(let c in n.errors)i+=`<li>${n.errors[c][0]}</li>`;i+="</ul>",this.snack.notifyHtml(i,2)}else this.snack.notify(n.message,2)}):this.toast.openSnackBar("Access to Sub Category Master deleting is restricted for your account.")}getCategory(e){return this.categoryList.filter(n=>n._id==e)[0]?.name}search(e){this.subCategoryList=e.target.value?this.list.filter(n=>n.subcategory_name.toLowerCase().includes(e.target.value.toLowerCase())):this.list}exportXlSX(){var e=this;return(0,E.Z)(function*(){let n=e.subCategoryList.map(g=>(g.categoryName=e.getCategory(g.category),g));e.excelService.mapArrayToExcel("Sub Category",["Sub Category Name","Category Name"],["subcategory_name","categoryName"],["string","string"],n)})()}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.F0),t.Y36(C.s),t.Y36(q.x),t.Y36(y.o),t.Y36(h.gz),t.Y36(I.eN),t.Y36(J.k),t.Y36(Y.e),t.Y36(j.f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-listing"]],decls:4,vars:2,consts:[[1,"section-wrapper"],[4,"ngIf","ngIfElse"],["noView",""],[1,"section-header"],[1,"header-left"],[1,"header-right"],[1,"buttons-containers"],[1,"filter-con"],["dir","ltr",1,"labeled-outlined-field-wrapper"],["appearance","outline",1,"full-width","drop-down","outline-filter-field","hide-form-bottom-field"],["matInput","","placeholder","Search by name",3,"input"],["mat-button","",1,"submit-btn",3,"click"],["mat-button","",1,"other-btn",3,"click"],[1,"section-body"],[1,"table","pragati-table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row",2,"text-align","right"],[2,"text-align","left"],[1,"action-btn-wrapper"],["title","Edit",1,"action-btn",3,"click"],[1,"fa","fa-edit"],["title","Delete",1,"action-btn",3,"click"],[1,"fa","fa-trash"],[2,"display","flex","justify-content","center","margin-top","2%","font-size","160%","font-weight","bolder","color","grey"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,G,31,1,"ng-container",1),t.YNc(2,Q,2,0,"ng-template",null,2,t.W1O),t.qZA()),2&e){const i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",n.viewPermission)("ngIfElse",i)}},dependencies:[$.Lv,m.KE,_.lW,v.Nt,p.sg,p.O5],styles:[".section-wrapper[_ngcontent-%COMP%]{padding:0 15px}.section-wrapper[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{border-bottom:2px solid #C5C5C5;display:flex;align-items:center;justify-content:space-between;padding:18px 0}.section-wrapper[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.buttons-containers[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.submit-btn[_ngcontent-%COMP%]{background:#233a61;color:#fff;font-size:12px;padding-left:23px;padding-right:23px}.submit-btn[_ngcontent-%COMP%]:hover{opacity:.7}.cancel-btn[_ngcontent-%COMP%]{background:#ccc;font-size:12px;padding-left:23px;padding-right:23px}.cancel-btn[_ngcontent-%COMP%]:hover{opacity:.7}.other-btn[_ngcontent-%COMP%]{background:#525252;color:#fff;font-size:12px;padding-left:23px;padding-right:23px}.other-btn[_ngcontent-%COMP%]:hover{opacity:.7}.section-body[_ngcontent-%COMP%]{padding:20px 0 0}mat-form-field[_ngcontent-%COMP%]{display:block}.pragati-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;background:#233A61;color:#fff;font-weight:400;font-size:12px;border:.5px solid #94A3B8;text-align:center;vertical-align:middle}.pragati-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:.5px solid #94A3B8;border-right:.5px solid #94A3B8;font-weight:400;font-size:12px;background:#F4F4F5;text-align:center;vertical-align:middle}.pragati-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n)   td[_ngcontent-%COMP%]{background:#D9DADE}.pragati-table[_ngcontent-%COMP%]   .action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.pragati-table[_ngcontent-%COMP%]   .action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.pragati-table[_ngcontent-%COMP%]   .action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.pragati-table[_ngcontent-%COMP%]   .action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}"]}),o})();var H=r(8898);const X=[{path:"add",component:D},{path:"",component:B},{path:"edit/:id",component:w}];let K=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[H.S,p.ez,a.UX,[h.Bz.forChild(X)]]}),o})()}}]);