"use strict";(self.webpackChunkpra=self.webpackChunkpra||[]).push([[717],{3717:(Xt,k,d)=>{d.r(k),d.d(k,{RateComparativeModule:()=>Ht});var g=d(6895),m=d(9299),S=d(1283),r=d(4006),u=d(8608),O=d(7489),U=d(2340),t=d(4650),v=d(2126),b=d(529),C=d(6104),Z=d(3238),_=d(9549),P=d(4859),y=d(4850),M=d(7392),q=d(4144),A=d(4385),T=d(3683);function J(o,a){if(1&o&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.label)}}const N=function(o){return["/rate-comparative/update",o]};function Q(o,a){if(1&o&&(t.TgZ(0,"td",53),t._uU(1,"Create\xa0Comparative"),t.qZA()),2&o){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,N,e._id))}}const L=function(o){return["/rate-comparative/details",o]};function V(o,a){if(1&o&&(t.TgZ(0,"td",54),t._uU(1,"Approved Vendors"),t.qZA()),2&o){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,L,e._id))}}function Y(o,a){if(1&o&&(t.TgZ(0,"td",55),t._uU(1,"Rejected Rates"),t.qZA()),2&o){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,L,e._id))}}function B(o,a){if(1&o&&(t.TgZ(0,"td",57),t._uU(1,"Revise\xa0Comparative"),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,N,e._id))}}function z(o,a){if(1&o&&(t.ynx(0),t.YNc(1,B,2,3,"td",56),t.BQk()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf","revise"==e.status&&"rate_comparitive"==n.stage)}}function j(o,a){1&o&&(t.TgZ(0,"td",59),t._uU(1,"No Permission to Revise Comparative"),t.qZA())}function E(o,a){if(1&o&&t.YNc(0,j,2,0,"td",58),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.Q6J("ngIf","revise"==e.status&&"rate_comparitive"==n.stage)}}function G(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td",42),t._uU(2," Request\xa0no\xa0 "),t.TgZ(3,"span",43),t._uU(4),t.qZA()(),t._UZ(5,"hr",44),t.TgZ(6,"td",45),t._uU(7,"Title\xa0"),t.TgZ(8,"span",43),t._uU(9),t.qZA()(),t._UZ(10,"hr",44),t.TgZ(11,"td",46),t._uU(12," Site\xa0"),t.TgZ(13,"span",43),t._uU(14),t.qZA()(),t.YNc(15,Q,2,3,"td",47),t.YNc(16,V,2,3,"td",48),t.YNc(17,Y,2,3,"td",49),t.YNc(18,z,2,1,"ng-container",50),t.YNc(19,E,1,1,"ng-template",null,51,t.W1O),t.TgZ(21,"td",52)(22,"mat-icon"),t._uU(23," arrow_forward_ios "),t.qZA()()()),2&o){const e=a.$implicit,n=t.MAs(20),i=t.oxw(2);t.xp6(4),t.Oqu(i.reqNo(e.purchase_request_id)),t.xp6(5),t.Oqu(e.title),t.xp6(5),t.Oqu(e.siteData.site_name),t.xp6(1),t.Q6J("ngIf","pending"==e.status&&"rate_comparitive"==i.stage),t.xp6(1),t.Q6J("ngIf","rate_approval"==i.stage),t.xp6(1),t.Q6J("ngIf","rejected"==e.status&&"rate_comparitive"==i.stage),t.xp6(1),t.Q6J("ngIf",i.editPermission)("ngIfElse",n)}}function K(o,a){1&o&&(t.TgZ(0,"div",60),t._UZ(1,"img",61),t.TgZ(2,"span"),t._uU(3," No record found"),t.qZA()())}function H(o,a){if(1&o){const e=t.EpF();t.ynx(0,20),t.TgZ(1,"div",21)(2,"div",22)(3,"mat-form-field",23)(4,"mat-icon",24),t._uU(5,"search"),t.qZA(),t.TgZ(6,"input",25),t.NdJ("input",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.search(i,"title"))}),t.qZA()()(),t._UZ(7,"div",26),t.TgZ(8,"div",27)(9,"div",28)(10,"span"),t._uU(11,"Filter\xa0by"),t.qZA()(),t.TgZ(12,"div")(13,"mat-form-field",29)(14,"input",30),t.NdJ("input",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.search(i,"site"))}),t.qZA()()()(),t.TgZ(15,"div",31)(16,"div",32)(17,"span"),t._uU(18,"Filter by Status"),t.qZA()(),t.TgZ(19,"div",33)(20,"mat-form-field",34)(21,"mat-select",35),t.NdJ("selectionChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.onStatusChange(i))}),t.YNc(22,J,2,2,"mat-option",36),t.qZA()()()()(),t.TgZ(23,"div",37)(24,"table",38)(25,"tbody"),t.YNc(26,G,24,8,"tr",39),t.qZA()(),t.YNc(27,K,4,0,"div",40),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(21),t.Q6J("formControl",e.statusOption),t.xp6(1),t.Q6J("ngForOf",e.statusList),t.xp6(4),t.Q6J("ngForOf",e.rateComparativeList),t.xp6(1),t.Q6J("ngIf",!(e.rateComparativeList&&e.rateComparativeList.length>0))}}function W(o,a){1&o&&(t.TgZ(0,"h3",62),t._uU(1,"You don't have permissions to view."),t.qZA())}const X=function(){return["/procurement"]},tt=function(){return["/procurement/prlist"]},et=function(){return["/rate-comparative"]},nt=function(){return["/rate-approval"]},ot=function(){return["/purchase-order"]};let it=(()=>{class o{constructor(e,n,i){this.httpService=e,this.http=n,this.snack=i,this.statusOption=new r.NI("pending"),this.statusList=[{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"revise",label:"Revise"}],this.filter_by="status",this.filter_value="pending",this.requestType="new",this.originalRateComparativeList=[],this.stage="rate_comparitive",this.purchaseList=[],this.getList({filter_by:this.filter_by,filter_value:this.filter_value,stage:"rate_comparitive"})}getList(e){this.httpService.GET(u.lu,e).subscribe({next:n=>{if(console.log(n.data),"superadmin"===this.permissions.user.role)this.originalRateComparativeList=n.data,this.rateComparativeList=n.data;else{const l=n.data.filter(p=>this.siteList.some(c=>c._id===p.site));console.log(l),this.originalRateComparativeList=l,this.rateComparativeList=l}},error:n=>{if(n.errors&&!(0,O.isEmpty)(n.errors)){let i="<ul>";for(let s in n.errors)i+=`<li>${n.errors[s][0]}</li>`;i+="</ul>",this.snack.notifyHtml(i,2)}else this.snack.notify(n.message,2)}})}getReqNO(){const e=this.http.get(`${U.N.api_path}${u.Fj}`);this.httpService.multipleRequests([e],{}).subscribe(n=>{n&&(this.purchaseList=n[0].data)})}reqNo(e){return this.purchaseList.filter(i=>i._id===e)[0].purchase_request_number}onStatusChange(e){let n;"pending"==e.value||"revise"==e.value||"rejected"==e.value?(n="rate_comparitive",this.getList({filter_by:this.filter_by,filter_value:e.value,stage:n})):(n="rate_approval",this.getList({filter_by:this.filter_by,stage:n})),this.stage=n}dateFilter(e){this.originalRateComparativeList&&this.originalRateComparativeList.length>0&&(this.rateComparativeList=e.value?this.originalRateComparativeList.filter(n=>new Date(n.date)==new Date(e.value)):this.originalRateComparativeList)}search(e,n){this.originalRateComparativeList&&this.originalRateComparativeList.length>0&&(this.rateComparativeList="site"==n?e.target.value?this.originalRateComparativeList.filter(i=>i.siteData.site_name.toLowerCase().includes(e.target.value.toLowerCase())):this.originalRateComparativeList:e.target.value?this.originalRateComparativeList.filter(i=>i.title.toLowerCase().includes(e.target.value.toLowerCase())):this.originalRateComparativeList)}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:i=>{this.viewPermission=i.dashboard_permissions[0].ParentChildchecklist[20].childList[0].isSelected,this.addPermission=i.dashboard_permissions[0].ParentChildchecklist[20].childList[1].isSelected,this.editPermission=i.dashboard_permissions[0].ParentChildchecklist[20].childList[2].isSelected},error:i=>{console.log(i)}}),this.getReqNO(),this.siteList=this.permissions.user.sites,console.log("SiteSelect",this.siteList)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.s),t.Y36(b.eN),t.Y36(C.o))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-rate-comparative-list"]],decls:48,vars:12,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","50px","margin-left","20px"],["src","./assets/images/ratehead.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],["mat-icon-button","",2,"margin-right","40px"],[2,"margin-top","40px"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],["src","./assets/images/ratedown.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/po.svg"],["class","section-body",4,"ngIf","ngIfElse"],["noView",""],[1,"section-body"],[2,"display","flex","flex-direction","row","gap","10px","width","100%"],[2,"margin-left","40px","width","100%","margin-top","30px"],["appearance","outline",1,"searchbar"],["matSuffix",""],["matInput","","type","search","placeholder","search title",1,"search-input",3,"input"],[2,"margin-right","600px","margin-top","30px","display","flex","gap","10px","width","100%"],[2,"margin-top","30px","display","flex","position","relative","right","570px","gap","10px","width","100%"],[2,"margin-top","15px","color","#94A3B8"],["appearance","outline",1,"datebar"],["matInput","","placeholder","Site",3,"input"],[2,"margin-top","30px","display","flex","position","relative","right","570px","gap","10px"],[2,"margin-top","15px","color","#94A3B8","width","110px"],[1,"custom-form-control",2,"position","relative"],["appearance","outline"],[3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"scroll-bar1",2,"width","93%"],[2,"direction","ltr !important","margin-top","-20px"],[4,"ngFor","ngForOf"],["class","no-record-found",4,"ngIf"],[3,"value"],[2,"color","#4272BF","width","300px","text-align","left","padding","10px","font-size","15px"],[2,"color","#000000"],[2,"border","1px solid #D9D9D9","height","30px"],[2,"color","#4272BF","width","200px","font-size","15px"],[2,"color","#4272BF","width","800px","text-align","left","padding","10px","font-size","15px"],["style","background-color: #233A61;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],["style","background-color: #54AA52;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],["style","background-color: #C7323B;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],[4,"ngIf","ngIfElse"],["noEditPermission",""],[2,"width","100px"],[2,"background-color","#233A61","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],[2,"background-color","#54AA52","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],[2,"background-color","#C7323B","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],["style","background-color: rgb(26, 188, 254); color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],[2,"background-color","rgb(26, 188, 254)","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],["style","background-color: rgb(26, 188, 254); color:#fff;width:200px;font-size: 14px;cursor: pointer;","disabled","",4,"ngIf"],["disabled","",2,"background-color","rgb(26, 188, 254)","color","#fff","width","200px","font-size","14px","cursor","pointer"],[1,"no-record-found"],["src","./assets/images/inbox_empty.png","alt",""],[2,"display","flex","justify-content","center","margin-top","2%","font-size","160%","font-weight","bolder","color","grey"]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Rate comparative"),t.qZA(),t._UZ(5,"span",4),t.TgZ(6,"button",5)(7,"mat-icon",6),t._uU(8,"notifications"),t.qZA()()(),t.TgZ(9,"div"),t._UZ(10,"hr",7),t.qZA(),t.TgZ(11,"div",8)(12,"div",9)(13,"div"),t._UZ(14,"img",10),t.qZA(),t.TgZ(15,"span",11),t._uU(16,"Purchase\xa0request"),t.qZA(),t.TgZ(17,"div"),t._UZ(18,"mat-divider",12),t.qZA()(),t.TgZ(19,"div",13)(20,"div"),t._UZ(21,"img",14),t.qZA(),t.TgZ(22,"span",11),t._uU(23,"Approvals"),t.qZA(),t.TgZ(24,"div"),t._UZ(25,"mat-divider",12),t.qZA()(),t.TgZ(26,"div",13)(27,"div"),t._UZ(28,"img",15),t.qZA(),t.TgZ(29,"span",16),t._uU(30,"Rate\xa0Comparative"),t.qZA(),t.TgZ(31,"div"),t._UZ(32,"mat-divider",12),t.qZA()(),t.TgZ(33,"div",13)(34,"div"),t._UZ(35,"img",14),t.qZA(),t.TgZ(36,"span",11),t._uU(37,"Rate\xa0Approvals"),t.qZA(),t.TgZ(38,"div"),t._UZ(39,"mat-divider",12),t.qZA()(),t.TgZ(40,"div",13)(41,"div"),t._UZ(42,"img",17),t.qZA(),t.TgZ(43,"span",11),t._uU(44,"Purchase\xa0orders"),t.qZA()()(),t.YNc(45,H,28,4,"ng-container",18),t.YNc(46,W,2,0,"ng-template",null,19,t.W1O)),2&e){const i=t.MAs(47);t.xp6(12),t.Q6J("routerLink",t.DdM(7,X)),t.xp6(7),t.Q6J("routerLink",t.DdM(8,tt)),t.xp6(7),t.Q6J("routerLink",t.DdM(9,et)),t.xp6(7),t.Q6J("routerLink",t.DdM(10,nt)),t.xp6(7),t.Q6J("routerLink",t.DdM(11,ot)),t.xp6(5),t.Q6J("ngIf",n.viewPermission)("ngIfElse",i)}},dependencies:[g.sg,g.O5,m.rH,m.Od,Z.ey,_.KE,_.R9,P.lW,y.d,M.Hw,q.Nt,A.gD,T.Ye,r.JJ,r.oH],styles:[".mat-form-field-appearance-outline .mat-form-field-infix{padding:.6em;width:250px}mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}input[type=text][_ngcontent-%COMP%]{width:60%;border-radius:8px;padding:12px 20px;margin:8px 0;box-sizing:border-box;border:.5px solid #94A3B8;transition:.5s;outline:none;font-family:Poppins;font-size:15px}.requests[_ngcontent-%COMP%]{height:40px;width:1120px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:15px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:15px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:15px;display:flex;align-items:center;justify-content:center}.searchbar[_ngcontent-%COMP%]{width:350px;border-radius:20px;font-family:Poppins}.datebar[_ngcontent-%COMP%]{width:180px;border-radius:20px;font-family:Poppins}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:separate;border-spacing:0 25px;text-align:left;width:100%;font-size:12px;margin-left:30px;margin-bottom:20px;margin-right:-10px}td[_ngcontent-%COMP%]{border:none;text-align:center;padding:8px 1px;color:#233a61;font-style:normal;font-size:medium}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f4f4f5!important}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f4f4f5!important}.scroll-bar1[_ngcontent-%COMP%]{height:600px;width:93%;margin-left:20px;margin-bottom:100px;margin-top:10px;overflow:auto;direction:rtl;overflow-x:hidden}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1E293B;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.no-record-found[_ngcontent-%COMP%]{text-align:center;display:flex;gap:10px;flex-direction:column;align-items:center;justify-content:center}.no-record-found[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:188px}"]}),o})();var f=d(5938),rt=d(7009);function at(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.ynx(1),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td")(11,"input",7),t.NdJ("input",function(i){const l=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.onChangeBrand(i,l))}),t.qZA()(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td")(15,"input",8),t.NdJ("input",function(i){const l=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.onChangeBrand(i,l))}),t.qZA()(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td")(19,"input",9),t.NdJ("input",function(i){const l=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.onChangeBrand(i,l))}),t.qZA()(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.BQk(),t.qZA()}if(2&o){const e=a.$implicit,n=a.index,i=t.oxw(2);t.xp6(3),t.Oqu(n+1),t.xp6(2),t.Oqu(e.item.item_name),t.xp6(2),t.Oqu(e.item.uomDetail.uom_name),t.xp6(2),t.Oqu(e.item.qty),t.xp6(2),t.Q6J("disabled",!0)("value",e.RequiredQuantity),t.xp6(2),t.Oqu(i.myBrandName(e.item.brandName)),t.xp6(2),t.Q6J("disabled",!0)("value",e.Rate),t.xp6(2),t.hij(" ",e.SubTotalAmount," "),t.xp6(2),t.Q6J("disabled",!0)("value",e.Freight),t.xp6(2),t.AsE(" ",e.item.tax.amount,"%(",e.item.tax.name,") "),t.xp6(2),t.hij(" ",e.Total," ")}}function st(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"tbody"),t.YNc(2,at,24,15,"tr",6),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.filledData.items)}}const w=function(o){return{"invalid-input":o}};function lt(o,a){if(1&o&&(t.TgZ(0,"tr",12),t.ynx(1,13),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._UZ(11,"input",14),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._UZ(15,"input",15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._UZ(19,"input",16),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.BQk(),t.qZA()),2&o){const e=a.$implicit,n=a.index,i=t.oxw(2);t.xp6(1),t.Q6J("formGroupName",n),t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(e.item_name),t.xp6(2),t.Oqu(e.uomDetail.uom_name),t.xp6(2),t.Oqu(e.qty),t.xp6(2),t.s9C("max",e.qty),t.Q6J("ngClass",t.VKq(13,w,i.vendorItemsForm.get("items").get(n.toString()).get("RequiredQuantity").invalid&&(i.formSubmitted||i.vendorItemsForm.get("items").get(n.toString()).get("RequiredQuantity").touched))),t.xp6(2),t.Oqu(i.myBrandName(e.brandName)),t.xp6(2),t.Q6J("ngClass",t.VKq(15,w,i.vendorItemsForm.get("items").get(n.toString()).get("Rate").invalid&&(i.formSubmitted||i.vendorItemsForm.get("items").get(n.toString()).get("Rate").touched))),t.xp6(2),t.hij(" ",i.calculateSubTotalAmount(n)," "),t.xp6(2),t.Q6J("ngClass",t.VKq(17,w,i.vendorItemsForm.get("items").get(n.toString()).get("Freight").invalid&&(i.formSubmitted||i.vendorItemsForm.get("items").get(n.toString()).get("Freight").touched))),t.xp6(2),t.hij(" ",e.tax.amount,"% "),t.xp6(2),t.hij(" ",i.calculateTotalAmount(n)," ")}}function pt(o,a){if(1&o&&(t.TgZ(0,"tbody",10),t.YNc(1,lt,24,19,"tr",11),t.qZA()),2&o){const e=t.oxw();t.Q6J("formGroup",e.vendorItemsForm),t.xp6(1),t.Q6J("ngForOf",e.tempFilteredItems)}}function dt(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",17)(2,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onNoClick())}),t._uU(3," Back "),t.qZA()(),t.BQk()}}function ct(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",17)(1,"button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onNoClick())}),t._uU(2," Cancel "),t.qZA(),t.TgZ(3,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onClickSubmit())}),t._uU(4," Submit "),t.qZA()()}}let R=(()=>{class o{constructor(e,n,i,s,l){if(this._snackBar=e,this.formBuilder=n,this.snack=i,this.dialogRef=s,this.data=l,this.formSubmitted=!1,this.brandList=l.brandList,l.type)this.pageDetail=l.dataObj,this.vendorsList=l.vendorsList,this.items=l.items,this.type=l.type,this.filledData=l.filledData,this.VendorDetails=this.vendorsList.find(p=>p._id==this.pageDetail);else{this.pageDetail=l.dataObj,this.vendorsList=l.vendorsList,this.items=l.items,this.vendors=l.vendors,this.filledData=l.filledData,this.category=this.vendors.get("Item_category").value,this.subCategory=this.vendors.get("Item_subCategory").value,this.VendorDetails=this.vendorsList.find(p=>p._id==this.pageDetail),this.tempFilteredItems=this.items.filter(p=>p.categoryDetail._id==this.category._id&&p.subCategoryDetail._id==this.subCategory._id),this.vendorItemsForm=new r.cw({Vendor:new r.NI(this.pageDetail,r.kI.required),category:new r.NI(this.category._id,r.kI.required),subCategory:new r.NI(this.subCategory._id,r.kI.required),items:this.formBuilder.array([])});for(let p=0;p<this.tempFilteredItems.length;p++){const c=this.formBuilder.group({item:new r.NI(this.tempFilteredItems[p]),RequiredQuantity:new r.NI("",r.kI.required),Rate:new r.NI("",r.kI.required),SubTotalAmount:new r.NI("",r.kI.required),Freight:new r.NI(0,r.kI.required),Total:new r.NI("",r.kI.required)});this.vendorItemsForm.get("items").push(c)}this.filledData&&(console.log("++this.filledData++",this.filledData),this.fillpage(this.filledData))}}fillpage(e){this.vendorItemsForm=e.data}myBrandName(e){return this.brandList.filter(i=>i._id==e)[0].brand_name}calculateSubTotalAmount(e){const n=this.vendorItemsForm.get("items").get(e.toString()).get("Rate").value,i=this.vendorItemsForm.get("items").get(e.toString()).get("RequiredQuantity").value;return this.vendorItemsForm.get("items").get(e.toString()).get("Freight"),this.vendorItemsForm.get("items").get(e.toString()).get("SubTotalAmount").setValue(n*i),n*i}calculateTotalAmount(e){const n=this.vendorItemsForm.get("items").get(e.toString()).get("SubTotalAmount").value+this.vendorItemsForm.get("items").get(e.toString()).get("SubTotalAmount").value*this.tempFilteredItems[e].tax.amount/100,i=this.vendorItemsForm.get("items").get(e.toString()).get("Freight").value;let s=parseInt(i,10);s||(s=0);const c=(parseInt(n.toString(),10)+s).toString();return this.vendorItemsForm.get("items").get(e.toString()).get("Total").setValue(c),c}onNoClick(){this.dialogRef.close({option:2,data:this.data})}onYesClick(){this.dialogRef.close({option:1,data:this.data})}onChangeQuantity(e,n){}onChangeBrand(e,n){}onChangeItemRate(e,n){}onClickSubmit(){if(this.formSubmitted=!0,this.vendorItemsForm.valid){const e=this.vendorItemsForm.get("items");for(let n=0;n<e.length;n++){const i=e.at(n),s=i.get("Rate");if(!s||""===s.value)return void this._snackBar.open("Please fill in the Rate field for all items","Close",{duration:3e3});const l=i.get("RequiredQuantity");if(!l||""===l.value)return void this._snackBar.open("Please fill in the Quantity field for all items","Close",{duration:6e3});const p=i.get("Freight");if(!p||""===p.value)return void this._snackBar.open("Please fill in the Freight field for all items","Close",{duration:3e3})}this.dialogRef.close({option:1,data:this.vendorItemsForm})}else this._snackBar.open("Please fill in all the required fields or Check the Value","Close",{duration:3e3})}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(rt.ux),t.Y36(r.qu),t.Y36(C.o),t.Y36(f.so),t.Y36(f.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-rate-comparative-vendors"]],decls:35,vars:5,consts:[["mat-dialog-title","",1,"mat-dialog-title"],["mat-dialog-content","",1,"mat-dialog-content-cstm"],[1,"vendor_list_table"],[4,"ngIf","ngIfElse"],["enterDetails",""],["action",""],[4,"ngFor","ngForOf"],["type","text","placeholder","Quantity",1,"cstm-input",3,"disabled","value","input"],["type","text","placeholder","Rate",1,"cstm-input",3,"disabled","value","input"],["type","text","placeholder","Freight",1,"cstm-input",3,"disabled","value","input"],[3,"formGroup"],["formArrayName","items",4,"ngFor","ngForOf"],["formArrayName","items"],[3,"formGroupName"],["formControlName","RequiredQuantity","type","number","placeholder","Quantity","min","0",1,"cstm-input",2,"width","150px",3,"ngClass","max"],["formControlName","Rate","type","number","placeholder","Rate",1,"cstm-input",3,"ngClass"],["formControlName","Freight","type","number","placeholder","Freight","required","",1,"cstm-input",3,"ngClass"],[1,"footer-template"],["type","button",1,"cstm-btn","theme-btn-color",3,"click"],["type","button",1,"cancel-btn","cstm-btn",3,"click"],["type","submit","color","primary",1,"cstm-btn","theme-btn-color",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2),t.qZA()(),t.TgZ(3,"div",1)(4,"table",2)(5,"thead")(6,"tr")(7,"th"),t._uU(8,"SNo."),t.qZA(),t.TgZ(9,"th"),t._uU(10," Item name "),t.qZA(),t.TgZ(11,"th"),t._uU(12," UOM "),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Requested Qty"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Required Qty"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Brand Name"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Rate"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Sub Total Amount"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Freight"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Gst"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Total"),t.qZA()()(),t.YNc(29,st,3,1,"ng-container",3),t.YNc(30,pt,2,2,"ng-template",null,4,t.W1O),t.qZA()(),t.YNc(32,dt,4,0,"ng-container",3),t.YNc(33,ct,5,0,"ng-template",null,5,t.W1O)),2&e){const i=t.MAs(31),s=t.MAs(34);t.xp6(2),t.Oqu(n.VendorDetails.vendor_name),t.xp6(27),t.Q6J("ngIf",null!=n.type)("ngIfElse",i),t.xp6(3),t.Q6J("ngIf",null!=n.type)("ngIfElse",s)}},dependencies:[g.mk,g.sg,g.O5,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.qQ,r.Fd,r.sg,r.u,r.x0,r.CE,f.uh,f.xY],styles:[".mat-mdc-dialog-title[_ngcontent-%COMP%]{border-bottom:0;padding:14px;background:#f3f3f3;display:flex;justify-content:space-between;align-items:center;font-style:normal;font-weight:400;font-size:14px;line-height:16px;text-transform:capitalize;color:#28313b}.mat-mdc-dialog-content-cstm[_ngcontent-%COMP%]{padding-top:10px}.cancel-btn[_ngcontent-%COMP%]{background:#f3f3f3;color:#333}.space-btn[_ngcontent-%COMP%]{margin:0 5px}.mat-mdc-dialog-content[_ngcontent-%COMP%]{margin:0;padding:0 15px}.close-icon[_ngcontent-%COMP%]{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:13px;width:0px;margin-top:-5px;cursor:pointer}.vendor_list_table[_ngcontent-%COMP%]{border:1px solid #ccc;width:100%;overflow:hidden}.vendor_list_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;padding:10px 20px;font-weight:400}.vendor_list_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 20px}.vendor_list_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#eee}.cstm-btn[_ngcontent-%COMP%]{border:0;border-radius:4px;padding:10px 23px;outline:none}.cstm-btn.theme-btn-color[_ngcontent-%COMP%]{background-color:#233a61;color:#fff}.footer-template[_ngcontent-%COMP%]{text-align:center;border-top:1px solid #ccc;margin:30px 0 0;padding-top:22px;display:flex;align-items:center;justify-content:center;gap:10px}.cstm-input[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;padding:5px 10px}.td-subtitle[_ngcontent-%COMP%]{font-size:11px;font-weight:400}.header-subtitle[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.empty-input[_ngcontent-%COMP%]{border:1px solid red}.invalid-input[_ngcontent-%COMP%]{border:2px solid red}"]}),o})();var D=d(4961),F=d(3546),h=d(9602),x=d(1948);function mt(o,a){if(1&o&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function gt(o,a){if(1&o&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.site_name," ")}}function ut(o,a){1&o&&(t.TgZ(0,"div"),t._uU(1," No vendor available "),t.qZA())}function _t(o,a){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=a.$implicit,n=t.oxw(2);t.xp6(1),t.hij(" ",n.detailsOfVendor(e,"topview",0)," ")}}function ft(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.YNc(6,ut,2,0,"div",53),t.YNc(7,_t,2,1,"p",44),t.qZA()()),2&o){const e=a.$implicit,n=t.oxw();t.xp6(2),t.Oqu(e.categoryDetail.name),t.xp6(2),t.Oqu(e.subCategoryDetail.subcategory_name),t.xp6(2),t.Q6J("ngIf",0===n.isVendorSelected(e).length),t.xp6(1),t.Q6J("ngForOf",n.isVendorSelected(e))}}function ht(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr")(2,"td",54),t._uU(3),t.qZA(),t.TgZ(4,"td",54),t._uU(5),t.qZA(),t.TgZ(6,"td",54),t._uU(7),t.qZA(),t.TgZ(8,"td")(9,"a",55),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.ItemData(s))}),t._uU(10," Items Rates"),t.qZA()()(),t.BQk()}if(2&o){const e=a.$implicit,n=a.index,i=t.oxw();t.xp6(3),t.hij(" ",i.detailsOfVendor(e,"name",n)," "),t.xp6(2),t.hij(" ",(null==e.items[0]||null==e.items[0].item||null==e.items[0].item.categoryDetail?null:e.items[0].item.categoryDetail.name)||"N/A"," "),t.xp6(2),t.hij(" ",(null==e.items[0]||null==e.items[0].item||null==e.items[0].item.subCategoryDetail?null:e.items[0].item.subCategoryDetail.subcategory_name)||"N/A"," ")}}const xt=function(){return["/procurement"]},vt=function(){return["/procurement/prlist"]},bt=function(){return["/rate-comparative"]},Ct=function(){return["/rate-approval"]},Zt=function(){return["/purchase-order"]},yt=function(o){return{"background-color":o}};let qt=(()=>{class o{constructor(e,n,i,s,l,p,c){this.router=e,this.httpService=n,this.dialog=i,this.formBuilder=s,this.route=l,this.userService=p,this.http=c,this.load=!1,this.finalVendorArray=[],this.VendorItems=this.formBuilder.array([]),this.purchaseRequestForm=new r.cw({title:new r.NI("",r.kI.required),date:new r.NI("",r.kI.required),expected_delivery_date:new r.NI("",r.kI.required),handle_by:new r.NI({value:"",disabled:!0},r.kI.required),rate_approval_number:new r.NI(""),site:new r.NI({value:"",disabled:!0},r.kI.required),local_purchase:new r.NI({value:"",disabled:!0},r.kI.required),remarks:new r.NI("",[]),items:this.formBuilder.array([]),_id:new r.NI}),this.details={},this.vendorsList=[],this.vendorAssociatedData=[],this.getSiteList(),this.getBrandList(),this.userService.getUserss().subscribe(I=>{this.users=I})}vendorData(e){let n=e._id;$(`.vendor-detail-button-${n}`).hasClass("collapsed")?($(`.vendor-detail-button-${n}`).removeClass("collapsed"),$(`.vendor-detail-${n}`).removeClass("cl-show")):($(`.vendor-detail-button-${n}`).addClass("collapsed"),$(`.vendor-detail-${n}`).addClass("cl-show"))}createItemArrayForm(){return new r.cw({item_id:new r.NI("",r.kI.required),qty:new r.NI("",r.kI.required),category:new r.NI(""),subCategory:new r.NI(""),attachment:new r.NI(""),remark:new r.NI("",r.kI.required),uom:new r.NI("",r.kI.required)})}createItem(e){if(e)return new r.cw({item_id:new r.NI(e.item_id,r.kI.required),qty:new r.NI(e.qty,r.kI.required),category:new r.NI(e.categoryDetail.name),subCategory:new r.NI(e.subCategoryDetail.subcategory_name),attachment:new r.NI(e.attachment),remark:new r.NI(e.remark,r.kI.required),uom:new r.NI(e.uomDetail._id,r.kI.required)})}ItemData(e){console.log("==dataObj==",e),this.dialog.open(R,{data:{dataObj:e.Vendor,vendorsList:this.vendorsList,items:this.details?.items,filledData:e,brandList:this.brandList,type:"detailsPage"}}).afterClosed().subscribe(i=>{})}objectBackToFormGroup(){this.VendorItems.clear();for(let e=0;e<this.details.vendorItems.length;e++){const n={Vendor:this.details.vendorItems[e].Vendor,category:"GST",subCategory:"GST",items:this.details.vendorItems[e].items},i=this.formBuilder.group({Vendor:[n.Vendor,r.kI.required],category:[n.category,r.kI.required],subCategory:[n.subCategory,r.kI.required],items:this.formBuilder.array([])});this.VendorItems.push(i)}}patchData(e){this.purchaseRequestForm.patchValue({title:e.title,date:e.date,expected_delivery_date:e.expected_delivery_date,rate_approval_number:e.rate_approval_number,handle_by:e.handle_by,site:e.site,local_purchase:e.local_purchase,remarks:e.remarks}),this.purchaseRequestForm.controls.remarks.disable()}getSiteList(){this.httpService.GET(u.S3,{}).subscribe(e=>{this.siteList=e.data})}isVendorSelected(e){return this.details.vendorItems.filter(i=>i.category==e.categoryDetail._id&&i.subCategory==e.subCategoryDetail._id)}detailsOfVendor(e,n,i){return this.vendorsList.find(l=>l._id==e.Vendor).vendor_name}getBrandList(){this.httpService.GET(u.Lk,{}).subscribe(e=>{this.brandList=e.data})}ngOnInit(){this.route.params.subscribe(e=>{e.id&&this.httpService.GET(`${u.bG}`,{_id:e.id}).subscribe({next:n=>{this.details=n.data.details,this.objectBackToFormGroup(),this.vendorsList=n.data.vendorsList,this.vendorsList.map(s=>(this.vendorAssociatedData[s._id]=s,s));let i=[];this.filteredItems=this.details?.items.filter(s=>{let l=s.categoryDetail._id+"$"+s.subCategoryDetail._id;return!i.includes(l)&&(i.push(l),!0)}),this.patchData(n.data.details)},error:n=>{this.router.navigate(["/rate-comparative"])}})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.F0),t.Y36(v.s),t.Y36(f.uw),t.Y36(r.qu),t.Y36(m.gz),t.Y36(D.f),t.Y36(b.eN))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-rate-comparative-details"]],decls:137,vars:26,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","50px","margin-left","20px"],["src","./assets/images/RA.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],["mat-icon-button","",2,"margin-right","40px"],[2,"margin-top","40px"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],["src","./assets/images/ratedown.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/po.svg"],[3,"formGroup"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","10px","max-width","100%"],[1,"flex-div",2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],["placeholder","Enter title","formControlName","title","readonly","",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","3px","font-family","Poppins","height","50px"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Auto generate Request Date","readonly","",3,"matDatepicker"],["matSuffix","",3,"for"],["date",""],[1,"flex-div","custom-form-group"],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],[1,"star"],[1,"custom-form-control"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by","readonly","",3,"matDatepicker"],["requiredByStartDate",""],["matInput","","formControlName","handle_by"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Auto generate","formControlName","rate_approval_number","readonly","",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","10px","font-family","Poppins"],["id","site","placeholder","Select site","formControlName","site",2,"padding","10px","width","100","border","1px solid #ccc","border-radius","6px","cursor","pointer","margin-top","10px","font-family","Poppins"],[1,"flex-div",2,"display","flex","flex-direction","column","align-items","center"],[2,"color","#4272BF","margin-bottom","10px"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group"],[1,"example-radio-button",3,"value"],[1,"topcard",2,"margin-top","40px"],[1,"scroll-bar1"],[4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center"],[1,"p-btns-button",3,"disabled"],[2,"direction","ltr !important","border-left","2px solid #000 !important"],[1,"text-area-section"],["name","","id","","cols","30","rows","5","formControlName","remarks"],[1,"button-list"],[1,"p-btns-button",3,"ngStyle","disabled"],[3,"value"],[4,"ngIf"],[2,"text-align","center"],[1,"p-btns",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Rate approvals details"),t.qZA(),t._UZ(5,"span",4),t.TgZ(6,"button",5)(7,"mat-icon",6),t._uU(8,"notifications"),t.qZA()()(),t.TgZ(9,"div"),t._UZ(10,"hr",7),t.qZA(),t.TgZ(11,"div",8)(12,"div",9)(13,"div"),t._UZ(14,"img",10),t.qZA(),t.TgZ(15,"span",11),t._uU(16,"Purchase\xa0request"),t.qZA(),t.TgZ(17,"div"),t._UZ(18,"mat-divider",12),t.qZA()(),t.TgZ(19,"div",13)(20,"div"),t._UZ(21,"img",14),t.qZA(),t.TgZ(22,"span",11),t._uU(23,"Approvals"),t.qZA(),t.TgZ(24,"div"),t._UZ(25,"mat-divider",12),t.qZA()(),t.TgZ(26,"div",13)(27,"div"),t._UZ(28,"img",15),t.qZA(),t.TgZ(29,"span",16),t._uU(30,"Rate\xa0Comparative"),t.qZA(),t.TgZ(31,"div"),t._UZ(32,"mat-divider",12),t.qZA()(),t.TgZ(33,"div",13)(34,"div"),t._UZ(35,"img",14),t.qZA(),t.TgZ(36,"span",11),t._uU(37,"Rate\xa0Approvals"),t.qZA(),t.TgZ(38,"div"),t._UZ(39,"mat-divider",12),t.qZA()(),t.TgZ(40,"div",13)(41,"div"),t._UZ(42,"img",17),t.qZA(),t.TgZ(43,"span",11),t._uU(44,"Purchase\xa0orders"),t.qZA()()(),t.TgZ(45,"form",18)(46,"mat-card",19)(47,"div",20)(48,"div",21)(49,"label",22),t._uU(50,"Request title "),t.qZA(),t._UZ(51,"input",23),t.qZA(),t.TgZ(52,"div",21)(53,"label",22),t._uU(54,"Request date"),t.qZA(),t.TgZ(55,"mat-form-field",24),t._UZ(56,"input",25)(57,"mat-datepicker-toggle",26)(58,"mat-datepicker",null,27),t.qZA()(),t.TgZ(60,"div",28)(61,"label",29),t._uU(62," Required by "),t.TgZ(63,"span",30),t._uU(64,"*"),t.qZA()(),t.TgZ(65,"div",31)(66,"mat-form-field",24),t._UZ(67,"input",32)(68,"mat-datepicker-toggle",26)(69,"mat-datepicker",null,33),t.qZA()()(),t.TgZ(71,"div",28)(72,"label",29),t._uU(73," Handle by "),t.TgZ(74,"span",30),t._uU(75,"*"),t.qZA()(),t.TgZ(76,"div",31)(77,"mat-form-field",24)(78,"mat-select",34),t.YNc(79,mt,2,2,"mat-option",35),t.qZA()()()(),t.TgZ(80,"div",21)(81,"label",22),t._uU(82,"Request no "),t.qZA(),t._UZ(83,"input",36),t.qZA(),t.TgZ(84,"div",21)(85,"label",22),t._uU(86,"Site name "),t.TgZ(87,"span",30),t._uU(88,"*"),t.qZA()(),t.TgZ(89,"mat-select",37),t.YNc(90,gt,2,2,"mat-option",35),t.qZA()(),t.TgZ(91,"div",38)(92,"label",39),t._uU(93,"Local Purchase "),t.TgZ(94,"span",30),t._uU(95,"*"),t.qZA()(),t.TgZ(96,"mat-radio-group",40)(97,"mat-radio-button",41),t._uU(98," Yes "),t.qZA(),t.TgZ(99,"mat-radio-button",41),t._uU(100," No "),t.qZA()()()()(),t.TgZ(101,"mat-card",42)(102,"form")(103,"div",43)(104,"table")(105,"tr")(106,"th"),t._uU(107,"Category"),t.qZA(),t.TgZ(108,"th"),t._uU(109,"Sub Category"),t.qZA(),t.TgZ(110,"th"),t._uU(111,"Vendor"),t.qZA()(),t.YNc(112,ft,8,4,"tr",44),t.qZA()(),t.TgZ(113,"div",45)(114,"button",46),t._uU(115,"Save"),t.qZA()()()(),t.TgZ(116,"div",43)(117,"table",47)(118,"tr")(119,"th"),t._uU(120,"Vendor*"),t.qZA(),t.TgZ(121,"th"),t._uU(122,"Category"),t.qZA(),t.TgZ(123,"th"),t._uU(124,"Sub\xa0category"),t.qZA(),t.TgZ(125,"th"),t._uU(126,"Item"),t.qZA()(),t.TgZ(127,"tbody"),t.YNc(128,ht,11,3,"ng-container",44),t.qZA()()(),t.TgZ(129,"div",48)(130,"label",22),t._uU(131,"Remarks "),t.qZA(),t._UZ(132,"textarea",49),t.qZA(),t.TgZ(133,"div",50)(134,"button",51)(135,"span"),t._uU(136,"Approved"),t.qZA()()()()),2&e){const i=t.MAs(59),s=t.MAs(70);t.xp6(12),t.Q6J("routerLink",t.DdM(19,xt)),t.xp6(7),t.Q6J("routerLink",t.DdM(20,vt)),t.xp6(7),t.Q6J("routerLink",t.DdM(21,bt)),t.xp6(7),t.Q6J("routerLink",t.DdM(22,Ct)),t.xp6(7),t.Q6J("routerLink",t.DdM(23,Zt)),t.xp6(5),t.Q6J("formGroup",n.purchaseRequestForm),t.xp6(11),t.Q6J("matDatepicker",i),t.xp6(1),t.Q6J("for",i),t.xp6(10),t.Q6J("matDatepicker",s),t.xp6(1),t.Q6J("for",s),t.xp6(11),t.Q6J("ngForOf",n.users),t.xp6(11),t.Q6J("ngForOf",n.siteList),t.xp6(7),t.Q6J("value","yes"),t.xp6(2),t.Q6J("value","no"),t.xp6(13),t.Q6J("ngForOf",n.filteredItems),t.xp6(2),t.Q6J("disabled",!0),t.xp6(14),t.Q6J("ngForOf",null==n.details?null:n.details.vendorItems),t.xp6(6),t.Q6J("ngStyle",t.VKq(24,yt,"approved"==n.details.status?"#54AA52":"rejected"==n.details.status?"#C7323B":"#233A61"))("disabled",n.load)}},dependencies:[g.sg,g.O5,g.PC,m.rH,m.Od,Z.ey,_.KE,_.R9,P.lW,F.a8,h.Mq,h.hl,h.nW,y.d,M.Hw,q.Nt,x.VQ,x.U0,A.gD,T.Ye,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:100%;height:auto;font-family:Poppins;box-shadow:none;border:1px solid #ccc;border-radius:4px}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;width:100%;font-size:14px;margin-bottom:20px;margin-right:20px;margin-top:8px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}form[_ngcontent-%COMP%]{padding:10px 20px}.scroll-bar1[_ngcontent-%COMP%]{margin-top:50px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background-color:"Transparent"}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 0 20px;float:right;gap:10px}.text-area-section[_ngcontent-%COMP%]{width:100%;height:auto;margin:30px 0 0}.text-area-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:100%}.flex-div[_ngcontent-%COMP%]{width:31%}.mat-form-field[_ngcontent-%COMP%]{display:block}.pending[_ngcontent-%COMP%]{padding:8px;width:120px;background-color:#ccc;color:#333;font-size:14px;font-family:Poppins;height:50px;border:none}.p-btns[_ngcontent-%COMP%]{background:#233a61;padding:5px 10px;border-radius:4px;font-size:12px;cursor:pointer}.p-btns[_ngcontent-%COMP%]:hover{opacity:.7}.p-btns-button[_ngcontent-%COMP%]{background:#233a61;padding:7px 40px;border-radius:4px;font-size:12px;cursor:pointer;color:#fff;opacity:.7}.vendor-wapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:40px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-name-cl[_ngcontent-%COMP%]{padding:6px 15px;background:#233a61;color:#fff}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:rgba(7,59,76,.0509803922);padding:6px 15px;margin-bottom:10px;gap:10px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80px;border:1px solid #ccc;border-radius:2px;padding:5px;outline:none}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-label[_ngcontent-%COMP%]{min-width:144px}input[readonly=true][_ngcontent-%COMP%], input[readonly][_ngcontent-%COMP%], .mat-select-disabled[_ngcontent-%COMP%]{opacity:.6}.vendor-detail[_ngcontent-%COMP%]{display:none}.vendor-detail.cl-show[_ngcontent-%COMP%]{display:table-row}']}),o})();function At(o,a){if(1&o&&(t.TgZ(0,"mat-option",53),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function Tt(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function wt(o,a){if(1&o&&(t.TgZ(0,"mat-option",53),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.site_name," ")}}function It(o,a){1&o&&(t.TgZ(0,"div"),t._uU(1," No vendor available "),t.qZA())}function kt(o,a){if(1&o&&(t.TgZ(0,"mat-option",61),t._uU(1),t.qZA()),2&o){const e=a.$implicit,n=t.oxw(3);t.Q6J("value",e._id)("disabled",n.isSelectDisabled),t.xp6(1),t.hij(" ",null==e?null:e.vendor_name," ")}}function Ot(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",57)(1,"mat-form-field",58)(2,"mat-label"),t._uU(3,"Select Vendors"),t.qZA(),t.TgZ(4,"mat-select",59),t.NdJ("selectionChange",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.handleVendorChange())}),t.YNc(5,kt,2,3,"mat-option",60),t.qZA()()()}if(2&o){const e=t.oxw().$implicit,n=t.oxw();t.xp6(5),t.Q6J("ngForOf",n.isVendorSelected(e))}}function Ut(o,a){if(1&o&&(t.TgZ(0,"tr",54)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.YNc(6,It,2,0,"div",51),t.YNc(7,Ot,6,1,"ng-template",55,56,t.W1O),t.qZA()()),2&o){const e=a.$implicit,n=a.index,i=t.MAs(8),s=t.oxw();t.xp6(2),t.Oqu(e.categoryDetail.name),t.xp6(2),t.Oqu(e.subCategoryDetail.subcategory_name),t.xp6(2),t.Q6J("ngIf",0===s.isVendorSelected(e).length)("ngIfElse",i),t.xp6(1),t.Q6J("formGroupName",n)}}function Pt(o,a){1&o&&(t.ynx(0),t.TgZ(1,"p",67),t._uU(2,"Completed"),t.qZA(),t.BQk())}function Mt(o,a){1&o&&(t.TgZ(0,"p",68),t._uU(1,"Pending"),t.qZA())}function Nt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",64),t._uU(2),t.qZA(),t.TgZ(3,"td",64),t._uU(4),t.qZA(),t.TgZ(5,"td",64),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"a",65),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw().$implicit,p=t.oxw(2);return t.KtG(p.ItemData(s,l))}),t._uU(9," Items Rates"),t.qZA()(),t.TgZ(10,"td"),t.YNc(11,Pt,3,0,"ng-container",51),t.YNc(12,Mt,2,0,"ng-template",null,66,t.W1O),t.qZA()()}if(2&o){const e=a.$implicit,n=t.MAs(13),i=t.oxw().$implicit,s=t.oxw(2);t.xp6(2),t.hij(" ",s.detailsOfVendor(e)," "),t.xp6(2),t.hij(" ",i.get("Item_category").value.name," "),t.xp6(2),t.hij(" ",i.get("Item_subCategory").value.subcategory_name," "),t.xp6(5),t.Q6J("ngIf",s.ItemwiseVendorRate.has(e[0]))("ngIfElse",n)}}function Lt(o,a){if(1&o&&(t.ynx(0),t.YNc(1,Nt,14,5,"tr",63),t.BQk()),2&o){const e=a.$implicit;t.xp6(1),t.Q6J("ngForOf",e.get("selectedVendors").value)}}function Rt(o,a){if(1&o&&(t.TgZ(0,"div",43)(1,"table",62)(2,"tr")(3,"th"),t._uU(4,"Vendor*"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Category"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Sub\xa0category"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Item"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Status"),t.qZA()(),t.TgZ(13,"tbody"),t.YNc(14,Lt,2,1,"ng-container",63),t.qZA()()()),2&o){const e=t.oxw();t.xp6(14),t.Q6J("ngForOf",e.vendorArray.controls)}}function Dt(o,a){1&o&&(t.TgZ(0,"span"),t._uU(1,"Submit"),t.qZA())}function Ft(o,a){1&o&&(t.TgZ(0,"span"),t._uU(1,"Please wait..."),t.qZA())}function St(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",46),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.updateRequest())}),t.YNc(2,Dt,2,0,"span",34),t.YNc(3,Ft,2,0,"span",34),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.load),t.xp6(1),t.Q6J("ngIf",!e.load),t.xp6(1),t.Q6J("ngIf",e.load)}}function Jt(o,a){1&o&&(t.TgZ(0,"span"),t._uU(1,"No Permission to Submit"),t.qZA())}function Qt(o,a){if(1&o&&(t.TgZ(0,"button",69),t.YNc(1,Jt,2,0,"span",34),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.load)}}const Vt=function(){return["/procurement"]},Yt=function(){return["/procurement/prlist"]},Bt=function(){return["/rate-comparative"]},zt=function(){return["/rate-approval"]},jt=function(){return["/purchase-order"]};let Et=(()=>{class o{constructor(e,n,i,s,l,p,c,I){this.router=e,this.httpService=n,this.snack=i,this.formBuilder=s,this.route=l,this.dialog=p,this.http=c,this.userService=I,this.load=!1,this.flag=!1,this.finalVendorArray=[],this.VendorItems=[],this.isButtonDisabled=!0,this.isSelectDisabled=!1,this.ItemwiseVendorRate=new Map,this.rateComparativeForm=new r.cw({title:new r.NI("",r.kI.required),date:new r.NI("",r.kI.required),expected_delivery_date:new r.NI("",r.kI.required),handle_by:new r.NI({value:"",disabled:!0},r.kI.required),rate_approval_number:new r.NI(""),site:new r.NI({value:"",disabled:!0},r.kI.required),local_purchase:new r.NI({value:"",disabled:!0},r.kI.required),remarks:new r.NI("",[]),_id:new r.NI}),this.details={},this.vendorsList=[],this.vendorAssociatedData=[],this.filteredItems=[],this.vendorForm=this.formBuilder.group({vendor:this.formBuilder.array([])}),this.getBrandList(),this.getList(),this.userService.getUserss().subscribe(Wt=>{this.users=Wt})}ItemData(e,n){let i=this.finalVendorArray.findIndex(l=>l[1]==e[1]);this.dialog.open(R,{data:{dataObj:e[0],vendorsList:this.vendorsList,items:this.details?.items,vendors:n,filledData:this.VendorItems[i],brandList:this.brandList}}).afterClosed().subscribe(l=>{l&&1===l.option?(this.VendorItems[i]=l,this.ItemwiseVendorRate.set(e[0],l.data.status)):this.ItemwiseVendorRate.delete(e[0])})}getList(){const e=this.http.get(`${U.N.api_path}${u.S3}`);this.httpService.multipleRequests([e],{}).subscribe(n=>{n&&(this.siteList=n[0].data)})}patchData(e){let n=JSON.parse(localStorage.getItem("loginData"));this.rateComparativeForm.patchValue({title:e.title,date:e.date,expected_delivery_date:e.expected_delivery_date,rate_approval_number:e.rate_approval_number,handle_by:n.user._id,site:e.site,local_purchase:e.local_purchase})}createItemArrayForm(){return new r.cw({item_id:new r.NI("",r.kI.required),qty:new r.NI("",r.kI.required),category:new r.NI(""),subCategory:new r.NI(""),attachment:new r.NI(""),remark:new r.NI("",r.kI.required),uom:new r.NI("",r.kI.required)})}addItems(e){}createItem(e){if(e)return new r.cw({item_id:new r.NI(e.item_id,r.kI.required),qty:new r.NI(e.qty,r.kI.required),category:new r.NI(e.categoryDetail.name),subCategory:new r.NI(e.subCategoryDetail.subcategory_name),attachment:new r.NI(e.attachment),remark:new r.NI(e.remark,r.kI.required),uom:new r.NI(e.uomDetail._id,r.kI.required)})}getSiteList(){this.httpService.GET(u.S3,{}).subscribe(e=>{this.siteList=e})}updateRequest(){if(this.VendorItems.some(i=>""===i))return void this.snack.notify("Some items rates are pending",2);if(!this.rateComparativeForm.valid)return;let e=JSON.parse(localStorage.getItem("loginData")),n=this.rateComparativeForm.value;n._id=this.details._id,n.items=this.details.items,n.stage="rate_approval",n.handle_by=e.user._id;for(let i=0;i<this.VendorItems.length;i++)this.VendorItems[i]=this.VendorItems[i].data.value;n.vendorItems=this.VendorItems,this.load=!0,this.httpService.PUT(u.lu,n).subscribe({next:i=>{this.snack.notify("Detail has been updated",1),this.router.navigate(["/rate-comparative"]),this.load=!1},error:i=>{if(this.load=!1,i.errors&&!(0,O.isEmpty)(i.errors)){let s="<ul>";for(let l in i.errors)s+=`<li>${i.errors[l][0]}</li>`;s+="</ul>",this.snack.notifyHtml(s,2)}else this.snack.notify(i.message,2)}})}isVendorSelected(e){return this.vendorsList.filter(i=>i.category.includes(e.categoryDetail._id)&&i.SubCategory.includes(e.subCategoryDetail._id))}get vendorArray(){return this.vendorForm.get("vendor")}handleVendorChange(){this.flag=!1,this.isButtonDisabled=!1}getBrandList(){this.httpService.GET(u.Lk,{}).subscribe(e=>{this.brandList=e.data})}save(){let e=0;this.flag=!0,this.isButtonDisabled=!0,this.isSelectDisabled=!0,this.finalVendorArray.length=0,this.VendorItems.length=0;for(let i of this.vendorArray.controls)for(let s of i.get("selectedVendors").value)this.finalVendorArray.push([s,e]),this.VendorItems.push(""),e++,console.log(e,"I");let n=0;for(let i=0;i<this.vendorForm.get("vendor").value.length;i++){let s=this.vendorForm.get("vendor").value[i].selectedVendors;for(let l=0;l<s.length;l++)s[l]=[s[l],n],n++}}detailsOfVendor(e){return this.vendorsList.find(i=>i._id==e[0]).vendor_name}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:i=>{this.viewPermission=i.dashboard_permissions[0].ParentChildchecklist[20].childList[0].isSelected,this.addPermission=i.dashboard_permissions[0].ParentChildchecklist[20].childList[1].isSelected,this.editPermission=i.dashboard_permissions[0].ParentChildchecklist[20].childList[2].isSelected},error:i=>{console.log(i)}}),this.route.params.subscribe(i=>{i.id&&this.httpService.GET(`${u.bG}`,{_id:i.id}).subscribe({next:s=>{this.details=s.data.details,this.vendorsList=s.data.vendorsList,this.vendorsList.map(p=>(this.vendorAssociatedData[p._id]=p,p));let l=[];this.filteredItems=this.details?.items.filter(p=>{let c=p.categoryDetail._id+"$"+p.subCategoryDetail._id;return!l.includes(c)&&(l.push(c),!0)}),this.filteredItems.forEach(p=>{let c=this.formBuilder.group({Item_category:p.categoryDetail,Item_subCategory:p.subCategoryDetail,selectedVendors:new r.NI([])});this.vendorForm.get("vendor").push(c)}),this.patchData(s.data.details)},error:s=>{}})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.F0),t.Y36(v.s),t.Y36(C.o),t.Y36(r.qu),t.Y36(m.gz),t.Y36(f.uw),t.Y36(b.eN),t.Y36(D.f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-rate-comparative-update"]],decls:121,vars:26,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","50px","margin-left","20px"],["src","./assets/images/RA.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],["src","./assets/images/ratedown.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/po.svg"],[3,"formGroup"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","10px","max-width","100%"],[1,"flex-div",2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],["placeholder","Enter title","formControlName","title","readonly","",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","3px","font-family","Poppins","height","50px"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Auto generate Request Date","readonly","",3,"matDatepicker"],["matSuffix","",3,"for"],["date",""],[1,"flex-div","custom-form-group"],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],[1,"star"],[1,"custom-form-control"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by","readonly","",3,"matDatepicker"],["requiredByStartDate",""],["matInput","","formControlName","handle_by"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"custom-form-control","flex-div"],["id","site","placeholder","Select site","matInput","","formControlName","site"],[1,"flex-div",2,"display","flex","flex-direction","column","margin-left","10px"],[2,"color","#4272BF","margin-bottom","10px"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group"],[1,"example-radio-button",2,"margin-right","10px",3,"value"],[1,"example-radio-button",3,"value"],[1,"topcard",2,"margin-top","40px"],[1,"scroll-bar1"],["formArrayName","vendor",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center"],[1,"p-btns-button",3,"disabled","click"],["class","scroll-bar1",4,"ngIf"],[1,"text-area-section"],["name","","id","","cols","30","rows","5","formControlName","remarks"],[1,"button-list"],[4,"ngIf","ngIfElse"],["noAddPermission",""],[3,"value"],["formArrayName","vendor"],[3,"formGroupName"],["Option",""],[1,"col-md-3"],["appearance","outline",2,"width","max-content"],["matInput","","multiple","","formControlName","selectedVendors",3,"selectionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],[2,"direction","ltr !important","border-left","2px solid #000 !important"],[4,"ngFor","ngForOf"],[2,"text-align","center"],[1,"p-btns",3,"click"],["pendingView",""],[2,"color","green"],[2,"color","red"],["disabled","",1,"p-btns-button"]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Rate comparative "),t.qZA(),t._UZ(5,"span",4),t.qZA(),t.TgZ(6,"div"),t._UZ(7,"hr",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7)(10,"div"),t._UZ(11,"img",8),t.qZA(),t.TgZ(12,"span",9),t._uU(13,"Purchase\xa0request"),t.qZA(),t.TgZ(14,"div"),t._UZ(15,"mat-divider",10),t.qZA()(),t.TgZ(16,"div",11)(17,"div"),t._UZ(18,"img",12),t.qZA(),t.TgZ(19,"span",9),t._uU(20,"Approvals"),t.qZA(),t.TgZ(21,"div"),t._UZ(22,"mat-divider",10),t.qZA()(),t.TgZ(23,"div",11)(24,"div"),t._UZ(25,"img",13),t.qZA(),t.TgZ(26,"span",14),t._uU(27,"Rate\xa0Comparative"),t.qZA(),t.TgZ(28,"div"),t._UZ(29,"mat-divider",10),t.qZA()(),t.TgZ(30,"div",11)(31,"div"),t._UZ(32,"img",12),t.qZA(),t.TgZ(33,"span",9),t._uU(34,"Rate\xa0Approvals"),t.qZA(),t.TgZ(35,"div"),t._UZ(36,"mat-divider",10),t.qZA()(),t.TgZ(37,"div",11)(38,"div"),t._UZ(39,"img",15),t.qZA(),t.TgZ(40,"span",9),t._uU(41,"Purchase\xa0orders"),t.qZA()()(),t.TgZ(42,"form",16)(43,"mat-card",17)(44,"div",18)(45,"div",19)(46,"label",20),t._uU(47,"Request title "),t.qZA(),t._UZ(48,"input",21),t.qZA(),t.TgZ(49,"div",19)(50,"label",20),t._uU(51,"Request date"),t.qZA(),t.TgZ(52,"mat-form-field",22),t._UZ(53,"input",23)(54,"mat-datepicker-toggle",24)(55,"mat-datepicker",null,25),t.qZA()(),t.TgZ(57,"div",26)(58,"label",27),t._uU(59," Required by "),t.TgZ(60,"span",28),t._uU(61,"*"),t.qZA()(),t.TgZ(62,"div",29)(63,"mat-form-field",22),t._UZ(64,"input",30)(65,"mat-datepicker-toggle",24)(66,"mat-datepicker",null,31),t.qZA()()(),t.TgZ(68,"div",26)(69,"label",27),t._uU(70," Handle by "),t.TgZ(71,"span",28),t._uU(72,"*"),t.qZA()(),t.TgZ(73,"div",29)(74,"mat-form-field",22)(75,"mat-select",32),t.YNc(76,At,2,2,"mat-option",33),t.qZA(),t.YNc(77,Tt,2,0,"mat-error",34),t.qZA()()(),t.TgZ(78,"div",35)(79,"label",20),t._uU(80,"Site name "),t.TgZ(81,"span",28),t._uU(82,"*"),t.qZA()(),t.TgZ(83,"mat-form-field",22)(84,"mat-select",36),t.YNc(85,wt,2,2,"mat-option",33),t.qZA()()(),t.TgZ(86,"div",37)(87,"label",38),t._uU(88,"Local Purchase "),t.TgZ(89,"span",28),t._uU(90,"*"),t.qZA()(),t.TgZ(91,"mat-radio-group",39)(92,"mat-radio-button",40),t._uU(93," Yes "),t.qZA(),t.TgZ(94,"mat-radio-button",41),t._uU(95," No "),t.qZA()()()()(),t.TgZ(96,"mat-card",42),t._uU(97," Select your vendor for each Category and Subcategory "),t.TgZ(98,"form",16)(99,"div",43)(100,"table")(101,"tr")(102,"th"),t._uU(103,"Category"),t.qZA(),t.TgZ(104,"th"),t._uU(105,"Sub Category"),t.qZA(),t.TgZ(106,"th"),t._uU(107,"Vendor"),t.qZA()(),t.YNc(108,Ut,9,5,"tr",44),t.qZA()(),t.TgZ(109,"div",45)(110,"button",46),t.NdJ("click",function(){return n.save()}),t._uU(111,"Save"),t.qZA()()()(),t.YNc(112,Rt,15,1,"div",47),t.TgZ(113,"div",48)(114,"label",20),t._uU(115,"Remarks "),t.qZA(),t._UZ(116,"textarea",49),t.qZA(),t.TgZ(117,"div",50),t.YNc(118,St,4,3,"ng-container",51),t.YNc(119,Qt,2,1,"ng-template",null,52,t.W1O),t.qZA()()),2&e){const i=t.MAs(56),s=t.MAs(67),l=t.MAs(120);t.xp6(9),t.Q6J("routerLink",t.DdM(21,Vt)),t.xp6(7),t.Q6J("routerLink",t.DdM(22,Yt)),t.xp6(7),t.Q6J("routerLink",t.DdM(23,Bt)),t.xp6(7),t.Q6J("routerLink",t.DdM(24,zt)),t.xp6(7),t.Q6J("routerLink",t.DdM(25,jt)),t.xp6(5),t.Q6J("formGroup",n.rateComparativeForm),t.xp6(11),t.Q6J("matDatepicker",i),t.xp6(1),t.Q6J("for",i),t.xp6(10),t.Q6J("matDatepicker",s),t.xp6(1),t.Q6J("for",s),t.xp6(11),t.Q6J("ngForOf",n.users),t.xp6(1),t.Q6J("ngIf",null==n.rateComparativeForm.controls.handle_by.errors?null:n.rateComparativeForm.controls.handle_by.errors.required),t.xp6(8),t.Q6J("ngForOf",n.siteList),t.xp6(7),t.Q6J("value","yes"),t.xp6(2),t.Q6J("value","no"),t.xp6(4),t.Q6J("formGroup",n.vendorForm),t.xp6(10),t.Q6J("ngForOf",n.filteredItems),t.xp6(2),t.Q6J("disabled",n.isButtonDisabled),t.xp6(2),t.Q6J("ngIf",n.flag),t.xp6(6),t.Q6J("ngIf",n.addPermission||n.editPermission)("ngIfElse",l)}},dependencies:[g.sg,g.O5,m.rH,m.Od,Z.ey,_.TO,_.KE,_.hX,_.R9,F.a8,h.Mq,h.hl,h.nW,y.d,q.Nt,x.VQ,x.U0,A.gD,T.Ye,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,r.x0,r.CE],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.p-btns-button[_ngcontent-%COMP%]:disabled{opacity:.5}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:100%;height:auto;font-family:Poppins;box-shadow:none;border:1px solid #ccc;border-radius:4px}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;width:100%;font-size:14px;margin-bottom:20px;margin-right:20px;margin-top:8px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}form[_ngcontent-%COMP%]{padding:10px 20px}.scroll-bar1[_ngcontent-%COMP%]{margin-top:50px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background-color:"Transparent"}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 0 20px;float:right;gap:10px}.text-area-section[_ngcontent-%COMP%]{width:100%;height:auto;margin:30px 0 0}.text-area-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:100%}.flex-div[_ngcontent-%COMP%]{width:31%}.mat-form-field[_ngcontent-%COMP%]{display:block}.pending[_ngcontent-%COMP%]{padding:8px;width:120px;background-color:#ccc;color:#333;font-size:14px;font-family:Poppins;height:50px;border:none}.p-btns[_ngcontent-%COMP%]{background:#233a61;padding:5px 10px;border-radius:4px;font-size:12px;cursor:pointer}.p-btns[_ngcontent-%COMP%]:hover{opacity:.7}.p-btns-button[_ngcontent-%COMP%]{background:#233a61;border:1px solid #233a61;padding:7px 40px;border-radius:4px;font-size:12px;cursor:pointer;color:#fff}.p-btns-button[_ngcontent-%COMP%]:hover{opacity:.7}.vendor-wapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:40px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-name-cl[_ngcontent-%COMP%]{padding:6px 15px;background:#233a61;color:#fff}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:rgba(7,59,76,.0509803922);padding:6px 15px;margin-bottom:10px;gap:10px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80px;border:1px solid #ccc;border-radius:2px;padding:5px;outline:none}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-label[_ngcontent-%COMP%]{min-width:144px}input[readonly=true][_ngcontent-%COMP%], input[readonly][_ngcontent-%COMP%], .mat-select-disabled[_ngcontent-%COMP%]{opacity:.6}']}),o})();var $t=d(8898),Gt=d(9836);const Kt=[{path:"",component:it},{path:"details/:id",component:qt},{path:"update/:id",component:Et}];let Ht=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.ez,m.Bz,$t.S,r.UX,Gt.w,S.Z,[m.Bz.forChild(Kt)]]}),o})()}}]);