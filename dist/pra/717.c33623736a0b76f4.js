"use strict";(self.webpackChunkpra=self.webpackChunkpra||[]).push([[717],{3717:(Ce,M,g)=>{g.r(M),g.d(M,{RateComparativeModule:()=>be});var h=g(6895),u=g(9299),B=g(1283),i=g(4006),f=g(8608),N=g(7489),R=g(2340),Y=g(5439),t=g(4650),y=g(2126),A=g(529),L=g(2894),w=g(4961),F=g(6104),q=g(3238),x=g(9549),Q=g(4859),I=g(4850),J=g(7392),k=g(4144),U=g(4385),O=g(3683);function j(r,l){if(1&r&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&r){const e=l.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.label)}}const S=function(r){return["/rate-comparative/update",r]};function E(r,l){if(1&r&&(t.TgZ(0,"td",54),t._uU(1,"Create\xa0Comparative"),t.qZA()),2&r){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,S,e._id))}}const V=function(r){return["/rate-comparative/details",r]};function G(r,l){if(1&r&&(t.TgZ(0,"td",55),t._uU(1,"Approved Vendors"),t.qZA()),2&r){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,V,e._id))}}function z(r,l){if(1&r&&(t.TgZ(0,"td",56),t._uU(1,"Rejected Rates"),t.qZA()),2&r){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,V,e._id))}}function K(r,l){if(1&r&&(t.TgZ(0,"td",58),t._uU(1,"Revise\xa0Comparative"),t.qZA()),2&r){const e=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,S,e._id))}}function H(r,l){if(1&r&&(t.ynx(0),t.YNc(1,K,2,3,"td",57),t.BQk()),2&r){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf","revise"==e.status&&"rate_comparitive"==o.stage)}}function W(r,l){1&r&&(t.TgZ(0,"td",60),t._uU(1,"No Permission to Revise Comparative"),t.qZA())}function X(r,l){if(1&r&&t.YNc(0,W,2,0,"td",59),2&r){const e=t.oxw().$implicit,o=t.oxw(2);t.Q6J("ngIf","revise"==e.status&&"rate_comparitive"==o.stage)}}function tt(r,l){if(1&r&&(t.TgZ(0,"tr")(1,"td",42),t._uU(2," Request\xa0no\xa0 "),t.TgZ(3,"span",43),t._uU(4),t.qZA()(),t._UZ(5,"hr",44),t.TgZ(6,"td",45),t._uU(7),t.qZA(),t._UZ(8,"hr",44),t.TgZ(9,"td",46),t._uU(10,"Title\xa0"),t.TgZ(11,"span",43),t._uU(12),t.qZA()(),t._UZ(13,"hr",44),t.TgZ(14,"td",47),t._uU(15," Site\xa0"),t.TgZ(16,"span",43),t._uU(17),t.qZA()(),t.YNc(18,E,2,3,"td",48),t.YNc(19,G,2,3,"td",49),t.YNc(20,z,2,3,"td",50),t.YNc(21,H,2,1,"ng-container",51),t.YNc(22,X,1,1,"ng-template",null,52,t.W1O),t.TgZ(24,"td",53)(25,"mat-icon"),t._uU(26," arrow_forward_ios "),t.qZA()()()),2&r){const e=l.$implicit,o=t.MAs(23),n=t.oxw(2);t.xp6(4),t.Oqu(n.reqNo(e.purchase_request_id)),t.xp6(3),t.hij("Requested on: ",e.date,""),t.xp6(5),t.Oqu(e.title),t.xp6(5),t.Oqu(e.siteData.site_name),t.xp6(1),t.Q6J("ngIf","pending"==e.status&&"rate_comparitive"==n.stage),t.xp6(1),t.Q6J("ngIf","rate_approval"==n.stage),t.xp6(1),t.Q6J("ngIf","rejected"==e.status&&"rate_comparitive"==n.stage),t.xp6(1),t.Q6J("ngIf",n.editPermission)("ngIfElse",o)}}function et(r,l){1&r&&(t.TgZ(0,"div",61),t._UZ(1,"img",62),t.TgZ(2,"span"),t._uU(3," No record found"),t.qZA()())}function ot(r,l){if(1&r){const e=t.EpF();t.ynx(0,20),t.TgZ(1,"div",21)(2,"div",22)(3,"mat-form-field",23)(4,"mat-icon",24),t._uU(5,"search"),t.qZA(),t.TgZ(6,"input",25),t.NdJ("input",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.search(n,"title"))}),t.qZA()()(),t._UZ(7,"div",26),t.TgZ(8,"div",27)(9,"div",28)(10,"span"),t._uU(11,"Filter\xa0by"),t.qZA()(),t.TgZ(12,"div")(13,"mat-form-field",29)(14,"input",30),t.NdJ("input",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.search(n,"site"))}),t.qZA()()()(),t.TgZ(15,"div",31)(16,"div",32)(17,"span"),t._uU(18,"Filter by Status"),t.qZA()(),t.TgZ(19,"div",33)(20,"mat-form-field",34)(21,"mat-select",35),t.NdJ("selectionChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.onStatusChange(n))}),t.YNc(22,j,2,2,"mat-option",36),t.qZA()()()()(),t.TgZ(23,"div",37)(24,"table",38)(25,"tbody"),t.YNc(26,tt,27,9,"tr",39),t.qZA()(),t.YNc(27,et,4,0,"div",40),t.qZA(),t.BQk()}if(2&r){const e=t.oxw();t.xp6(21),t.Q6J("formControl",e.statusOption),t.xp6(1),t.Q6J("ngForOf",e.statusList),t.xp6(4),t.Q6J("ngForOf",e.rateComparativeList),t.xp6(1),t.Q6J("ngIf",!(e.rateComparativeList&&e.rateComparativeList.length>0))}}function nt(r,l){1&r&&(t.TgZ(0,"h3",63),t._uU(1,"You don't have permissions to view."),t.qZA())}const rt=function(){return["/procurement"]},it=function(){return["/procurement/prlist"]},at=function(){return["/rate-comparative"]},st=function(){return["/rate-approval"]},lt=function(){return["/purchase-order"]};let dt=(()=>{class r{constructor(e,o,n,a,s,d){this.httpService=e,this.http=o,this.auth=n,this.userService=a,this.router=s,this.snack=d,this.statusOption=new i.NI("pending"),this.statusList=[{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"revise",label:"Revise"}],this.filter_by="status",this.filter_value="pending",this.requestType="new",this.originalRateComparativeList=[],this.stage="rate_comparitive",this.purchaseList=[],this.getList({filter_by:this.filter_by,filter_value:this.filter_value,stage:"rate_comparitive"})}getList(e){this.httpService.GET(f.lu,e).subscribe({next:o=>{if(o.data.forEach(n=>{n.date=Y(n.updated_at).format("DD-MM-YYYY")}),console.log(o.data),"superadmin"===this.permissions.user.role)this.originalRateComparativeList=o.data,this.rateComparativeList=o.data;else{const a=o.data.filter(s=>this.siteList.some(d=>d._id===s.site));console.log(a),this.originalRateComparativeList=a,this.rateComparativeList=a}},error:o=>{if(o.errors&&!(0,N.isEmpty)(o.errors)){let n="<ul>";for(let a in o.errors)n+=`<li>${o.errors[a][0]}</li>`;n+="</ul>",this.snack.notifyHtml(n,2)}else this.snack.notify(o.message,2)}})}getReqNO(){const e=this.http.get(`${R.N.api_path}${f.Fj}`);this.httpService.multipleRequests([e],{}).subscribe(o=>{o&&(this.purchaseList=o[0].data)})}reqNo(e){return this.purchaseList.filter(n=>n._id===e)[0].purchase_request_number}onStatusChange(e){let o;"pending"==e.value||"revise"==e.value||"rejected"==e.value?(o="rate_comparitive",this.getList({filter_by:this.filter_by,filter_value:e.value,stage:o})):(o="rate_approval",this.getList({filter_by:this.filter_by,stage:o})),this.stage=o}dateFilter(e){this.originalRateComparativeList&&this.originalRateComparativeList.length>0&&(this.rateComparativeList=e.value?this.originalRateComparativeList.filter(o=>new Date(o.date)==new Date(e.value)):this.originalRateComparativeList)}search(e,o){this.originalRateComparativeList&&this.originalRateComparativeList.length>0&&(this.rateComparativeList="site"==o?e.target.value?this.originalRateComparativeList.filter(n=>n.siteData.site_name.toLowerCase().includes(e.target.value.toLowerCase())):this.originalRateComparativeList:e.target.value?this.originalRateComparativeList.filter(n=>n.title.toLowerCase().includes(e.target.value.toLowerCase())):this.originalRateComparativeList)}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.userService.getUserss().subscribe(e=>{e.find(n=>n._id===this.permissions.user._id)?(this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:s=>{this.viewPermission=s.dashboard_permissions[0].ParentChildchecklist[20].childList[0].isSelected,this.addPermission=s.dashboard_permissions[0].ParentChildchecklist[20].childList[1].isSelected,this.editPermission=s.dashboard_permissions[0].ParentChildchecklist[20].childList[2].isSelected},error:s=>{console.log(s)}}),this.getReqNO(),this.siteList=this.permissions.user.sites,console.log("SiteSelect",this.siteList)):(this.snack.notify("Invalid Credentials - User Details not Valid",1),this.auth.removeUser(),this.userService.updateLogin("logout"),this.router.navigate(["/login"]))})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(y.s),t.Y36(A.eN),t.Y36(L.e),t.Y36(w.f),t.Y36(u.F0),t.Y36(F.o))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-rate-comparative-list"]],decls:48,vars:12,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","50px","margin-left","20px"],["src","./assets/images/ratehead.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],["mat-icon-button","",2,"margin-right","40px"],[2,"margin-top","40px"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],["src","./assets/images/ratedown.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/po.svg"],["class","section-body",4,"ngIf","ngIfElse"],["noView",""],[1,"section-body"],[2,"display","flex","flex-direction","row","gap","10px","width","100%"],[2,"margin-left","40px","width","100%","margin-top","30px"],["appearance","outline",1,"searchbar"],["matSuffix",""],["matInput","","type","search","placeholder","search title",1,"search-input",3,"input"],[2,"margin-right","600px","margin-top","30px","display","flex","gap","10px","width","100%"],[2,"margin-top","30px","display","flex","position","relative","right","570px","gap","10px","width","100%"],[2,"margin-top","15px","color","#94A3B8"],["appearance","outline",1,"datebar"],["matInput","","placeholder","Site",3,"input"],[2,"margin-top","30px","display","flex","position","relative","right","570px","gap","10px"],[2,"margin-top","15px","color","#94A3B8","width","110px"],[1,"custom-form-control",2,"position","relative"],["appearance","outline"],[3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"scroll-bar1",2,"width","96%"],[2,"direction","ltr !important","margin-top","-20px"],[4,"ngFor","ngForOf"],["class","no-record-found",4,"ngIf"],[3,"value"],[2,"color","#4272BF","width","200px","text-align","left","padding","10px","font-size","15px"],[2,"color","#000000"],[2,"border","1px solid #D9D9D9","height","30px"],[2,"color","#4272BF","width","500px"],[2,"color","#4272BF","width","300px","font-size","15px","padding","10px"],[2,"color","#4272BF","width","700px","text-align","left","padding","10px","font-size","15px"],["style","background-color: #233A61;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],["style","background-color: #54AA52;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],["style","background-color: #C7323B;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],[4,"ngIf","ngIfElse"],["noEditPermission",""],[2,"width","100px"],[2,"background-color","#233A61","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],[2,"background-color","#54AA52","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],[2,"background-color","#C7323B","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],["style","background-color: rgb(26, 188, 254); color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],[2,"background-color","rgb(26, 188, 254)","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],["style","background-color: rgb(26, 188, 254); color:#fff;width:200px;font-size: 14px;cursor: pointer;","disabled","",4,"ngIf"],["disabled","",2,"background-color","rgb(26, 188, 254)","color","#fff","width","200px","font-size","14px","cursor","pointer"],[1,"no-record-found"],["src","./assets/images/inbox_empty.png","alt",""],[2,"display","flex","justify-content","center","margin-top","2%","font-size","160%","font-weight","bolder","color","grey"]],template:function(e,o){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Rate comparative"),t.qZA(),t._UZ(5,"span",4),t.TgZ(6,"button",5)(7,"mat-icon",6),t._uU(8,"notifications"),t.qZA()()(),t.TgZ(9,"div"),t._UZ(10,"hr",7),t.qZA(),t.TgZ(11,"div",8)(12,"div",9)(13,"div"),t._UZ(14,"img",10),t.qZA(),t.TgZ(15,"span",11),t._uU(16,"Purchase\xa0request"),t.qZA(),t.TgZ(17,"div"),t._UZ(18,"mat-divider",12),t.qZA()(),t.TgZ(19,"div",13)(20,"div"),t._UZ(21,"img",14),t.qZA(),t.TgZ(22,"span",11),t._uU(23,"Approvals"),t.qZA(),t.TgZ(24,"div"),t._UZ(25,"mat-divider",12),t.qZA()(),t.TgZ(26,"div",13)(27,"div"),t._UZ(28,"img",15),t.qZA(),t.TgZ(29,"span",16),t._uU(30,"Rate\xa0Comparative"),t.qZA(),t.TgZ(31,"div"),t._UZ(32,"mat-divider",12),t.qZA()(),t.TgZ(33,"div",13)(34,"div"),t._UZ(35,"img",14),t.qZA(),t.TgZ(36,"span",11),t._uU(37,"Rate\xa0Approvals"),t.qZA(),t.TgZ(38,"div"),t._UZ(39,"mat-divider",12),t.qZA()(),t.TgZ(40,"div",13)(41,"div"),t._UZ(42,"img",17),t.qZA(),t.TgZ(43,"span",11),t._uU(44,"Purchase\xa0orders"),t.qZA()()(),t.YNc(45,ot,28,4,"ng-container",18),t.YNc(46,nt,2,0,"ng-template",null,19,t.W1O)),2&e){const n=t.MAs(47);t.xp6(12),t.Q6J("routerLink",t.DdM(7,rt)),t.xp6(7),t.Q6J("routerLink",t.DdM(8,it)),t.xp6(7),t.Q6J("routerLink",t.DdM(9,at)),t.xp6(7),t.Q6J("routerLink",t.DdM(10,st)),t.xp6(7),t.Q6J("routerLink",t.DdM(11,lt)),t.xp6(5),t.Q6J("ngIf",o.viewPermission)("ngIfElse",n)}},dependencies:[h.sg,h.O5,u.rH,u.Od,q.ey,x.KE,x.R9,Q.lW,I.d,J.Hw,k.Nt,U.gD,O.Ye,i.JJ,i.oH],styles:[".mat-form-field-appearance-outline .mat-form-field-infix{padding:.6em;width:250px}mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}input[type=text][_ngcontent-%COMP%]{width:60%;border-radius:8px;padding:12px 20px;margin:8px 0;box-sizing:border-box;border:.5px solid #94A3B8;transition:.5s;outline:none;font-family:Poppins;font-size:15px}.requests[_ngcontent-%COMP%]{height:40px;width:1120px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:15px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:15px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:15px;display:flex;align-items:center;justify-content:center}.searchbar[_ngcontent-%COMP%]{width:350px;border-radius:20px;font-family:Poppins}.datebar[_ngcontent-%COMP%]{width:180px;border-radius:20px;font-family:Poppins}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:separate;border-spacing:0 25px;text-align:left;width:100%;font-size:12px;margin-left:30px;margin-bottom:20px;margin-right:-10px}td[_ngcontent-%COMP%]{border:none;text-align:center;padding:8px 1px;color:#233a61;font-style:normal;font-size:medium}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f4f4f5!important}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f4f4f5!important}.scroll-bar1[_ngcontent-%COMP%]{height:600px;width:93%;margin-left:20px;margin-bottom:100px;margin-top:10px;overflow:auto;direction:rtl;overflow-x:hidden}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1E293B;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.no-record-found[_ngcontent-%COMP%]{text-align:center;display:flex;gap:10px;flex-direction:column;align-items:center;justify-content:center}.no-record-found[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:188px}"]}),r})();var C=g(5938),pt=g(7009);let ct=(()=>{class r{constructor(e,o,n,a){this._snackBar=e,this.formBuilder=o,this.dialogRef=n,this.data=a,this.formSubmitted=!1,this.showVendorRate=!1,this.vendorRates=[],this.load=!1}ngOnInit(){}onSave(){this.vendorItemsForm.valid?(this.showVendorRate=!0,this.vendorRates=this.calculateVendorRates()):this._snackBar.open("Please fill all the required fields","Close",{duration:3e3})}calculateVendorRates(){return[]}onNoClick(){this.dialogRef.close()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(pt.ux),t.Y36(i.qu),t.Y36(C.so),t.Y36(C.WI))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-rate-comparative-vendors"]],decls:0,vars:0,template:function(e,o){},styles:[".mat-mdc-dialog-title[_ngcontent-%COMP%]{border-bottom:0;padding:14px;background:#f3f3f3;display:flex;justify-content:space-between;align-items:center;font-style:normal;font-weight:400;font-size:14px;line-height:16px;text-transform:capitalize;color:#28313b}.mat-mdc-dialog-content-cstm[_ngcontent-%COMP%]{padding-top:10px}.cancel-btn[_ngcontent-%COMP%]{background:#f3f3f3;color:#333}.space-btn[_ngcontent-%COMP%]{margin:0 5px}.mat-mdc-dialog-content[_ngcontent-%COMP%]{margin:0;padding:0 15px}.close-icon[_ngcontent-%COMP%]{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:13px;width:0px;margin-top:-5px;cursor:pointer}.vendor_list_table[_ngcontent-%COMP%]{border:1px solid #ccc;width:100%;overflow:hidden}.vendor_list_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;padding:10px 20px;font-weight:400}.vendor_list_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 20px}.vendor_list_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#eee}.cstm-btn[_ngcontent-%COMP%]{border:0;border-radius:4px;padding:10px 23px;outline:none}.cstm-btn.theme-btn-color[_ngcontent-%COMP%]{background-color:#233a61;color:#fff}.footer-template[_ngcontent-%COMP%]{text-align:center;border-top:1px solid #ccc;margin:30px 0 0;padding-top:22px;display:flex;align-items:center;justify-content:center;gap:10px}.cstm-input[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;padding:5px 10px}.td-subtitle[_ngcontent-%COMP%]{font-size:11px;font-weight:400}.header-subtitle[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.empty-input[_ngcontent-%COMP%]{border:1px solid red}.invalid-input[_ngcontent-%COMP%]{border:2px solid red}"]}),r})();var D=g(3546),v=g(9602),Z=g(1948);function mt(r,l){if(1&r&&(t.TgZ(0,"mat-option",48),t._uU(1),t.qZA()),2&r){const e=l.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function gt(r,l){if(1&r&&(t.TgZ(0,"mat-option",48),t._uU(1),t.qZA()),2&r){const e=l.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.site_name," ")}}const ut=function(r){return{"preferred-vendor":r}};function _t(r,l){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"th",59)(2,"label")(3,"input",60),t.NdJ("change",function(n){const s=t.CHM(e).index,d=t.oxw(2);return t.KtG(d.toggleVendorPreferred(s,n))}),t.qZA(),t._uU(4),t.qZA()(),t.BQk()}if(2&r){const e=l.$implicit,o=l.index,n=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(3,ut,n.vendorItemsTables[0].totals[n.getVendorKeys()[o]].preferred)),t.xp6(2),t.Q6J("checked",n.vendorItemsTables[0].totals[n.getVendorKeys()[o]].preferred),t.xp6(1),t.hij(" ",e," ")}}function ft(r,l){1&r&&(t.ynx(0),t.TgZ(1,"th",61),t._uU(2,"Available Qty"),t.qZA(),t.TgZ(3,"th",61),t._uU(4,"Rate (\u20b9)"),t.qZA(),t.TgZ(5,"th",61),t._uU(6,"Sub Total (\u20b9)"),t.qZA(),t.BQk())}const ht=function(r,l){return{"lowest-amount":r,"selected-td":l}};function xt(r,l){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"td",61),t._uU(2),t.qZA(),t.TgZ(3,"td",61),t._uU(4),t.qZA(),t.TgZ(5,"td",64),t._uU(6),t.TgZ(7,"input",65),t.NdJ("change",function(){const a=t.CHM(e).$implicit,s=t.oxw().$implicit,d=t.oxw(3);return t.KtG(d.togglePreferredVendor(s,a))}),t.qZA()(),t.BQk()}if(2&r){const e=l.$implicit,o=t.oxw().$implicit,n=t.oxw(3);t.xp6(2),t.hij(" ",o.vendors[e].requiredQty," "),t.xp6(2),t.hij(" ",o.vendors[e].rate," "),t.xp6(1),t.Q6J("ngClass",t.WLB(5,ht,n.isSaved&&n.isSmallestAmount(o.item_id,e),o.vendors[e].preferred)),t.xp6(1),t.hij(" ",o.vendors[e].amount," "),t.xp6(1),t.Q6J("checked",o.vendors[e].preferred)}}function vt(r,l){if(1&r&&(t.TgZ(0,"tr")(1,"td",62),t._uU(2),t.qZA(),t.TgZ(3,"td",62),t._uU(4),t.qZA(),t.TgZ(5,"td",62),t._uU(6),t.qZA(),t.TgZ(7,"td",63),t._uU(8),t.qZA(),t.TgZ(9,"td",63),t._uU(10),t.qZA(),t.TgZ(11,"td",61),t._uU(12),t.qZA(),t.TgZ(13,"td",61),t._uU(14),t.qZA(),t.TgZ(15,"td",61),t._uU(16),t.qZA(),t.TgZ(17,"td",61),t._uU(18),t.qZA(),t.TgZ(19,"td",61),t._uU(20),t.qZA(),t.YNc(21,xt,8,8,"ng-container",55),t.TgZ(22,"td",61),t._uU(23),t.qZA()()),2&r){const e=l.$implicit,o=t.oxw(3);t.xp6(2),t.Oqu(e.name),t.xp6(2),t.hij(" ",e.specification," "),t.xp6(2),t.hij(" ",e.hsnCode," "),t.xp6(2),t.Oqu(e.category),t.xp6(2),t.Oqu(e.subCategory),t.xp6(2),t.Oqu(e.uom),t.xp6(2),t.Oqu(e.quantity),t.xp6(2),t.Oqu(e.gst),t.xp6(2),t.Oqu(e.pislBudget),t.xp6(2),t.Oqu(e.pislBudgetSubTotal),t.xp6(1),t.Q6J("ngForOf",o.getVendorKeysArray(e.vendors)),t.xp6(2),t.Oqu(e.remark)}}function bt(r,l){if(1&r&&(t.ynx(0),t.YNc(1,vt,24,12,"tr",55),t.BQk()),2&r){const e=l.$implicit;t.xp6(1),t.Q6J("ngForOf",e.items)}}function Ct(r,l){if(1&r&&(t.ynx(0),t.TgZ(1,"td",66),t._uU(2),t.qZA(),t.BQk()),2&r){const e=l.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu((null==o.vendorItemsTables[0].totals[e]?null:o.vendorItemsTables[0].totals[e].totalAmount)||"0")}}function Zt(r,l){if(1&r&&(t.ynx(0),t.TgZ(1,"td",66),t._uU(2),t.qZA(),t.BQk()),2&r){const e=l.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu((null==o.vendorItemsTables[0].totals[e]?null:o.vendorItemsTables[0].totals[e].gstAmount)||"0")}}function Tt(r,l){if(1&r&&(t.ynx(0),t.TgZ(1,"td",67),t._uU(2),t.qZA(),t.BQk()),2&r){const e=l.$implicit,o=t.oxw(2);t.xp6(2),t.hij(" ",(null==o.vendorItemsTables[0].totals[e]?null:o.vendorItemsTables[0].totals[e].freight)||"0"," ")}}function yt(r,l){if(1&r&&(t.ynx(0),t.TgZ(1,"td",67),t._uU(2),t.qZA(),t.BQk()),2&r){const e=l.$implicit,o=t.oxw(2);t.xp6(2),t.hij(" ",(null==o.vendorItemsTables[0].totals[e]?null:o.vendorItemsTables[0].totals[e].freightGst)||"0"," ")}}const At=function(r,l){return{"lowest-grand-total":r,"preferred-grand-total":l}};function wt(r,l){if(1&r&&(t.ynx(0),t.TgZ(1,"td",68),t._uU(2),t.qZA(),t.BQk()),2&r){const e=l.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.WLB(2,At,o.isSaved&&o.isLowestGrandTotal(e),o.isPreferredGrandTotal(e))),t.xp6(1),t.hij(" ",(null==o.vendorItemsTables[0].totals[e]?null:o.vendorItemsTables[0].totals[e].grandTotal)||"0"," ")}}function qt(r,l){if(1&r&&(t.ynx(0),t.TgZ(1,"td",66),t._uU(2),t.qZA(),t.BQk()),2&r){const e=l.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(null==o.vendorItemsTables[0].totals[e]?null:o.vendorItemsTables[0].totals[e].vendorRemark)}}function It(r,l){if(1&r&&(t.TgZ(0,"div")(1,"div",49)(2,"div",50)(3,"table",51)(4,"thead")(5,"tr")(6,"th",52),t._uU(7,"Item"),t.qZA(),t.TgZ(8,"th",52),t._uU(9," Specification "),t.qZA(),t.TgZ(10,"th",52),t._uU(11," HSN Code "),t.qZA(),t.TgZ(12,"th",53),t._uU(13,"Category"),t.qZA(),t.TgZ(14,"th",53),t._uU(15,"Sub-Category"),t.qZA(),t.TgZ(16,"th",54),t._uU(17,"UOM"),t.qZA(),t.TgZ(18,"th",54),t._uU(19,"Quantity"),t.qZA(),t.TgZ(20,"th",54),t._uU(21,"GST %"),t.qZA(),t.TgZ(22,"th",54),t._uU(23,"Budget (\u20b9)"),t.qZA(),t.TgZ(24,"th",54),t._uU(25,"Budget SubTotal (\u20b9)"),t.qZA(),t.YNc(26,_t,5,5,"ng-container",55),t.TgZ(27,"th",54),t._uU(28,"Add Remarks"),t.qZA()(),t.TgZ(29,"tr"),t.YNc(30,ft,7,0,"ng-container",55),t.qZA()(),t.TgZ(31,"tbody"),t.YNc(32,bt,2,1,"ng-container",55),t.qZA(),t.TgZ(33,"tfoot")(34,"tr"),t._UZ(35,"td",56),t.TgZ(36,"td",57),t._uU(37,"Total Amount (\u20b9)"),t.qZA(),t.YNc(38,Ct,3,1,"ng-container",55),t._UZ(39,"td",58),t.qZA(),t.TgZ(40,"tr"),t._UZ(41,"td",56),t.TgZ(42,"td",57),t._uU(43,"GST Amount (\u20b9)"),t.qZA(),t.YNc(44,Zt,3,1,"ng-container",55),t._UZ(45,"td",58),t.qZA(),t.TgZ(46,"tr"),t._UZ(47,"td",56),t.TgZ(48,"td",57),t._uU(49,"Freight (\u20b9)"),t.qZA(),t.YNc(50,Tt,3,1,"ng-container",55),t._UZ(51,"td",58),t.qZA(),t.TgZ(52,"tr"),t._UZ(53,"td",56),t.TgZ(54,"td",57),t._uU(55,"Freight GST (%)"),t.qZA(),t.YNc(56,yt,3,1,"ng-container",55),t._UZ(57,"td",58),t.qZA(),t.TgZ(58,"tr"),t._UZ(59,"td",56),t.TgZ(60,"td",57),t._uU(61,"Grand Total (\u20b9)"),t.qZA(),t.YNc(62,wt,3,5,"ng-container",55),t._UZ(63,"td",58),t.qZA(),t.TgZ(64,"tr"),t._UZ(65,"td",56),t.TgZ(66,"td",57),t._uU(67,"Remarks"),t.qZA(),t.YNc(68,qt,3,1,"ng-container",55),t._UZ(69,"td",58),t.qZA()()()()()()),2&r){const e=t.oxw();t.xp6(26),t.Q6J("ngForOf",e.vendorItemsTables[0].vendors),t.xp6(4),t.Q6J("ngForOf",e.vendorItemsTables[0].vendors),t.xp6(2),t.Q6J("ngForOf",e.vendorItemsTables),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0]))}}function kt(r,l){if(1&r&&(t.TgZ(0,"div",69)(1,"a",70),t._uU(2),t.qZA()()),2&r){const e=l.$implicit,o=t.oxw();t.xp6(1),t.Q6J("href",e.value,t.LSH),t.xp6(1),t.hij(" ",o.getVendorNameByCode(e.key)," Quotation ")}}const Ut=function(){return["/procurement"]},Ot=function(){return["/procurement/prlist"]},Pt=function(){return["/rate-comparative"]},Mt=function(){return["/rate-approval"]},Nt=function(){return["/purchase-order"]},Rt=function(r){return{"background-color":r}};let Lt=(()=>{class r{constructor(e,o,n,a,s,d,p){this.router=e,this.httpService=o,this.dialog=n,this.formBuilder=a,this.route=s,this.userService=d,this.http=p,this.load=!1,this.vendorList=[],this.finalVendorArray=[],this.VendorItems=this.formBuilder.array([]),this.files={},this.isSaved=!0,this.purchaseRequestForm=new i.cw({title:new i.NI("",i.kI.required),date:new i.NI("",i.kI.required),expected_delivery_date:new i.NI("",i.kI.required),handle_by:new i.NI({value:"",disabled:!0},i.kI.required),rate_approval_number:new i.NI(""),site:new i.NI({value:"",disabled:!0},i.kI.required),local_purchase:new i.NI({value:"",disabled:!0},i.kI.required),remarks:new i.NI("",[]),files:new i.NI({}),items:this.formBuilder.array([]),_id:new i.NI}),this.details={},this.vendorsList=[],this.vendorAssociatedData=[],this.getSiteList(),this.getVendorList(),this.getBrandList(),this.userService.getUserss().subscribe(c=>{this.users=c})}vendorData(e){let o=e._id;$(`.vendor-detail-button-${o}`).hasClass("collapsed")?($(`.vendor-detail-button-${o}`).removeClass("collapsed"),$(`.vendor-detail-${o}`).removeClass("cl-show")):($(`.vendor-detail-button-${o}`).addClass("collapsed"),$(`.vendor-detail-${o}`).addClass("cl-show"))}createItemArrayForm(){return new i.cw({item_id:new i.NI("",i.kI.required),qty:new i.NI("",i.kI.required),category:new i.NI(""),subCategory:new i.NI(""),attachment:new i.NI(""),remark:new i.NI("",i.kI.required),uom:new i.NI("",i.kI.required)})}createItem(e){if(e)return new i.cw({item_id:new i.NI(e.item_id,i.kI.required),qty:new i.NI(e.qty,i.kI.required),category:new i.NI(e.categoryDetail.name),subCategory:new i.NI(e.subCategoryDetail.subcategory_name),attachment:new i.NI(e.attachment),remark:new i.NI(e.remark,i.kI.required),uom:new i.NI(e.uomDetail._id,i.kI.required)})}ItemData(e){console.log("==dataObj==",e),this.dialog.open(ct,{data:{dataObj:e.Vendor,vendorsList:this.vendorsList,items:this.details?.items,filledData:e,brandList:this.brandList,type:"detailsPage"}}).afterClosed().subscribe(n=>{})}objectBackToFormGroup(){this.VendorItems.clear();for(let e=0;e<this.details.vendorItems.length;e++){const o={Vendor:this.details.vendorItems[e].Vendor,category:"GST",subCategory:"GST",items:this.details.vendorItems[e].items},n=this.formBuilder.group({Vendor:[o.Vendor,i.kI.required],category:[o.category,i.kI.required],subCategory:[o.subCategory,i.kI.required],items:this.formBuilder.array([])});this.VendorItems.push(n)}}patchData(e){this.purchaseRequestForm.patchValue({title:e.title,date:e.date,expected_delivery_date:e.expected_delivery_date,rate_approval_number:e.rate_approval_number,handle_by:e.handle_by,site:e.site,local_purchase:e.local_purchase,remarks:e.remarks,files:e.files}),this.files=e.files,this.vendorItemsTables=e.vendorRatesVendorWise,console.log("vendorItemsTable",this.vendorItemsTables),this.purchaseRequestForm.controls.remarks.disable()}getVendorKeysArray(e){return console.log(e),Object.keys(e)}isLowestGrandTotal(e){const o=this.vendorItemsTables[0];if(!o||!o.totals)return console.error("Vendor items table or totals not found"),!1;const n=o.totals[e]?.grandTotal||1/0,s=Object.values(o.totals).map(p=>p.grandTotal);return n===Math.min(...s)}isPreferredGrandTotal(e){const o=this.vendorItemsTables[0];return o&&o.totals?!0===o.totals[e]?.preferred:(console.error("Vendor items table or totals not found"),!1)}isSmallestAmount(e,o){const n=this.vendorItemsTables[0].items.find(p=>p.item_id===e);if(!n)return console.error(`Item with ID ${e} not found`),!1;const a=n.vendors;if(!a[o])return console.error(`Vendor with ID ${o} not found in item ${e}`),!1;const s=parseFloat(a[o].amount),d=Object.values(a).map(p=>parseFloat(p.amount));return s===Math.min(...d)}getVendorKeys(){return Object.keys(this.vendorItemsTables[0].totals)}getVendorIds(e){return Object.keys(e.totals)}togglePreferredVendor(e,o){const n=Object.keys(e.vendors).find(s=>e.vendors[s].preferred);n&&n!==o&&(e.vendors[n].preferred=!1);const a=e.vendors[o];a.preferred=!a.preferred,this.updateVendorTotals()}updateVendorTotals(){const e=this.vendorItemsTables.flatMap(o=>o.items);Object.keys(this.vendorItemsTables[0].totals).forEach(o=>{const n=e.every(a=>a.vendors[o]?.preferred);this.vendorItemsTables[0].totals[o].preferred=n})}toggleVendorPreferred(e,o){const n=Object.keys(this.vendorItemsTables[0].totals),a=n[e],s=o.target.checked;this.vendorItemsTables.forEach(d=>{d.items.forEach(p=>{Object.keys(p.vendors).forEach(c=>{c!==a?p.vendors[c].preferred=!1:s||(p.vendors[c].preferred=!1)})})}),n.forEach(d=>{this.vendorItemsTables[0].totals[d].preferred=d===a&&s}),s&&this.vendorItemsTables.forEach(d=>{d.items.forEach(p=>{p.vendors[a].preferred=!0})}),this.updateVendorTotals()}filterData(e){const{items:o,vendors:n,totals:a}=e,s=Object.keys(a).filter(d=>a[d].preferred);if(s.length>0){const d=s[0],p={};return p[d]=a[d],{items:o.map(m=>{const _=m.vendors[d];return _?{...m,vendors:{[d]:_}}:m}),vendors:n,totals:p}}return{items:o.map(p=>{const c=Object.keys(p.vendors).filter(m=>p.vendors[m].preferred);if(c.length>0){const m=c.reduce((_,b)=>(_[b]=p.vendors[b],_),{});return{...p,vendors:m}}return{...p,vendors:{}}}),vendors:n,totals:a}}getTotalAmount(e){return console.log("here that is",e),e.reduce((o,n)=>o+(n.Total-n.SubTotalAmount),0)}calculateGrandTotal(e){const o=this.vendorTotal(e.items),n=this.getTotalAmount(e.items);return o.subTotal+o.freight+n}getLowestGrandTotal(){return Math.min(...this.details.vendorItems.map(e=>this.calculateGrandTotal(e)))}vendorTotal(e){console.log("check Item",e);let o=0,n=0,a=0,s=0,d=0,p=0;return e.forEach(c=>{o=c.SubTotalAmount+o,n=+c.Total+ +n,a=+c.Freight+ +a,s=n-o,d=c.Rate,p=c.RequiredQuantity}),{subTotal:o,gstAmount:s,total:n,freight:a,rate:d,qty:p}}getSiteList(){this.httpService.GET(f.S3,{}).subscribe(e=>{this.siteList=e.data})}getVendorList(){this.httpService.GET("/vendor",{}).subscribe(e=>{this.vendorList=e.data})}isVendorSelected(e){return this.details.vendorItems.filter(n=>n.category==e.categoryDetail._id&&n.subCategory==e.subCategoryDetail._id)}getVendorNameByCode(e){const o=this.vendorList.find(n=>n.code===e);return o?o.vendor_name:"Other"}detailsOfVendor(e,o,n){return this.vendorsList.find(s=>s._id==e.Vendor).vendor_name}getBrandList(){this.httpService.GET(f.Lk,{}).subscribe(e=>{this.brandList=e.data})}ngOnInit(){this.route.params.subscribe(e=>{e.id&&this.httpService.GET(`${f.bG}`,{_id:e.id}).subscribe({next:o=>{this.details=o.data.details,this.objectBackToFormGroup(),this.vendorsList=o.data.vendorsList,this.vendorsList.map(a=>(this.vendorAssociatedData[a._id]=a,a));let n=[];this.filteredItems=this.details?.items.filter(a=>{let s=a.categoryDetail._id+"$"+a.subCategoryDetail._id;return!n.includes(s)&&(n.push(s),!0)}),this.patchData(o.data.details)},error:o=>{this.router.navigate(["/rate-comparative"])}})})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(u.F0),t.Y36(y.s),t.Y36(C.uw),t.Y36(i.qu),t.Y36(u.gz),t.Y36(w.f),t.Y36(A.eN))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-rate-comparative-details"]],decls:112,vars:28,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","50px","margin-left","20px"],["src","./assets/images/RA.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],["mat-icon-button","",2,"margin-right","40px"],[2,"margin-top","40px"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],["src","./assets/images/ratedown.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/po.svg"],[3,"formGroup"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","10px","max-width","100%"],[1,"flex-div",2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],["placeholder","Enter title","formControlName","title","readonly","",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","3px","font-family","Poppins","height","50px"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Auto generate Request Date","readonly","",3,"matDatepicker"],["matSuffix","",3,"for"],["date",""],[1,"flex-div","custom-form-group"],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],[1,"star"],[1,"custom-form-control"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by","readonly","",3,"matDatepicker"],["requiredByStartDate",""],["matInput","","formControlName","handle_by"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Auto generate","formControlName","rate_approval_number","readonly","",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","10px","font-family","Poppins"],["id","site","placeholder","Select site","formControlName","site",2,"padding","10px","width","100","border","1px solid #ccc","border-radius","6px","cursor","pointer","margin-top","10px","font-family","Poppins"],[1,"flex-div",2,"display","flex","flex-direction","column","align-items","center"],[2,"color","#4272BF","margin-bottom","10px"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group"],[1,"example-radio-button",3,"value"],[4,"ngIf"],["style","margin: 20px; display: inline-block;",4,"ngFor","ngForOf"],[1,"text-area-section"],["name","","id","","cols","30","rows","5","formControlName","remarks"],[1,"button-list"],[1,"p-btns-button",3,"ngStyle","disabled"],[3,"value"],[1,"scroll-container"],[1,"scrollable-content"],[1,"table","table-bordered"],["rowspan","2",2,"text-align","center","width","300px","vertical-align","middle"],["rowspan","2",2,"text-align","center","width","250px","vertical-align","middle"],["rowspan","2",2,"text-align","center","vertical-align","middle"],[4,"ngFor","ngForOf"],["colspan","8",2,"border-color","white","border-right","0.5px solid"],["colspan","2",2,"text-align","right","border","0.5px solid"],[2,"border-color","white"],["colspan","3",2,"text-align","center","vertical-align","middle",3,"ngClass"],["type","checkbox","disabled","",3,"checked","change"],[2,"text-align","center","vertical-align","middle"],[2,"text-align","center","width","300px","vertical-align","middle"],[2,"text-align","center","width","250px","vertical-align","middle"],[2,"text-align","center","vertical-align","middle",3,"ngClass"],["type","checkbox","disabled","",2,"margin-top","10px","transform","scale(1.2)","width","15px","height","15px",3,"checked","change"],["colspan","3",2,"height","50px","border","0.5px solid"],["colspan","3",2,"height","40px","border","0.5px solid"],["colspan","3",2,"height","50px","border","0.5px solid",3,"ngClass"],[2,"margin","20px","display","inline-block"],["target","_blank","rel","noopener noreferrer",2,"border","1px solid","padding","10px 20px","background-color","#007BFF","color","white","text-decoration","none","border-radius","5px","font-size","15px","margin-right","10px",3,"href"]],template:function(e,o){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Rate approvals details"),t.qZA(),t._UZ(5,"span",4),t.TgZ(6,"button",5)(7,"mat-icon",6),t._uU(8,"notifications"),t.qZA()()(),t.TgZ(9,"div"),t._UZ(10,"hr",7),t.qZA(),t.TgZ(11,"div",8)(12,"div",9)(13,"div"),t._UZ(14,"img",10),t.qZA(),t.TgZ(15,"span",11),t._uU(16,"Purchase\xa0request"),t.qZA(),t.TgZ(17,"div"),t._UZ(18,"mat-divider",12),t.qZA()(),t.TgZ(19,"div",13)(20,"div"),t._UZ(21,"img",14),t.qZA(),t.TgZ(22,"span",11),t._uU(23,"Approvals"),t.qZA(),t.TgZ(24,"div"),t._UZ(25,"mat-divider",12),t.qZA()(),t.TgZ(26,"div",13)(27,"div"),t._UZ(28,"img",15),t.qZA(),t.TgZ(29,"span",16),t._uU(30,"Rate\xa0Comparative"),t.qZA(),t.TgZ(31,"div"),t._UZ(32,"mat-divider",12),t.qZA()(),t.TgZ(33,"div",13)(34,"div"),t._UZ(35,"img",14),t.qZA(),t.TgZ(36,"span",11),t._uU(37,"Rate\xa0Approvals"),t.qZA(),t.TgZ(38,"div"),t._UZ(39,"mat-divider",12),t.qZA()(),t.TgZ(40,"div",13)(41,"div"),t._UZ(42,"img",17),t.qZA(),t.TgZ(43,"span",11),t._uU(44,"Purchase\xa0orders"),t.qZA()()(),t.TgZ(45,"form",18)(46,"mat-card",19)(47,"div",20)(48,"div",21)(49,"label",22),t._uU(50,"Request title "),t.qZA(),t._UZ(51,"input",23),t.qZA(),t.TgZ(52,"div",21)(53,"label",22),t._uU(54,"Request date"),t.qZA(),t.TgZ(55,"mat-form-field",24),t._UZ(56,"input",25)(57,"mat-datepicker-toggle",26)(58,"mat-datepicker",null,27),t.qZA()(),t.TgZ(60,"div",28)(61,"label",29),t._uU(62," Required by "),t.TgZ(63,"span",30),t._uU(64,"*"),t.qZA()(),t.TgZ(65,"div",31)(66,"mat-form-field",24),t._UZ(67,"input",32)(68,"mat-datepicker-toggle",26)(69,"mat-datepicker",null,33),t.qZA()()(),t.TgZ(71,"div",28)(72,"label",29),t._uU(73," Handle by "),t.TgZ(74,"span",30),t._uU(75,"*"),t.qZA()(),t.TgZ(76,"div",31)(77,"mat-form-field",24)(78,"mat-select",34),t.YNc(79,mt,2,2,"mat-option",35),t.qZA()()()(),t.TgZ(80,"div",21)(81,"label",22),t._uU(82,"Request no "),t.qZA(),t._UZ(83,"input",36),t.qZA(),t.TgZ(84,"div",21)(85,"label",22),t._uU(86,"Site name "),t.TgZ(87,"span",30),t._uU(88,"*"),t.qZA()(),t.TgZ(89,"mat-select",37),t.YNc(90,gt,2,2,"mat-option",35),t.qZA()(),t.TgZ(91,"div",38)(92,"label",39),t._uU(93,"Local Purchase "),t.TgZ(94,"span",30),t._uU(95,"*"),t.qZA()(),t.TgZ(96,"mat-radio-group",40)(97,"mat-radio-button",41),t._uU(98," Yes "),t.qZA(),t.TgZ(99,"mat-radio-button",41),t._uU(100," No "),t.qZA()()()()(),t.YNc(101,It,70,9,"div",42),t.YNc(102,kt,3,2,"div",43),t.ALo(103,"keyvalue"),t.TgZ(104,"div",44)(105,"label",22),t._uU(106,"Remarks "),t.qZA(),t._UZ(107,"textarea",45),t.qZA(),t.TgZ(108,"div",46)(109,"button",47)(110,"span"),t._uU(111),t.qZA()()()()),2&e){const n=t.MAs(59),a=t.MAs(70);t.xp6(12),t.Q6J("routerLink",t.DdM(21,Ut)),t.xp6(7),t.Q6J("routerLink",t.DdM(22,Ot)),t.xp6(7),t.Q6J("routerLink",t.DdM(23,Pt)),t.xp6(7),t.Q6J("routerLink",t.DdM(24,Mt)),t.xp6(7),t.Q6J("routerLink",t.DdM(25,Nt)),t.xp6(5),t.Q6J("formGroup",o.purchaseRequestForm),t.xp6(11),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(10),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(11),t.Q6J("ngForOf",o.users),t.xp6(11),t.Q6J("ngForOf",o.siteList),t.xp6(7),t.Q6J("value","yes"),t.xp6(2),t.Q6J("value","no"),t.xp6(2),t.Q6J("ngIf",o.vendorItemsTables&&o.vendorItemsTables.length>0),t.xp6(1),t.Q6J("ngForOf",t.lcZ(103,19,o.files)),t.xp6(7),t.Q6J("ngStyle",t.VKq(26,Rt,"approved"==o.details.status?"#54AA52":"rejected"==o.details.status?"#C7323B":"#233A61"))("disabled",o.load),t.xp6(2),t.Oqu("rejected"==o.details.status?"Rejected":"Approved")}},dependencies:[h.mk,h.sg,h.O5,h.PC,u.rH,u.Od,q.ey,x.KE,x.R9,Q.lW,D.a8,v.Mq,v.hl,v.nW,I.d,J.Hw,k.Nt,Z.VQ,Z.U0,U.gD,O.Ye,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,h.Nd],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.lowest-amount[_ngcontent-%COMP%]{color:brown;font-weight:700}.selected-td[_ngcontent-%COMP%]{background-color:#006400;color:#fff}.preferred-grand-total[_ngcontent-%COMP%]{color:#006400;font-weight:700;font-size:18px}.preferred-vendor[_ngcontent-%COMP%]{background-color:#006400;font-weight:700}.scroll-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto;white-space:nowrap}.scrollable-content[_ngcontent-%COMP%]{display:inline-block;min-width:min-content}.lowest-rate[_ngcontent-%COMP%], .lowest-grand-total[_ngcontent-%COMP%]{color:brown;font-size:18px;font-weight:700}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:100%;height:auto;font-family:Poppins;box-shadow:none;border:1px solid #ccc;border-radius:4px}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;width:100%;font-size:14px;margin-bottom:20px;margin-right:20px;margin-top:8px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}form[_ngcontent-%COMP%]{padding:10px 20px}.scroll-bar1[_ngcontent-%COMP%]{margin-top:50px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background-color:"Transparent"}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 0 20px;float:right;gap:10px}.text-area-section[_ngcontent-%COMP%]{width:100%;height:auto;margin:30px 0 0}.text-area-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:100%}.flex-div[_ngcontent-%COMP%]{width:31%}.mat-form-field[_ngcontent-%COMP%]{display:block}.pending[_ngcontent-%COMP%]{padding:8px;width:120px;background-color:#ccc;color:#333;font-size:14px;font-family:Poppins;height:50px;border:none}.p-btns[_ngcontent-%COMP%]{background:#233a61;padding:5px 10px;border-radius:4px;font-size:12px;cursor:pointer}.p-btns[_ngcontent-%COMP%]:hover{opacity:.7}.p-btns-button[_ngcontent-%COMP%]{background:#233a61;padding:7px 40px;border-radius:4px;font-size:12px;cursor:pointer;color:#fff;opacity:.7}.vendor-wapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:40px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-name-cl[_ngcontent-%COMP%]{padding:6px 15px;background:#233a61;color:#fff}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:rgba(7,59,76,.0509803922);padding:6px 15px;margin-bottom:10px;gap:10px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80px;border:1px solid #ccc;border-radius:2px;padding:5px;outline:none}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-label[_ngcontent-%COMP%]{min-width:144px}input[readonly=true][_ngcontent-%COMP%], input[readonly][_ngcontent-%COMP%], .mat-select-disabled[_ngcontent-%COMP%]{opacity:.6}.vendor-detail[_ngcontent-%COMP%]{display:none}.vendor-detail.cl-show[_ngcontent-%COMP%]{display:table-row}']}),r})();function Ft(r,l){if(1&r&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&r){const e=l.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function Qt(r,l){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function Jt(r,l){if(1&r&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&r){const e=l.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.site_name," ")}}function St(r,l){1&r&&(t.TgZ(0,"div"),t._uU(1," No vendor available "),t.qZA())}function $t(r,l){if(1&r&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&r){const e=l.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",null==e?null:e.vendor_name," ")}}function Vt(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"div",56)(1,"mat-form-field",57)(2,"mat-label"),t._uU(3,"Select Vendors"),t.qZA(),t.TgZ(4,"mat-select",58),t.NdJ("selectionChange",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.handleVendorChange())}),t.YNc(5,$t,2,2,"mat-option",33),t.qZA()()()}if(2&r){const e=t.oxw().$implicit,o=t.oxw();t.xp6(5),t.Q6J("ngForOf",o.isVendorSelected(e))}}function Dt(r,l){if(1&r&&(t.TgZ(0,"tr",53)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.YNc(6,St,2,0,"div",50),t.YNc(7,Vt,6,1,"ng-template",54,55,t.W1O),t.qZA()()),2&r){const e=l.$implicit,o=l.index,n=t.MAs(8),a=t.oxw();t.xp6(2),t.Oqu(e.categoryDetail.name),t.xp6(2),t.Oqu(e.subCategoryDetail.subcategory_name),t.xp6(2),t.Q6J("ngIf",0===a.isVendorSelected(e).length)("ngIfElse",n),t.xp6(1),t.Q6J("formGroupName",o)}}function Bt(r,l){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"th",75)(2,"label")(3,"input",76),t.NdJ("change",function(n){const s=t.CHM(e).index,d=t.oxw(2);return t.KtG(d.toggleVendorPreferred(s,n))}),t.qZA(),t._uU(4),t.qZA()(),t.BQk()}if(2&r){const e=l.$implicit,o=l.index,n=t.oxw(2);t.xp6(3),t.Q6J("checked",n.vendorItemsTables[0].totals[n.getVendorKeys()[o]].preferred),t.xp6(1),t.hij(" ",e," ")}}function Yt(r,l){1&r&&(t.ynx(0),t.TgZ(1,"th",77),t._uU(2," Available Qty "),t.qZA(),t.TgZ(3,"th",77),t._uU(4," Rate (\u20b9) "),t.qZA(),t.TgZ(5,"th",77),t._uU(6," Sub Total (\u20b9) "),t.qZA(),t.BQk())}const jt=function(r){return{"lowest-amount":r}};function Et(r,l){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"td")(2,"input",81),t.NdJ("input",function(){const a=t.CHM(e).$implicit,s=t.oxw().$implicit,d=t.oxw().index,p=t.oxw(2);return t.KtG(p.updateQty(s,a,d))}),t.qZA()(),t.TgZ(3,"td")(4,"input",81),t.NdJ("input",function(){const a=t.CHM(e).$implicit,s=t.oxw().$implicit,d=t.oxw().index,p=t.oxw(2);return t.KtG(p.updateAmount(s,a,d))}),t.qZA()(),t.TgZ(5,"td",83),t._uU(6),t.qZA(),t.BQk()}if(2&r){const e=l.$implicit,o=t.oxw().$implicit,n=t.oxw().index,a=t.oxw(2);t.xp6(2),t.Q6J("formControl",a.getFormControl(n,o.item_id,e,"requiredQty")),t.uIk("data-control-name","table_"+n+"_item_"+o.item_id+"_vendor_"+e+"_requiredQty"),t.xp6(2),t.Q6J("formControl",a.getFormControl(n,o.item_id,e,"rate")),t.uIk("data-control-name","table_"+n+"_item_"+o.item_id+"_vendor_"+e+"_rate"),t.xp6(1),t.Q6J("ngClass",t.VKq(6,jt,a.isSaved&&a.isLowestAmount(n,o.item_id,e))),t.xp6(1),t.hij(" ",a.getFormControl(n,o.item_id,e,"amount").value||"0"," ")}}function Gt(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td",78),t._uU(2),t.qZA(),t.TgZ(3,"td",78),t._uU(4),t.qZA(),t.TgZ(5,"td",78),t._uU(6),t.qZA(),t.TgZ(7,"td",79),t._uU(8),t.qZA(),t.TgZ(9,"td",79),t._uU(10),t.qZA(),t.TgZ(11,"td",80),t._uU(12),t.qZA(),t.TgZ(13,"td",80),t._uU(14),t.qZA(),t.TgZ(15,"td",80),t._uU(16),t.qZA(),t.TgZ(17,"td")(18,"input",81),t.NdJ("input",function(){const a=t.CHM(e).$implicit,s=t.oxw().index,d=t.oxw(2);return t.KtG(d.updatePislBudget(a,s))}),t.qZA()(),t.TgZ(19,"td",80),t._uU(20),t.qZA(),t.YNc(21,Et,7,8,"ng-container",65),t.TgZ(22,"td")(23,"input",82),t.NdJ("input",function(){const a=t.CHM(e).$implicit,s=t.oxw().index,d=t.oxw(2);return t.KtG(d.updateStatus(a,s))}),t.qZA()()()}if(2&r){const e=l.$implicit,o=t.oxw(),n=o.index,a=o.$implicit,s=t.oxw(2);t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.specification," "),t.xp6(2),t.hij(" ",e.hsnCode," "),t.xp6(2),t.hij(" ",e.category," "),t.xp6(2),t.hij(" ",e.subCategory," "),t.xp6(2),t.hij(" ",e.uom," "),t.xp6(2),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",e.gst," "),t.xp6(2),t.Q6J("formControl",s.getFormControl(n,e.item_id,"","pislBudget")),t.uIk("data-control-name","table_"+n+"_item_"+e.item_id+"_pislBudget"),t.xp6(2),t.hij(" ",e.pislBudgetSubTotal," "),t.xp6(1),t.Q6J("ngForOf",s.getVendorIds(a)),t.xp6(2),t.Q6J("formControl",s.getFormControl(n,e.item_id,"","remarks")),t.uIk("data-control-name","table_"+n+"_item_"+e.item_id+"_remarks")}}function zt(r,l){if(1&r&&(t.ynx(0),t.YNc(1,Gt,24,14,"tr",65),t.BQk()),2&r){const e=l.$implicit;t.xp6(1),t.Q6J("ngForOf",e.items)}}function Kt(r,l){if(1&r&&(t.ynx(0),t.TgZ(1,"td",84),t._uU(2),t.qZA(),t.BQk()),2&r){const e=l.$implicit,o=t.oxw(2);t.xp6(2),t.hij(" ",(null==o.vendorItemsTables[0].totals[e]?null:o.vendorItemsTables[0].totals[e].totalAmount)||"0"," ")}}function Ht(r,l){if(1&r&&(t.ynx(0),t.TgZ(1,"td",84),t._uU(2),t.qZA(),t.BQk()),2&r){const e=l.$implicit,o=t.oxw(2);t.xp6(2),t.hij(" ",(null==o.vendorItemsTables[0].totals[e]?null:o.vendorItemsTables[0].totals[e].gstAmount)||"0"," ")}}function Wt(r,l){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"td",85)(2,"input",81),t.NdJ("input",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateTotals(0))}),t.qZA()(),t.BQk()}if(2&r){const e=l.$implicit,o=t.oxw(2);t.xp6(2),t.Q6J("formControl",o.getFormControl(0,"",e,"freight")),t.uIk("data-control-name","table_0_vendor_"+e+"_freight")}}function Xt(r,l){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"td",85)(2,"input",81),t.NdJ("input",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateTotals(0))}),t.qZA()(),t.BQk()}if(2&r){const e=l.$implicit,o=t.oxw(2);t.xp6(2),t.Q6J("formControl",o.getFormControl(0,"",e,"freightGst")),t.uIk("data-control-name","table_0_vendor_"+e+"_freightGst")}}const te=function(r){return{"lowest-grand-total":r}};function ee(r,l){if(1&r&&(t.ynx(0),t.TgZ(1,"td",86),t._uU(2),t.qZA(),t.BQk()),2&r){const e=l.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(2,te,o.isSaved&&o.isLowestGrandTotal(e))),t.xp6(1),t.hij(" ",(null==o.vendorItemsTables[0].totals[e]?null:o.vendorItemsTables[0].totals[e].grandTotal)||"0"," ")}}function oe(r,l){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"td",85)(2,"input",82),t.NdJ("input",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateTotals(0))}),t.qZA()(),t.BQk()}if(2&r){const e=l.$implicit,o=t.oxw(2);t.xp6(2),t.Q6J("formControl",o.getFormControl(0,"",e,"vendorRemark")),t.uIk("data-control-name","table_0_vendor_"+e+"_vendorRemark")}}function ne(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"li",88),t._uU(1),t.TgZ(2,"button",89),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(3);return t.KtG(s.removeFile(a))}),t._uU(3," x "),t.qZA()()}if(2&r){const e=l.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function re(r,l){if(1&r&&(t.TgZ(0,"div")(1,"ul"),t.YNc(2,ne,4,1,"li",87),t.qZA()()),2&r){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.files)}}function ie(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"div",59)(2,"div",60)(3,"table",61)(4,"thead")(5,"tr")(6,"th",62),t._uU(7," Item "),t.qZA(),t.TgZ(8,"th",62),t._uU(9," Specification "),t.qZA(),t.TgZ(10,"th",62),t._uU(11," HSN Code "),t.qZA(),t.TgZ(12,"th",63),t._uU(13," Category "),t.qZA(),t.TgZ(14,"th",63),t._uU(15," Sub-Category "),t.qZA(),t.TgZ(16,"th",64),t._uU(17," UOM "),t.qZA(),t.TgZ(18,"th",64),t._uU(19," Quantity "),t.qZA(),t.TgZ(20,"th",64),t._uU(21," GST % "),t.qZA(),t.TgZ(22,"th",64),t._uU(23," Budget (\u20b9) "),t.qZA(),t.TgZ(24,"th",64),t._uU(25," Budget SubTotal (\u20b9) "),t.qZA(),t.YNc(26,Bt,5,2,"ng-container",65),t.TgZ(27,"th",64),t._uU(28," Add Remarks "),t.qZA()(),t.TgZ(29,"tr"),t.YNc(30,Yt,7,0,"ng-container",65),t.qZA()(),t.TgZ(31,"tbody"),t.YNc(32,zt,2,1,"ng-container",65),t.qZA(),t.TgZ(33,"tfoot")(34,"tr"),t._UZ(35,"td",66),t.TgZ(36,"td",67),t._uU(37," Total Amount (\u20b9) "),t.qZA(),t.YNc(38,Kt,3,1,"ng-container",65),t._UZ(39,"td",68),t.qZA(),t.TgZ(40,"tr"),t._UZ(41,"td",66),t.TgZ(42,"td",67),t._uU(43," GST Amount (\u20b9) "),t.qZA(),t.YNc(44,Ht,3,1,"ng-container",65),t._UZ(45,"td",68),t.qZA(),t.TgZ(46,"tr"),t._UZ(47,"td",66),t.TgZ(48,"td",67),t._uU(49," Freight (\u20b9) "),t.qZA(),t.YNc(50,Wt,3,2,"ng-container",65),t._UZ(51,"td",68),t.qZA(),t.TgZ(52,"tr"),t._UZ(53,"td",66),t.TgZ(54,"td",67),t._uU(55," Freight GST (%) "),t.qZA(),t.YNc(56,Xt,3,2,"ng-container",65),t._UZ(57,"td",68),t.qZA(),t.TgZ(58,"tr"),t._UZ(59,"td",66),t.TgZ(60,"td",67),t._uU(61," Grand Total (\u20b9) "),t.qZA(),t.YNc(62,ee,3,4,"ng-container",65),t._UZ(63,"td",68),t.qZA(),t.TgZ(64,"tr"),t._UZ(65,"td",66),t.TgZ(66,"td",67),t._uU(67," Remarks "),t.qZA(),t.YNc(68,oe,3,2,"ng-container",65),t._UZ(69,"td",68),t.qZA(),t._UZ(70,"tr"),t.qZA()()()(),t.TgZ(71,"div",69)(72,"div",70)(73,"h4",71),t._uU(74," Add Vendor Rate Attachments "),t.qZA(),t.TgZ(75,"input",72),t.NdJ("change",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.onFilesSelected(n))}),t.qZA(),t.YNc(76,re,3,1,"div",34),t.qZA(),t.TgZ(77,"div",73)(78,"button",74),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.saveAndHighlight())}),t._uU(79," Save Rates "),t.qZA()()()()}if(2&r){const e=t.oxw();t.xp6(26),t.Q6J("ngForOf",e.vendorItemsTables[0].vendors),t.xp6(4),t.Q6J("ngForOf",e.vendorItemsTables[0].vendors),t.xp6(2),t.Q6J("ngForOf",e.vendorItemsTables),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(8),t.Q6J("ngIf",e.files),t.xp6(2),t.Q6J("disabled",e.isSaved)}}function ae(r,l){1&r&&(t.TgZ(0,"span"),t._uU(1,"Submit"),t.qZA())}function se(r,l){1&r&&(t.TgZ(0,"span"),t._uU(1,"Please wait..."),t.qZA())}function le(r,l){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",74),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.updateRequest())}),t.YNc(2,ae,2,0,"span",34),t.YNc(3,se,2,0,"span",34),t.qZA(),t.BQk()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.load),t.xp6(1),t.Q6J("ngIf",!e.load),t.xp6(1),t.Q6J("ngIf",e.load)}}function de(r,l){1&r&&(t.TgZ(0,"span"),t._uU(1,"No Permission to Submit"),t.qZA())}function pe(r,l){if(1&r&&(t.TgZ(0,"button",90),t.YNc(1,de,2,0,"span",34),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.load)}}const ce=function(){return["/procurement"]},me=function(){return["/procurement/prlist"]},ge=function(){return["/rate-comparative"]},ue=function(){return["/rate-approval"]},_e=function(){return["/purchase-order"]};let fe=(()=>{class r{constructor(e,o,n,a,s,d,p,c,m){this.router=e,this.httpService=o,this.snack=n,this.formBuilder=a,this.route=s,this.dialog=d,this.http=p,this.userService=c,this.auth=m,this.load=!1,this.flag=!1,this.finalVendorArray=[],this.VendorItems=[],this.vendorItemsTables=[],this.isButtonDisabled=!0,this.isSelectDisabled=!1,this.files=[],this.isSaved=!1,this.ItemwiseVendorRate=new Map,this.rateComparativeForm=new i.cw({title:new i.NI("",i.kI.required),date:new i.NI("",i.kI.required),expected_delivery_date:new i.NI("",i.kI.required),handle_by:new i.NI({value:"",disabled:!0},i.kI.required),rate_approval_number:new i.NI(""),site:new i.NI({value:"",disabled:!0},i.kI.required),local_purchase:new i.NI({value:"",disabled:!0},i.kI.required),remarks:new i.NI("",[]),_id:new i.NI}),this.details={},this.vendorsList=[],this.vendorAssociatedData=[],this.filteredItems=[],this.vendorForm=this.formBuilder.group({vendor:this.formBuilder.array([])}),this.getBrandList(),this.vendorItemsForm=this.formBuilder.group({}),this.getList(),this.userService.getUserss().subscribe(_=>{this.users=_})}getList(){const e=this.http.get(`${R.N.api_path}${f.S3}`);this.httpService.multipleRequests([e],{}).subscribe(o=>{o&&(this.siteList=o[0].data)})}patchData(e){let o=JSON.parse(localStorage.getItem("loginData"));this.rateComparativeForm.patchValue({title:e.title,date:e.date,expected_delivery_date:e.expected_delivery_date,rate_approval_number:e.rate_approval_number,handle_by:o.user._id,site:e.site,local_purchase:e.local_purchase})}createItemArrayForm(){return new i.cw({item_id:new i.NI("",i.kI.required),qty:new i.NI("",i.kI.required),specification:new i.NI("",i.kI.required),hsnCode:new i.NI("",i.kI.required),category:new i.NI(""),subCategory:new i.NI(""),attachment:new i.NI(""),remark:new i.NI("",i.kI.required),uom:new i.NI("",i.kI.required)})}createItem(e){if(e)return new i.cw({item_id:new i.NI(e.item_id,i.kI.required),specification:new i.NI(e.specification,i.kI.required),hsnCode:new i.NI(e.hsnCode,i.kI.required),qty:new i.NI(e.qty,i.kI.required),category:new i.NI(e.categoryDetail.name),subCategory:new i.NI(e.subCategoryDetail.subcategory_name),attachment:new i.NI(e.attachment),remark:new i.NI(e.remark,i.kI.required),uom:new i.NI(e.uomDetail._id,i.kI.required)})}getSiteList(){this.httpService.GET(f.S3,{}).subscribe(e=>{this.siteList=e})}convertTotalsToVendorsTotal(){return Object.keys(this.vendorItemsTables[0].totals).map(o=>{const n=this.vendorItemsTables[0].totals[o];return{vendor_id:o,subtotal:n.totalAmount,total_tax:n.gstAmount,freight_charges:n.freight,freight_tax:n.freightGst,total_amount:n.grandTotal,preferred:n.preferred,vendorRemark:n.vendorRemark}})}updateRequest(){if(!this.rateComparativeForm.valid)return;if(this.VendorItems.some(n=>""===n))return void this.snack.notify("Some items rates are pending",2);let e=JSON.parse(localStorage.getItem("loginData"))?.user;if(!e)return void this.snack.notify("User not logged in",2);let o=this.rateComparativeForm.value;if(o._id=this.details._id,o.purchase_request_number=this.details.purchase_request_number,o.items=this.details.items,o.stage="rate_approval",o.handle_by=e._id,o.vendorItems=this.vendorItemsTables[0].items,o.vendorRatesVendorWise=this.vendorItemsTables,o.vendors_total=this.convertTotalsToVendorsTotal(),o.files={},console.log("there, checking payload",o),this.files.length>0){const n=this.convertToFormData(this.files);this.load=!0,this.httpService.POST(f.uv,n).subscribe({next:a=>{console.log("check response",a),o.files=a.data.filenames,console.log("check Payload here",o),this.httpService.PUT(f.lu,o).subscribe({next:s=>{this.snack.notify("Detail has been updated",1),this.router.navigate(["/rate-comparative"]),this.load=!1},error:s=>{this.handleError(s)}})},error:a=>{this.load=!1,this.handleError(a)}})}else this.httpService.PUT(f.lu,o).subscribe({next:n=>{this.snack.notify("Detail has been updated",1),this.router.navigate(["/rate-comparative"]),this.load=!1},error:n=>{this.handleError(n)}})}handleError(e){let o="<ul>";if(e.errors&&!(0,N.isEmpty)(e.errors))for(let n in e.errors)o+=`<li>${e.errors[n][0]}</li>`;else o+=`<li>${e.message}</li>`;o+="</ul>",this.snack.notifyHtml(o,2)}isVendorSelected(e){return this.vendorsList.filter(n=>n.category.includes(e.categoryDetail._id)&&n.SubCategory.includes(e.subCategoryDetail._id))}get vendorArray(){return this.vendorForm.get("vendor")}handleVendorChange(){this.flag=!1,this.isButtonDisabled=!1}getBrandList(){this.httpService.GET(f.Lk,{}).subscribe(e=>{this.brandList=e.data})}save(){let e=0;this.flag=!0,this.finalVendorArray.length=0,this.VendorItems.length=0,this.vendorItemsTables.length=0;for(let o of this.vendorArray.controls){const n=o.get("Item_category").value._id,a=o.get("Item_subCategory").value._id;let s={items:[],vendors:[],totals:{}};for(let d of o.get("selectedVendors").value){console.log("checking.",o.get("selectedVendors").value),this.finalVendorArray.push([d,e]),s.vendors.push(this.detailsOfVendor(d)),s.totals[d]={totalAmount:0,gstAmount:0,freight:0,freightGst:0,grandTotal:0,vendorRemark:"",preferred:!1};const p=new i.cw({Vendor:new i.NI(d,i.kI.required),category:new i.NI(n,i.kI.required),subCategory:new i.NI(a,i.kI.required),items:this.formBuilder.array([])}),c=this.details.items;for(let m of c){const _=this.formBuilder.group({item:new i.NI(m),RequiredQuantity:new i.NI(m.qty,i.kI.required),Rate:new i.NI("",[i.kI.required,i.kI.pattern("^[-+]?[0-9]*\\.?[0-9]+$")]),SubTotalAmount:new i.NI("",i.kI.required),Freight:new i.NI(0,i.kI.required),Total:new i.NI("",i.kI.required)});p.get("items").push(_),s.items.find(P=>P.item_id===m._id)||s.items.push({item_id:m._id,name:m.item_name,specification:m.specification,hsnCode:m.hsnCode,category:m.categoryDetail.name,subCategory:m.subCategoryDetail.subcategory_name,uom:m.uomDetail.uom_name,quantity:m.qty,gst:m.tax.amount,pislBudget:0,pislBudgetSubTotal:0,remarks:"",vendors:{}});const T=s.items.find(P=>P.item_id===m._id);T&&(T.vendors[d]={requiredQty:T.quantity,rate:"",amount:""})}this.VendorItems.push(p),e++}this.vendorItemsTables.push(s)}this.createFormControls()}convertToFormData(e){const o=new FormData;return e.forEach((a,s)=>{o.append(`files[${s}]`,a,a.name)}),o}createFormControls(){this.vendorItemsTables.forEach((e,o)=>{e.items.forEach(n=>{Object.keys(n.vendors).forEach(d=>{const c=`table_${o}_item_${n.item_id}_vendor_${d}_requiredQty`,m=`table_${o}_item_${n.item_id}_vendor_${d}_amount`;this.vendorItemsForm.addControl(`table_${o}_item_${n.item_id}_vendor_${d}_rate`,new i.NI("",i.kI.required)),this.vendorItemsForm.addControl(c,new i.NI(n.quantity,i.kI.required)),this.vendorItemsForm.addControl(m,new i.NI("",i.kI.required))});const s=`table_${o}_item_${n.item_id}_pislBudget`;this.vendorItemsForm.addControl(`table_${o}_item_${n.item_id}_remarks`,new i.NI("")),this.vendorItemsForm.addControl(s,new i.NI("",i.kI.required))}),Object.keys(e.totals).forEach(n=>{const s=`table_${o}_vendor_${n}_freightGst`,d=`table_${o}_vendor_${n}_vendorRemark`;this.vendorItemsForm.addControl(`table_${o}_vendor_${n}_freight`,new i.NI(0,i.kI.required)),this.vendorItemsForm.addControl(s,new i.NI(0,i.kI.required)),this.vendorItemsForm.addControl(d,new i.NI(""))})}),this.updateTotals(0),console.log(this.vendorItemsForm)}getFormControl(e,o,n,a){let s;return s="rate"===a||"amount"===a||"requiredQty"===a?`table_${e}_item_${o}_vendor_${n}_${a}`:"remarks"===a||"pislBudget"===a?`table_${e}_item_${o}_${a}`:`table_${e}_vendor_${n}_${a}`,this.vendorItemsForm.get(s)||(console.error(`Control not found: ${s}`),new i.NI(""))}updatePislBudget(e,o){const n=this.getFormControl(o,e.item_id,"","pislBudget"),s=this.vendorItemsTables[o].items.find(d=>d.item_id===e.item_id);if(s){s.pislBudget=parseFloat(n.value)||0;const d=s.pislBudget*s.quantity;console.log(d),s.pislBudgetSubTotal=parseFloat(d.toFixed(2))}}updateStatus(e,o){const n=this.getFormControl(o,e.item_id,"","remarks"),s=this.vendorItemsTables[o].items.find(d=>d.item_id===e.item_id);s&&(s.remark=n.value)}updateQty(e,o,n){const a=this.getFormControl(n,e.item_id,o,"requiredQty"),s=parseFloat(a.value)||0,p=this.vendorItemsTables[n].items.find(c=>c.item_id===e.item_id);p&&(p.vendors[o].requiredQty=s),console.log("Checking for quanity",this.vendorItemsTables[0].items)}updateAmount(e,o,n){const a=this.getFormControl(n,e.item_id,o,"rate"),s=this.getFormControl(n,e.item_id,o,"amount");if(a&&s){const p=(parseFloat(a.value)||0)*e.quantity;s.setValue(p.toFixed(2),{emitEvent:!1});const m=this.vendorItemsTables[n].items.find(_=>_.item_id===e.item_id);m&&(m.vendors[o].rate=a.value,m.vendors[o].amount=p.toFixed(2)),console.log(`Table: ${n}, Item: ${e.item_id}, Vendor: ${o}, Rate: ${a.value}, Amount: ${p.toFixed(2)}`),this.updateTotals(n)}}updateTotals(e){const o=this.vendorItemsTables[e];Object.keys(o.totals).forEach(n=>{let a=0,s=0;o.items.forEach(m=>{const _=this.getFormControl(e,m.item_id,n,"amount"),b=parseFloat(_.value)||0;a+=b,s+=b*(m.gst/100)}),o.totals[n].totalAmount=a,o.totals[n].gstAmount=s;const d=this.getFormControl(e,"",n,"freight"),p=this.getFormControl(e,"",n,"freightGst"),c=this.getFormControl(e,"",n,"vendorRemark");o.totals[n].freight=parseFloat(d.value)||0,o.totals[n].freightGst=parseFloat(p.value)||0,o.totals[n].vendorRemark=c.value,o.totals[n].grandTotal=o.totals[n].totalAmount+o.totals[n].gstAmount+o.totals[n].freight+o.totals[n].freight*(o.totals[n].freightGst/100)})}saveAndHighlight(){this.isSaved=!0}isLowestAmount(e,o,n){const a=parseFloat(this.getFormControl(e,o,n,"amount").value)||1/0,s=this.getVendorIds(this.vendorItemsTables[e]).map(d=>parseFloat(this.getFormControl(e,o,d,"amount").value)||1/0);return a===Math.min(...s)}isLowestGrandTotal(e){const o=this.vendorItemsTables[0];if(!o||!o.totals)return console.error("Vendor items table or totals not found"),!1;const n=o.totals[e]?.grandTotal||1/0,s=Object.values(o.totals).map(p=>p.grandTotal);return n===Math.min(...s)}toggleVendorPreferred(e,o){const a=Object.keys(this.vendorItemsTables[0].totals)[e];this.vendorItemsTables[0].totals[a].preferred=o.target.checked}getVendorKeys(){return Object.keys(this.vendorItemsTables[0].totals)}getVendorIds(e){return Object.keys(e.totals)}detailsOfVendor(e){return this.vendorsList.find(n=>n._id==e).vendor_name}onFilesSelected(e){const o=e.target.files;if(console.log("file",o),o.length>0){const n=Array.from(o);this.files=n,console.log(this.files)}}removeFile(e){const o=this.files.filter(n=>n.name!==e.name);console.log("there",o),this.files=o}filesExist(e){return this.items.at(e).get("files").controls.map(o=>o.value)}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.userService.getUserss().subscribe(e=>{e.find(n=>n._id===this.permissions.user._id)?(this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:s=>{this.viewPermission=s.dashboard_permissions[0].ParentChildchecklist[20].childList[0].isSelected,this.addPermission=s.dashboard_permissions[0].ParentChildchecklist[20].childList[1].isSelected,this.editPermission=s.dashboard_permissions[0].ParentChildchecklist[20].childList[2].isSelected},error:s=>{console.log(s)}}),this.vendorItemsForm=new i.cw({}),this.route.params.subscribe(s=>{s.id&&this.httpService.GET(`${f.bG}`,{_id:s.id}).subscribe({next:d=>{this.details=d.data.details,console.log("checking Api",this.details),this.vendorsList=d.data.vendorsList,this.vendorsList.map(c=>(this.vendorAssociatedData[c._id]=c,c));let p=[];this.filteredItems=this.details?.items.filter(c=>{let m=c.categoryDetail._id+"$"+c.subCategoryDetail._id;return!p.includes(m)&&(p.push(m),!0)}),this.filteredItems.forEach(c=>{let m=this.formBuilder.group({Item_category:c.categoryDetail,Item_subCategory:c.subCategoryDetail,selectedVendors:new i.NI([])});this.vendorForm.get("vendor").push(m)}),console.log(this.vendorForm),this.patchData(d.data.details)},error:d=>{}})})):(this.snack.notify("Invalid Credentials - User Details not Valid",1),this.auth.removeUser(),this.userService.updateLogin("logout"),this.router.navigate(["/login"]))})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(u.F0),t.Y36(y.s),t.Y36(F.o),t.Y36(i.qu),t.Y36(u.gz),t.Y36(C.uw),t.Y36(A.eN),t.Y36(w.f),t.Y36(L.e))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-rate-comparative-update"]],decls:121,vars:25,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","50px","margin-left","20px"],["src","./assets/images/RA.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1e293b","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #c5c5c5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989d","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],["src","./assets/images/ratedown.svg"],[2,"color","#233a61","margin-left","5px","font-size","14px"],["src","./assets/images/po.svg"],[3,"formGroup"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","10px","max-width","100%"],[1,"flex-div",2,"display","flex","flex-direction","column"],[2,"color","#4272bf","font-size","14px"],["placeholder","Enter title","formControlName","title","readonly","",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","3px","font-family","Poppins","height","50px"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Auto generate Request Date","readonly","",3,"matDatepicker"],["matSuffix","",3,"for"],["date",""],[1,"flex-div","custom-form-group"],["for","",1,"custom-label",2,"color","#4272bf","font-size","14px"],[1,"star"],[1,"custom-form-control"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by","readonly","",3,"matDatepicker"],["requiredByStartDate",""],["matInput","","formControlName","handle_by"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"custom-form-control","flex-div"],["id","site","placeholder","Select site","matInput","","formControlName","site"],[1,"flex-div",2,"display","flex","flex-direction","column","margin-left","10px"],[2,"color","#4272bf","margin-bottom","10px"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group"],[1,"example-radio-button",2,"margin-right","10px",3,"value"],[1,"example-radio-button",3,"value"],[1,"topcard",2,"margin-top","40px"],[1,"scroll-bar1"],["formArrayName","vendor",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center"],[1,"p-btns-button",3,"click"],[1,"text-area-section"],["name","","id","","cols","30","rows","5","formControlName","remarks"],[1,"button-list"],[4,"ngIf","ngIfElse"],["noAddPermission",""],[3,"value"],["formArrayName","vendor"],[3,"formGroupName"],["Option",""],[1,"col-md-3"],["appearance","outline",2,"width","max-content"],["matInput","","multiple","","formControlName","selectedVendors",3,"selectionChange"],[1,"scroll-container"],[1,"scrollable-content"],[1,"table","table-bordered"],["rowspan","2",2,"text-align","center","width","300px","vertical-align","middle"],["rowspan","2",2,"text-align","center","width","250px","vertical-align","middle"],["rowspan","2",2,"text-align","center","vertical-align","middle"],[4,"ngFor","ngForOf"],["colspan","8",2,"border-color","white","border-right","0.5px solid"],["colspan","2",2,"text-align","right","border","0.5px solid"],[2,"border-color","white"],[1,"upload-save-container"],[1,"upload-file-section"],[2,"margin-top","20px","font-weight","bold"],["type","file","multiple","",3,"change"],[1,"save-button-section"],[1,"p-btns-button",3,"disabled","click"],["colspan","3",2,"text-align","center","vertical-align","middle","width","250px"],["type","checkbox",3,"checked","change"],[2,"text-align","center","width","50px","vertical-align","middle"],[2,"text-align","center","width","300px","vertical-align","middle"],[2,"text-align","center","width","250px","vertical-align","middle"],[2,"text-align","center","vertical-align","middle"],["type","number",1,"inputBoxes",3,"formControl","input"],["type","text",1,"inputBoxes",3,"formControl","input"],[2,"text-align","center","vertical-align","middle",3,"ngClass"],["colspan","3",2,"height","50px","border","0.5px solid"],["colspan","3",2,"height","40px","border","0.5px solid"],["colspan","3",2,"height","50px","border","0.5px solid",3,"ngClass"],["class","file-item",4,"ngFor","ngForOf"],[1,"file-item"],[1,"remove-file-btn",3,"click"],["disabled","",1,"p-btns-button"]],template:function(e,o){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Rate comparative "),t.qZA(),t._UZ(5,"span",4),t.qZA(),t.TgZ(6,"div"),t._UZ(7,"hr",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7)(10,"div"),t._UZ(11,"img",8),t.qZA(),t.TgZ(12,"span",9),t._uU(13,"Purchase\xa0request"),t.qZA(),t.TgZ(14,"div"),t._UZ(15,"mat-divider",10),t.qZA()(),t.TgZ(16,"div",11)(17,"div"),t._UZ(18,"img",12),t.qZA(),t.TgZ(19,"span",9),t._uU(20,"Approvals"),t.qZA(),t.TgZ(21,"div"),t._UZ(22,"mat-divider",10),t.qZA()(),t.TgZ(23,"div",11)(24,"div"),t._UZ(25,"img",13),t.qZA(),t.TgZ(26,"span",14),t._uU(27,"Rate\xa0Comparative"),t.qZA(),t.TgZ(28,"div"),t._UZ(29,"mat-divider",10),t.qZA()(),t.TgZ(30,"div",11)(31,"div"),t._UZ(32,"img",12),t.qZA(),t.TgZ(33,"span",9),t._uU(34,"Rate\xa0Approvals"),t.qZA(),t.TgZ(35,"div"),t._UZ(36,"mat-divider",10),t.qZA()(),t.TgZ(37,"div",11)(38,"div"),t._UZ(39,"img",15),t.qZA(),t.TgZ(40,"span",9),t._uU(41,"Purchase\xa0orders"),t.qZA()()(),t.TgZ(42,"form",16)(43,"mat-card",17)(44,"div",18)(45,"div",19)(46,"label",20),t._uU(47,"Request title "),t.qZA(),t._UZ(48,"input",21),t.qZA(),t.TgZ(49,"div",19)(50,"label",20),t._uU(51,"Request date"),t.qZA(),t.TgZ(52,"mat-form-field",22),t._UZ(53,"input",23)(54,"mat-datepicker-toggle",24)(55,"mat-datepicker",null,25),t.qZA()(),t.TgZ(57,"div",26)(58,"label",27),t._uU(59," Required by "),t.TgZ(60,"span",28),t._uU(61,"*"),t.qZA()(),t.TgZ(62,"div",29)(63,"mat-form-field",22),t._UZ(64,"input",30)(65,"mat-datepicker-toggle",24)(66,"mat-datepicker",null,31),t.qZA()()(),t.TgZ(68,"div",26)(69,"label",27),t._uU(70," Handle by "),t.TgZ(71,"span",28),t._uU(72,"*"),t.qZA()(),t.TgZ(73,"div",29)(74,"mat-form-field",22)(75,"mat-select",32),t.YNc(76,Ft,2,2,"mat-option",33),t.qZA(),t.YNc(77,Qt,2,0,"mat-error",34),t.qZA()()(),t.TgZ(78,"div",35)(79,"label",20),t._uU(80,"Site name "),t.TgZ(81,"span",28),t._uU(82,"*"),t.qZA()(),t.TgZ(83,"mat-form-field",22)(84,"mat-select",36),t.YNc(85,Jt,2,2,"mat-option",33),t.qZA()()(),t.TgZ(86,"div",37)(87,"label",38),t._uU(88,"Local Purchase "),t.TgZ(89,"span",28),t._uU(90,"*"),t.qZA()(),t.TgZ(91,"mat-radio-group",39)(92,"mat-radio-button",40),t._uU(93," Yes "),t.qZA(),t.TgZ(94,"mat-radio-button",41),t._uU(95," No "),t.qZA()()()()(),t.TgZ(96,"mat-card",42),t._uU(97," Select your vendor for each Category and Subcategory "),t.TgZ(98,"form",16)(99,"div",43)(100,"table")(101,"tr")(102,"th"),t._uU(103,"Category"),t.qZA(),t.TgZ(104,"th"),t._uU(105,"Sub Category"),t.qZA(),t.TgZ(106,"th"),t._uU(107,"Vendor"),t.qZA()(),t.YNc(108,Dt,9,5,"tr",44),t.qZA()(),t.TgZ(109,"div",45)(110,"button",46),t.NdJ("click",function(){return o.save()}),t._uU(111," Enter Vendor Rates "),t.qZA()()()(),t.YNc(112,ie,80,11,"div",34),t.TgZ(113,"div",47)(114,"label",20),t._uU(115,"Remarks "),t.qZA(),t._UZ(116,"textarea",48),t.qZA(),t.TgZ(117,"div",49),t.YNc(118,le,4,3,"ng-container",50),t.YNc(119,pe,2,1,"ng-template",null,51,t.W1O),t.qZA()()),2&e){const n=t.MAs(56),a=t.MAs(67),s=t.MAs(120);t.xp6(9),t.Q6J("routerLink",t.DdM(20,ce)),t.xp6(7),t.Q6J("routerLink",t.DdM(21,me)),t.xp6(7),t.Q6J("routerLink",t.DdM(22,ge)),t.xp6(7),t.Q6J("routerLink",t.DdM(23,ue)),t.xp6(7),t.Q6J("routerLink",t.DdM(24,_e)),t.xp6(5),t.Q6J("formGroup",o.rateComparativeForm),t.xp6(11),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(10),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(11),t.Q6J("ngForOf",o.users),t.xp6(1),t.Q6J("ngIf",null==o.rateComparativeForm.controls.handle_by.errors?null:o.rateComparativeForm.controls.handle_by.errors.required),t.xp6(8),t.Q6J("ngForOf",o.siteList),t.xp6(7),t.Q6J("value","yes"),t.xp6(2),t.Q6J("value","no"),t.xp6(4),t.Q6J("formGroup",o.vendorForm),t.xp6(10),t.Q6J("ngForOf",o.filteredItems),t.xp6(4),t.Q6J("ngIf",o.vendorItemsTables&&o.vendorItemsTables.length>0),t.xp6(6),t.Q6J("ngIf",o.addPermission||o.editPermission)("ngIfElse",s)}},dependencies:[h.mk,h.sg,h.O5,u.rH,u.Od,q.ey,x.TO,x.KE,x.hX,x.R9,D.a8,v.Mq,v.hl,v.nW,I.d,k.Nt,Z.VQ,Z.U0,U.gD,O.Ye,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.oH,i.sg,i.u,i.x0,i.CE],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.scroll-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto;white-space:nowrap}.scrollable-content[_ngcontent-%COMP%]{display:inline-block;min-width:min-content}.p-btns-button[_ngcontent-%COMP%]{height:50px;font-size:18px;padding:5px;text-align:center}.lowest-amount[_ngcontent-%COMP%], .lowest-rate[_ngcontent-%COMP%], .lowest-grand-total[_ngcontent-%COMP%]{color:brown;font-size:18px;font-weight:700}.inputBoxes[_ngcontent-%COMP%]{width:100%;align-self:center;padding:10px;border-radius:6px;border:1px solid #ccc;cursor:pointer;font-family:Poppins}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:100%;height:auto;font-family:Poppins;box-shadow:none;border:1px solid #ccc;border-radius:4px}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;width:100%;font-size:14px;margin-bottom:20px;margin-right:20px;margin-top:8px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:15px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}form[_ngcontent-%COMP%]{padding:10px 20px}.scroll-bar1[_ngcontent-%COMP%]{margin-top:50px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background-color:"Transparent"}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 0 20px;float:right;gap:10px}.text-area-section[_ngcontent-%COMP%]{width:100%;height:auto;margin:30px 0 0}.text-area-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:100%}.flex-div[_ngcontent-%COMP%]{width:31%}.mat-form-field[_ngcontent-%COMP%]{display:block}.pending[_ngcontent-%COMP%]{padding:8px;width:120px;background-color:#ccc;color:#333;font-size:14px;font-family:Poppins;height:50px;border:none}.p-btns[_ngcontent-%COMP%]{background:#233a61;padding:5px 10px;border-radius:4px;font-size:12px;cursor:pointer}.p-btns[_ngcontent-%COMP%]:hover{opacity:.7}.p-btns-button[_ngcontent-%COMP%]{background:#233a61;border:1px solid #233a61;padding:7px 40px;border-radius:4px;font-size:12px;cursor:pointer;color:#fff}.p-btns-button[_ngcontent-%COMP%]:hover{opacity:.7}.vendor-wapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:40px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-name-cl[_ngcontent-%COMP%]{padding:6px 15px;background:#233a61;color:#fff}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:rgba(7,59,76,.0509803922);padding:6px 15px;margin-bottom:10px;gap:10px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80px;border:1px solid #ccc;border-radius:2px;padding:5px;outline:none}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-label[_ngcontent-%COMP%]{min-width:144px}input[readonly=true][_ngcontent-%COMP%], input[readonly][_ngcontent-%COMP%], .mat-select-disabled[_ngcontent-%COMP%]{opacity:.6}.upload-save-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.upload-file-section[_ngcontent-%COMP%]{display:flex;flex-direction:column}.file-item[_ngcontent-%COMP%]{margin:10px;display:flex;flex-direction:row}.remove-file-btn[_ngcontent-%COMP%]{border:none;color:red;font-weight:700;margin-left:5px;cursor:pointer}.save-button-section[_ngcontent-%COMP%]{padding-top:20px}']}),r})();var he=g(8898),xe=g(9836);const ve=[{path:"",component:dt},{path:"details/:id",component:Lt},{path:"update/:id",component:fe}];let be=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[h.ez,u.Bz,he.S,i.UX,xe.w,B.Z,[u.Bz.forChild(ve)]]}),r})()}}]);