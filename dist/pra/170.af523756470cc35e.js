"use strict";(self.webpackChunkpra=self.webpackChunkpra||[]).push([[170],{3170:(Gt,A,d)=>{d.r(A),d.d(A,{RateApprovalModule:()=>$t});var h=d(6895),c=d(4006),_=d(8608),C=d(7489),S=d(5439),T=d(2340),t=d(4650),f=d(9299),U=d(2126),y=d(6104),q=d(529),w=d(2894),k=d(4961),P=d(3238),v=d(9549),x=d(9602),O=d(4850),F=d(7392),I=d(4144),L=d(4385),R=d(3683);function Y(o,i){if(1&o&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.label)}}const M=function(o){return["/rate-approval/update",o]};function V(o,i){if(1&o&&(t.TgZ(0,"td",52),t._uU(1,"Approve \xa0Rates"),t.qZA()),2&o){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,M,e._id))}}const N=function(o){return["/rate-comparative/details",o]};function B(o,i){if(1&o&&(t.TgZ(0,"td",53),t._uU(1,"Approved Vendors"),t.qZA()),2&o){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,N,e._id))}}function D(o,i){if(1&o&&(t.TgZ(0,"td",54),t._uU(1,"Rejected Rates"),t.qZA()),2&o){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,N,e._id))}}function j(o,i){if(1&o&&(t.TgZ(0,"td",56),t._uU(1,"Revise \xa0Rates"),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,M,e._id))}}function z(o,i){if(1&o&&(t.ynx(0),t.YNc(1,j,2,3,"td",55),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","revise"==e.status)}}function E(o,i){1&o&&(t.TgZ(0,"td",58),t._uU(1,"No Permission To Revise Rates"),t.qZA())}function $(o,i){if(1&o&&t.YNc(0,E,2,0,"td",57),2&o){const e=t.oxw().$implicit;t.Q6J("ngIf","revise"==e.status)}}function G(o,i){if(1&o&&(t.TgZ(0,"tr")(1,"td",41),t._uU(2,"Request\xa0no\xa0 "),t.TgZ(3,"span",42),t._uU(4),t.qZA()(),t._UZ(5,"hr",43),t.TgZ(6,"td",44),t._uU(7),t.qZA(),t._UZ(8,"hr",43),t.TgZ(9,"td",45),t._uU(10,"Title\xa0"),t.TgZ(11,"span",42),t._uU(12),t.qZA()(),t._UZ(13,"hr",43),t.TgZ(14,"td",46),t._uU(15," Site\xa0"),t.TgZ(16,"span",42),t._uU(17),t.qZA()(),t.YNc(18,V,2,3,"td",47),t.YNc(19,B,2,3,"td",48),t.YNc(20,D,2,3,"td",49),t.YNc(21,z,2,1,"ng-container",17),t.YNc(22,$,1,1,"ng-template",null,50,t.W1O),t.TgZ(24,"td",51)(25,"mat-icon"),t._uU(26," arrow_forward_ios "),t.qZA()()()),2&o){const e=i.$implicit,n=t.MAs(23),r=t.oxw(2);t.xp6(4),t.Oqu(r.reqNo(e.purchase_request_id)),t.xp6(3),t.hij("Requested on: ",e.date,""),t.xp6(5),t.Oqu(e.title),t.xp6(5),t.Oqu(e.siteData.site_name),t.xp6(1),t.Q6J("ngIf","pending"==e.status),t.xp6(1),t.Q6J("ngIf","approved"==e.status),t.xp6(1),t.Q6J("ngIf","rejected"==e.status),t.xp6(1),t.Q6J("ngIf",r.editPermission)("ngIfElse",n)}}function K(o,i){1&o&&(t.TgZ(0,"div",59),t._UZ(1,"img",60),t.TgZ(2,"span"),t._uU(3," No record found"),t.qZA()())}function H(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",19)(2,"div",20)(3,"mat-form-field",21)(4,"mat-icon",22),t._uU(5,"search"),t.qZA(),t.TgZ(6,"input",23),t.NdJ("input",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.search(r,"title"))}),t.qZA()()(),t.TgZ(7,"div",24)(8,"div",25)(9,"span"),t._uU(10,"Filter\xa0by"),t.qZA()(),t.TgZ(11,"div")(12,"mat-form-field",26)(13,"input",27),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(16);return t.KtG(r.open())})("dateChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.dateFilter(r))}),t.qZA(),t._UZ(14,"mat-datepicker-toggle",28)(15,"mat-datepicker",null,29),t.qZA()()(),t.TgZ(17,"div",24)(18,"div",30)(19,"span"),t._uU(20,"Filter\xa0by"),t.qZA()(),t.TgZ(21,"div")(22,"mat-form-field",26)(23,"input",31),t.NdJ("input",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.search(r,"site"))}),t.qZA()()()(),t.TgZ(24,"div",24)(25,"div",30)(26,"span"),t._uU(27,"Filter by Status"),t.qZA()(),t.TgZ(28,"div",32)(29,"mat-form-field",33)(30,"mat-select",34),t.NdJ("selectionChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.onStatusChange(r))}),t.YNc(31,Y,2,2,"mat-option",35),t.qZA()()()()(),t.TgZ(32,"div",36)(33,"table",37)(34,"tbody"),t.YNc(35,G,27,9,"tr",38),t.qZA()(),t.YNc(36,K,4,0,"div",39),t.qZA(),t.BQk()}if(2&o){const e=t.MAs(16),n=t.oxw();t.xp6(13),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e),t.xp6(16),t.Q6J("formControl",n.statusOption),t.xp6(1),t.Q6J("ngForOf",n.statusList),t.xp6(4),t.Q6J("ngForOf",n.rateComparativeList),t.xp6(1),t.Q6J("ngIf",!(n.rateComparativeList&&n.rateComparativeList.length>0))}}function W(o,i){1&o&&(t.TgZ(0,"h3",61),t._uU(1,"You don't have permissions to view."),t.qZA())}const X=function(){return["/procurement"]},tt=function(){return["/procurement/prlist"]},et=function(){return["/rate-comparative"]},nt=function(){return["/rate-approval"]},ot=function(){return["/purchase-order"]};let rt=(()=>{class o{constructor(e,n,r,a,s,l){this.router=e,this.httpService=n,this.snack=r,this.http=a,this.auth=s,this.userService=l,this.statusOption=new c.NI("pending"),this.statusList=[{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"revise",label:"Revise"}],this.filter_by="status",this.filter_value="pending",this.requestType="new",this.originalRateComparativeList=[],this.purchaseList=[],this.getList({filter_by:this.filter_by,filter_value:this.filter_value,stage:"rate_approval"})}getList(e){this.httpService.GET(_.lu,e).subscribe({next:n=>{if(console.log(n.data),n.data.forEach(r=>{r.date=S(r.updated_at).format("DD-MM-YYYY")}),"superadmin"===this.permissions.user.role)this.originalRateComparativeList=n.data,this.rateComparativeList=n.data;else{const a=n.data.filter(s=>this.siteList.some(l=>l._id===s.site));console.log(a),this.originalRateComparativeList=a,this.rateComparativeList=a}},error:n=>{if(n.errors&&!(0,C.isEmpty)(n.errors)){let r="<ul>";for(let a in n.errors)r+=`<li>${n.errors[a][0]}</li>`;r+="</ul>",this.snack.notifyHtml(r,2)}else this.snack.notify(n.message,2)}})}onStatusChange(e){this.getList({filter_by:this.filter_by,filter_value:e.value,stage:"rate_approval"})}dateFilter(e){this.originalRateComparativeList&&this.originalRateComparativeList.length>0&&(this.rateComparativeList=e.value?this.originalRateComparativeList.filter(n=>new Date(n.date)==new Date(e.value)):this.originalRateComparativeList)}search(e,n){this.originalRateComparativeList&&this.originalRateComparativeList.length>0&&(this.rateComparativeList="site"==n?e.target.value?this.originalRateComparativeList.filter(r=>r.siteData.site_name.toLowerCase().includes(e.target.value.toLowerCase())):this.originalRateComparativeList:e.target.value?this.originalRateComparativeList.filter(r=>r.title.toLowerCase().includes(e.target.value.toLowerCase())):this.originalRateComparativeList)}getReqNO(){const e=this.http.get(`${T.N.api_path}${_.Fj}`);this.httpService.multipleRequests([e],{}).subscribe(n=>{n&&(this.purchaseList=n[0].data)})}reqNo(e){return this.purchaseList.filter(r=>r._id===e)[0].purchase_request_number}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.userService.getUserss().subscribe(e=>{e.find(r=>r._id===this.permissions.user._id)?(this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:s=>{console.log(s),this.viewPermission=s.dashboard_permissions[0].ParentChildchecklist[21].childList[0].isSelected,this.editPermission=s.dashboard_permissions[0].ParentChildchecklist[21].childList[2].isSelected},error:s=>{console.log(s)}}),this.getReqNO(),this.siteList=this.permissions.user.sites,console.log("SiteSelect",this.siteList)):(this.snack.notify("Invalid Credentials - User Details not Valid",1),this.auth.removeUser(),this.userService.updateLogin("logout"),this.router.navigate(["/login"]))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.F0),t.Y36(U.s),t.Y36(y.o),t.Y36(q.eN),t.Y36(w.e),t.Y36(k.f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-rate-approval-list"]],decls:45,vars:12,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","50px","margin-left","20px"],["src","./assets/images/ratehead.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],["src","./assets/images/rc.svg"],["src","./assets/images/app.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/po.svg"],[4,"ngIf","ngIfElse"],["noView",""],[2,"display","flex","flex-direction","row","gap","10px"],[2,"margin-left","40px","width","20%","margin-top","30px"],["appearance","outline",1,"searchbar"],["matSuffix",""],["matInput","","type","search","placeholder","search title",1,"search-input",3,"input"],[2,"margin-top","30px","display","flex","gap","10px"],[2,"margin-top","15px","color","#94A3B8","margin-left","40px"],["appearance","outline",1,"datebar"],["matInput","","placeholder","Date",3,"matDatepicker","click","dateChange"],["matSuffix","",3,"for"],["startPicker",""],[2,"margin-top","15px","color","#94A3B8"],["matInput","","placeholder","Site",3,"input"],[1,"custom-form-control",2,"width","50%"],["appearance","outline",2,"width","100%"],[3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"scroll-bar1",2,"width","95%"],[2,"direction","ltr !important","margin-top","-20px"],[4,"ngFor","ngForOf"],["class","no-record-found",4,"ngIf"],[3,"value"],[2,"color","#4272BF","width","250px","text-align","left","padding","10px","font-size","15px"],[2,"color","#000000"],[2,"border","1px solid #D9D9D9","height","30px"],[2,"color","#4272BF","width","500px"],[2,"color","#4272BF","width","300px","font-size","15px"],[2,"color","#4272BF","width","700px","text-align","left","padding","10px","font-size","15px"],["style","background-color: #233A61;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],["style","background-color: #54AA52;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],["style","background-color: #C7323B;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],["noEditPermission",""],[2,"width","100px"],[2,"background-color","#233A61","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],[2,"background-color","#54AA52","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],[2,"background-color","#C7323B","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],["style","background-color:rgb(26, 188, 254);color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],[2,"background-color","rgb(26, 188, 254)","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],["style","background-color:rgb(26, 188, 254);color:#fff;width:200px;font-size: 14px;cursor: pointer;","disabled","",4,"ngIf"],["disabled","",2,"background-color","rgb(26, 188, 254)","color","#fff","width","200px","font-size","14px","cursor","pointer"],[1,"no-record-found"],["src","./assets/images/inbox_empty.png","alt",""],[2,"display","flex","justify-content","center","margin-top","2%","font-size","160%","font-weight","bolder","color","grey"]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Rate Approval"),t.qZA(),t._UZ(5,"span",4),t.qZA(),t.TgZ(6,"div"),t._UZ(7,"hr",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7)(10,"div"),t._UZ(11,"img",8),t.qZA(),t.TgZ(12,"span",9),t._uU(13,"Purchase\xa0request"),t.qZA(),t.TgZ(14,"div"),t._UZ(15,"mat-divider",10),t.qZA()(),t.TgZ(16,"div",11)(17,"div"),t._UZ(18,"img",12),t.qZA(),t.TgZ(19,"span",9),t._uU(20,"Approvals"),t.qZA(),t.TgZ(21,"div"),t._UZ(22,"mat-divider",10),t.qZA()(),t.TgZ(23,"div",11)(24,"div"),t._UZ(25,"img",13),t.qZA(),t.TgZ(26,"span",9),t._uU(27,"Rate\xa0Comparative"),t.qZA(),t.TgZ(28,"div"),t._UZ(29,"mat-divider",10),t.qZA()(),t.TgZ(30,"div",11)(31,"div"),t._UZ(32,"img",14),t.qZA(),t.TgZ(33,"span",15),t._uU(34,"Rate\xa0Approvals"),t.qZA(),t.TgZ(35,"div"),t._UZ(36,"mat-divider",10),t.qZA()(),t.TgZ(37,"div",11)(38,"div"),t._UZ(39,"img",16),t.qZA(),t.TgZ(40,"span",9),t._uU(41,"Purchase\xa0orders"),t.qZA()()(),t.YNc(42,H,37,6,"ng-container",17),t.YNc(43,W,2,0,"ng-template",null,18,t.W1O)),2&e){const r=t.MAs(44);t.xp6(9),t.Q6J("routerLink",t.DdM(7,X)),t.xp6(7),t.Q6J("routerLink",t.DdM(8,tt)),t.xp6(7),t.Q6J("routerLink",t.DdM(9,et)),t.xp6(7),t.Q6J("routerLink",t.DdM(10,nt)),t.xp6(7),t.Q6J("routerLink",t.DdM(11,ot)),t.xp6(5),t.Q6J("ngIf",n.viewPermission)("ngIfElse",r)}},dependencies:[h.sg,h.O5,f.rH,f.Od,P.ey,v.KE,v.R9,x.Mq,x.hl,x.nW,O.d,F.Hw,I.Nt,L.gD,R.Ye,c.JJ,c.oH],styles:[".mat-form-field-appearance-outline .mat-form-field-infix{padding:.6em;width:250px}mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}input[type=text][_ngcontent-%COMP%]{width:60%;border-radius:8px;padding:12px 20px;margin:8px 0;box-sizing:border-box;border:.5px solid #94A3B8;transition:.5s;outline:none;font-family:Poppins;font-size:15px}.requests[_ngcontent-%COMP%]{height:40px;width:1120px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:15px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:15px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:15px;display:flex;align-items:center;justify-content:center}.searchbar[_ngcontent-%COMP%]{width:100%;border-radius:20px;font-family:Poppins}.datebar[_ngcontent-%COMP%]{width:180px;border-radius:20px;font-family:Poppins}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:separate;border-spacing:0 25px;text-align:left;width:100%;font-size:12px;margin-left:30px;margin-bottom:20px;margin-right:-10px}td[_ngcontent-%COMP%]{border:none;text-align:center;padding:8px 1px;color:#233a61;font-style:normal;font-size:medium}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f4f4f5!important}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f4f4f5!important}.scroll-bar1[_ngcontent-%COMP%]{height:600px;width:93%;margin-left:20px;margin-bottom:100px;margin-top:10px;overflow:auto;direction:rtl;overflow-x:hidden}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1E293B;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.no-record-found[_ngcontent-%COMP%]{text-align:center;display:flex;gap:10px;flex-direction:column;align-items:center;justify-content:center}.no-record-found[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:188px}"]}),o})();var it=d(5938),at=d(3546),Q=d(1948);function st(o,i){if(1&o&&(t.TgZ(0,"mat-option",51),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function lt(o,i){if(1&o&&(t.TgZ(0,"mat-option",51),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.site_name," ")}}const pt=function(o){return{"preferred-vendor":o}};function dt(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"th",62)(2,"label")(3,"input",63),t.NdJ("change",function(r){const s=t.CHM(e).index,l=t.oxw(2);return t.KtG(l.toggleVendorPreferred(s,r))}),t.qZA(),t._uU(4),t.qZA()(),t.BQk()}if(2&o){const e=i.$implicit,n=i.index,r=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(3,pt,r.vendorItemsTables[0].totals[r.getVendorKeys()[n]].preferred)),t.xp6(2),t.Q6J("checked",r.vendorItemsTables[0].totals[r.getVendorKeys()[n]].preferred),t.xp6(1),t.hij(" ",e," ")}}function ct(o,i){1&o&&(t.ynx(0),t.TgZ(1,"th",64),t._uU(2,"Available Qty"),t.qZA(),t.TgZ(3,"th",64),t._uU(4,"Rate (\u20b9)"),t.qZA(),t.TgZ(5,"th",64),t._uU(6,"Sub Total (\u20b9)"),t.qZA(),t.BQk())}const gt=function(o,i){return{"lowest-amount":o,"selected-td":i}};function ut(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"td",64),t._uU(2),t.qZA(),t.TgZ(3,"td",64),t._uU(4),t.qZA(),t.TgZ(5,"td",67),t._uU(6),t.TgZ(7,"input",68),t.NdJ("change",function(){const a=t.CHM(e).$implicit,s=t.oxw().$implicit,l=t.oxw(3);return t.KtG(l.togglePreferredVendor(s,a))}),t.qZA()(),t.BQk()}if(2&o){const e=i.$implicit,n=t.oxw().$implicit,r=t.oxw(3);t.xp6(2),t.hij(" ",n.vendors[e].requiredQty," "),t.xp6(2),t.hij(" ",n.vendors[e].rate," "),t.xp6(1),t.Q6J("ngClass",t.WLB(5,gt,r.isSaved&&r.isSmallestAmount(n.item_id,e),n.vendors[e].preferred)),t.xp6(1),t.hij(" ",n.vendors[e].amount," "),t.xp6(1),t.Q6J("checked",n.vendors[e].preferred)}}function mt(o,i){if(1&o&&(t.TgZ(0,"tr")(1,"td",65),t._uU(2),t.qZA(),t.TgZ(3,"td",65),t._uU(4),t.qZA(),t.TgZ(5,"td",65),t._uU(6),t.qZA(),t.TgZ(7,"td",66),t._uU(8),t.qZA(),t.TgZ(9,"td",66),t._uU(10),t.qZA(),t.TgZ(11,"td",64),t._uU(12),t.qZA(),t.TgZ(13,"td",64),t._uU(14),t.qZA(),t.TgZ(15,"td",64),t._uU(16),t.qZA(),t.TgZ(17,"td",64),t._uU(18),t.qZA(),t.TgZ(19,"td",64),t._uU(20),t.qZA(),t.YNc(21,ut,8,8,"ng-container",58),t.TgZ(22,"td",64),t._uU(23),t.qZA()()),2&o){const e=i.$implicit,n=t.oxw(3);t.xp6(2),t.Oqu(e.name),t.xp6(2),t.hij(" ",e.specification," "),t.xp6(2),t.hij(" ",e.hsnCode," "),t.xp6(2),t.Oqu(e.category),t.xp6(2),t.Oqu(e.subCategory),t.xp6(2),t.Oqu(e.uom),t.xp6(2),t.Oqu(e.quantity),t.xp6(2),t.Oqu(e.gst),t.xp6(2),t.Oqu(e.pislBudget),t.xp6(2),t.Oqu(e.pislBudgetSubTotal),t.xp6(1),t.Q6J("ngForOf",n.getVendorKeysArray(e.vendors)),t.xp6(2),t.Oqu(e.remark)}}function ft(o,i){if(1&o&&(t.ynx(0),t.YNc(1,mt,24,12,"tr",58),t.BQk()),2&o){const e=i.$implicit;t.xp6(1),t.Q6J("ngForOf",e.items)}}function _t(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"td",69),t._uU(2),t.qZA(),t.BQk()),2&o){const e=i.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu((null==n.vendorItemsTables[0].totals[e]?null:n.vendorItemsTables[0].totals[e].totalAmount)||"0")}}function ht(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"td",69),t._uU(2),t.qZA(),t.BQk()),2&o){const e=i.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu((null==n.vendorItemsTables[0].totals[e]?null:n.vendorItemsTables[0].totals[e].gstAmount)||"0")}}function xt(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"td",70),t._uU(2),t.qZA(),t.BQk()),2&o){const e=i.$implicit,n=t.oxw(2);t.xp6(2),t.hij(" ",(null==n.vendorItemsTables[0].totals[e]?null:n.vendorItemsTables[0].totals[e].freight)||"0"," ")}}function vt(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"td",70),t._uU(2),t.qZA(),t.BQk()),2&o){const e=i.$implicit,n=t.oxw(2);t.xp6(2),t.hij(" ",(null==n.vendorItemsTables[0].totals[e]?null:n.vendorItemsTables[0].totals[e].freightGst)||"0"," ")}}const bt=function(o,i){return{"lowest-grand-total":o,"preferred-grand-total":i}};function Zt(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"td",71),t._uU(2),t.qZA(),t.BQk()),2&o){const e=i.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.WLB(2,bt,n.isSaved&&n.isLowestGrandTotal(e),n.isPreferredGrandTotal(e))),t.xp6(1),t.hij(" ",(null==n.vendorItemsTables[0].totals[e]?null:n.vendorItemsTables[0].totals[e].grandTotal)||"0"," ")}}function Tt(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"td",69),t._uU(2),t.qZA(),t.BQk()),2&o){const e=i.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(null==n.vendorItemsTables[0].totals[e]?null:n.vendorItemsTables[0].totals[e].vendorRemark)}}function At(o,i){if(1&o&&(t.TgZ(0,"div")(1,"div",52)(2,"div",53)(3,"table",54)(4,"thead")(5,"tr")(6,"th",55),t._uU(7,"Item"),t.qZA(),t.TgZ(8,"th",55),t._uU(9," Specification "),t.qZA(),t.TgZ(10,"th",55),t._uU(11," HSN Code "),t.qZA(),t.TgZ(12,"th",56),t._uU(13,"Category"),t.qZA(),t.TgZ(14,"th",56),t._uU(15,"Sub-Category"),t.qZA(),t.TgZ(16,"th",57),t._uU(17,"UOM"),t.qZA(),t.TgZ(18,"th",57),t._uU(19,"Quantity"),t.qZA(),t.TgZ(20,"th",57),t._uU(21,"GST %"),t.qZA(),t.TgZ(22,"th",57),t._uU(23,"Budget (\u20b9)"),t.qZA(),t.TgZ(24,"th",57),t._uU(25,"Budget SubTotal (\u20b9)"),t.qZA(),t.YNc(26,dt,5,5,"ng-container",58),t.TgZ(27,"th",57),t._uU(28,"Add Remarks"),t.qZA()(),t.TgZ(29,"tr"),t.YNc(30,ct,7,0,"ng-container",58),t.qZA()(),t.TgZ(31,"tbody"),t.YNc(32,ft,2,1,"ng-container",58),t.qZA(),t.TgZ(33,"tfoot")(34,"tr"),t._UZ(35,"td",59),t.TgZ(36,"td",60),t._uU(37,"Total Amount (\u20b9)"),t.qZA(),t.YNc(38,_t,3,1,"ng-container",58),t._UZ(39,"td",61),t.qZA(),t.TgZ(40,"tr"),t._UZ(41,"td",59),t.TgZ(42,"td",60),t._uU(43,"GST Amount (\u20b9)"),t.qZA(),t.YNc(44,ht,3,1,"ng-container",58),t._UZ(45,"td",61),t.qZA(),t.TgZ(46,"tr"),t._UZ(47,"td",59),t.TgZ(48,"td",60),t._uU(49,"Freight (\u20b9)"),t.qZA(),t.YNc(50,xt,3,1,"ng-container",58),t._UZ(51,"td",61),t.qZA(),t.TgZ(52,"tr"),t._UZ(53,"td",59),t.TgZ(54,"td",60),t._uU(55,"Freight GST (%)"),t.qZA(),t.YNc(56,vt,3,1,"ng-container",58),t._UZ(57,"td",61),t.qZA(),t.TgZ(58,"tr"),t._UZ(59,"td",59),t.TgZ(60,"td",60),t._uU(61,"Grand Total (\u20b9)"),t.qZA(),t.YNc(62,Zt,3,5,"ng-container",58),t._UZ(63,"td",61),t.qZA(),t.TgZ(64,"tr"),t._UZ(65,"td",59),t.TgZ(66,"td",60),t._uU(67,"Remarks"),t.qZA(),t.YNc(68,Tt,3,1,"ng-container",58),t._UZ(69,"td",61),t.qZA()()()()()()),2&o){const e=t.oxw();t.xp6(26),t.Q6J("ngForOf",e.vendorItemsTables[0].vendors),t.xp6(4),t.Q6J("ngForOf",e.vendorItemsTables[0].vendors),t.xp6(2),t.Q6J("ngForOf",e.vendorItemsTables),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0]))}}function Ct(o,i){if(1&o&&(t.TgZ(0,"div",72)(1,"a",73),t._uU(2),t.qZA()()),2&o){const e=i.$implicit,n=t.oxw();t.xp6(1),t.Q6J("href",e.value,t.LSH),t.xp6(1),t.hij(" ",n.getVendorNameByCode(e.key)," Quotation ")}}function Ut(o,i){1&o&&(t.TgZ(0,"span"),t._uU(1,"Sanction"),t.qZA())}function yt(o,i){1&o&&(t.TgZ(0,"span"),t._uU(1,"Please wait..."),t.qZA())}function qt(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",74),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.updateRequest("approved"))}),t.YNc(2,Ut,2,0,"span",42),t.YNc(3,yt,2,0,"span",42),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.load),t.xp6(1),t.Q6J("ngIf",!e.load),t.xp6(1),t.Q6J("ngIf",e.load)}}function wt(o,i){1&o&&(t.TgZ(0,"button",75)(1,"span"),t._uU(2,"No Permission To Santion"),t.qZA()())}function kt(o,i){1&o&&(t.TgZ(0,"span"),t._uU(1,"Reject"),t.qZA())}function Pt(o,i){1&o&&(t.TgZ(0,"span"),t._uU(1,"Please wait..."),t.qZA())}function Ot(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",74),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.updateRequest("rejected"))}),t.YNc(2,kt,2,0,"span",42),t.YNc(3,Pt,2,0,"span",42),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.load),t.xp6(1),t.Q6J("ngIf",!e.load),t.xp6(1),t.Q6J("ngIf",e.load)}}function It(o,i){1&o&&(t.TgZ(0,"button",75)(1,"span"),t._uU(2,"No Permission To Reject"),t.qZA()())}function Lt(o,i){1&o&&(t.TgZ(0,"span"),t._uU(1,"Revise"),t.qZA())}function Rt(o,i){1&o&&(t.TgZ(0,"span"),t._uU(1,"Please wait..."),t.qZA())}function Mt(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",74),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.updateRequest("revise"))}),t.YNc(2,Lt,2,0,"span",42),t.YNc(3,Rt,2,0,"span",42),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.load),t.xp6(1),t.Q6J("ngIf",!e.load),t.xp6(1),t.Q6J("ngIf",e.load)}}function Nt(o,i){1&o&&(t.TgZ(0,"span"),t._uU(1,"No Permission To Revise"),t.qZA())}function Qt(o,i){if(1&o&&(t.TgZ(0,"button",75),t.YNc(1,Nt,2,0,"span",42),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.load)}}const Jt=function(){return["/procurement"]},St=function(){return["/procurement/prlist"]},Ft=function(){return["/rate-comparative"]},Yt=function(){return["/rate-approval"]},Vt=function(){return["/purchase-order"]};let Bt=(()=>{class o{constructor(e,n,r,a,s,l,p,g,u){this.router=e,this.httpService=n,this.snack=r,this.formBuilder=a,this.route=s,this.dialog=l,this.http=p,this.auth=g,this.userService=u,this.vendorList=[],this.VendorItems=[],this.vendorItemsTables=[],this.files={},this.load=!1,this.isSaved=!0,this.VendorRate=new Map,this.ItemwiseVendorRate=new Map,this.compareBy="item",this.purchaseRequestForm=new c.cw({title:new c.NI({value:"",disabled:!0},c.kI.required),date:new c.NI({value:"",disabled:!0},c.kI.required),files:new c.NI([]),expected_delivery_date:new c.NI({value:"",disabled:!0},c.kI.required),handle_by:new c.NI({value:"",disabled:!0},c.kI.required),rate_approval_number:new c.NI(""),site:new c.NI({value:"",disabled:!0},c.kI.required),local_purchase:new c.NI({value:"",disabled:!0},c.kI.required),remarks:new c.NI({value:"",disabled:!0},[]),items:this.formBuilder.array([]),_id:new c.NI}),this.details={},this.users=[],this.getList(),this.getBrandList(),this.getVendorList(),this.userService.getUserss().subscribe(m=>{this.users=m})}getList(){const e=this.http.get(`${T.N.api_path}${_.S3}`),n=this.http.get(`${T.N.api_path}${_.TK}`);this.httpService.multipleRequests([e,n],{}).subscribe(r=>{r&&(console.log(r[1].data),this.siteList=r[0].data,this.purchaseList=r[1].data)})}patchData(e){console.log("checking form",this.purchaseRequestForm),this.purchaseRequestForm.patchValue({title:e.title,date:e.date,expected_delivery_date:e.expected_delivery_date,rate_approval_number:e.rate_approval_number,handle_by:e.handle_by,site:e.site,local_purchase:e.local_purchase,remarks:e.remarks,files:e.files}),this.curr_site=e.site,this.files=e.files,this.vendorItemsTables=e.vendorRatesVendorWise,console.log("vendorItemsTable",this.vendorItemsTables),this.purchaseRequestForm.controls.remarks.disable()}getVendorKeysArray(e){return console.log(e),Object.keys(e)}isLowestGrandTotal(e){const n=this.vendorItemsTables[0];if(!n||!n.totals)return console.error("Vendor items table or totals not found"),!1;const r=n.totals[e]?.grandTotal||1/0,s=Object.values(n.totals).map(p=>p.grandTotal);return r===Math.min(...s)}isPreferredGrandTotal(e){const n=this.vendorItemsTables[0];return n&&n.totals?!0===n.totals[e]?.preferred:(console.error("Vendor items table or totals not found"),!1)}isSmallestAmount(e,n){const r=this.vendorItemsTables[0].items.find(p=>p.item_id===e);if(!r)return console.error(`Item with ID ${e} not found`),!1;const a=r.vendors;if(!a[n])return console.error(`Vendor with ID ${n} not found in item ${e}`),!1;const s=parseFloat(a[n].amount),l=Object.values(a).map(p=>parseFloat(p.amount));return s===Math.min(...l)}getVendorKeys(){return Object.keys(this.vendorItemsTables[0].totals)}getSiteList(){this.httpService.GET(_.S3,{}).subscribe(e=>{this.siteList=e})}getVendorList(){this.httpService.GET("/vendor",{}).subscribe(e=>{this.vendorList=e.data})}getVendorNameByCode(e){console.log("checking vendor code",parseInt(e,10));const n=this.vendorList.find(r=>r.code.toString()===e);return n?n.vendor_name:"Other"}getVendorIds(e){return Object.keys(e.totals)}findVendor(e){return this.fetchedVendorList.find(n=>n._id==e)}vendorTotal(e){console.log("check Item",e);let n=0,r=0,a=0,s=0,l=0,p=0;return e.forEach(g=>{n=g.SubTotalAmount+n,r=+g.Total+ +r,a=+g.Freight+ +a,s=r-n,l=g.Rate,p=g.RequiredQuantity}),{subTotal:n,gstAmount:s,total:r,freight:a,rate:l,qty:p}}handleCheckboxChange(e,n,r){this.VendorRate.has(e)?this.deleteVendor(e,n,r):this.addVendor(e,n,r)}updateVendorTotals(){const e=this.vendorItemsTables.flatMap(n=>n.items);Object.keys(this.vendorItemsTables[0].totals).forEach(n=>{const r=e.every(a=>a.vendors[n]?.preferred);this.vendorItemsTables[0].totals[n].preferred=r})}togglePreferredVendor(e,n){const r=Object.keys(e.vendors).find(s=>e.vendors[s].preferred);r&&r!==n&&(e.vendors[r].preferred=!1);const a=e.vendors[n];a.preferred=!a.preferred,this.updateVendorTotals()}toggleVendorPreferred(e,n){const r=Object.keys(this.vendorItemsTables[0].totals),a=r[e],s=n.target.checked;this.vendorItemsTables.forEach(l=>{l.items.forEach(p=>{Object.keys(p.vendors).forEach(g=>{g!==a?p.vendors[g].preferred=!1:s||(p.vendors[g].preferred=!1)})})}),r.forEach(l=>{this.vendorItemsTables[0].totals[l].preferred=l===a&&s}),s&&this.vendorItemsTables.forEach(l=>{l.items.forEach(p=>{p.vendors[a].preferred=!0})}),this.updateVendorTotals()}filterData(e){const{items:n,vendors:r,totals:a}=e,s=Object.keys(a).filter(l=>a[l].preferred);if(s.length>0){const l=s[0],p={};return p[l]=a[l],{items:n.map(u=>{const m=u.vendors[l];return m?{...u,vendors:{[l]:m}}:u}),vendors:r,totals:p}}return{items:n.map(p=>{const g=Object.keys(p.vendors).filter(u=>p.vendors[u].preferred);if(g.length>0){const u=g.reduce((m,b)=>(m[b]=p.vendors[b],m),{});return{...p,vendors:u}}return{...p,vendors:{}}}),vendors:r,totals:a}}getTotalAmount(e){return console.log("here that is",e),e.reduce((n,r)=>n+(r.Total-r.SubTotalAmount),0)}deleteVendor(e,n,r){this.VendorRate.delete(e)}addVendor(e,n,r){this.VendorRate.set(e,{...n,...r})}getBrandList(){this.httpService.GET(_.Lk,{}).subscribe(e=>{this.brandList=e.data})}calculateGrandTotal(e){const n=this.vendorTotal(e.items),r=this.getTotalAmount(e.items);return n.subTotal+n.freight+r}getLowestGrandTotal(){return Math.min(...this.details.vendorItems.map(e=>this.calculateGrandTotal(e)))}myBrandName(e){return this.brandList.filter(r=>r._id==e)[0].brand_name}updateRequest(e){if("revise"==e)this.details.status=e,this.details.stage="rate_comparitive";else if("rejected"==e)this.details.status=e;else{this.siteList.find(m=>m._id==this.curr_site).site_name.replace(/[ ,]/g,"_");const a=(new Date).getFullYear(),s=a+1,u=(String(a).slice(-2),String(s).slice(-2),this.purchaseList.filter(m=>m.billing_address.company_name.includes("Pragati Infra Solutions Pvt. Ltd.")).length+1);this.po_no=u,this.details.vendorRatesItemWise=this.updateVendorPreferredTotals(this.filterData(this.vendorItemsTables[0])),this.details.compareBy=this.compareBy,this.details.po_number=this.po_no,this.details.handle_by=this.permissions.user.name,this.details.Pocount=u,this.details.files=this.files,"revise"==this.details.status&&(this.details.isRevised=!0),this.details.status="approved"}!this.purchaseRequestForm.valid||(console.log("details",this.details),console.log(""),this.load=!0,this.httpService.PUT(_.lu,this.details).subscribe(n=>{this.snack.notify("Detail has been updated",1),this.router.navigate(["/rate-approval"]),this.load=!1},n=>{if(this.load=!1,n.errors&&!(0,C.isEmpty)(n.errors)){let r="<ul>";for(let a in n.errors)r+=`<li>${n.errors[a][0]}</li>`;r+="</ul>",this.snack.notifyHtml(r,2)}else this.snack.notify(n.message,2)}))}updateVendorPreferredTotals(e){const{items:n,totals:r}=e,a={};for(const s in r){let l=0,p=0,g=r[s].freight||0,u=r[s].freightGst||0,m=!0;n.forEach(J=>{const Z=J.vendors[s];Z&&Z.preferred?(l+=parseFloat(Z.amount),p+=parseFloat(Z.amount)*J.gst/100):m=!1}),a[s]={...r[s],totalAmount:l,gstAmount:p,grandTotal:l+p+g+g*(u/100),preferred:m}}return{...e,totals:a}}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.userService.getUserss().subscribe(e=>{e.find(r=>r._id===this.permissions.user._id)?(this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:s=>{console.log(s),this.viewPermission=s.dashboard_permissions[0].ParentChildchecklist[21].childList[0].isSelected,this.addPermission=s.dashboard_permissions[0].ParentChildchecklist[21].childList[1].isSelected,this.editPermission=s.dashboard_permissions[0].ParentChildchecklist[21].childList[2].isSelected,this.deletePermission=s.dashboard_permissions[0].ParentChildchecklist[21].childList[3].isSelected},error:s=>{console.log(s)}}),this.route.params.subscribe(s=>{s.id&&this.httpService.GET(`${_.bG}`,{_id:s.id}).subscribe({next:l=>{this.details=l.data.details,console.log("checking the API",this.details),this.patchData(l.data.details)}})})):(this.snack.notify("Invalid Credentials - User Details not Valid",1),this.auth.removeUser(),this.userService.updateLogin("logout"),this.router.navigate(["/login"]))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.F0),t.Y36(U.s),t.Y36(y.o),t.Y36(c.qu),t.Y36(f.gz),t.Y36(it.uw),t.Y36(q.eN),t.Y36(w.e),t.Y36(k.f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-rate-approval-update"]],decls:114,vars:29,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","50px","margin-left","20px"],["src","./assets/images/RA.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],[2,"margin-top","20px","margin-left","30px","display","flex"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],["src","./assets/images/rc.svg"],["src","./assets/images/app.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/po.svg"],[3,"formGroup"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","10px","max-width","100%"],[1,"flex-div",2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],["appearance","outline"],["placeholder","Enter title","formControlName","title","matInput",""],["matInput","","formControlName","date","placeholder","Auto generate Request Date","readonly","",3,"matDatepicker"],["matSuffix","",3,"for"],["date",""],[1,"flex-div","custom-form-group"],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],[1,"star"],[1,"custom-form-control"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by","readonly","",3,"matDatepicker"],["requiredByStartDate",""],["matInput","","formControlName","handle_by"],[3,"value",4,"ngFor","ngForOf"],["id","site","placeholder","Select site","formControlName","site"],[1,"flex-div",2,"display","flex","flex-direction","column","margin-left","10px"],[2,"color","#4272BF","margin-bottom","10px"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group"],[1,"example-radio-button",2,"margin-right","10px",3,"value"],[1,"example-radio-button",3,"value"],[4,"ngIf"],["style","margin: 20px; display: inline-block;",4,"ngFor","ngForOf"],[1,"text-area-section"],["name","","id","","cols","30","rows","5","formControlName","remarks"],[1,"button-list"],[4,"ngIf","ngIfElse"],["noAddPermission",""],["noDeletePermission",""],["noEditPermission",""],[3,"value"],[1,"scroll-container"],[1,"scrollable-content"],[1,"table","table-bordered"],["rowspan","2",2,"text-align","center","width","300px","vertical-align","middle"],["rowspan","2",2,"text-align","center","width","250px","vertical-align","middle"],["rowspan","2",2,"text-align","center","vertical-align","middle"],[4,"ngFor","ngForOf"],["colspan","8",2,"border-color","white","border-right","0.5px solid"],["colspan","2",2,"text-align","right","border","0.5px solid"],[2,"border-color","white"],["colspan","3",2,"text-align","center","vertical-align","middle",3,"ngClass"],["type","checkbox",3,"checked","change"],[2,"text-align","center","vertical-align","middle"],[2,"text-align","center","width","300px","vertical-align","middle"],[2,"text-align","center","width","250px","vertical-align","middle"],[2,"text-align","center","vertical-align","middle",3,"ngClass"],["type","checkbox",2,"margin-top","10px","transform","scale(1.2)","width","15px","height","15px",3,"checked","change"],["colspan","3",2,"height","50px","border","0.5px solid"],["colspan","3",2,"height","40px","border","0.5px solid"],["colspan","3",2,"height","50px","border","0.5px solid",3,"ngClass"],[2,"margin","20px","display","inline-block"],["target","_blank","rel","noopener noreferrer",2,"border","1px solid","padding","10px 20px","background-color","#007BFF","color","white","text-decoration","none","border-radius","5px","font-size","15px","margin-right","10px",3,"href"],[1,"p-btns-button",3,"disabled","click"],["disabled","",1,"p-btns-button"]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Rate Approval "),t.qZA(),t._UZ(5,"span",4),t.qZA(),t.TgZ(6,"div"),t._UZ(7,"hr",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div"),t._UZ(12,"img",9),t.qZA(),t.TgZ(13,"span",10),t._uU(14,"Purchase\xa0request"),t.qZA(),t.TgZ(15,"div"),t._UZ(16,"mat-divider",11),t.qZA()(),t.TgZ(17,"div",12)(18,"div"),t._UZ(19,"img",13),t.qZA(),t.TgZ(20,"span",10),t._uU(21,"Approvals"),t.qZA(),t.TgZ(22,"div"),t._UZ(23,"mat-divider",11),t.qZA()(),t.TgZ(24,"div",12)(25,"div"),t._UZ(26,"img",14),t.qZA(),t.TgZ(27,"span",10),t._uU(28,"Rate\xa0Comparative"),t.qZA(),t.TgZ(29,"div"),t._UZ(30,"mat-divider",11),t.qZA()(),t.TgZ(31,"div",12)(32,"div"),t._UZ(33,"img",15),t.qZA(),t.TgZ(34,"span",16),t._uU(35,"Rate\xa0Approvals"),t.qZA(),t.TgZ(36,"div"),t._UZ(37,"mat-divider",11),t.qZA()(),t.TgZ(38,"div",12)(39,"div"),t._UZ(40,"img",17),t.qZA(),t.TgZ(41,"span",10),t._uU(42,"Purchase\xa0orders"),t.qZA()()()(),t.TgZ(43,"form",18)(44,"mat-card",19)(45,"div",20)(46,"div",21)(47,"label",22),t._uU(48,"Request title "),t.qZA(),t.TgZ(49,"mat-form-field",23),t._UZ(50,"input",24),t.qZA()(),t.TgZ(51,"div",21)(52,"label",22),t._uU(53,"Request date"),t.qZA(),t.TgZ(54,"mat-form-field",23),t._UZ(55,"input",25)(56,"mat-datepicker-toggle",26)(57,"mat-datepicker",null,27),t.qZA()(),t.TgZ(59,"div",28)(60,"label",29),t._uU(61," Required by "),t.TgZ(62,"span",30),t._uU(63,"*"),t.qZA()(),t.TgZ(64,"div",31)(65,"mat-form-field",23),t._UZ(66,"input",32)(67,"mat-datepicker-toggle",26)(68,"mat-datepicker",null,33),t.qZA()()(),t.TgZ(70,"div",28)(71,"label",29),t._uU(72," Handle by "),t.TgZ(73,"span",30),t._uU(74,"*"),t.qZA()(),t.TgZ(75,"div",31)(76,"mat-form-field",23)(77,"mat-select",34),t.YNc(78,st,2,2,"mat-option",35),t.qZA()()()(),t.TgZ(79,"div",21)(80,"label",22),t._uU(81,"Site name "),t.TgZ(82,"span",30),t._uU(83,"*"),t.qZA()(),t.TgZ(84,"mat-form-field",23)(85,"mat-select",36),t.YNc(86,lt,2,2,"mat-option",35),t.qZA()()(),t.TgZ(87,"div",37)(88,"label",38),t._uU(89,"Local Purchase "),t.TgZ(90,"span",30),t._uU(91,"*"),t.qZA()(),t.TgZ(92,"mat-radio-group",39)(93,"mat-radio-button",40),t._uU(94," Yes "),t.qZA(),t.TgZ(95,"mat-radio-button",41),t._uU(96," No "),t.qZA()()()()(),t.YNc(97,At,70,9,"div",42),t.YNc(98,Ct,3,2,"div",43),t.ALo(99,"keyvalue"),t.TgZ(100,"div",44)(101,"label",22),t._uU(102,"Remarks "),t.qZA(),t._UZ(103,"textarea",45),t.qZA(),t.TgZ(104,"div",46),t.YNc(105,qt,4,3,"ng-container",47),t.YNc(106,wt,3,0,"ng-template",null,48,t.W1O),t.YNc(108,Ot,4,3,"ng-container",47),t.YNc(109,It,3,0,"ng-template",null,49,t.W1O),t.YNc(111,Mt,4,3,"ng-container",47),t.YNc(112,Qt,2,1,"ng-template",null,50,t.W1O),t.qZA()()),2&e){const r=t.MAs(58),a=t.MAs(69),s=t.MAs(107),l=t.MAs(110),p=t.MAs(113);t.xp6(10),t.Q6J("routerLink",t.DdM(24,Jt)),t.xp6(7),t.Q6J("routerLink",t.DdM(25,St)),t.xp6(7),t.Q6J("routerLink",t.DdM(26,Ft)),t.xp6(7),t.Q6J("routerLink",t.DdM(27,Yt)),t.xp6(7),t.Q6J("routerLink",t.DdM(28,Vt)),t.xp6(5),t.Q6J("formGroup",n.purchaseRequestForm),t.xp6(12),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(10),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(11),t.Q6J("ngForOf",n.users),t.xp6(8),t.Q6J("ngForOf",n.siteList),t.xp6(7),t.Q6J("value","yes"),t.xp6(2),t.Q6J("value","no"),t.xp6(2),t.Q6J("ngIf",n.vendorItemsTables&&n.vendorItemsTables.length>0),t.xp6(1),t.Q6J("ngForOf",t.lcZ(99,22,n.files)),t.xp6(7),t.Q6J("ngIf",n.editPermission||n.addPermission)("ngIfElse",s),t.xp6(3),t.Q6J("ngIf",n.deletePermission)("ngIfElse",l),t.xp6(3),t.Q6J("ngIf",n.editPermission)("ngIfElse",p)}},dependencies:[h.mk,h.sg,h.O5,f.rH,f.Od,P.ey,v.KE,v.R9,at.a8,x.Mq,x.hl,x.nW,O.d,I.Nt,Q.VQ,Q.U0,L.gD,R.Ye,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,h.Nd],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.lowest-amount[_ngcontent-%COMP%]{color:brown;font-weight:700}.selected-td[_ngcontent-%COMP%]{background-color:#006400;color:#fff}.preferred-grand-total[_ngcontent-%COMP%]{color:#006400;font-weight:700;font-size:18px}.preferred-vendor[_ngcontent-%COMP%]{background-color:#006400;font-weight:700}.lowest-rate[_ngcontent-%COMP%], .lowest-grand-total[_ngcontent-%COMP%]{color:brown;font-size:18px;font-weight:700}.scroll-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto;white-space:nowrap}.scrollable-content[_ngcontent-%COMP%]{display:inline-block;min-width:min-content}.highlight[_ngcontent-%COMP%]{background-color:#fc0;border:3px solid #ffcc00;border-radius:5px;color:#000}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.requests[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:40px;width:250px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;flex:1}.requests[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.2)}.requests[_ngcontent-%COMP%]   div.active[_ngcontent-%COMP%]{background-color:#233a61!important;color:#fff}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:100%;height:auto;font-family:Poppins;box-shadow:none;border:1px solid #ccc;border-radius:4px}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;font-size:14px;margin-bottom:20px;margin-right:20px;margin-top:8px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}form[_ngcontent-%COMP%]{padding:10px 20px}.scroll-bar1[_ngcontent-%COMP%]{margin-top:50px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background-color:"Transparent"}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 0 20px;float:right;gap:10px}.text-area-section[_ngcontent-%COMP%]{width:100%;height:auto;margin:30px 0 0}.text-area-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:100%}.flex-div[_ngcontent-%COMP%]{width:31%}.mat-form-field[_ngcontent-%COMP%]{display:block}.pending[_ngcontent-%COMP%]{padding:8px;width:120px;background-color:#ccc;color:#333;font-size:14px;font-family:Poppins;height:50px;border:none}.p-btns[_ngcontent-%COMP%]{background:#233a61;padding:5px 10px;border-radius:4px;font-size:12px;cursor:pointer}.p-btns[_ngcontent-%COMP%]:hover{opacity:.7}.p-btns-button[_ngcontent-%COMP%]{background:#233a61;border:1px solid #233a61;padding:7px 40px;border-radius:4px;font-size:12px;cursor:pointer;color:#fff}.p-btns-button[_ngcontent-%COMP%]:hover{opacity:.7}.vendor-wapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:40px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-name-cl[_ngcontent-%COMP%]{padding:6px 15px;background:#233a61;color:#fff}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:rgba(7,59,76,.0509803922);padding:6px 15px;margin-bottom:10px;gap:10px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80px;border:1px solid #ccc;border-radius:2px;padding:5px;outline:none}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-label[_ngcontent-%COMP%]{min-width:144px}input[readonly=true][_ngcontent-%COMP%], input[readonly][_ngcontent-%COMP%], .mat-select-disabled[_ngcontent-%COMP%]{opacity:.6}']}),o})();var Dt=d(9836),jt=d(8898),zt=d(1283);const Et=[{path:"",component:rt},{path:"update/:id",component:Bt}];let $t=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.ez,f.Bz,jt.S,c.UX,Dt.w,zt.Z,[f.Bz.forChild(Et)]]}),o})()}}]);