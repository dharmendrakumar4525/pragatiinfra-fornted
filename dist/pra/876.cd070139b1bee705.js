"use strict";(self.webpackChunkpra=self.webpackChunkpra||[]).push([[876],{1876:(ge,O,d)=>{d.r(O),d.d(O,{PurchaseOrderModule:()=>ue});var g=d(6895),c=d(4006),p=d(8608),f=d(7489),j=d(5439),T=d(2340),t=d(4650),_=d(9299),D=d(2126),U=d(6104),q=d(529),w=d(2894),k=d(4961),F=d(3238),b=d(9549),x=d(9602),P=d(4850),Z=d(7392),M=d(4144),J=d(4385),C=d(3683);function z(r,s){if(1&r&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&r){const e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.label)}}function Q(r,s){if(1&r&&(t.TgZ(0,"td",44),t._uU(1),t._UZ(2,"span",41),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij(" PO No : ",e.po_number,"")}}const E=function(r){return{color:r,width:"500px","font-size":"15px"}};function Y(r,s){if(1&r&&(t.ynx(0),t.TgZ(1,"td",51),t._uU(2),t.qZA(),t._UZ(3,"hr",43),t.BQk()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngStyle",t.VKq(2,E,0!==e.po_files.length?"green":"red")),t.xp6(1),t.hij(" ",0!==e.po_files.length?"Vendor Accepted PO":"Vendor Acceptance Pending"," ")}}const L=function(r){return["/purchase-order/update",r]};function R(r,s){if(1&r&&(t.TgZ(0,"td",52),t._uU(1,"Generate \xa0PO"),t.qZA()),2&r){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,L,e._id))}}const $=function(r){return["/purchase-order/approve",r]};function V(r,s){if(1&r&&(t.TgZ(0,"td",52),t._uU(1,"View\xa0PO"),t.qZA()),2&r){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,$,e._id))}}const N=function(r){return["/purchase-order/details",r]};function G(r,s){if(1&r&&(t.TgZ(0,"td",53),t._uU(1,"Approved Vendors"),t.qZA()),2&r){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,N,e._id))}}function B(r,s){if(1&r&&(t.TgZ(0,"td",54),t._uU(1,"Rejected Rates"),t.qZA()),2&r){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,N,e._id))}}function H(r,s){if(1&r&&(t.TgZ(0,"td",56),t._uU(1,"Revise Rates"),t.qZA()),2&r){const e=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,L,e._id))}}function K(r,s){if(1&r&&(t.ynx(0),t.YNc(1,H,2,3,"td",55),t.BQk()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","revise"==e.status)}}function W(r,s){1&r&&(t.TgZ(0,"td",58),t._uU(1,"No Permission TO Revise Rates"),t.qZA())}function X(r,s){if(1&r&&t.YNc(0,W,2,0,"td",57),2&r){const e=t.oxw().$implicit;t.Q6J("ngIf","revise"==e.status)}}function tt(r,s){if(1&r&&(t.TgZ(0,"tr")(1,"td",40),t._uU(2," Request no : "),t.TgZ(3,"span",41),t._uU(4),t.qZA()(),t.YNc(5,Q,3,1,"td",42),t._UZ(6,"hr",43),t.TgZ(7,"td",44),t._uU(8),t._UZ(9,"span",41),t.qZA(),t.TgZ(10,"td",44),t._uU(11),t._UZ(12,"span",41),t.qZA(),t._UZ(13,"hr",43),t.YNc(14,Y,4,4,"ng-container",45),t.YNc(15,R,2,3,"td",46),t.YNc(16,V,2,3,"td",46),t.YNc(17,G,2,3,"td",47),t.YNc(18,B,2,3,"td",48),t.YNc(19,K,2,1,"ng-container",16),t.YNc(20,X,1,1,"ng-template",null,49,t.W1O),t.TgZ(22,"td",50)(23,"mat-icon"),t._uU(24," arrow_forward_ios "),t.qZA()()()),2&r){const e=s.$implicit,i=t.MAs(21),n=t.oxw(2);t.xp6(4),t.Oqu(e.purchase_request_number),t.xp6(1),t.Q6J("ngIf","pending"!==e.status&&"revise"!==e.status),t.xp6(3),t.hij(" Title : ",e.title,""),t.xp6(3),t.hij(" Site : ",e.delivery_address.company_name,""),t.xp6(3),t.Q6J("ngIf","approved"===e.status),t.xp6(1),t.Q6J("ngIf","pending"==e.status),t.xp6(1),t.Q6J("ngIf","ApprovalPending"==e.status),t.xp6(1),t.Q6J("ngIf","approved"==e.status),t.xp6(1),t.Q6J("ngIf","rejected"==e.status),t.xp6(1),t.Q6J("ngIf",n.editPermission)("ngIfElse",i)}}function et(r,s){1&r&&(t.TgZ(0,"div",59),t._UZ(1,"img",60),t.TgZ(2,"span"),t._uU(3," No record found"),t.qZA()())}function it(r,s){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",18)(2,"div",19)(3,"mat-form-field",20)(4,"mat-icon",21),t._uU(5,"search"),t.qZA(),t.TgZ(6,"input",22),t.NdJ("input",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.search(n,"title"))}),t.qZA()()(),t.TgZ(7,"div",23)(8,"div",24)(9,"span"),t._uU(10,"Filter\xa0by"),t.qZA()(),t.TgZ(11,"div")(12,"mat-form-field",25)(13,"input",26),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(16);return t.KtG(n.open())})("dateChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.dateFilter(n))}),t.qZA(),t._UZ(14,"mat-datepicker-toggle",27)(15,"mat-datepicker",null,28),t.qZA()()(),t.TgZ(17,"div",23)(18,"div",29)(19,"span"),t._uU(20,"Filter\xa0by"),t.qZA()(),t.TgZ(21,"div")(22,"mat-form-field",25)(23,"input",30),t.NdJ("input",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.search(n,"site"))}),t.qZA()()()(),t.TgZ(24,"div",23)(25,"div",29)(26,"span"),t._uU(27,"Filter by Status"),t.qZA()(),t.TgZ(28,"div",31)(29,"mat-form-field",32)(30,"mat-select",33),t.NdJ("selectionChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.onStatusChange(n))}),t.YNc(31,z,2,2,"mat-option",34),t.qZA()()()()(),t.TgZ(32,"div",35)(33,"table",36)(34,"tbody"),t.YNc(35,tt,25,11,"tr",37),t.qZA()(),t.YNc(36,et,4,0,"div",38),t.qZA(),t.BQk()}if(2&r){const e=t.MAs(16),i=t.oxw();t.xp6(13),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e),t.xp6(16),t.Q6J("formControl",i.statusOption),t.xp6(1),t.Q6J("ngForOf",i.statusList),t.xp6(4),t.Q6J("ngForOf",i.rateComparativeList),t.xp6(1),t.Q6J("ngIf",!(i.rateComparativeList&&i.rateComparativeList.length>0))}}function nt(r,s){1&r&&(t.TgZ(0,"h3",61),t._uU(1,"You don't have permissions to view."),t.qZA())}const ot=function(){return["/procurement"]},rt=function(){return["/procurement/prlist"]},at=function(){return["/rate-comparative"]},st=function(){return["/rate-approval"]},lt=function(){return["/purchase-order"]};let dt=(()=>{class r{constructor(e,i,n,a,o,l){this.router=e,this.httpService=i,this.snack=n,this.http=a,this.auth=o,this.userService=l,this.apiUrl=p.TK,this.statusOption=new c.NI("pending"),this.statusList=[{value:"pending",label:"Generate PO"},{value:"ApprovalPending",label:"Pending PO"},{value:"approved",label:"Approved PO"},{value:"rejected",label:"Rejected PO"},{value:"revise",label:"Revise PO"}],this.filter_by="status",this.filter_value="pending",this.requestType="new",this.originalRateComparativeList=[],this.purchaseList=[],this.purchaseOrderList=[],this.purchase_request_number=[],this.getList({filter_by:this.filter_by,filter_value:this.filter_value})}getList(e){this.httpService.GET(p.TK,e).subscribe({next:i=>{i.data.forEach(n=>{n.date=j(n.updated_at).format("DD-MM-YYYY")}),this.originalRateComparativeList=i.data,this.rateComparativeList=i.data,console.log("this.originalRateComparativeList",this.originalRateComparativeList)},error:i=>{if(i.errors&&!(0,f.isEmpty)(i.errors)){let n="<ul>";for(let a in i.errors)n+=`<li>${i.errors[a][0]}</li>`;n+="</ul>",this.snack.notifyHtml(n,2)}else this.snack.notify(i.message,2)}})}onStatusChange(e){this.getList({filter_by:this.filter_by,filter_value:e.value})}dateFilter(e){this.originalRateComparativeList&&this.originalRateComparativeList.length>0&&(this.rateComparativeList=e.value?this.originalRateComparativeList.filter(i=>new Date(i.date)==new Date(e.value)):this.originalRateComparativeList)}search(e,i){this.originalRateComparativeList&&this.originalRateComparativeList.length>0&&(this.rateComparativeList="site"==i?e.target.value?this.originalRateComparativeList.filter(n=>n.siteData.site_name.toLowerCase().includes(e.target.value.toLowerCase())):this.originalRateComparativeList:e.target.value?this.originalRateComparativeList.filter(n=>n.title.toLowerCase().includes(e.target.value.toLowerCase())):this.originalRateComparativeList)}getReqNO(){const e=this.http.get(`${T.N.api_path}${p.Fj}`);this.httpService.multipleRequests([e],{}).subscribe(n=>{n&&(this.purchaseList=n[0].data)});const i=this.http.get(`${T.N.api_path}${p.TK}`);this.httpService.multipleRequests([i],{}).subscribe(n=>{n&&(this.purchaseOrderList=n[0].data)})}reqNo(e){return this.purchaseList.filter(n=>n.title===e)[0].purchase_request_number}poNo(e){return this.purchaseOrderList.filter(a=>a.billing_address.company_name.includes(e.code)).length}ngOnInit(){this.getReqNO(),this.permissions=JSON.parse(localStorage.getItem("loginData")),this.userService.getUserss().subscribe(e=>{e.find(n=>n._id===this.permissions.user._id)?this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:o=>{this.viewPermission=o.dashboard_permissions[0].ParentChildchecklist[22].childList[0].isSelected,this.editPermission=o.dashboard_permissions[0].ParentChildchecklist[22].childList[2].isSelected},error:o=>{console.log(o)}}):(this.snack.notify("Invalid Credentials - User Details not Valid",1),this.auth.removeUser(),this.userService.updateLogin("logout"),this.router.navigate(["/login"]))})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(_.F0),t.Y36(D.s),t.Y36(U.o),t.Y36(q.eN),t.Y36(w.e),t.Y36(k.f))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-purchase-order-list"]],decls:45,vars:12,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","50px","margin-left","20px"],["src","./assets/images/POL.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],["src","./assets/images/rc.svg"],["src","./assets/images/podown.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],[4,"ngIf","ngIfElse"],["noView",""],[2,"display","flex","flex-direction","row","gap","10px"],[2,"margin-left","40px","width","20%","margin-top","30px"],["appearance","outline",1,"searchbar"],["matSuffix",""],["matInput","","type","search","placeholder","search title",1,"search-input",3,"input"],[2,"margin-top","30px","display","flex","gap","10px"],[2,"margin-top","15px","color","#94A3B8","margin-left","40px"],["appearance","outline",1,"datebar"],["matInput","","placeholder","Date",3,"matDatepicker","click","dateChange"],["matSuffix","",3,"for"],["startPicker",""],[2,"margin-top","15px","color","#94A3B8"],["matInput","","placeholder","Site",3,"input"],[1,"custom-form-control",2,"width","50%"],["appearance","outline",2,"width","100%"],[3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"scroll-bar1",2,"width","93%"],[2,"direction","ltr !important","margin-top","-20px"],[4,"ngFor","ngForOf"],["class","no-record-found",4,"ngIf"],[3,"value"],[2,"color","#4272BF","width","200px","text-align","left","padding","10px","font-size","15px"],[2,"color","#000000"],["style","color: #4272BF;width:300px;text-align: left; padding: 10px;font-size: 15px;",4,"ngIf"],[2,"border","1px solid #D9D9D9","height","30px"],[2,"color","#4272BF","width","300px","text-align","left","padding","10px","font-size","15px"],[4,"ngIf"],["style","background-color: #233A61;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],["style","background-color: #54AA52;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],["style","background-color: #C7323B;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],["noEditPermission",""],[2,"width","100px"],[3,"ngStyle"],[2,"background-color","#233A61","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],[2,"background-color","#54AA52","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],[2,"background-color","#C7323B","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],["style","background-color: #ECD172;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],[2,"background-color","#ECD172","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],["style","background-color: #ECD172;color:#fff;width:200px;font-size: 14px;cursor: pointer;","disabled","",4,"ngIf"],["disabled","",2,"background-color","#ECD172","color","#fff","width","200px","font-size","14px","cursor","pointer"],[1,"no-record-found"],["src","./assets/images/inbox_empty.png","alt",""],[2,"display","flex","justify-content","center","margin-top","2%","font-size","160%","font-weight","bolder","color","grey"]],template:function(e,i){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Purchase Order"),t.qZA(),t._UZ(5,"span",4),t.qZA(),t.TgZ(6,"div"),t._UZ(7,"hr",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7)(10,"div"),t._UZ(11,"img",8),t.qZA(),t.TgZ(12,"span",9),t._uU(13,"Purchase\xa0request"),t.qZA(),t.TgZ(14,"div"),t._UZ(15,"mat-divider",10),t.qZA()(),t.TgZ(16,"div",11)(17,"div"),t._UZ(18,"img",12),t.qZA(),t.TgZ(19,"span",9),t._uU(20,"Approvals"),t.qZA(),t.TgZ(21,"div"),t._UZ(22,"mat-divider",10),t.qZA()(),t.TgZ(23,"div",11)(24,"div"),t._UZ(25,"img",13),t.qZA(),t.TgZ(26,"span",9),t._uU(27,"Rate\xa0Comparative"),t.qZA(),t.TgZ(28,"div"),t._UZ(29,"mat-divider",10),t.qZA()(),t.TgZ(30,"div",11)(31,"div"),t._UZ(32,"img",12),t.qZA(),t.TgZ(33,"span",9),t._uU(34,"Rate\xa0Approvals"),t.qZA(),t.TgZ(35,"div"),t._UZ(36,"mat-divider",10),t.qZA()(),t.TgZ(37,"div",11)(38,"div"),t._UZ(39,"img",14),t.qZA(),t.TgZ(40,"span",15),t._uU(41,"Purchase\xa0orders"),t.qZA()()(),t.YNc(42,it,37,6,"ng-container",16),t.YNc(43,nt,2,0,"ng-template",null,17,t.W1O)),2&e){const n=t.MAs(44);t.xp6(9),t.Q6J("routerLink",t.DdM(7,ot)),t.xp6(7),t.Q6J("routerLink",t.DdM(8,rt)),t.xp6(7),t.Q6J("routerLink",t.DdM(9,at)),t.xp6(7),t.Q6J("routerLink",t.DdM(10,st)),t.xp6(7),t.Q6J("routerLink",t.DdM(11,lt)),t.xp6(5),t.Q6J("ngIf",i.viewPermission)("ngIfElse",n)}},dependencies:[_.rH,_.Od,g.sg,g.O5,g.PC,F.ey,b.KE,b.R9,x.Mq,x.hl,x.nW,P.d,Z.Hw,M.Nt,J.gD,C.Ye,c.JJ,c.oH],styles:[".mat-form-field-appearance-outline .mat-form-field-infix{padding:.6em;width:250px}mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}input[type=text][_ngcontent-%COMP%]{width:60%;border-radius:8px;padding:12px 20px;margin:8px 0;box-sizing:border-box;border:.5px solid #94A3B8;transition:.5s;outline:none;font-family:Poppins;font-size:15px}.requests[_ngcontent-%COMP%]{height:40px;width:1120px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:15px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:15px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:15px;display:flex;align-items:center;justify-content:center}.searchbar[_ngcontent-%COMP%]{width:100%;border-radius:20px;font-family:Poppins}.datebar[_ngcontent-%COMP%]{width:180px;border-radius:20px;font-family:Poppins}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:separate;border-spacing:0 25px;text-align:left;width:100%;font-size:12px;margin-left:30px;margin-bottom:20px;margin-right:-10px}td[_ngcontent-%COMP%]{border:none;text-align:center;padding:8px 1px;color:#233a61;font-style:normal;font-size:medium}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f4f4f5!important}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f4f4f5!important}.scroll-bar1[_ngcontent-%COMP%]{height:600px;width:93%;margin-left:20px;margin-bottom:100px;margin-top:10px;overflow:auto;direction:rtl;overflow-x:hidden}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1E293B;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.no-record-found[_ngcontent-%COMP%]{text-align:center;display:flex;gap:10px;flex-direction:column;align-items:center;justify-content:center}.no-record-found[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:188px}"]}),r})();var pt=d(9836),ct=d(8898),ut=d(1283),I=d(5861),gt=d(164),_t=d(2053),mt=d(8748),ht=d(3900),ft=d(4128),xt=d(9646),v=d(5938);function vt(r,s){if(1&r&&(t.ynx(0),t._uU(1),t.BQk()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij(" (",e.item.tax.amount,"%) ")}}function bt(r,s){if(1&r&&(t.TgZ(0,"tr",54)(1,"td",55),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td",56),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td",56),t._uU(16),t.qZA(),t.TgZ(17,"td",56),t._uU(18),t.qZA(),t.TgZ(19,"td",56),t.YNc(20,vt,2,1,"ng-container",57),t.qZA(),t.TgZ(21,"td",56),t._uU(22),t.qZA(),t.TgZ(23,"td",56),t._uU(24),t.qZA()()),2&r){const e=s.$implicit,i=s.index,n=t.oxw(3);t.xp6(2),t.hij(" ",i+1," "),t.xp6(2),t.hij(" ",e.item.item_name," "),t.xp6(2),t.hij(" ",e.item.specification," "),t.xp6(2),t.hij(" ",e.item.hsnCode," "),t.xp6(2),t.hij(" ",e.item.qty," "),t.xp6(2),t.hij(" ",e.uom," "),t.xp6(2),t.Oqu(n.getBrandNamesByIds(e.item.brandName)),t.xp6(2),t.hij(" ",e.Rate," "),t.xp6(2),t.hij(" ",e.SubTotalAmount," "),t.xp6(2),t.Q6J("ngIf",e.item.tax&&e.item.tax.amount),t.xp6(2),t.hij(" ",e.Total," "),t.xp6(2),t.hij(" ",e.remarks," ")}}function Zt(r,s){if(1&r&&(t.TgZ(0,"h4",62),t._uU(1),t.qZA()),2&r){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.getVendorNamesString(e.pendingVendorFiles)," Quotation file Missing, Upload the File to Create PO ")}}function At(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"button",63),t.NdJ("click",function(){t.CHM(e),t.oxw();const n=t.MAs(5);return t.KtG(n.click())}),t._uU(1," Choose Files "),t.qZA()}}function yt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"li",66),t._uU(1),t.TgZ(2,"button",67),t.NdJ("click",function(){const a=t.CHM(e).$implicit,o=t.oxw(5);return t.KtG(o.removeFile(a))}),t._uU(3," x "),t.qZA()()}if(2&r){const e=s.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function Tt(r,s){if(1&r&&(t.TgZ(0,"div")(1,"ul",64),t.YNc(2,yt,4,1,"li",65),t.qZA()()),2&r){const e=t.oxw(4);t.xp6(2),t.Q6J("ngForOf",e.files)}}function Dt(r,s){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div")(2,"div"),t.YNc(3,Zt,2,1,"h4",58),t.TgZ(4,"input",59,60),t.NdJ("change",function(n){t.CHM(e);const a=t.oxw(3);return t.KtG(a.onFilesSelected(n))}),t.qZA(),t.YNc(6,At,2,0,"button",61),t.YNc(7,Tt,3,1,"div",57),t.qZA()(),t.BQk()}if(2&r){const e=t.oxw(3);t.xp6(3),t.Q6J("ngIf",e.pendingVendorFiles&&e.pendingVendorFiles.length>0),t.xp6(3),t.Q6J("ngIf",e.pendingVendorFiles&&e.pendingVendorFiles.length>0),t.xp6(1),t.Q6J("ngIf",e.files)}}function Ut(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"button",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.uploadFiles())}),t._uU(1," Upload Files "),t.qZA()}}function Pt(r,s){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",69),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.createOrder())}),t._uU(2," Generate PO "),t.qZA(),t.BQk()}}function Ct(r,s){1&r&&(t.TgZ(0,"button",70),t._uU(1," No Permission to Approve "),t.qZA())}function Ot(r,s){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",71),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.updateStatus("revise"))}),t._uU(2," Revise "),t.qZA(),t.BQk()}}function qt(r,s){1&r&&(t.TgZ(0,"button",72),t._uU(1," No Permission To Revise "),t.qZA())}function wt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"span",23),t._uU(5,"Billing Address"),t.qZA(),t.TgZ(6,"mat-icon",24),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.billingAddressPopup())}),t._uU(7,"border_color"),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"div",25)(10,"span")(11,"b"),t._uU(12,"Company Name: "),t.qZA(),t._uU(13),t.qZA(),t.TgZ(14,"span")(15,"b"),t._uU(16,"Address: "),t.qZA(),t._uU(17),t._UZ(18,"br"),t._uU(19),t.qZA(),t.TgZ(20,"span")(21,"b"),t._uU(22,"GSTIN: "),t.qZA(),t._uU(23),t.qZA(),t.TgZ(24,"span")(25,"b"),t._uU(26,"PAN: "),t.qZA(),t._uU(27),t.qZA(),t.TgZ(28,"span")(29,"b"),t._uU(30,"Contact Person: "),t.qZA(),t._uU(31),t.qZA()()(),t.TgZ(32,"div",26)(33,"span",23),t._uU(34,"Delivery Address"),t.qZA(),t._UZ(35,"br"),t.TgZ(36,"div",27)(37,"span")(38,"b"),t._uU(39,"Date"),t.qZA(),t._uU(40),t.ALo(41,"date"),t.qZA(),t.TgZ(42,"span")(43,"b"),t._uU(44,"Valid From"),t.qZA(),t._uU(45,": "),t.TgZ(46,"mat-form-field")(47,"input",28),t.NdJ("focus",function(){t.CHM(e);const n=t.MAs(50);return t.KtG(n.open())}),t.qZA(),t._UZ(48,"mat-datepicker-toggle",29)(49,"mat-datepicker",null,30),t.qZA()(),t.TgZ(51,"span")(52,"b"),t._uU(53,"Valid Upto"),t.qZA(),t._uU(54,": "),t.TgZ(55,"mat-form-field")(56,"input",28),t.NdJ("focus",function(){t.CHM(e);const n=t.MAs(59);return t.KtG(n.open())}),t.qZA(),t._UZ(57,"mat-datepicker-toggle",29)(58,"mat-datepicker",null,31),t.qZA()(),t.TgZ(60,"span")(61,"b"),t._uU(62,"PO NO"),t.qZA(),t._uU(63),t._UZ(64,"input",32),t.qZA(),t.TgZ(65,"span")(66,"b"),t._uU(67,"Site Address"),t.qZA()(),t.TgZ(68,"span"),t._uU(69),t.qZA(),t.TgZ(70,"span")(71,"b"),t._uU(72,"Contact Person"),t.qZA(),t._uU(73),t._UZ(74,"input",33),t.qZA()()()(),t.TgZ(75,"div",34)(76,"span",23),t._uU(77,"To,"),t.qZA(),t._UZ(78,"br"),t.TgZ(79,"div",35)(80,"div",36)(81,"span",37)(82,"b"),t._uU(83,"Vendor Name: "),t.qZA(),t._uU(84),t._UZ(85,"br"),t.TgZ(86,"span")(87,"b"),t._uU(88,"Contact Person: "),t.qZA(),t.TgZ(89,"span"),t._uU(90),t.qZA()(),t._UZ(91,"br"),t.TgZ(92,"span")(93,"b"),t._uU(94,"Mobile No.: "),t.qZA(),t.TgZ(95,"span"),t._uU(96),t.qZA()(),t._UZ(97,"br"),t.TgZ(98,"span")(99,"b"),t._uU(100,"Email Id: "),t.qZA(),t.TgZ(101,"span"),t._uU(102),t.qZA()(),t._UZ(103,"br"),t.TgZ(104,"span")(105,"b"),t._uU(106,"Vendor Address: "),t.qZA(),t.TgZ(107,"span"),t._uU(108),t.qZA()()(),t.TgZ(109,"span")(110,"b",38),t._uU(111,"GSTIN: "),t.qZA(),t.TgZ(112,"span"),t._uU(113),t.qZA()(),t.TgZ(114,"span")(115,"b",38),t._uU(116,"PAN: "),t.qZA(),t.TgZ(117,"span"),t._uU(118),t.qZA()()(),t.TgZ(119,"div",39)(120,"p"),t._uU(121),t.qZA(),t.TgZ(122,"textarea",40),t._uU(123,"              "),t.qZA()()()()(),t.TgZ(124,"div",41)(125,"table",42)(126,"tr")(127,"th"),t._uU(128,"Item\xa0No"),t.qZA(),t.TgZ(129,"th"),t._uU(130,"Item\xa0Name"),t.qZA(),t.TgZ(131,"th"),t._uU(132,"Specification"),t.qZA(),t.TgZ(133,"th"),t._uU(134,"HSN Code"),t.qZA(),t.TgZ(135,"th"),t._uU(136,"Quantity"),t.qZA(),t.TgZ(137,"th"),t._uU(138,"UOM"),t.qZA(),t.TgZ(139,"th"),t._uU(140,"Brand Name"),t.qZA(),t.TgZ(141,"th"),t._uU(142,"Rate"),t.qZA(),t.TgZ(143,"th"),t._uU(144,"Sub Total"),t.qZA(),t.TgZ(145,"th"),t._uU(146,"Tax"),t.qZA(),t.TgZ(147,"th"),t._uU(148,"Total"),t.qZA(),t.TgZ(149,"th"),t._uU(150,"Remarks"),t.qZA()(),t.TgZ(151,"tbody"),t.YNc(152,bt,25,12,"tr",43),t.qZA(),t.TgZ(153,"tr")(154,"td",44),t._uU(155," Total\xa0amount "),t.qZA(),t.TgZ(156,"td",44),t._uU(157),t.ALo(158,"currency"),t.qZA()(),t.TgZ(159,"tr")(160,"td",44),t._uU(161," Total\xa0Freight "),t.qZA(),t.TgZ(162,"td",44),t._uU(163),t.ALo(164,"currency"),t.qZA()(),t.TgZ(165,"tr")(166,"td",44),t._uU(167," GST\xa0amount "),t.qZA(),t.TgZ(168,"td",44),t._uU(169),t.ALo(170,"currency"),t.qZA()(),t.TgZ(171,"tr")(172,"td",44),t._uU(173," Grand\xa0total "),t.qZA(),t.TgZ(174,"td",45),t._uU(175),t.ALo(176,"currency"),t.qZA()()()(),t.TgZ(177,"div",46)(178,"div"),t._uU(179," Vendor terms & other conditions "),t.TgZ(180,"mat-icon",47),t._uU(181,"border_color"),t.qZA()(),t.TgZ(182,"textarea",48),t._uU(183,"        "),t.qZA()(),t.TgZ(184,"div",49)(185,"div"),t.YNc(186,Dt,8,3,"ng-container",16),t.qZA(),t.TgZ(187,"div",50),t.YNc(188,Ut,2,0,"button",51),t.YNc(189,Pt,3,0,"ng-container",16),t.YNc(190,Ct,2,0,"ng-template",null,52,t.W1O),t.YNc(192,Ot,3,0,"ng-container",16),t.YNc(193,qt,2,0,"ng-template",null,53,t.W1O),t.qZA()()()}if(2&r){const e=t.MAs(50),i=t.MAs(59),n=t.MAs(191),a=t.MAs(194),o=t.oxw(2);t.xp6(13),t.Oqu(null==o.poDetails||null==o.poDetails.billing_address?null:o.poDetails.billing_address.company_name),t.xp6(4),t.AsE(" ",null==o.poDetails||null==o.poDetails.billing_address?null:o.poDetails.billing_address.street_address," ",null==o.poDetails||null==o.poDetails.billing_address?null:o.poDetails.billing_address.street_address2," "),t.xp6(2),t.lnq("",null==o.poDetails||null==o.poDetails.billing_address?null:o.poDetails.billing_address.city," ",null==o.poDetails||null==o.poDetails.billing_address?null:o.poDetails.billing_address.state," ",null==o.poDetails||null==o.poDetails.billing_address?null:o.poDetails.billing_address.zip_code," "),t.xp6(4),t.Oqu(null==o.poDetails||null==o.poDetails.billing_address?null:o.poDetails.billing_address.gst_number),t.xp6(4),t.Oqu(null==o.poDetails||null==o.poDetails.billing_address?null:o.poDetails.billing_address.pan_card),t.xp6(4),t.Oqu(null==o.poDetails||null==o.poDetails.billing_address?null:o.poDetails.billing_address.contact_person),t.xp6(9),t.hij(": ",t.xi3(41,59,o.poDetails.date,"dd-MM-yyyy"),""),t.xp6(7),t.Q6J("formControl",o.StartDate)("max",o.maxDate)("matDatepicker",e),t.xp6(1),t.Q6J("for",e),t.xp6(8),t.Q6J("formControl",o.validityDate)("max",o.maxDate)("matDatepicker",i),t.xp6(1),t.Q6J("for",i),t.xp6(6),t.hij(": ",null==o.poDetails?null:o.poDetails.po_number,""),t.xp6(6),t.xDo("",null==o.poDetails||null==o.poDetails.delivery_address?null:o.poDetails.delivery_address.street_address," ,",null==o.poDetails||null==o.poDetails.delivery_address?null:o.poDetails.delivery_address.street_address2,", ",null==o.poDetails||null==o.poDetails.delivery_address?null:o.poDetails.delivery_address.city,",",null==o.poDetails||null==o.poDetails.delivery_address?null:o.poDetails.delivery_address.state," ,",null==o.poDetails||null==o.poDetails.delivery_address?null:o.poDetails.delivery_address.zip_code," "),t.xp6(4),t.hij(": ",null==o.poDetails||null==o.poDetails.delivery_address?null:o.poDetails.delivery_address.contact_person,""),t.xp6(11),t.hij("",o.poDetails.vendor_detail.vendor_name," "),t.xp6(5),t.Udp("color",""===o.poDetails.vendor_detail.contact_person?"red":"inherit"),t.xp6(1),t.hij(" ",""===o.poDetails.vendor_detail.contact_person?"MISSING":o.poDetails.vendor_detail.contact_person," "),t.xp6(5),t.Udp("color",""===o.poDetails.vendor_detail.phone_number?"red":"inherit"),t.xp6(1),t.hij(" ",""===o.poDetails.vendor_detail.phone_number?"MISSING":o.poDetails.vendor_detail.phone_number," "),t.xp6(5),t.Udp("color",""===o.poDetails.vendor_detail.email?"red":"inherit"),t.xp6(1),t.hij(" ",""===o.poDetails.vendor_detail.email?"MISSING":o.poDetails.vendor_detail.email," "),t.xp6(5),t.Udp("color",""===o.combineAddress(o.poDetails.vendor_detail.address)?"red":"inherit"),t.xp6(1),t.hij(" ",""===o.combineAddress(o.poDetails.vendor_detail.address)?"MISSING":o.combineAddress(o.poDetails.vendor_detail.address)," "),t.xp6(4),t.Udp("color",""===o.poDetails.vendor_detail.gst_number?"red":"inherit"),t.xp6(1),t.hij(" ",""===o.poDetails.vendor_detail.gst_number?"MISSING":o.poDetails.vendor_detail.gst_number," "),t.xp6(4),t.Udp("color",""===o.poDetails.vendor_detail.pan_number?"red":"inherit"),t.xp6(1),t.hij(" ",""===o.poDetails.vendor_detail.pan_number?"MISSING":o.poDetails.vendor_detail.pan_number," "),t.xp6(3),t.Oqu(o.poDetails.vendor_message_header),t.xp6(1),t.Q6J("formControl",o.mail_section),t.xp6(30),t.Q6J("ngForOf",o.poDetails.items),t.xp6(5),t.hij(" ",t.xi3(158,62,o.poDetails.vendors_total[0].subTotal,"INR")," "),t.xp6(6),t.hij(" ",t.xi3(164,65,o.poDetails.vendors_total[0].freightTotal,"INR")," "),t.xp6(6),t.hij(" ",t.xi3(170,68,o.poDetails.vendors_total[0].gstAmount,"INR")," "),t.xp6(6),t.hij(" ",t.xi3(176,71,o.poDetails.vendors_total[0].total,"INR")," "),t.xp6(7),t.Q6J("formControl",o.term_condition),t.xp6(4),t.Q6J("ngIf",o.addPermission||o.editPermission)("ngIfElse",n),t.xp6(2),t.Q6J("ngIf",o.pendingVendorFiles&&o.pendingVendorFiles.length>0),t.xp6(1),t.Q6J("ngIf",o.addPermission||o.editPermission)("ngIfElse",n),t.xp6(3),t.Q6J("ngIf",o.editPermission)("ngIfElse",a)}}function kt(r,s){if(1&r&&(t.ynx(0),t.YNc(1,wt,195,74,"div",18),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.poDetails)}}function Mt(r,s){1&r&&(t.TgZ(0,"h3",73),t._uU(1," You don't have permissions to view. "),t.qZA())}const Lt=function(){return["/procurement"]},Nt=function(){return["/procurement/prlist"]},It=function(){return["/rate-comparative"]},St=function(){return["/rate-approval"]},jt=function(){return["/purchase-order"]};let Ft=(()=>{class r{constructor(e,i,n,a,o,l,u,h,m){this.dialog=e,this.router=i,this.route=n,this.httpService=a,this.snack=o,this.formBuilder=l,this.http=u,this.auth=h,this.userService=m,this.term_condition=new c.NI,this.mail_section=new c.NI,this.validityDate=new c.NI("",[c.kI.required]),this.StartDate=new c.NI("",[c.kI.required]),this.minDate=new Date,this.maxDate=new Date((new Date).setMonth((new Date).getMonth()+12)),this.vendorFiles={},this.fileUploaded=!0,this.purchaseOrderList=[],this.files=[],this.pendingVendorFiles=[]}updateItemsWithDetails(e){this.poDetails.items.map(a=>a.item.item_id);const n=e.reduce((a,o)=>(a[o._id]=o,a),{});this.poDetails.items=this.poDetails.items.map(a=>{const l=n[a.item.item_id]||{};return console.log("checking Details here",l),console.log(a),{...a,item:{...a.item,categoryDetail:l.categoryDetail||{},subCategoryDetail:l.subCategoryDetail||{},uomDetail:l.uomDetail||{},item_name:l.item_name||a.item.item_name,brandName:l.brandName||a.item.brandName,attachment:l.attachment||a.item.attachment}}}),console.log("checkDats",this.poDetails)}updateVendorWithDetails(e){const i=e.find(a=>a.vendor_name===this.poDetails.vendor_detail.vendor_name);if(!i)return console.error("No matching vendor found."),null;this.poDetails.vendor_detail={address:{street_address:i.address.street_address,street_address2:i.address.street_address2,state:i.address.state,city:i.address.city,zip_code:i.address.zip_code,country:i.address.country},contact_person:i.contact_person,phone_number:i.phone_number,gst_number:i.gst_number,pan_number:i.pan_number,email:i.email,payment_terms:i.payment_terms,terms_condition:i.terms_condition,vendor_name:i.vendor_name,dialcode:i.dialcode},console.log(this.poDetails.vendor_detail)}updateSiteWithDetails(e){const i=e.find(a=>a.site_name===this.poDetails.delivery_address.company_name);i?this.poDetails.delivery_address={company_name:i.site_name,site_code:i.code,gst_number:"",pan_card:"",contact_person:i.store_manager,contact_number:i.store_manager_phone_number,email:i.site_manager_email,street_address:i.address.street_address,street_address2:i.address.street_address2,state:i.address.state,city:i.address.city,zip_code:i.address.zip_code,country:i.address.country}:console.error("No matching site found.")}combineAddress(e){const{street_address:i,street_address2:n,city:a,state:o,zip_code:l,country:u}=e;return[i,n,a,o,l,u].filter(m=>m&&""!==m.trim()).join(", ")}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.userService.getUserss().subscribe(e=>{e.find(n=>n._id===this.permissions.user._id)?(this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:o=>{this.viewPermission=o.dashboard_permissions[0].ParentChildchecklist[22].childList[0].isSelected,this.addPermission=o.dashboard_permissions[0].ParentChildchecklist[22].childList[1].isSelected,this.editPermission=o.dashboard_permissions[0].ParentChildchecklist[22].childList[2].isSelected,this.deletePermission=o.dashboard_permissions[0].ParentChildchecklist[22].childList[3].isSelected},error:o=>{console.log(o)}}),Promise.all([this.getBrandList(),this.getItemList(),this.getVendorList(),this.getSiteList()]).then(([o,l,u,h])=>{this.brandList=o,this.ItemList=l,this.vendorList=u,this.siteList=h,this.route.params.subscribe(m=>{m.id&&this.httpService.GET(`${p.TK}/detail`,{_id:m.id}).subscribe(y=>{this.poDetails=y.data,this.getRateApprovalList(y.data.rate_approval_id),console.log("checking rateApproval",this.rateApproval),console.log("check response",y.data),this.mail_section.patchValue(this.poDetails.vendor_message),this.term_condition.patchValue(this.poDetails.terms_condition),this.vendorFiles=y.data.vendor_files,this.updateItemsWithDetails(this.ItemList),this.updateSiteWithDetails(this.siteList),this.updateVendorWithDetails(this.vendorList)})})}).catch(o=>{console.error("Error fetching data",o)})):(this.snack.notify("Invalid Credentials - User Details not Valid",1),this.auth.removeUser(),this.userService.updateLogin("logout"),this.router.navigate(["/login"]))})}updateStatus(e){var i=this;return(0,I.Z)(function*(){if("revise"==e){try{const o={...(yield i.httpService.GET(`${p.bG}`,{_id:i.poDetails.rate_approval_id}).toPromise()).data.details,status:"revise"};yield i.httpService.PUT(`${p.lu}`,o).toPromise(),yield i.httpService.DELETE(`${p.TK}`,{_id:i.poDetails._id}).toPromise(),i.snack.notify("Detail has been updated",1),i.router.navigate(["/purchase-order"]),i.load=!1}catch(a){if(i.load=!1,a.errors&&!(0,f.isEmpty)(a.errors)){const o="<ul>"+Object.values(a.errors).map(l=>`<li>${l[0]}</li>`).join("")+"</ul>";i.snack.notifyHtml(o,2)}else i.snack.notify(a.message,2)}return}let n={};n.status=e,n._id=i.poDetails._id,i.load=!0,i.httpService.PUT(p.TK,n).subscribe({next:a=>{i.load=!1,i.snack.notify("Record has been updated.",1),i.router.navigate(["/purchase-order"])},error:a=>{if(i.load=!1,a.errors&&!(0,f.isEmpty)(a.errors)){let o="<ul>";for(let l in a.errors)o+=`<li>${a.errors[l][0]}</li>`;o+="</ul>",i.snack.notifyHtml(o,2)}else i.snack.notify(a.message,2)}})})()}openEsignModal(){this.validityDate.valid&&this.StartDate.valid?this.dialog.open(gt.T,{maxWidth:"80vw",maxHeight:"80vh",autoFocus:!1}).afterClosed().subscribe(i=>{i&&1==i.option&&(this.poDetails.sign=i.data,this.createOrder())}):this.snack.notify("Please provide validity date",2)}isArray(e){return Array.isArray(e)}getFormattedBrandNames(e){return console.log("see BrandName",e),this.isArray(e)?e.map(i=>""===i.trim()?"others":this.myBrandName(i)).join(" / "):""===e.trim()?"others":this.myBrandName(e)}createOrder(){if(!this.validityDate.valid||!this.StartDate.valid)return this.validityDate.markAsTouched(),!1;if(this.StartDate.value>this.validityDate.value)return this.snack.notify("Due date must be after the Validity Start date.",2),!1;if(!this.fileUploaded)return this.snack.notify("Files not Uploaded, Upload the files",2),!1;if(this.vendorAttachmentLength>(this.vendorFiles?Object.keys(this.vendorFiles).length:0))return console.log(Object.keys(this.vendorFiles).length),console.log(this.vendorAttachmentLength),this.snack.notify("All Vendor Quotation Mandatary, Upload the remaining",2),!1;let e=this.poDetails;for(let a=0;a<e.items.length;a++)e.items[a].item.brandName=e.items[a].item.brandName;console.log("---------------"),console.log("this.purchaseOrderNumber",this.purchaseOrderNumber),console.log("---------------");const i=this.poDetails.billing_address.company_name.toLowerCase().trim();if(console.log("checking company Name",i),""===i)return void this.snack.notifyHtml("Select the Billing Address",2);const n=this.purchaseOrderList.filter(a=>(a.billing_address.company_name?a.billing_address.company_name.toLowerCase().trim():"").includes(i));this.purchaseOrderNumber=n.length+1,console.log("-------------"),console.log("this.poDetails.po_number",this.poDetails.po_number),console.log("-------------"),e.vendor_files=this.vendorFiles,e.po_number=this.poDetails.po_number,e.approved_by=this.permissions.user.name,e.status="ApprovalPending",e.poStartDate=this.StartDate.value,e.due_date=this.validityDate.value,e.vendor_message=this.mail_section.value,e.vendor_detail.terms_condition=this.term_condition.value,this.load=!0,console.log("checking payload________________________",e),this.httpService.PUT(p.TK,e).pipe((0,ht.w)(a=>{let o={0:{...this.poDetails}};"status"in o[0]&&delete o[0].status,console.log("---------------"),console.log(o),console.log("---------------");const l=this.httpService.POST(p.IS,o);return(0,ft.D)([(0,xt.of)(a),l])})).subscribe({next:([a,o])=>{this.load=!1,this.snack.notify("purchase Order has been generated.",1),this.router.navigate(["/purchase-order"])},error:a=>{if(this.load=!1,a.errors&&!(0,f.isEmpty)(a.errors)){let o="<ul>";for(let l in a.errors)o+=`<li>${a.errors[l][0]}</li>`;o+="</ul>",this.snack.notifyHtml(o,2),this.router.navigate(["/purchase-order"])}else this.snack.notify(a.message,2),this.router.navigate(["/purchase-order"])}})}getBrandNamesByIds(e){const i=this.brandList.reduce((n,a)=>(n[a._id]=a.brand_name,n),{});return e.map(n=>i[n]).filter(n=>n).join(" / ")}billingAddressPopup(){this.dialog.open(_t.o,{autoFocus:!1}).afterClosed().subscribe(i=>{if(console.log("-------------"),console.log("result",i),console.log("-------------"),i&&i.type&&1==i.type){this.poDetails.billing_address.company_name=i.data.companyName,this.poDetails.billing_address.code=i.data.code,this.poDetails.billing_address.street_address=i.data.address.street_address,this.poDetails.billing_address.street_address2=i.data.address.street_address2,this.poDetails.billing_address.city=i.data.address.city,this.poDetails.billing_address.state=i.data.address.state,this.poDetails.billing_address.gst_number=i.data.gst_number,this.poDetails.billing_address.pan_card=i.data.pan_number,this.poDetails.billing_address.contact_person=i.data.contact_person+"-"+i.data.phone_number;const n=this.http.get(`${T.N.api_path}${p.TK}`);this.httpService.multipleRequests([n],{}).subscribe(a=>{if(a){this.purchaseOrderList=a[0].data,console.log("----purchaseOrderListdd----",this.purchaseOrderList),console.log("----purchaseOrderListdd----"),console.log("--this.poDetails.billing_address.company_name--",this.poDetails.billing_address.company_name);const o=this.poDetails.billing_address.company_name.toLowerCase().trim(),l=this.purchaseOrderList.filter(u=>(u.billing_address.company_name?u.billing_address.company_name.toLowerCase().trim():"").includes(o));console.log("--filteredList--",l),this.purchaseOrderNumber=l.length+1,this.poDetails.po_number=`${this.poDetails.billing_address.code}/${this.poDetails.delivery_address.site_code}/${this.getCurrentFinancialYearShort()}/${this.convertToFiveDigitNumber(this.purchaseOrderNumber)}`,console.log("-------------"),console.log("this.poDetails.po_number",this.poDetails.po_number),console.log("-------------")}})}})}onFilesSelected(e){const i=e.target.files;if(console.log("file",i),(i?.length||0)+Object.keys(this.vendorFiles||{}).length+(this.files?.length||0)>this.vendorAttachmentLength)this.snack.notify(`only ${this.vendorAttachmentLength} files required`,2);else if(i.length>0){const n=Array.from(i);this.files=n,this.fileUploaded=!1,console.log(this.files)}}removeFile(e){const i=this.files.filter(n=>n.name!==e.name);console.log("there",i),this.files=i,this.files.length<=0&&(this.fileUploaded=!0)}uploadFiles(){const e=this.convertToFormData(this.files);console.log(e),this.load=!0,this.httpService.POST(p.uv,e).subscribe({next:i=>{console.log("check response",i),this.vendorFiles={...i.data.filenames,...this.vendorFiles},console.log("check vendor Files",this.vendorFiles),this.files=[],this.rateApproval.files=this.vendorFiles;const n=this.createVendorArray(this.rateApproval.vendors_total),a=this.getVendorsNotInObject(n,this.rateApproval.files);this.pendingVendorFiles=a,console.log("check Payload here",this.rateApproval),this.httpService.PUT("/rate-approval/Upload-files",this.rateApproval).subscribe({next:o=>{this.fileUploaded=!0,this.snack.notify("File Uploaded Successfully",1),this.load=!1},error:o=>{this.handleError(o)}})},error:i=>{this.load=!1,this.handleError(i)}})}handleError(e){let i="<ul>";if(e.errors&&!(0,f.isEmpty)(e.errors))for(let n in e.errors)i+=`<li>${e.errors[n][0]}</li>`;else i+=`<li>${e.message}</li>`;i+="</ul>",this.snack.notifyHtml(i,2)}convertToFormData(e){console.log(e);const i=new FormData;return e.forEach((n,a)=>{i.append(`files[${a}]`,n,n.name)}),i}mailingAddressPopup(){this.dialog.open(mt.l,{autoFocus:!1}).afterClosed().subscribe(i=>{})}getBrandList(){return this.httpService.GET(p.Lk,{}).toPromise().then(e=>e.data)}getItemList(){return this.httpService.GET(p.o7,{}).toPromise().then(e=>e.data)}getVendorList(){return this.httpService.GET(p.ds,{}).toPromise().then(e=>e.data)}getRateApprovalList(e){console.log(e),this.httpService.GET(`${p.bG}`,{_id:e}).subscribe({next:i=>{if(this.rateApproval=i.data.details,this.rateApproval&&this.rateApproval.vendors_total){this.vendorAttachmentLength=this.rateApproval.vendors_total.length,this.vendorFiles=this.rateApproval.files;const n=this.createVendorArray(this.rateApproval.vendors_total),a=this.getVendorsNotInObject(n,this.rateApproval.files);this.pendingVendorFiles=a,console.log("check Final Array",a)}else this.vendorAttachmentLength=0;console.log("checking here the ",this.rateApproval)},error:i=>{console.error("Error fetching rate approval:",i),this.vendorAttachmentLength=0}})}getVendorNamesString(e){return e.map(i=>`${i.vendor_name} (${i.code})`).join(", ")}createVendorArray(e){return console.log(this.vendorList),e.map(i=>{const n=this.vendorList.find(a=>a._id===i.vendor_id);return n?{code:n.code.toString(),_id:n._id,vendor_name:n.vendor_name}:{vendor_code:"Unknown",vendor_name:"Unknown"}})}getVendorsNotInObject(e,i){console.log("checking vendorArray",e),console.log("checking Object",i);const n=Object.keys(i);return console.log(n),e.filter(a=>!n.includes(a.code))}getSiteList(){return this.httpService.GET(p.S3,{}).toPromise().then(e=>e.data)}myBrandName(e){return this.brandList.filter(n=>n._id==e)[0].brand_name}getCurrentFinancialYearShort(){const e=new Date,i=e.getFullYear();return e.getMonth()+1>=4?`${i.toString().slice(-2)} - ${(i+1).toString().slice(-2)}`:`${(i-1).toString().slice(-2)} - ${i.toString().slice(-2)}`}convertToFiveDigitNumber(e){return e.toString().padStart(4,"0")}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(v.uw),t.Y36(_.F0),t.Y36(_.gz),t.Y36(D.s),t.Y36(U.o),t.Y36(c.qu),t.Y36(q.eN),t.Y36(w.e),t.Y36(k.f))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-purchase-order-update"]],decls:46,vars:12,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","50px","margin-left","20px"],["src","./assets/images/POL.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1e293b","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #c5c5c5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989d","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],["src","./assets/images/rc.svg"],["src","./assets/images/podown.svg"],[2,"color","#233a61","margin-left","5px","font-size","14px"],[4,"ngIf","ngIfElse"],["noView",""],["class","main-wrapper",4,"ngIf"],[1,"main-wrapper"],[2,"margin-top","20px"],[2,"display","flex","gap","50px","flex-wrap","wrap"],[1,"topleft"],[2,"font-size","14px","font-family","Poppins","color","#3568ba","margin-bottom","10px"],[2,"position","relative","right","27px","top","9px","margin-left","35px","color","#3568ba","width","20px","height","20px","font-size","14px","cursor","pointer",3,"click"],[1,"textarealeft"],[1,"topright",2,"margin-top","10px"],[1,"textarearight"],["matInput","",3,"formControl","max","matDatepicker","focus"],["matSuffix","",3,"for"],["startDatePicker",""],["validityDatePicker",""],["type","text",2,"width","120px","padding","5px","border","none","margin-left","16px"],["type","text",2,"width","150px","padding","5px","border","none","margin-left","16px"],[1,"topdown"],[2,"border","1px solid #94a3b8","border-radius","5px","padding","5px 0 20px 0"],["type","text",1,"textareadown"],[2,"margin-left","20px","margin-top","10px","width","500px"],[2,"margin-left","20px"],[1,"msg-teatarea"],[1,"vendor-message-textarea",3,"formControl"],[1,"scroll-bar1"],[2,"direction","ltr !important","border","2px solid #000 !important"],["style","background-color: #f4f4f5",4,"ngFor","ngForOf"],["colspan","6",2,"border","none","font-size","small"],["colspan","6",2,"border","none","color","#073b4c","font-weight","bold","font-size","small"],[1,"terms-condition-wrap"],[2,"font-size","medium","position","relative","top","10px"],[1,"terms-condition-textarea",3,"formControl"],[2,"display","flex","gap","20px","margin-top","20px","justify-content","space-between"],[2,"margin-top","100px"],["style","\n              padding: 8px;\n              width: 180px;\n              background-color: #233a61;\n              color: #fff;\n              border-radius: 5px;\n              border-color: lightgrey;\n              font-family: 'Poppins';\n              font-size: 14px;\n            ",3,"click",4,"ngIf"],["noAddPermission",""],["noEditPermission",""],[2,"background-color","#f4f4f5"],[2,"text-align","center"],[2,"color","#000"],[4,"ngIf"],["style","font-weight: bold; color: red",4,"ngIf"],["type","file","multiple","",2,"display","none",3,"change"],["fileInput",""],["type","button",3,"click",4,"ngIf"],[2,"font-weight","bold","color","red"],["type","button",3,"click"],[1,"file-list"],["class","file-item",4,"ngFor","ngForOf"],[1,"file-item"],[1,"remove-file-btn",3,"click"],[2,"padding","8px","width","180px","background-color","#233a61","color","#fff","border-radius","5px","border-color","lightgrey","font-family","Poppins","font-size","14px",3,"click"],[2,"padding","8px","width","180px","margin-right","20px","margin-left","20px","background-color","#233a61","color","#fff","border-radius","5px","border-color","lightgrey","font-family","Poppins","font-size","14px",3,"click"],["disabled","",2,"padding","8px","width","180px","background-color","#233a61","color","#fff","border-radius","5px","border-color","lightgrey","font-family","Poppins","font-size","14px"],[2,"padding","8px","width","120px","background-color","#fff","color","#233a61","border","1px solid #94a3b8","border-radius","5px","font-family","Poppins","font-size","14px",3,"click"],["disabled","",2,"padding","8px","width","120px","background-color","#fff","color","#233a61","border","1px solid #94a3b8","border-radius","5px","font-family","Poppins","font-size","14px"],[2,"display","flex","justify-content","center","margin-top","2%","font-size","160%","font-weight","bolder","color","grey"]],template:function(e,i){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Purchase orders"),t.qZA(),t._UZ(5,"span",4),t.qZA(),t.TgZ(6,"div"),t._UZ(7,"hr",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7)(10,"div"),t._UZ(11,"img",8),t.qZA(),t.TgZ(12,"span",9),t._uU(13,"Purchase\xa0request"),t.qZA(),t.TgZ(14,"div"),t._UZ(15,"mat-divider",10),t.qZA()(),t.TgZ(16,"div",11)(17,"div"),t._UZ(18,"img",12),t.qZA(),t.TgZ(19,"span",9),t._uU(20,"Approvals"),t.qZA(),t.TgZ(21,"div"),t._UZ(22,"mat-divider",10),t.qZA()(),t.TgZ(23,"div",11)(24,"div"),t._UZ(25,"img",13),t.qZA(),t.TgZ(26,"span",9),t._uU(27,"Rate\xa0Comparative"),t.qZA(),t.TgZ(28,"div"),t._UZ(29,"mat-divider",10),t.qZA()(),t.TgZ(30,"div",11)(31,"div"),t._UZ(32,"img",12),t.qZA(),t.TgZ(33,"span",9),t._uU(34,"Rate\xa0Approvals"),t.qZA(),t.TgZ(35,"div"),t._UZ(36,"mat-divider",10),t.qZA()(),t.TgZ(37,"div",11)(38,"div"),t._UZ(39,"img",14),t.qZA(),t.TgZ(40,"span",15),t._uU(41,"Purchase\xa0orders"),t.qZA()()(),t.TgZ(42,"div"),t.YNc(43,kt,2,1,"ng-container",16),t.YNc(44,Mt,2,0,"ng-template",null,17,t.W1O),t.qZA()),2&e){const n=t.MAs(45);t.xp6(9),t.Q6J("routerLink",t.DdM(7,Lt)),t.xp6(7),t.Q6J("routerLink",t.DdM(8,Nt)),t.xp6(7),t.Q6J("routerLink",t.DdM(9,It)),t.xp6(7),t.Q6J("routerLink",t.DdM(10,St)),t.xp6(7),t.Q6J("routerLink",t.DdM(11,jt)),t.xp6(6),t.Q6J("ngIf",i.viewPermission)("ngIfElse",n)}},dependencies:[_.rH,_.Od,g.sg,g.O5,b.KE,b.R9,x.Mq,x.hl,x.nW,P.d,Z.Hw,M.Nt,C.Ye,c.Fj,c.JJ,c.oH,g.H9,g.uU],styles:["mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-card[_ngcontent-%COMP%]{margin-left:30px;margin-bottom:20px;margin-top:10px;width:90%;height:240vh;box-shadow:0 2px 8px #00000040!important}.file-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.file-item[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:20px;padding:7px;margin:5px 0;display:flex;justify-content:space-between;align-items:center;background-color:#f9f9f9}.remove-file-btn[_ngcontent-%COMP%]{color:red;background:none;border:none;cursor:pointer;font-weight:700}.topdown[_ngcontent-%COMP%]{width:800px;min-height:400px;margin-top:50px}@media only screen and (max-width: 965px){.topdown[_ngcontent-%COMP%]{width:90%}}.msg-teatarea[_ngcontent-%COMP%]{width:700px;background-color:#233a61;margin-top:15px;margin-left:15px;border-radius:5px;color:#fff;font-family:Poppins;padding:20px}@media only screen and (max-width: 965px){.msg-teatarea[_ngcontent-%COMP%]{width:90%}}.textarealeft[_ngcontent-%COMP%], .textarearight[_ngcontent-%COMP%]{width:440px;min-height:245px;border-radius:5px;border:1px solid #94a3b8;color:#697e9b;font-size:13px;font-family:Poppins;display:flex;flex-direction:column;gap:5px;padding:10px;margin-top:10px}.textareadown[_ngcontent-%COMP%]{width:780px;color:#697e9b;font-size:13px;font-family:Poppins;display:flex;flex-direction:column;gap:5p}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;font-size:14px;margin:8px 20px 20px 10px;width:1166px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;width:500px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:center;padding:10px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}.scroll-bar1[_ngcontent-%COMP%]{margin-bottom:100px;margin-top:50px;overflow-x:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.paymentconditiontextarea[_ngcontent-%COMP%]{width:690px;height:500px;border-radius:5px;background-color:#233a61;color:#fff}.downtable[_ngcontent-%COMP%]{font-style:normal;font-size:10px;border-collapse:separate;border-spacing:0 10px;height:10px;width:100px!important;position:relative;bottom:10px;padding:0;margin:0}.downtable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#e5e6eb}.imgstyle[_ngcontent-%COMP%]{position:relative;top:1px}.main-wrapper[_ngcontent-%COMP%]{padding:0 15px 0 30px}.vendor-message-textarea[_ngcontent-%COMP%]{width:100%;height:120px;background-color:#233a61;border:1px solid rgba(255,255,255,.3411764706);color:#fff;font-family:Poppins;resize:none;border-radius:4px;padding:10px}.terms-condition-textarea[_ngcontent-%COMP%]{width:100%;height:388px;margin-top:20px;background-color:#233a61;border:1px solid rgba(255,255,255,.3411764706);color:#fff;font-family:Poppins;resize:none;border-radius:4px;padding:10px}.main-wrapper[_ngcontent-%COMP%]{margin:0 26px;padding:0 15px 20px 10px}.terms-condition-wrap[_ngcontent-%COMP%]{width:90%;background-color:#233a61;margin-left:15px;border-radius:5px;color:#fff;font-family:Poppins;padding:20px}"]}),r})();var Jt=d(4327),S=d(9521),A=d(7331);function zt(r,s){1&r&&(t.TgZ(0,"mat-icon",17),t._uU(1,"cancel"),t.qZA())}function Qt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"mat-chip",15),t.NdJ("removed",function(){const a=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.remove(a))}),t._uU(1),t.YNc(2,zt,2,0,"mat-icon",16),t.qZA()}if(2&r){const e=s.$implicit,i=s.index,n=t.oxw();t.Q6J("selectable",n.selectable)("removable",n.removable),t.xp6(1),t.hij(" ",e," "),t.xp6(1),t.Q6J("ngIf",n.removable&&i+1!=1)}}function Et(r,s){1&r&&(t.TgZ(0,"div",18),t._uU(1,"please enter the email "),t.qZA())}let Yt=(()=>{class r{constructor(e,i){this.dialogRef=e,this.data=i,this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[S.K5,S.OC],this.mailArray=[],this.mails=new c.NI(null),console.log("data",i)}sendMail(){this.mailArray&&this.mailArray.length>0&&this.dialogRef.close({option:1,data:this.mailArray})}add(e){const i=e.input,n=e.value;n.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)&&((n||"").trim()&&this.mailArray.push(n.trim()),i&&(i.value=""))}remove(e){const i=this.mailArray.indexOf(e);i>=0&&this.mailArray.splice(i,1)}ngOnInit(){this.mailArray.push(this.data.vendor_detail.email)}cancel(){this.dialogRef.close({option:2,data:[]})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(v.so),t.Y36(v.WI))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-mail-popup"]],decls:18,vars:5,consts:[["mat-dialog-title","",1,"mat-dialog-title"],[1,"row","full-width"],[1,"col-md-9"],[1,"col-md-3"],[1,"float-end","close-icon",3,"click"],["mat-dialog-content","",1,"mat-dialog-content-cstm"],[1,"esign-container"],[1,"example-chip-list"],["aria-label","Fruit selection"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","New emails...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["style","color: red;",4,"ngIf"],[2,"text-align","center","margin-bottom","15px"],["type","button","id","continueButtonId","aria-label","Continue",1,"button-primary","button-spacer","theme-btn",3,"click"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[2,"color","red"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3," Emails "),t.qZA(),t.TgZ(4,"div",3)(5,"mat-icon",4),t.NdJ("click",function(){return i.cancel()}),t._uU(6,"close"),t.qZA()()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"mat-form-field",7)(10,"mat-chip-list",8,9),t.YNc(12,Qt,3,4,"mat-chip",10),t.TgZ(13,"input",11),t.NdJ("matChipInputTokenEnd",function(a){return i.add(a)}),t.qZA()()(),t.YNc(14,Et,2,0,"div",12),t.qZA()(),t.TgZ(15,"div",13)(16,"button",14),t.NdJ("click",function(){return i.sendMail()}),t._uU(17,"Send Mails"),t.qZA()()),2&e){const n=t.MAs(11);t.xp6(12),t.Q6J("ngForOf",i.mailArray),t.xp6(1),t.Q6J("matChipInputFor",n)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)("matChipInputAddOnBlur",i.addOnBlur),t.xp6(1),t.Q6J("ngIf",0==i.mailArray.length)}},dependencies:[g.sg,g.O5,b.KE,A.qn,A.HS,A.oH,A.qH,v.uh,v.xY,Z.Hw],styles:[".mat-dialog-title[_ngcontent-%COMP%]{padding:0 0 10px;display:flex;justify-content:space-between;align-items:center;font-style:normal;font-weight:400;font-size:14px;line-height:16px;text-transform:capitalize;color:#28313b;border-bottom:1px solid #ccc}.cancel-btn[_ngcontent-%COMP%]{background:#f3f3f3;color:#333}.space-btn[_ngcontent-%COMP%]{margin:0 5px}.mat-dialog-content[_ngcontent-%COMP%]{margin:0;padding:0 15px}.btn[_ngcontent-%COMP%]{min-width:100px;margin:0 5px}.full-width[_ngcontent-%COMP%]{width:100%}.close-icon[_ngcontent-%COMP%]{background-repeat:no-repeat;display:inline-block;fill:currentColor;cursor:pointer}.theme-btn[_ngcontent-%COMP%]{padding:7px 50px;background-color:#233a61;color:#fff;border-radius:5px;border:0;font-size:14px}.cancel-btn[_ngcontent-%COMP%]{padding:7px 50px;background-color:#fff;color:#333;border-radius:5px;border:1px solid #ccc;font-size:14px;margin:0 10px}"]}),r})();function Rt(r,s){if(1&r&&(t.ynx(0),t._uU(1),t.BQk()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.item.tax.amount,"% ")}}function $t(r,s){if(1&r&&(t.TgZ(0,"tr",50)(1,"td",51),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",52),t._uU(14),t.qZA(),t.TgZ(15,"td",53),t._uU(16),t.qZA(),t.TgZ(17,"td",53),t._uU(18),t.qZA(),t.TgZ(19,"td",53),t.YNc(20,Rt,2,1,"ng-container",46),t.qZA(),t.TgZ(21,"td",53),t._uU(22),t.qZA(),t.TgZ(23,"td",53),t._uU(24),t.qZA()()),2&r){const e=s.$implicit,i=s.index,n=t.oxw(2);t.xp6(2),t.hij(" ",i+1," "),t.xp6(2),t.hij(" ",e.item.item_name," "),t.xp6(2),t.hij(" ",e.item.specification," "),t.xp6(2),t.hij(" ",e.item.hsnCode," "),t.xp6(2),t.hij(" ",e.item.qty," "),t.xp6(2),t.hij(" ",e.uom," "),t.xp6(2),t.hij(" ",n.isBrandArray(e.item.brandName)," "),t.xp6(2),t.hij(" ",e.Rate," "),t.xp6(2),t.hij(" ",e.SubTotalAmount," "),t.xp6(2),t.Q6J("ngIf",e.item.tax&&e.item.tax.amount),t.xp6(2),t.hij(" ",e.Total," "),t.xp6(2),t.hij(" ",e.remarks," ")}}function Vt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"input",54),t.NdJ("change",function(n){t.CHM(e);const a=t.oxw(3);return t.KtG(a.onFilesSelected(n))}),t.qZA()()}}function Gt(r,s){if(1&r&&(t.TgZ(0,"div"),t._uU(1," Vendor has Accepted the PO "),t.TgZ(2,"a",55),t._uU(3,"Download Document"),t.qZA()()),2&r){const e=t.oxw(3);t.xp6(2),t.Q6J("href",e.poDetails.po_files[0],t.LSH)}}function Bt(r,s){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,Vt,2,0,"div",46),t.YNc(2,Gt,4,1,"div",46),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",0===e.poDetails.po_files.length),t.xp6(1),t.Q6J("ngIf",0!==e.poDetails.po_files.length)}}function Ht(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"button",56),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.uploadFiles())}),t._uU(2," Upload Vendor Acceptance File "),t._UZ(3,"img",57),t.qZA()()}}function Kt(r,s){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,Ht,4,0,"div",46),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",0===e.poDetails.po_files.length)}}function Wt(r,s){1&r&&(t.TgZ(0,"div")(1,"button",58),t._uU(2," Approved "),t.qZA()())}function Xt(r,s){1&r&&(t.TgZ(0,"div")(1,"button",59),t._uU(2," Revise "),t.qZA()())}function te(r,s){1&r&&(t.TgZ(0,"div")(1,"button",60),t._uU(2," Rejected "),t.qZA()())}function ee(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"button",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.downloadPdf())}),t._uU(2," Download PDF "),t._UZ(3,"img",49),t.qZA()()}}function ie(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"span",21),t._uU(5,"Billing Address"),t.qZA(),t._UZ(6,"br"),t.TgZ(7,"div",22)(8,"span")(9,"b"),t._uU(10),t.qZA()(),t.TgZ(11,"span"),t._uU(12),t._UZ(13,"br"),t._uU(14),t.qZA(),t.TgZ(15,"span"),t._uU(16),t.qZA(),t.TgZ(17,"span"),t._uU(18),t.qZA(),t.TgZ(19,"span"),t._uU(20),t.qZA()()(),t.TgZ(21,"div",23)(22,"span",21),t._uU(23,"Delivery Address"),t.qZA(),t._UZ(24,"br"),t.TgZ(25,"div",24)(26,"span")(27,"b"),t._uU(28,"Date"),t.qZA(),t._uU(29),t.ALo(30,"date"),t.qZA(),t.TgZ(31,"span")(32,"b"),t._uU(33,"Validity From"),t.qZA(),t._uU(34),t.ALo(35,"date"),t.qZA(),t.TgZ(36,"span")(37,"b"),t._uU(38,"Validity Upto"),t.qZA(),t._uU(39),t.ALo(40,"date"),t.qZA(),t.TgZ(41,"span")(42,"b"),t._uU(43,"PO NO"),t.qZA(),t._uU(44),t._UZ(45,"input",25),t.qZA(),t.TgZ(46,"span")(47,"b"),t._uU(48,"Site Address"),t.qZA()(),t.TgZ(49,"span"),t._uU(50),t.qZA(),t.TgZ(51,"span")(52,"b"),t._uU(53,"Contact Person"),t.qZA(),t._uU(54),t._UZ(55,"input",26),t.qZA()()()(),t.TgZ(56,"div",27)(57,"span",21),t._uU(58,"To,"),t.qZA(),t._UZ(59,"br"),t.TgZ(60,"div",28)(61,"div",29)(62,"span",30)(63,"b"),t._uU(64,"Vendor Name: "),t.qZA(),t._uU(65),t._UZ(66,"br"),t.TgZ(67,"span")(68,"b"),t._uU(69,"Contact Person: "),t.qZA(),t.TgZ(70,"span"),t._uU(71),t.qZA()(),t._UZ(72,"br"),t.TgZ(73,"span")(74,"b"),t._uU(75,"Mobile No.: "),t.qZA(),t.TgZ(76,"span"),t._uU(77),t.qZA()(),t._UZ(78,"br"),t.TgZ(79,"span")(80,"b"),t._uU(81,"Email Id: "),t.qZA(),t.TgZ(82,"span"),t._uU(83),t.qZA()(),t._UZ(84,"br"),t.TgZ(85,"span")(86,"b"),t._uU(87,"Vendor Address: "),t.qZA(),t.TgZ(88,"span"),t._uU(89),t.qZA()()(),t.TgZ(90,"span")(91,"b",31),t._uU(92,"GSTIN: "),t.qZA(),t.TgZ(93,"span"),t._uU(94),t.qZA()(),t.TgZ(95,"span")(96,"b",31),t._uU(97,"PAN: "),t.qZA(),t.TgZ(98,"span"),t._uU(99),t.qZA()()(),t.TgZ(100,"div",32)(101,"p"),t._uU(102),t.qZA(),t.TgZ(103,"textarea",33),t._uU(104,"            "),t.qZA()()()()(),t.TgZ(105,"div",34)(106,"table",35)(107,"tr")(108,"th"),t._uU(109,"Item\xa0No"),t.qZA(),t.TgZ(110,"th"),t._uU(111,"Item\xa0Name"),t.qZA(),t.TgZ(112,"th"),t._uU(113,"Specification"),t.qZA(),t.TgZ(114,"th"),t._uU(115,"HSN Code"),t.qZA(),t.TgZ(116,"th"),t._uU(117,"Quantity"),t.qZA(),t.TgZ(118,"th"),t._uU(119,"UOM"),t.qZA(),t.TgZ(120,"th"),t._uU(121,"Brand Name"),t.qZA(),t.TgZ(122,"th"),t._uU(123,"Rate"),t.qZA(),t.TgZ(124,"th"),t._uU(125,"Sub Total"),t.qZA(),t.TgZ(126,"th"),t._uU(127,"Tax"),t.qZA(),t.TgZ(128,"th"),t._uU(129,"Total"),t.qZA(),t.TgZ(130,"th"),t._uU(131,"Remarks"),t.qZA()(),t.TgZ(132,"tbody"),t.YNc(133,$t,25,12,"tr",36),t.qZA(),t.TgZ(134,"tr")(135,"td",37),t._uU(136," Total\xa0amount "),t.qZA(),t.TgZ(137,"td",37),t._uU(138),t.ALo(139,"currency"),t.qZA()(),t.TgZ(140,"tr")(141,"td",37),t._uU(142," Total\xa0Freight "),t.qZA(),t.TgZ(143,"td",37),t._uU(144),t.ALo(145,"currency"),t.qZA()(),t.TgZ(146,"tr")(147,"td",37),t._uU(148," GST\xa0amount "),t.qZA(),t.TgZ(149,"td",37),t._uU(150),t.ALo(151,"currency"),t.qZA()(),t.TgZ(152,"tr")(153,"td",37),t._uU(154," Grand\xa0total "),t.qZA(),t.TgZ(155,"td",38),t._uU(156),t.ALo(157,"currency"),t.qZA()()()(),t.TgZ(158,"div",39)(159,"div"),t._uU(160," Vendor terms & other conditions "),t.TgZ(161,"mat-icon",40),t._uU(162,"border_color"),t.qZA()(),t.TgZ(163,"textarea",41),t._uU(164,"      "),t.qZA()(),t.TgZ(165,"div"),t._UZ(166,"img",42),t.TgZ(167,"p",43),t._uU(168),t.qZA(),t.TgZ(169,"p",44),t._uU(170," Authorised Signatory "),t.qZA()(),t.TgZ(171,"div",45),t.YNc(172,Bt,3,2,"div",46),t.YNc(173,Kt,2,1,"div",46),t.YNc(174,Wt,3,0,"div",46),t.YNc(175,Xt,3,0,"div",46),t.YNc(176,te,3,0,"div",46),t.YNc(177,ee,4,0,"div",46),t.TgZ(178,"div",47)(179,"button",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.enterMail())}),t._uU(180," Send Mail "),t._UZ(181,"img",49),t.qZA()()()()}if(2&r){const e=t.oxw();t.xp6(10),t.Oqu(null==e.poDetails||null==e.poDetails.billing_address?null:e.poDetails.billing_address.company_name),t.xp6(2),t.AsE(" ",null==e.poDetails||null==e.poDetails.billing_address?null:e.poDetails.billing_address.street_address," ",null==e.poDetails||null==e.poDetails.billing_address?null:e.poDetails.billing_address.street_address2," "),t.xp6(2),t.lnq("",null==e.poDetails||null==e.poDetails.billing_address?null:e.poDetails.billing_address.city," ",null==e.poDetails||null==e.poDetails.billing_address?null:e.poDetails.billing_address.state," ",null==e.poDetails||null==e.poDetails.billing_address?null:e.poDetails.billing_address.zip_code," "),t.xp6(2),t.hij("GSTIN:",null==e.poDetails||null==e.poDetails.billing_address?null:e.poDetails.billing_address.gst_number,""),t.xp6(2),t.hij("PAN:",null==e.poDetails||null==e.poDetails.billing_address?null:e.poDetails.billing_address.pan_card,""),t.xp6(2),t.Oqu(null==e.poDetails||null==e.poDetails.billing_address?null:e.poDetails.billing_address.contact_person),t.xp6(9),t.hij(": ",t.xi3(30,42,e.poDetails.date,"dd-MM-yyyy"),""),t.xp6(5),t.hij(": ",t.xi3(35,45,e.poDetails.poStartDate,"dd-MM-yyyy")," "),t.xp6(5),t.hij(": ",t.xi3(40,48,e.poDetails.due_date,"dd-MM-yyyy")," "),t.xp6(5),t.hij(": ",null==e.poDetails?null:e.poDetails.po_number,""),t.xp6(6),t.xDo("",null==e.poDetails||null==e.poDetails.delivery_address?null:e.poDetails.delivery_address.street_address," ",null==e.poDetails||null==e.poDetails.delivery_address?null:e.poDetails.delivery_address.street_address2," ",null==e.poDetails||null==e.poDetails.delivery_address?null:e.poDetails.delivery_address.city,",",null==e.poDetails||null==e.poDetails.delivery_address?null:e.poDetails.delivery_address.state," ",null==e.poDetails||null==e.poDetails.delivery_address?null:e.poDetails.delivery_address.zip_code," "),t.xp6(4),t.hij(": ",null==e.poDetails||null==e.poDetails.delivery_address?null:e.poDetails.delivery_address.contact_person,""),t.xp6(11),t.hij("",e.poDetails.vendor_detail.vendor_name," "),t.xp6(6),t.hij(" ",e.poDetails.vendor_detail.contact_person," "),t.xp6(6),t.hij(" ",e.poDetails.vendor_detail.phone_number," "),t.xp6(6),t.hij(" ",e.poDetails.vendor_detail.email," "),t.xp6(6),t.hij(" ",e.combineAddress(e.poDetails.vendor_detail.address)," "),t.xp6(5),t.hij(" ",e.poDetails.vendor_detail.gst_number," "),t.xp6(5),t.hij(" ",e.poDetails.vendor_detail.pan_number," "),t.xp6(3),t.Oqu(e.poDetails.vendor_message_header),t.xp6(1),t.Q6J("formControl",e.mail_section),t.xp6(30),t.Q6J("ngForOf",e.poDetails.items),t.xp6(5),t.hij(" ",t.xi3(139,51,e.poDetails.vendors_total[0].subTotal,"INR")," "),t.xp6(6),t.hij(" ",t.xi3(145,54,e.poDetails.vendors_total[0].freightTotal,"INR")," "),t.xp6(6),t.hij(" ",t.xi3(151,57,e.poDetails.vendors_total[0].gstAmount,"INR")," "),t.xp6(6),t.hij(" ",t.xi3(157,60,e.poDetails.vendors_total[0].total,"INR")," "),t.xp6(7),t.Q6J("formControl",e.term_condition),t.xp6(3),t.Q6J("src",e.esignImage,t.LSH),t.xp6(2),t.hij(" ",e.poDetails.approved_by," "),t.xp6(4),t.Q6J("ngIf","rejected"!==e.poDetails.status),t.xp6(1),t.Q6J("ngIf","rejected"!==e.poDetails.status),t.xp6(1),t.Q6J("ngIf","approved"==e.poDetails.status),t.xp6(1),t.Q6J("ngIf","revise"==e.poDetails.status),t.xp6(1),t.Q6J("ngIf","rejected"==e.poDetails.status),t.xp6(1),t.Q6J("ngIf","rejected"!==e.poDetails.status)}}const ne=function(){return["/procurement"]},oe=function(){return["/procurement/prlist"]},re=function(){return["/rate-comparative"]},ae=function(){return["/rate-approval"]},se=function(){return["/purchase-order"]};let le=(()=>{class r{constructor(e,i,n,a,o){this.route=e,this.router=i,this.snack=n,this.httpService=a,this.dialog=o,this.term_condition=new c.NI,this.mail_section=new c.NI,this.validityDate=new c.NI,this.StartDate=new c.NI,this.minDate=new Date,this.maxDate=new Date((new Date).setMonth((new Date).getMonth()+12)),this.load=!1,this.downloadLoading=!1,this.files=[]}ngOnInit(){this.route.params.subscribe(e=>{this.pageId=e.id,this.pageId&&this.fetchPurchaseOrderDetails(this.pageId)})}isObjectEmpty(e){return!e||0===Object.keys(e).length}fetchPurchaseOrderDetails(e){this.httpService.GET(`${p.TK}/detail`,{_id:e}).subscribe(i=>{this.poDetails=i.data,this.esignImage=this.poDetails.sign,this.StartDate.patchValue(this.poDetails.poStartDate),this.validityDate.patchValue(this.poDetails.due_date),this.term_condition.patchValue(this.poDetails.terms_condition),this.mail_section.patchValue(this.poDetails.vendor_message),this.mail_section.disable(),this.term_condition.disable(),this.validityDate.disable(),this.StartDate.disable(),this.loadData()})}loadData(){var e=this;return(0,I.Z)(function*(){try{const[i,n]=yield Promise.all([e.getItemList(),e.getBrandList()]);e.updateItemsWithDetails(i),e.brandList=n,e.load=!0}catch(i){console.error("Error loading data:",i)}})()}getItemList(){return this.httpService.GET(p.o7,{}).toPromise().then(e=>e.data)}getBrandList(){return this.httpService.GET(p.Lk,{}).toPromise().then(e=>e.data)}updateItemsWithDetails(e){console.log(e),this.poDetails.items.map(a=>a.item.item_id);const n=e.reduce((a,o)=>(a[o._id]=o,a),{});this.poDetails.items=this.poDetails.items.map(a=>{const l=n[a.item.item_id]||{};return{...a,item:{...a.item,categoryDetail:l.categoryDetail||{},subCategoryDetail:l.subCategoryDetail||{},uomDetail:l.uomDetail||{},item_name:l.item_name||a.item.item_name,brandName:l.brandName||a.item.brandName,attachment:l.attachment||a.item.attachment}}}),console.log("Updated Items",this.poDetails)}downloadPdf(){this.downloadLoading=!0,this.httpService.GETPDF("generate/pdf",{template:"po",id:this.pageId}).subscribe(e=>{this.downloadLoading=!1;var i=new Blob([e],{type:"application/pdf"});(new Date).getTime(),(0,Jt.saveAs)(i,`po-${this.poDetails.po_number}__${this.poDetails.vendor_detail.vendor_name}  .pdf`)})}isBrandArray(e){return Array.isArray(e)?this.getBrandNamesByIds(e):e}onFilesSelected(e){const i=e.target.files;if(console.log("file",i),1===i.length){const n=Array.from(i);this.files=n,console.log(this.files)}}removeFile(e){const i=this.files.filter(n=>n.name!==e.name);console.log("there",i),this.files=i}getUomName(e){return e&&e.uomDetail&&e.uomDetail.uom_name?e.uomDetail.uom_name:"Unknown UOM"}sendEmail(e){this.downloadLoading=!0,this.httpService.POST("/mail/template",{template:"po",id:this.pageId,mails:e}).subscribe(()=>{this.downloadLoading=!1})}enterMail(){this.dialog.open(Yt,{maxWidth:"80vw",maxHeight:"80vh",autoFocus:!1,data:this.poDetails}).afterClosed().subscribe(i=>{i&&1===i.option&&this.sendEmail(i.data)})}getBrandNamesByIds(e){const i=this.brandList.reduce((n,a)=>(n[a._id]=a.brand_name,n),{});return e.map(n=>i[n]).filter(n=>n).join(" / ")}uploadFiles(){if(0===this.files.length)return void this.snack.notify("No File Selected, Choose File First",2);const e=this.convertToFormData(this.files);this.load=!0,this.httpService.POST(p.uv,e).subscribe({next:i=>{console.log(i.data.filenames);const n=this.extractLinks(i.data.filenames);console.log("checking File Data",n),this.UpdateOrder(n)},error:i=>{this.load=!1,this.handleError(i)}})}extractLinks(e){return console.log(e),Object.values(e)}handleError(e){let i="<ul>";if(e.errors&&!(0,f.isEmpty)(e.errors))for(let n in e.errors)i+=`<li>${e.errors[n][0]}</li>`;else i+=`<li>${e.message}</li>`;i+="</ul>",this.snack.notifyHtml(i,2)}convertToFormData(e){const i=new FormData;return e.forEach((a,o)=>{i.append(`files[${o}]`,a,a.name)}),i}combineAddress(e){const{street_address:i,street_address2:n,city:a,state:o,zip_code:l,country:u}=e;return[i,n,a,o,l,u].filter(m=>m&&""!==m.trim()).join(", ")}UpdateOrder(e){let i=this.poDetails;console.log("-------------"),console.log("this.poDetails.po_number",this.poDetails.po_number),console.log("-------------"),i.po_number=this.poDetails.po_number,i.po_files=e,i.approved_by=this.poDetails.approved_by,i.status="approved",i.due_date=this.poDetails.due_date,i.vendor_message=this.poDetails.vendor_message,i.vendor_detail.terms_condition=this.term_condition.value,this.load=!0,console.log("checking payload________________________",i),this.httpService.PUT(p.TK,i).subscribe({next:()=>{this.load=!1,this.snack.notify("Vendor Acceptance Document Uploaded Successfully.",1),this.poDetails.po_files=e},error:n=>{if(this.load=!1,n.errors&&!(0,f.isEmpty)(n.errors)){let a="<ul>";for(let o in n.errors)a+=`<li>${n.errors[o][0]}</li>`;a+="</ul>",this.snack.notifyHtml(a,2),this.router.navigate(["/purchase-order"])}else this.snack.notify(n.message,2),this.router.navigate(["/purchase-order"])}})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(_.gz),t.Y36(_.F0),t.Y36(U.o),t.Y36(D.s),t.Y36(v.uw))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-purchase-order-details"]],decls:44,vars:11,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","50px","margin-left","20px"],["src","./assets/images/POL.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1e293b","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #c5c5c5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989d","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],["src","./assets/images/rc.svg"],["src","./assets/images/podown.svg"],[2,"color","#233a61","margin-left","5px","font-size","14px"],["class","main-wrapper",4,"ngIf"],[1,"main-wrapper"],[2,"margin-top","20px"],[2,"display","flex","gap","50px","flex-wrap","wrap"],[1,"topleft"],[2,"font-size","14px","font-family","Poppins","color","#3568ba","margin-bottom","10px"],[1,"textarealeft"],[1,"topright",2,"margin-top","10px"],[1,"textarearight"],["type","text",2,"width","120px","padding","5px","border","none","margin-left","16px"],["type","text",2,"width","150px","padding","5px","border","none","margin-left","16px"],[1,"topdown"],[2,"border","1px solid #94a3b8","border-radius","5px","padding","5px 0 20px 0"],["type","text",1,"textareadown"],[2,"margin-left","20px","margin-top","10px","width","500px"],[2,"margin-left","20px"],[1,"msg-teatarea"],[1,"vendor-message-textarea",3,"formControl"],[1,"scroll-bar1"],[2,"direction","ltr !important","border","2px solid #000 !important"],["style","background-color: #f4f4f5",4,"ngFor","ngForOf"],["colspan","6",2,"border","none","font-size","small"],["colspan","6",2,"border","none","color","#073b4c","font-weight","bold","font-size","small"],[1,"terms-condition-wrap"],[2,"font-size","medium","position","relative","top","10px"],[1,"terms-condition-textarea",3,"formControl"],["alt","",2,"width","20%","padding","2%",3,"src"],[2,"margin-left","4%","margin-top","-1%","font-size","medium"],[2,"margin-left","4%","margin-top","1%","font-weight","bold","font-size","large"],[2,"display","flex","gap","20px","justify-content","end","align-items","center"],[4,"ngIf"],[2,"display","none"],[2,"padding","8px","width","180px","background-color","#fff","cursor","pointer","border","0.5px solid #94a3b8","border-radius","5px","color","#797979","font-family","Poppins","font-size","14px","display","flex","align-items","center",3,"click"],["src","./assets/images/pdfd.svg",1,"imgstyle",2,"margin-left","10px"],[2,"background-color","#f4f4f5"],[2,"text-align","center"],["td","",2,"color","#000"],[2,"color","#000"],["type","file",3,"change"],[2,"color","blue","text-decoration","underline",3,"href"],[2,"padding","8px","background-color","#fff","cursor","pointer","border","0.5px solid #94a3b8","border-radius","5px","color","#797979","font-family","Poppins","font-size","14px","display","flex","align-items","center",3,"click"],["src","./assets/images/pdfd.svg",1,"imgstyle",2,"margin-left","10px","margin-right","10px"],[2,"padding","8px","width","180px","background-color","#54aa52","color","#fff","border-radius","5px","border-color","lightgrey","font-family","Poppins","font-size","14px"],[2,"padding","8px","width","120px","background-color","#ecd172","color","#fff","border","1px solid #94a3b8","border-radius","5px","font-family","Poppins","font-size","14px"],[2,"padding","8px","width","120px","background-color","#c7323b","color","#fff","border","1px solid #94a3b8","border-radius","5px","font-family","Poppins","font-size","14px"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Purchase orders"),t.qZA(),t._UZ(5,"span",4),t.qZA(),t.TgZ(6,"div"),t._UZ(7,"hr",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7)(10,"div"),t._UZ(11,"img",8),t.qZA(),t.TgZ(12,"span",9),t._uU(13,"Purchase\xa0request"),t.qZA(),t.TgZ(14,"div"),t._UZ(15,"mat-divider",10),t.qZA()(),t.TgZ(16,"div",11)(17,"div"),t._UZ(18,"img",12),t.qZA(),t.TgZ(19,"span",9),t._uU(20,"Approvals"),t.qZA(),t.TgZ(21,"div"),t._UZ(22,"mat-divider",10),t.qZA()(),t.TgZ(23,"div",11)(24,"div"),t._UZ(25,"img",13),t.qZA(),t.TgZ(26,"span",9),t._uU(27,"Rate\xa0Comparative"),t.qZA(),t.TgZ(28,"div"),t._UZ(29,"mat-divider",10),t.qZA()(),t.TgZ(30,"div",11)(31,"div"),t._UZ(32,"img",12),t.qZA(),t.TgZ(33,"span",9),t._uU(34,"Rate\xa0Approvals"),t.qZA(),t.TgZ(35,"div"),t._UZ(36,"mat-divider",10),t.qZA()(),t.TgZ(37,"div",11)(38,"div"),t._UZ(39,"img",14),t.qZA(),t.TgZ(40,"span",15),t._uU(41,"Purchase\xa0orders"),t.qZA()()(),t.TgZ(42,"div"),t.YNc(43,ie,182,63,"div",16),t.qZA()),2&e&&(t.xp6(9),t.Q6J("routerLink",t.DdM(6,ne)),t.xp6(7),t.Q6J("routerLink",t.DdM(7,oe)),t.xp6(7),t.Q6J("routerLink",t.DdM(8,re)),t.xp6(7),t.Q6J("routerLink",t.DdM(9,ae)),t.xp6(7),t.Q6J("routerLink",t.DdM(10,se)),t.xp6(6),t.Q6J("ngIf",i.poDetails))},dependencies:[_.rH,_.Od,g.sg,g.O5,P.d,Z.Hw,C.Ye,c.Fj,c.JJ,c.oH,g.H9,g.uU],styles:["mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-card[_ngcontent-%COMP%]{margin-left:30px;margin-bottom:20px;margin-top:10px;width:90%;height:240vh;box-shadow:0 2px 8px #00000040!important}.topdown[_ngcontent-%COMP%]{width:800px;min-height:400px;margin-top:50px}@media only screen and (max-width: 965px){.topdown[_ngcontent-%COMP%]{width:90%}}.msg-teatarea[_ngcontent-%COMP%]{width:700px;background-color:#233a61;margin-top:15px;margin-left:15px;border-radius:5px;color:#fff;font-family:Poppins;padding:20px}@media only screen and (max-width: 965px){.msg-teatarea[_ngcontent-%COMP%]{width:90%}}.textarealeft[_ngcontent-%COMP%], .textarearight[_ngcontent-%COMP%]{width:440px;min-height:245px;border-radius:5px;border:1px solid #94a3b8;color:#697e9b;font-size:13px;font-family:Poppins;display:flex;flex-direction:column;gap:5px;padding:10px;margin-top:10px}.textareadown[_ngcontent-%COMP%]{width:780px;color:#697e9b;font-size:13px;font-family:Poppins;display:flex;flex-direction:column;gap:5p}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;font-size:14px;margin:8px 20px 20px 10px;width:1166px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;width:500px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:center;padding:10px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}.scroll-bar1[_ngcontent-%COMP%]{margin-bottom:100px;margin-top:50px;overflow-x:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.paymentconditiontextarea[_ngcontent-%COMP%]{width:690px;height:500px;border-radius:5px;background-color:#233a61;color:#fff}.downtable[_ngcontent-%COMP%]{font-style:normal;font-size:10px;border-collapse:separate;border-spacing:0 10px;height:10px;width:100px!important;position:relative;bottom:10px;padding:0;margin:0}.downtable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#e5e6eb}.imgstyle[_ngcontent-%COMP%]{position:relative;top:1px}.main-wrapper[_ngcontent-%COMP%]{padding:0 15px 0 30px}.vendor-message-textarea[_ngcontent-%COMP%]{width:100%;height:120px;background-color:#233a61;border:1px solid rgba(255,255,255,.3411764706);color:#fff;font-family:Poppins;resize:none;border-radius:4px;padding:10px}.terms-condition-textarea[_ngcontent-%COMP%]{width:100%;height:388px;background-color:#233a61;border:1px solid rgba(255,255,255,.3411764706);color:#fff;font-family:Poppins;resize:none;border-radius:4px;padding:10px}.main-wrapper[_ngcontent-%COMP%]{margin:0 26px;padding:0 15px 20px 10px}.terms-condition-wrap[_ngcontent-%COMP%]{background-color:#233a61;margin-left:15px;border-radius:5px;color:#fff;font-family:Poppins;padding:20px}.file-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.file-item[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:20px;padding:7px;margin:5px 0;display:flex;justify-content:space-between;align-items:center;background-color:#f9f9f9}.remove-file-btn[_ngcontent-%COMP%]{color:red;background:none;border:none;cursor:pointer;font-weight:700}"]}),r})();var de=d(4534),pe=d(8484);const ce=[{path:"",component:dt},{path:"details/:id",component:le},{path:"update/:id",component:Ft},{path:"approve/:id",component:de.N}];let ue=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[_.Bz.forChild(ce)],g.ez,_.Bz,ct.S,c.UX,pt.w,ut.Z,pe.j,Z.Ps]}),r})()}}]);