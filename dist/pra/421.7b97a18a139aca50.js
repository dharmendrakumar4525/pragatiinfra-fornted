"use strict";(self.webpackChunkpra=self.webpackChunkpra||[]).push([[421],{4421:(q,C,s)=>{s.r(C),s.d(C,{ActivityModule:()=>X});var u=s(6895),O=s(5861),g=s(8608),r=s(4006),m=s(5938),f=s(7489),t=s(4650),v=s(9299),y=s(2126),x=s(6104),h=s(9549),P=s(4859),A=s(4144);function T(e,a){1&e&&(t.TgZ(0,"h1",11),t._uU(1," Add Sub Activity\n"),t.qZA())}function k(e,a){1&e&&(t.TgZ(0,"h1",11),t._uU(1," Update Sub Activity\n"),t.qZA())}function Z(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function L(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.onYesClick())}),t.TgZ(1,"span"),t._uU(2,"Submit"),t.qZA()()}}function S(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.onUpdateClick())}),t.TgZ(1,"span"),t._uU(2,"Update"),t.qZA()()}}let M=(()=>{class e{constructor(n,i,o,c,l){this.dialogRef=n,this.data=i,this.router=o,this.httpService=c,this.snack=l,this.addForm=new r.cw({activity_name:new r.NI("",r.kI.required),_id:new r.NI("")}),i&&i.id&&this.httpService.GET(`${g.Xv}/detail`,{_id:i.id}).subscribe(d=>{d&&this.patchValue(d.data)},d=>{if(d.errors&&!(0,f.isEmpty)(d.errors)){let _="<ul>";for(let b in d.errors)_+=`<li>${d.errors[b][0]}</li>`;_+="</ul>",this.snack.notifyHtml(_,2)}else this.snack.notify(d.message,2)})}patchValue(n){this.addForm.patchValue({activity_name:n.activity_name,_id:n._id})}onYesClick(){this.addForm.valid?this.httpService.POST(g.Xv,{activity_name:this.addForm.value.activity_name}).subscribe(n=>{this.snack.notify(" Data has been saved sucessfully.",1),this.dialogRef.close({option:1,data:this.data})},n=>{if(n.errors&&!(0,f.isEmpty)(n.errors)){let i="<ul>";for(let o in n.errors)i+=`<li>${n.errors[o][0]}</li>`;i+="</ul>",this.snack.notifyHtml(i,2)}else this.snack.notify(n.message,2)}):this.addForm.markAllAsTouched()}onUpdateClick(){this.addForm.valid?this.httpService.PUT(g.Xv,this.addForm.value).subscribe(n=>{this.snack.notify("Data has been saved sucessfully.",1),this.dialogRef.close({option:1,data:this.data})}):this.addForm.markAllAsTouched()}onNoClick(){this.dialogRef.close({option:2,data:this.data})}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.so),t.Y36(m.WI),t.Y36(v.F0),t.Y36(y.s),t.Y36(x.o))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-data"]],decls:17,vars:6,consts:[["mat-dialog-title","","class","mat-dialog-title",4,"ngIf"],["mat-dialog-content","",1,"mat-dialog-content-cstm"],[3,"formGroup"],[1,"row"],[1,"col-md-12"],["appearance","outline"],["matInput","","formControlName","activity_name"],[4,"ngIf"],[2,"text-align","center","margin-bottom","5px"],["mat-raised-button","","cdkFocusInitial","",1,"cancel-btn","space-btn",3,"click"],["mat-raised-button","","class","space-btn theme-btn-color","color","primary",3,"click",4,"ngIf"],["mat-dialog-title","",1,"mat-dialog-title"],["mat-raised-button","","color","primary",1,"space-btn","theme-btn-color",3,"click"]],template:function(n,i){1&n&&(t.YNc(0,T,2,0,"h1",0),t.YNc(1,k,2,0,"h1",0),t.TgZ(2,"div",1)(3,"form",2)(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),t._uU(8,"Sub Activity Name"),t.qZA(),t._UZ(9,"input",6),t.YNc(10,Z,2,0,"mat-error",7),t.qZA()()()()(),t.TgZ(11,"div",8)(12,"button",9),t.NdJ("click",function(){return i.onNoClick()}),t.TgZ(13,"span"),t._uU(14," Cancel"),t.qZA()(),t.YNc(15,L,3,0,"button",10),t.YNc(16,S,3,0,"button",10),t.qZA()),2&n&&(t.Q6J("ngIf",!i.data),t.xp6(1),t.Q6J("ngIf",i.data&&i.data.id),t.xp6(2),t.Q6J("formGroup",i.addForm),t.xp6(7),t.Q6J("ngIf",null==i.addForm.controls.activity_name.errors?null:i.addForm.controls.activity_name.errors.required),t.xp6(5),t.Q6J("ngIf",!i.data),t.xp6(1),t.Q6J("ngIf",i.data&&i.data.id))},dependencies:[h.TO,h.KE,h.hX,P.lW,m.uh,m.xY,A.Nt,u.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".section-wrapper[_ngcontent-%COMP%]{padding:0 15px}.section-wrapper[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{border-bottom:2px solid #C5C5C5;display:flex;align-items:center;justify-content:space-between;padding:18px 0}.section-wrapper[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.buttons-containers[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.submit-btn[_ngcontent-%COMP%]{background:#233a61;color:#fff}.cancel-btn[_ngcontent-%COMP%]{background:#ccc}.section-body[_ngcontent-%COMP%]{padding:20px 0 0}mat-form-field[_ngcontent-%COMP%]{display:block}"]}),e})();var N=s(9715),D=s(4465),w=s(445);function I(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"mat-form-field",10)(5,"input",11),t.NdJ("input",function(o){t.CHM(n);const c=t.oxw();return t.KtG(c.search(o))}),t.qZA()()()(),t.TgZ(6,"button",12),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.add())}),t._uU(7,"Add New"),t.qZA(),t.TgZ(8,"button",13),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.exportXlSX())}),t._uU(9,"Export"),t.qZA()()()}}function F(e,a){1&e&&(t.ynx(0),t._uU(1," No data found "),t.BQk())}function Y(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"tr")(1,"td",19),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"div",20)(7,"a",21),t.NdJ("click",function(){const c=t.CHM(n).$implicit,l=t.oxw(3);return t.KtG(l.edit(c._id))}),t._UZ(8,"i",22),t.qZA(),t.TgZ(9,"a",23),t.NdJ("click",function(){const c=t.CHM(n).$implicit,l=t.oxw(3);return t.KtG(l.delete(c._id))}),t._UZ(10,"i",24),t.qZA()()()()}if(2&e){const n=a.$implicit,i=a.index;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(n.activity_name)}}function U(e,a){if(1&e&&(t.ynx(0),t.YNc(1,Y,11,2,"tr",18),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.activityList)}}function E(e,a){if(1&e&&(t.TgZ(0,"div",14)(1,"table",15)(2,"thead")(3,"tr")(4,"th",16),t._uU(5,"SN."),t.qZA(),t.TgZ(6,"th",16),t._uU(7,"Activity Name"),t.qZA(),t.TgZ(8,"th",16),t._uU(9,"Action"),t.qZA()()(),t.TgZ(10,"tbody"),t.YNc(11,F,2,0,"ng-container",17),t.YNc(12,U,2,1,"ng-container",17),t.qZA()()()),2&e){const n=t.oxw();t.xp6(11),t.Q6J("ngIf",n.activityList&&0==n.activityList.length),t.xp6(1),t.Q6J("ngIf",n.activityList&&n.activityList.length>0)}}function J(e,a){1&e&&(t.TgZ(0,"h3"),t._uU(1,"You don't have permissions to view."),t.qZA())}let j=(()=>{class e{constructor(n,i,o,c,l,d){this.router=n,this.httpService=i,this.excelService=o,this.snack=c,this.dialog=l,this.toast=d,this.activityList=[],this.list=[],this.permissions=JSON.parse(localStorage.getItem("loginData")),this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:p=>{this.addPermission=p.dashboard_permissions[0].ParentChildchecklist[7].childList[0].isSelected,this.editPermission=p.dashboard_permissions[0].ParentChildchecklist[7].childList[1].isSelected,this.deletePermission=p.dashboard_permissions[0].ParentChildchecklist[7].childList[2].isSelected,this.viewPermission=p.dashboard_permissions[0].ParentChildchecklist[7].childList[3].isSelected},error:p=>{console.log(p)}}),this.getList()}getList(){this.httpService.GET(g.Xv,{}).subscribe(n=>{n&&n.data&&(this.activityList=n.data,this.list=n.data)},n=>{if(n.errors&&!(0,f.isEmpty)(n.errors)){let i="<ul>";for(let o in n.errors)i+=`<li>${n.errors[o][0]}</li>`;i+="</ul>",this.snack.notifyHtml(i,2)}else this.snack.notify(n.message,2)})}edit(n){this.editPermission?this.dialog.open(M,{data:{id:n}}).afterClosed().subscribe(o=>{o&&1===o.option&&this.getList()}):this.toast.openSnackBar("Access to Sub Activity Master editing is restricted for your account.")}add(){this.addPermission?this.dialog.open(M,{}).afterClosed().subscribe(i=>{i&&1===i.option&&this.getList()}):this.toast.openSnackBar("Access to Sub Activity Master add is restricted for your account.")}delete(n){this.deletePermission?this.httpService.DELETE(g.Xv,{_id:n}).subscribe(i=>{i&&(this.snack.notify(" record has been deleted sucessfully.",1),this.getList())},i=>{if(i.errors&&!(0,f.isEmpty)(i.errors)){let o="<ul>";for(let c in i.errors)o+=`<li>${i.errors[c][0]}</li>`;o+="</ul>",this.snack.notifyHtml(o,2)}else this.snack.notify(i.message,2)}):this.toast.openSnackBar("Access to Sub Activity Master deleting is restricted for your account.")}search(n){this.activityList=n.target.value?this.list.filter(i=>i.activity_name.toLowerCase().includes(n.target.value.toLowerCase())):this.list}exportXlSX(){var n=this;return(0,O.Z)(function*(){n.excelService.mapArrayToExcel("Activity",["Activity Name\t"],["activity_name"],["string"],n.activityList)})()}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.F0),t.Y36(y.s),t.Y36(N.x),t.Y36(x.o),t.Y36(m.uw),t.Y36(D.k))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-listing"]],decls:9,vars:3,consts:[[1,"section-wrapper"],[1,"section-header"],[1,"header-left"],["class","header-right",4,"ngIf"],["class","section-body",4,"ngIf","ngIfElse"],["noView",""],[1,"header-right"],[1,"buttons-containers"],[1,"filter-con"],["dir","ltr",1,"labeled-outlined-field-wrapper"],["appearance","outline",1,"full-width","drop-down","outline-filter-field","hide-form-bottom-field"],["matInput","","placeholder","Search by name",3,"input"],["mat-button","",1,"submit-btn",3,"click"],["mat-button","",1,"other-btn",3,"click"],[1,"section-body"],[1,"table","pragati-table"],["scope","col"],[4,"ngIf"],[4,"ngFor","ngForOf"],["scope","row"],[1,"action-btn-wrapper"],["title","Edit",1,"action-btn",3,"click"],[1,"fa","fa-edit"],["title","Delete",1,"action-btn",3,"click"],[1,"fa","fa-trash"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4,"Sub Activity Master"),t.qZA()(),t.YNc(5,I,10,0,"div",3),t.qZA(),t.YNc(6,E,13,2,"div",4),t.YNc(7,J,2,0,"ng-template",null,5,t.W1O),t.qZA()),2&n){const o=t.MAs(8);t.xp6(5),t.Q6J("ngIf",i.viewPermission),t.xp6(1),t.Q6J("ngIf",i.viewPermission)("ngIfElse",o)}},dependencies:[w.Lv,h.KE,P.lW,A.Nt,u.sg,u.O5],styles:[".section-wrapper[_ngcontent-%COMP%]{padding:0 15px}.section-wrapper[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{border-bottom:2px solid #C5C5C5;display:flex;align-items:center;justify-content:space-between;padding:18px 0}.section-wrapper[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.buttons-containers[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.submit-btn[_ngcontent-%COMP%]{background:#233a61;color:#fff;font-size:12px;padding-left:23px;padding-right:23px}.submit-btn[_ngcontent-%COMP%]:hover{opacity:.7}.cancel-btn[_ngcontent-%COMP%]{background:#ccc;font-size:12px;padding-left:23px;padding-right:23px}.cancel-btn[_ngcontent-%COMP%]:hover{opacity:.7}.other-btn[_ngcontent-%COMP%]{background:#525252;color:#fff;font-size:12px;padding-left:23px;padding-right:23px}.other-btn[_ngcontent-%COMP%]:hover{opacity:.7}.section-body[_ngcontent-%COMP%]{padding:20px 0 0}mat-form-field[_ngcontent-%COMP%]{display:block}.pragati-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;background:#233A61;color:#fff;font-weight:400;font-size:12px;border:.5px solid #94A3B8;text-align:center;vertical-align:middle}.pragati-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:.5px solid #94A3B8;border-right:.5px solid #94A3B8;font-weight:400;font-size:12px;background:#F4F4F5;text-align:center;vertical-align:middle}.pragati-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n)   td[_ngcontent-%COMP%]{background:#D9DADE}.pragati-table[_ngcontent-%COMP%]   .action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.pragati-table[_ngcontent-%COMP%]   .action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.pragati-table[_ngcontent-%COMP%]   .action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.pragati-table[_ngcontent-%COMP%]   .action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}"]}),e})();var G=s(8898);const Q=[{path:"",component:j}];let X=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[G.S,u.ez,r.UX,[v.Bz.forChild(Q)]]}),e})()}}]);