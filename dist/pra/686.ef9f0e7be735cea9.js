"use strict";(self.webpackChunkpra=self.webpackChunkpra||[]).push([[686],{5686:(Te,k,u)=>{u.r(k),u.d(k,{ProcurmentModuleModule:()=>ye});var h=u(6895),d=u(9299),J=u(1283),r=u(4006),c=u(8608),x=u(5439),_=u(2340),t=u(4650),q=u(2126),b=u(6104),T=u(529),N=u(7957),C=u(3238),f=u(9549),w=u(3546),g=u(9602),v=u(4850),I=u(7392),y=u(4144),P=u(4385),A=u(3683),R=u(4564);function D(i,s){if(1&i&&(t.TgZ(0,"mat-option",48),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.site_name," ")}}function Q(i,s){if(1&i&&(t.TgZ(0,"mat-option",48),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.vendor_name," ")}}function S(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",26)(1,"label",27),t._uU(2,"Vendor"),t.TgZ(3,"span",28),t._uU(4,"*"),t.qZA()(),t.TgZ(5,"mat-select",49),t.NdJ("selectionChange",function(o){t.CHM(e);const a=t.oxw(3);return t.KtG(a.onVendorSelection(o))}),t.YNc(6,Q,2,2,"mat-option",41),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(6),t.Q6J("ngForOf",e.vendorList)}}function j(i,s){if(1&i&&(t.TgZ(0,"mat-option",48),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.item_name," ")}}function Y(i,s){if(1&i&&(t.TgZ(0,"mat-option",48),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.brand_name," ")}}function B(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"a",71),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,a=t.oxw(4);return t.KtG(a.delete(o))}),t._UZ(1,"i",72),t.qZA()}}function $(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr",57)(1,"td",58),t._uU(2),t.qZA(),t.ynx(3,59),t.TgZ(4,"td")(5,"mat-form-field",60)(6,"input",61),t.NdJ("input",function(o){t.CHM(e);const a=t.oxw(4);return t.KtG(a.searchItem(o))}),t.qZA(),t.TgZ(7,"mat-autocomplete",62,63),t.NdJ("optionSelected",function(o){const p=t.CHM(e).index,l=t.oxw(4);return t.KtG(l.selectedItem(o,p))}),t.YNc(9,j,2,2,"mat-option",41),t.qZA()()(),t.TgZ(10,"td",64),t._uU(11),t.qZA(),t.TgZ(12,"td",64),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._UZ(17,"input",65),t.qZA(),t.TgZ(18,"td")(19,"mat-select",66),t.YNc(20,Y,2,2,"mat-option",41),t.qZA()(),t.TgZ(21,"td"),t._UZ(22,"input",67),t.qZA(),t.TgZ(23,"td"),t._UZ(24,"input",68),t.qZA(),t.TgZ(25,"td")(26,"div",69),t.YNc(27,B,2,0,"a",70),t.qZA()(),t.BQk(),t.qZA()}if(2&i){const e=s.$implicit,n=s.index,o=t.MAs(8),a=t.oxw(4);let p,l,m;t.xp6(2),t.hij(" ",n+1," "),t.xp6(1),t.Q6J("formGroupName",n),t.xp6(3),t.Q6J("matAutocomplete",o),t.xp6(1),t.Q6J("displayWith",a.displayItemFn),t.xp6(2),t.Q6J("ngForOf",a.filteredItemList),t.xp6(2),t.hij(" ",null==(p=e.get("category"))?null:p.value," "),t.xp6(2),t.hij(" ",null==(l=e.get("subCategory"))?null:l.value," "),t.xp6(2),t.hij(" ",null==(m=e.get("uom"))?null:m.value," "),t.xp6(5),t.Q6J("ngForOf",a.brandList),t.xp6(7),t.Q6J("ngIf",n>0)}}function E(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",50)(2,"table",51)(3,"tr")(4,"th"),t._uU(5,"S\xa0No"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Item*"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Category"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Sub\xa0category"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Uom*"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Quantity*"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Brand Name"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Rate"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Remarks"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Action"),t.qZA()(),t.TgZ(24,"tbody"),t.YNc(25,$,28,10,"tr",52),t.qZA()()(),t.TgZ(26,"div",53)(27,"div")(28,"button",54),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.addItem())}),t._uU(29," Add Item + "),t.qZA()()(),t.TgZ(30,"div",55)(31,"button",56),t._uU(32,"Submit"),t.qZA()(),t.BQk()}if(2&i){const e=t.oxw(3);t.xp6(25),t.Q6J("ngForOf",e.purchaseRequestForm.get("items").controls)}}function z(i,s){if(1&i&&(t.TgZ(0,"mat-option",48),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.item_name," ")}}function V(i,s){if(1&i&&(t.TgZ(0,"mat-option",48),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.brand_name," ")}}function G(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"a",71),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,a=t.oxw(4);return t.KtG(a.delete(o))}),t._UZ(1,"i",72),t.qZA()}}function K(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr",57)(1,"td",58),t._uU(2),t.qZA(),t.ynx(3,59),t.TgZ(4,"td")(5,"mat-form-field",60)(6,"input",61),t.NdJ("input",function(o){t.CHM(e);const a=t.oxw(4);return t.KtG(a.searchItem(o))}),t.qZA(),t.TgZ(7,"mat-autocomplete",62,63),t.NdJ("optionSelected",function(o){const p=t.CHM(e).index,l=t.oxw(4);return t.KtG(l.selectedItem(o,p))}),t.YNc(9,z,2,2,"mat-option",41),t.qZA()()(),t.TgZ(10,"td",64),t._uU(11),t.qZA(),t.TgZ(12,"td",64),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._UZ(17,"input",65),t.qZA(),t.TgZ(18,"td")(19,"mat-select",66),t.YNc(20,V,2,2,"mat-option",41),t.qZA()(),t.TgZ(21,"td"),t._UZ(22,"input",68),t.qZA(),t.TgZ(23,"td")(24,"div",69),t.YNc(25,G,2,0,"a",70),t.qZA()(),t.BQk(),t.qZA()}if(2&i){const e=s.$implicit,n=s.index,o=t.MAs(8),a=t.oxw(4);let p,l,m;t.xp6(2),t.hij(" ",n+1," "),t.xp6(1),t.Q6J("formGroupName",n),t.xp6(3),t.Q6J("matAutocomplete",o),t.xp6(1),t.Q6J("displayWith",a.displayItemFn),t.xp6(2),t.Q6J("ngForOf",a.filteredItemList),t.xp6(2),t.hij(" ",null==(p=e.get("category"))?null:p.value," "),t.xp6(2),t.hij(" ",null==(l=e.get("subCategory"))?null:l.value," "),t.xp6(2),t.hij(" ",null==(m=e.get("uom"))?null:m.value," "),t.xp6(5),t.Q6J("ngForOf",a.brandList),t.xp6(5),t.Q6J("ngIf",n>0)}}function H(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",50)(1,"table",51)(2,"tr")(3,"th"),t._uU(4,"S\xa0No"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Item*"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Category"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Sub\xa0category"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Uom*"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Quantity*"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Brand Name"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Remarks"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Action"),t.qZA()(),t.TgZ(21,"tbody"),t.YNc(22,K,26,10,"tr",52),t.qZA()()(),t.TgZ(23,"div",53)(24,"div")(25,"button",54),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.addItem())}),t._uU(26," Add Item + "),t.qZA()()(),t.TgZ(27,"div",55)(28,"button",56),t._uU(29,"Submit"),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(22),t.Q6J("ngForOf",e.purchaseRequestForm.get("items").controls)}}function W(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",23),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onSubmit())}),t.TgZ(2,"mat-card",24)(3,"div",25)(4,"div",26)(5,"label",27),t._uU(6,"Request title "),t.TgZ(7,"span",28),t._uU(8,"*"),t.qZA()(),t._UZ(9,"input",29),t.qZA(),t.TgZ(10,"div",30)(11,"label",27),t._uU(12,"Request date"),t.qZA(),t.TgZ(13,"div",31)(14,"mat-form-field",32),t._UZ(15,"input",33)(16,"mat-datepicker-toggle",34)(17,"mat-datepicker"),t.qZA()()(),t.TgZ(18,"div",35)(19,"label",36),t._uU(20," Required by "),t.TgZ(21,"span",28),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"div",31)(24,"mat-form-field",32)(25,"input",37),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(28);return t.KtG(o.open())}),t.qZA(),t._UZ(26,"mat-datepicker-toggle",38)(27,"mat-datepicker",null,39),t.qZA()()(),t.TgZ(29,"div",26)(30,"label",27),t._uU(31,"Site name "),t.TgZ(32,"span",28),t._uU(33,"*"),t.qZA()(),t.TgZ(34,"mat-select",40),t.NdJ("selectionChange",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.selectedSite(o))}),t.YNc(35,D,2,2,"mat-option",41),t.qZA()(),t.TgZ(36,"div",26)(37,"label",42),t._uU(38,"Local Purchase "),t.TgZ(39,"input",43),t.NdJ("change",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handleLocalPurchaseChange())}),t.qZA()()(),t.TgZ(40,"div",44)(41,"label",27),t._uU(42,"Purchase request no "),t.qZA(),t._UZ(43,"input",45),t.qZA(),t.YNc(44,S,7,1,"div",46),t.qZA()(),t.YNc(45,E,33,1,"ng-container",18),t.YNc(46,H,30,1,"ng-template",null,47,t.W1O),t.qZA(),t.BQk()}if(2&i){const e=t.MAs(28),n=t.MAs(47),o=t.oxw(2);let a,p;t.xp6(1),t.Q6J("formGroup",o.purchaseRequestForm),t.xp6(14),t.Q6J("readonly",!0),t.xp6(10),t.Q6J("matDatepicker",e)("min",o.requredByMinDate),t.xp6(1),t.Q6J("for",e),t.xp6(9),t.Q6J("ngForOf",o.siteList),t.xp6(8),t.Q6J("value",o.requestNo),t.xp6(1),t.Q6J("ngIf","yes"===(null==(a=o.purchaseRequestForm.get("local_purchase"))?null:a.value)),t.xp6(1),t.Q6J("ngIf","yes"===(null==(p=o.purchaseRequestForm.get("local_purchase"))?null:p.value))("ngIfElse",n)}}function X(i,s){if(1&i&&(t.TgZ(0,"mat-option",48),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.label)}}const U=function(i){return["/procurement/details",i]};function tt(i,s){if(1&i&&(t.TgZ(0,"td",93)(1,"a",94),t._uU(2," View\xa0details "),t.qZA()()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(1,U,e._id))}}function et(i,s){if(1&i&&(t.TgZ(0,"td",93)(1,"a",95),t._uU(2," Approved ticket "),t.qZA()()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(1,U,e._id))}}function nt(i,s){if(1&i&&(t.TgZ(0,"td",93)(1,"a",96),t._uU(2," Rejected "),t.qZA()()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(1,U,e._id))}}const it=function(i){return["/procurement/revise",i]};function rt(i,s){if(1&i&&(t.TgZ(0,"td",93)(1,"a",97),t._uU(2," Revise "),t.qZA()()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(1,it,e._id))}}function ot(i,s){if(1&i&&(t.TgZ(0,"tr")(1,"td",88),t._uU(2),t.qZA(),t.TgZ(3,"td",89),t._uU(4),t.qZA(),t.TgZ(5,"td",90),t._uU(6),t.qZA(),t.YNc(7,tt,3,3,"td",91),t.YNc(8,et,3,3,"td",91),t.YNc(9,nt,3,3,"td",91),t.YNc(10,rt,3,3,"td",91),t.TgZ(11,"td",92)(12,"mat-icon"),t._uU(13," arrow_forward_ios "),t.qZA()()()),2&i){const e=s.$implicit;t.xp6(2),t.hij("Request\xa0no: ",e.purchase_request_number,""),t.xp6(2),t.hij("Title: ",e.title,""),t.xp6(2),t.hij("Site: ",e.siteData.site_name," "),t.xp6(1),t.Q6J("ngIf","pending"==e.status),t.xp6(1),t.Q6J("ngIf","approved"==e.status),t.xp6(1),t.Q6J("ngIf","rejected"==e.status),t.xp6(1),t.Q6J("ngIf","revise"==e.status)}}function at(i,s){1&i&&(t.TgZ(0,"div",98),t._UZ(1,"img",99),t.TgZ(2,"span"),t._uU(3," No record found"),t.qZA()())}function st(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",73)(2,"div")(3,"div",74)(4,"span"),t._uU(5,"Filter by title "),t.qZA()(),t.TgZ(6,"mat-form-field",75)(7,"mat-icon",34),t._uU(8,"search"),t.qZA(),t.TgZ(9,"input",76),t.NdJ("input",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.search(o,"title"))}),t.qZA()()(),t.TgZ(10,"div")(11,"div",74)(12,"span"),t._uU(13,"Filter by date"),t.qZA()(),t.TgZ(14,"div")(15,"mat-form-field",77)(16,"input",78),t.NdJ("dateChange",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.dateFilter(o))})("click",function(){t.CHM(e);const o=t.MAs(19);return t.KtG(o.open())}),t.qZA(),t._UZ(17,"mat-datepicker-toggle",38)(18,"mat-datepicker",null,79),t.qZA()()(),t.TgZ(20,"div")(21,"div",74)(22,"span"),t._uU(23,"Filter by site"),t.qZA()(),t.TgZ(24,"div")(25,"mat-form-field",77)(26,"input",80),t.NdJ("input",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.search(o,"site"))}),t.qZA()()()(),t.TgZ(27,"div",81)(28,"div",74)(29,"span"),t._uU(30,"Filter by Status"),t.qZA()(),t.TgZ(31,"div",82)(32,"mat-form-field",32)(33,"mat-select",83),t.NdJ("selectionChange",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onStatusChange(o))}),t.YNc(34,X,2,2,"mat-option",41),t.qZA()()()()(),t.TgZ(35,"div",84)(36,"table",85)(37,"tbody"),t.YNc(38,ot,14,7,"tr",86),t.qZA()(),t.YNc(39,at,4,0,"div",87),t.qZA(),t.BQk()}if(2&i){const e=t.MAs(19),n=t.oxw(2);t.xp6(16),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e),t.xp6(16),t.Q6J("formControl",n.statusOption),t.xp6(1),t.Q6J("ngForOf",n.statusList),t.xp6(4),t.Q6J("ngForOf",n.purchaseList),t.xp6(1),t.Q6J("ngIf",!(n.purchaseList&&n.purchaseList.length>0))}}const M=function(i){return{active:i}};function pt(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",20)(2,"div",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.option=1)}),t._uU(3,"Create request"),t.qZA(),t.TgZ(4,"div",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.option=2,t.KtG(o.getPurchaseList({filter_by:o.filter_by,filter_value:o.statusOption.value}))}),t._uU(5," Request list "),t.qZA()(),t.YNc(6,W,48,10,"ng-container",22),t.YNc(7,st,40,6,"ng-container",22),t.BQk()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngClass",t.VKq(4,M,1==e.option)),t.xp6(2),t.Q6J("ngClass",t.VKq(6,M,2==e.option)),t.xp6(2),t.Q6J("ngIf",1==e.option),t.xp6(1),t.Q6J("ngIf",2==e.option)}}function lt(i,s){1&i&&(t.TgZ(0,"h3",100),t._uU(1,"You don't have permissions to view."),t.qZA())}const ct=function(){return["/procurement"]},ut=function(){return["/procurement/prlist"]},dt=function(){return["/rate-comparative"]},_t=function(){return["/rate-approval"]},mt=function(){return["/purchase-order"]};let gt=(()=>{class i{constructor(e,n,o,a,p,l){this.router=e,this.httpService=n,this.snack=o,this.formBuilder=a,this.http=p,this.route=l,this.statusOption=new r.NI("pending"),this.statusList=[{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"revise",label:"Revise"}],this.requredByMinDate=new Date,this.vendorSearch="",this.filteredVendorList=[],this.load=!1,this.items=[],this.option=1,this.purchaseList=[],this.filter_by="status",this.originalPurchaseList=[],this.filter_value="pending",this.requestNo=0,this.details={},this.purchaseRequestForm=new r.cw({title:new r.NI("",r.kI.required),date:new r.NI(x().format("DD-MM-YYYY"),r.kI.required),expected_delivery_date:new r.NI(x().add(1,"days").format("DD-MM-YYYY"),r.kI.required),purchase_request_number:new r.NI(null,r.kI.required),site:new r.NI("",r.kI.required),local_purchase:new r.NI("no",r.kI.required),remarks:new r.NI(""),items:this.formBuilder.array([]),vendor:new r.NI})}onSubmit(){if(this.load||!this.purchaseRequestForm.valid)return;let e=this.purchaseRequestForm.value;if(e.requestNo=this.requestNo,e.date=x(e.date,"DD-MM-YYYY").toDate(),e.expected_delivery_date=new Date(e.expected_delivery_date),"yes"===this.purchaseRequestForm.get("local_purchase").value){let n=[],o={Vendor:e.vendor||null,items:[]};if(e.items&&this.itemList)for(let a of e.items){let p={item:this.itemList.find(l=>l._id===a.item_id)||null,RequiredQuantity:a.qty,Rate:a.rate,SubTotalAmount:a.qty*a.rate,Total:0};p.item&&(delete p.item.category,delete p.item.created_at,delete p.item.gst,p.item.gstDetail&&(p.item.tax={amount:p.item.gstDetail.gst_percentage||0,name:p.item.gstDetail.gst_name||""},delete p.item.gstDetail),delete p.item.item_number,delete p.item.specification,delete p.item.sub_category,delete p.item.uom,delete p.item.updated_at,p.item.qty=p.RequiredQuantity,p.item.item_id=a.item_id,p.item.remark=a.remark,p.Total=a.qty*a.rate+a.qty*a.rate*(p.item.tax?p.item.tax.amount:0)/100,o.items.push(p))}n.push(o),e.vendorItems=n}this.load=!0,this.httpService.POST(c.Fj,e).subscribe({next:n=>{this.load=!1,this.snack.notify("Purchase request has been created.",1),this.purchaseRequestForm.reset(),this.purchaseRequestForm.markAsUntouched(),this.option=2,this.getPurchaseList({filter_by:this.filter_by,filter_value:this.statusOption.value})},error:n=>{if(this.load=!1,n.errors&&Object.keys(n.errors).length>0){let o="<ul>";for(let a in n.errors)o+=`<li>${n.errors[a][0]}</li>`;o+="</ul>",this.snack.notifyHtml(o,2)}else this.snack.notify(n.message||"An error occurred",2)}})}getList(){const e=this.http.get(`${_.N.api_path}${c.PE}`),n=this.http.get(`${_.N.api_path}${c.o7}`),o=this.http.get(`${_.N.api_path}${c.S3}`),a=this.http.get(`${_.N.api_path}${c.ds}`),p=this.http.get(`${_.N.api_path}${c.Lk}`);this.httpService.multipleRequests([e,n,o,a,p],{}).subscribe(l=>{l&&(this.uomList=l[0].data,this.itemList=l[1].data,this.siteList=l[2].data,this.vendorList=l[3].data,this.brandList=l[4].data,console.log("--itemList--"),console.log(this.itemList),console.log("--itemList--"),this.filteredItemList=this.itemList)})}addItem(){this.items=this.purchaseRequestForm.get("items"),"yes"===this.purchaseRequestForm.get("local_purchase").value?this.items.push(this.createLocalItem()):this.items.push(this.createItem())}selectedItem(e,n){console.log(e.option.value);let o=this.itemList.filter(l=>l._id==e.option.value._id)[0]?.categoryDetail.name,a=this.itemList.filter(l=>l._id==e.option.value._id)[0]?.subCategoryDetail.subcategory_name,p=this.itemList.filter(l=>l._id==e.option.value._id)[0]?.uomDetail.uom_name;this.items.at(n).patchValue({category:o,subCategory:a,uom:p})}createItem(){return this.formBuilder.group({item_id:new r.NI("",r.kI.required),qty:new r.NI("",r.kI.required),category:new r.NI(null),subCategory:new r.NI(null),attachment:new r.NI(""),remark:new r.NI(""),uom:new r.NI(""),brandName:new r.NI("")})}createLocalItem(){return this.formBuilder.group({item_id:new r.NI("",r.kI.required),qty:new r.NI("",r.kI.required),category:new r.NI(null),subCategory:new r.NI(null),attachment:new r.NI(""),remark:new r.NI(""),uom:new r.NI(""),brandName:new r.NI(""),rate:new r.NI(""),gst:new r.NI(""),freight:new r.NI("")})}handleLocalPurchaseChange(){"yes"===this.purchaseRequestForm.get("local_purchase").value?this.purchaseRequestForm.get("local_purchase").setValue("no"):this.purchaseRequestForm.get("local_purchase").setValue("yes"),this.purchaseRequestForm.get("items").clear(),this.addItem()}onVendorSelection(e){const n=this.vendorList.find(o=>o._id===e.value);n?this.filteredItemList=this.itemList.filter(o=>{const a=n.category.some(l=>l===o.category),p=n.SubCategory.some(l=>l===o.sub_category);return a&&p}):(console.warn("No matching vendor found for the selected ID."),this.filteredItemList=[])}delete(e){this.purchaseRequestForm.get("items").removeAt(e)}onStatusChange(e){this.getPurchaseList({filter_by:this.filter_by,filter_value:e.value})}selectedSite(e){console.log("event____selectedsite",e);const n=this.siteList.find(l=>l._id==e.value),p=(n.site_name.replace(/[ ,]/g,"_"),this.http.get(`${_.N.api_path}${c.Fj}`));this.httpService.multipleRequests([p],{}).subscribe(l=>{if(l){this.purchaseList=l[0].data;const m=this.purchaseList.filter(Ae=>Ae.siteData.site_name.includes(n.site_name));this.requestNo=m.length+1,this.purchaseRequestForm.controls.purchase_request_number.setValue(this.requestNo)}})}getPurchaseList(e){this.httpService.GET(c.Fj,e).subscribe({next:n=>{this.originalPurchaseList=n.data,this.purchaseList=n.data}})}dateFilter(e){this.originalPurchaseList&&this.originalPurchaseList.length>0&&(this.purchaseList=e.value?this.originalPurchaseList.filter(n=>new Date(n.date)==new Date(e.value)):this.originalPurchaseList)}search(e,n){console.log("event: ",e.data,n),this.originalPurchaseList&&this.originalPurchaseList.length>0&&(this.purchaseList="site"==n?e.target.value?this.originalPurchaseList.filter(o=>o.siteData.site_name.toLowerCase().includes(e.target.value.toLowerCase())):this.originalPurchaseList:e.target.value?this.originalPurchaseList.filter(o=>o.title.toLowerCase().includes(e.target.value.toLowerCase())):this.originalPurchaseList)}displayItemFn(e){return e?e.item_name:""}searchItem(e){console.log(e);const n=e.target.value.toLowerCase();this.itemList&&this.itemList.length>0&&(this.filteredItemList=e.target.value?this.itemList.filter(o=>o.item_name.toLowerCase().includes(n)):this.itemList)}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.permissions=this.permissions.permissions[0].ParentChildchecklist[9],this.getList(),this.addItem()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(d.F0),t.Y36(q.s),t.Y36(b.o),t.Y36(r.qu),t.Y36(T.eN),t.Y36(d.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-purchase-request"]],decls:46,vars:12,consts:[[1,"main-container"],[2,"height","100px","background-color","#fff"],[2,"margin-top","40px","margin-left","20px"],["src","./assets/images/preq.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/prl.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],["src","./assets/images/rc.svg"],[2,"width","100px","margin-left","10px","margin-top","10px","border","1px dashed"],["src","./assets/images/po.svg"],[4,"ngIf","ngIfElse"],["noView",""],[1,"requests"],[3,"ngClass","click"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","10px","max-width","100%"],[1,"flex-div",2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],[1,"star"],["placeholder","Enter title","formControlName","title",2,"width","75%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","3px","font-family","Poppins","height","50px"],[1,"flex-div","custom-form-group"],[1,"custom-form-control"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Enter Required by date",3,"readonly"],["matSuffix",""],[1,"flex-div","custom-form-group",2,"margin-right","45px"],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by date",2,"width","100%",3,"matDatepicker","min","click"],["matSuffix","",3,"for"],["requiredByStartDate",""],["id","site","placeholder","Select site","formControlName","site",2,"padding","10px","width","75%","border","1px solid #ccc","border-radius","6px","cursor","pointer","font-family","Poppins",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[2,"color","#4272BF"],["type","checkbox","name","local_purchase_checkbox",2,"transform","scale(1.5)","margin-left","20px","margin-top","30px",3,"change"],[2,"display","flex","flex-direction","column"],["placeholder","Select Site Name First","formControlName","purchase_request_number","readonly","",1,"reqNO",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9F9F9F","cursor","pointer","margin-top","10px","font-family","Poppins",3,"value"],["class","flex-div","style","display: flex; flex-direction: column;",4,"ngIf"],["noLocalPurchase",""],[3,"value"],["id","site","placeholder","Select Vendor","formControlName","vendor",2,"padding","10px","width","75%","border","1px solid #ccc","border-radius","6px","cursor","pointer","font-family","Poppins",3,"selectionChange"],[1,"scroll-bar1"],[1,"items-table",2,"direction","ltr !important","border-left","2px solid #000 !important"],["style","background-color: #F4F4F5;","formArrayName","items",4,"ngFor","ngForOf"],[2,"display","flex","flex-direction","row","gap","40px","margin-left","38px","margin-bottom","100px","margin-top","100px","top","-50px","position","relative"],[2,"padding","8px","width","120px","background-color","#fff","cursor","pointer","border","0.5px solid #94A3B8","border-radius","5px","font-size","14px","font-family","Poppins",3,"click"],[2,"display","flex","justify-content","center","margin-top","-126px","margin-bottom","20px"],[2,"padding","8px","width","120px","background-color","#233A61","color","#fff","border-radius","5px","border-color","lightgrey","font-size","14px","font-family","Poppins"],["formArrayName","items",2,"background-color","#F4F4F5"],[2,"text-align","center"],[3,"formGroupName"],[1,"example-full-width"],["type","text","placeholder","Select Item","aria-label","Item","matInput","","formControlName","item_id",3,"matAutocomplete","input"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[2,"color","#000"],["type","text","placeholder","Enter","digitOnly","","formControlName","qty",1,"pr-form-field"],["id","site","placeholder","Select Brand","formControlName","brandName",1,"pr-form-field"],["type","text","placeholder","Enter","digitOnly","","formControlName","rate",1,"pr-form-field"],["placeholder","Enter","formControlName","remark",1,"pr-form-field"],[1,"action-btn-wrapper"],["class","action-btn","title","Delete",3,"click",4,"ngIf"],["title","Delete",1,"action-btn",3,"click"],[1,"fa","fa-trash"],[2,"display","flex","flex-direction","row","gap","10px","margin","0 27px"],[2,"margin-top","15px","color","#94A3B8"],["appearance","outline",1,"searchbar"],["matInput","","type","search","placeholder","search title",1,"search-input",3,"input"],["appearance","outline",1,"datebar"],["matInput","","placeholder","Date",3,"matDatepicker","dateChange","click"],["startPicker",""],["matInput","","placeholder","Site",3,"input"],[1,"custom-form-group"],[1,"custom-form-control",2,"position","relative"],[3,"formControl","selectionChange"],[1,"scroll-bar1",2,"width","93%"],[1,"r-list",2,"direction","ltr !important","margin-top","-20px"],[4,"ngFor","ngForOf"],["class","no-record-found",4,"ngIf"],[2,"color","#4272BF","width","300px","text-align","left","padding","18px"],[2,"color","#4272BF","width","200px"],[2,"color","#4272BF","width","800px","text-align","left","padding","18px"],["style","width: 20%;\n            text-align: right;",4,"ngIf"],[2,"width","100px"],[2,"width","20%","text-align","right"],[1,"viewdetail-btn",3,"routerLink"],[1,"viewdetail-btn",2,"background-color","#54AA52","color","#fff",3,"routerLink"],[1,"viewdetail-btn",2,"background-color","#C7323B","color","#fff",3,"routerLink"],[1,"viewdetail-btn",2,"background-color","#ECD172","color","#fff",3,"routerLink"],[1,"no-record-found"],["src","./assets/images/inbox_empty.png","alt",""],[2,"display","flex","justify-content","center","margin-top","2%","font-size","160%","font-weight","bolder","color","grey"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"mat-toolbar",1)(2,"div",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"span",4),t._uU(5,"Purchase Request "),t.qZA(),t._UZ(6,"span",5),t.qZA(),t.TgZ(7,"div"),t._UZ(8,"hr",6),t.qZA(),t.TgZ(9,"div",7)(10,"div",8)(11,"div"),t._UZ(12,"img",9),t.qZA(),t.TgZ(13,"span",10),t._uU(14,"Purchase\xa0request"),t.qZA(),t.TgZ(15,"div"),t._UZ(16,"mat-divider",11),t.qZA()(),t.TgZ(17,"div",12)(18,"div"),t._UZ(19,"img",13),t.qZA(),t.TgZ(20,"span",14),t._uU(21,"Approvals"),t.qZA(),t.TgZ(22,"div"),t._UZ(23,"mat-divider",11),t.qZA()(),t.TgZ(24,"div",12)(25,"div"),t._UZ(26,"img",15),t.qZA(),t.TgZ(27,"span",14),t._uU(28,"Rate\xa0Comparative"),t.qZA(),t.TgZ(29,"div"),t._UZ(30,"mat-divider",11),t.qZA()(),t.TgZ(31,"div",12)(32,"div"),t._UZ(33,"img",13),t.qZA(),t.TgZ(34,"span",14),t._uU(35,"Rate\xa0Approvals"),t.qZA(),t.TgZ(36,"div"),t._UZ(37,"mat-divider",16),t.qZA()(),t.TgZ(38,"div",12)(39,"div"),t._UZ(40,"img",17),t.qZA(),t.TgZ(41,"span",14),t._uU(42,"Purchase\xa0orders"),t.qZA()()(),t.YNc(43,pt,8,8,"ng-container",18),t.YNc(44,lt,2,0,"ng-template",null,19,t.W1O),t.qZA()),2&e){const o=t.MAs(45);t.xp6(10),t.Q6J("routerLink",t.DdM(7,ct)),t.xp6(7),t.Q6J("routerLink",t.DdM(8,ut)),t.xp6(7),t.Q6J("routerLink",t.DdM(9,dt)),t.xp6(7),t.Q6J("routerLink",t.DdM(10,_t)),t.xp6(7),t.Q6J("routerLink",t.DdM(11,mt)),t.xp6(5),t.Q6J("ngIf",n.permissions.childList[0].isSelected)("ngIfElse",o)}},dependencies:[N.XC,N.ZL,C.ey,f.KE,f.R9,w.a8,g.Mq,g.hl,g.nW,v.d,I.Hw,y.Nt,P.gD,A.Ye,h.mk,h.sg,h.O5,r._Y,r.Fj,r.JJ,r.JL,r.oH,r.sg,r.u,r.x0,r.CE,R.L,d.rH,d.yS,d.Od],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.requests[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:40px;width:250px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;flex:1}.requests[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.2)}.requests[_ngcontent-%COMP%]   div.active[_ngcontent-%COMP%]{background-color:#233a61!important;color:#fff}.topcard[_ngcontent-%COMP%]{width:1140px;height:auto;margin-left:30px;margin-top:30px;box-shadow:0 2px 12px #00000040;font-family:Poppins}table.items-table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;font-size:14px;margin:8px 20px 20px 10px}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;width:1000px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}.items-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}.scroll-bar1[_ngcontent-%COMP%]{height:auto;width:calc(100% - 25px);margin-left:25px;margin-bottom:10px;margin-top:50px;overflow:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background:none}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.r-list[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0 25px}.r-list[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#e5e6eb!important}.viewdetail-btn[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;cursor:pointer;text-align:center;padding:18px 25px}.no-record-found[_ngcontent-%COMP%]{text-align:center;display:flex;gap:10px;flex-direction:column;align-items:center;justify-content:center}.no-record-found[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:188px}.mat-radio-button[_ngcontent-%COMP%]   .mat-radio-label[_ngcontent-%COMP%]{margin-right:5px!important}.flex-div[_ngcontent-%COMP%]{width:31%}.main-container[_ngcontent-%COMP%]{margin:10px 20px 0 15px}']}),i})();var Z=u(1948);function ht(i,s){if(1&i&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.site_name," ")}}function ft(i,s){if(1&i&&(t.TgZ(0,"div",50)(1,"label",21),t._uU(2,"Vendor "),t.qZA(),t._UZ(3,"input",51),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("readonly",!0)("value",e.selectedVendor)}}function xt(i,s){if(1&i&&(t.TgZ(0,"tr",55)(1,"td",56),t._uU(2),t.qZA(),t.ynx(3),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",57),t._uU(7),t.qZA(),t.TgZ(8,"td",57),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td",57),t._uU(13),t.qZA(),t.TgZ(14,"td",57),t._uU(15),t.qZA(),t.TgZ(16,"td",57),t._uU(17),t.qZA(),t.TgZ(18,"td",57),t._uU(19),t.qZA(),t.BQk(),t.qZA()),2&i){const e=s.$implicit,n=s.index,o=t.oxw(2);t.xp6(2),t.hij(" ",n+1," "),t.xp6(3),t.hij(" ",o.getItemName(e.item_id)," "),t.xp6(2),t.hij(" ",e.categoryDetail.name," "),t.xp6(2),t.hij(" ",e.subCategoryDetail.subcategory_name," "),t.xp6(2),t.hij(" ",e.uomDetail.uom_name," "),t.xp6(2),t.hij(" ",e.qty," "),t.xp6(2),t.hij(" ",o.myBrandName(e.brandName)," "),t.xp6(2),t.hij(" ",e.rate," "),t.xp6(2),t.hij(" ",e.remark," ")}}function Zt(i,s){if(1&i&&(t.TgZ(0,"div")(1,"div",52)(2,"table",53)(3,"tr")(4,"th"),t._uU(5,"S\xa0No"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Item*"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Category"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Sub\xa0category"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Uom*"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Quantity*"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Brand Name"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Rate"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Remarks"),t.qZA()(),t.TgZ(22,"tbody"),t.YNc(23,xt,20,9,"tr",54),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(23),t.Q6J("ngForOf",null==e.details?null:e.details.items)}}function qt(i,s){if(1&i&&(t.TgZ(0,"tr",55)(1,"td",56),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",57),t._uU(6),t.qZA(),t.TgZ(7,"td",57),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA()()),2&i){const e=s.$implicit,n=s.index,o=t.oxw(2);t.xp6(2),t.hij(" ",n+1," "),t.xp6(2),t.hij(" ",o.getItemName(e.item_id)," "),t.xp6(2),t.hij(" ",e.categoryDetail.name," "),t.xp6(2),t.hij(" ",e.subCategoryDetail.subcategory_name," "),t.xp6(2),t.hij(" ",e.uomDetail.uom_name," "),t.xp6(2),t.hij(" ",e.qty," "),t.xp6(2),t.hij(" ",o.myBrandName(e.brandName)," "),t.xp6(2),t.hij(" ",e.remark," ")}}function bt(i,s){if(1&i&&(t.TgZ(0,"div",52)(1,"table",58)(2,"tr")(3,"th"),t._uU(4,"S\xa0No"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Item*"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Category"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Sub\xa0category"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Uom*"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Quantity*"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Brand Name"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Remarks"),t.qZA()(),t.TgZ(19,"tbody"),t.YNc(20,qt,17,8,"tr",54),t.qZA()()()),2&i){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",null==e.details?null:e.details.items)}}function vt(i,s){1&i&&(t.TgZ(0,"button",59),t._uU(1,"Pending"),t.qZA())}function yt(i,s){1&i&&(t.TgZ(0,"button",60),t._uU(1,"Approved"),t.qZA())}function At(i,s){1&i&&(t.TgZ(0,"button",61),t._uU(1,"Rejected"),t.qZA())}const Tt=function(){return["/procurement"]},Ct=function(){return["/procurement/prlist"]},wt=function(){return["/rate-comparative"]},Pt=function(){return["/rate-approval"]},Ut=function(){return["/purchase-order"]};let kt=(()=>{class i{constructor(e,n,o,a,p,l){this.router=e,this.httpService=n,this.snack=o,this.formBuilder=a,this.route=p,this.http=l,this.load=!1,this.purchaseRequestForm=new r.cw({title:new r.NI("",r.kI.required),date:new r.NI("",r.kI.required),expected_delivery_date:new r.NI("",r.kI.required),purchase_request_number:new r.NI(""),site:new r.NI({value:"",disabled:!0},r.kI.required),local_purchase:new r.NI({value:"",disabled:!0},r.kI.required),remarks:new r.NI("",[]),items:this.formBuilder.array([]),_id:new r.NI}),this.details={},this.getList()}getList(){const e=this.http.get(`${_.N.api_path}${c.PE}`),n=this.http.get(`${_.N.api_path}${c.o7}`),o=this.http.get(`${_.N.api_path}${c.S3}`),a=this.http.get(`${_.N.api_path}${c.Lk}`);this.httpService.multipleRequests([e,n,o,a],{}).subscribe(p=>{p&&(this.uomList=p[0].data,this.itemList=p[1].data,this.siteList=p[2].data,this.brandList=p[3].data)})}patchData(e){this.purchaseRequestForm.patchValue({title:e.title,date:e.date,expected_delivery_date:e.expected_delivery_date,purchase_request_number:e.purchase_request_number,site:e.site,local_purchase:e.local_purchase,remarks:e.remarks}),this.purchaseRequestForm.controls.remarks.disable()}createItemArrayForm(){return new r.cw({item_id:new r.NI("",r.kI.required),qty:new r.NI("",r.kI.required),category:new r.NI(""),subCategory:new r.NI(""),attachment:new r.NI(""),remark:new r.NI("",r.kI.required),uom:new r.NI("",r.kI.required),brandName:new r.NI("")})}addItems(e){this.items=this.purchaseRequestForm.get("items"),e&&this.items.push(this.createItem(e))}createItem(e){if(e)return new r.cw({item_id:new r.NI(e.item_id,r.kI.required),qty:new r.NI(e.qty,r.kI.required),category:new r.NI(e.categoryDetail.name),subCategory:new r.NI(e.subCategoryDetail.subcategory_name),attachment:new r.NI(e.attachment),remark:new r.NI(e.remark,r.kI.required),uom:new r.NI(e.uomDetail._id,r.kI.required),brandName:new r.NI(e.brandName)})}myBrandName(e){if(this.brandList)return this.brandList.filter(o=>o._id==e)[0].brand_name}getSiteList(){this.httpService.GET(c.S3,{}).subscribe(e=>{this.siteList=e})}getItemName(e){if(this.itemList&&this.itemList.length>0)return this.itemList.filter(n=>n._id==e)[0].item_name}updateRequest(e){this.httpService.PUT(c.Fj,{_id:this.details._id,status:e,remarks:this.purchaseRequestForm.value.remarks}).subscribe(n=>{this.router.navigate(["/procurement/prlist"])})}getVendorName(){if(this.details.vendor){const e=this.http.get(`${_.N.api_path}${c.Iy}?_id=${this.details.vendor}`);this.httpService.multipleRequests(e,{}).subscribe(n=>{n&&(console.log(n[0]),this.selectedVendor=n[0].data[0].vendor_name)})}}ngOnInit(){this.route.params.subscribe(e=>{e.id&&this.httpService.GET(`${c.Fj}/detail`,{_id:e.id}).subscribe({next:n=>{this.details=n.data[0],console.log(this.details),this.getVendorName(),this.patchData(n.data[0])},error:n=>{this.router.navigate(["/procurement/prlist"])}})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(d.F0),t.Y36(q.s),t.Y36(b.o),t.Y36(r.qu),t.Y36(d.gz),t.Y36(T.eN))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-purchase-request-details"]],decls:101,vars:27,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-left","20px"],["src","./assets/images/preq.svg",2,"width","30px"],[2,"font-family","Poppins","font-style","normal","font-weight","600","font-size","22px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","100%","border","2px solid #C5C5C5"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/prl.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],["src","./assets/images/rc.svg"],[2,"width","100px","margin-left","10px","margin-top","10px","border","1px dashed"],["src","./assets/images/po.svg"],[3,"formGroup"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","10px","max-width","100%"],[1,"flex-div",2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],["placeholder","Enter title","formControlName","title",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","3px","font-family","Poppins","height","50px",3,"readonly"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Auto generate Request Date",3,"matDatepicker","readonly"],["matSuffix","",3,"for"],["date",""],[1,"flex-div","custom-form-group"],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],[1,"star"],[1,"custom-form-control"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by",3,"matDatepicker","readonly"],["requiredByStartDate",""],["placeholder","Auto generate","formControlName","purchase_request_number","readonly","",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","10px","font-family","Poppins"],["id","site","placeholder","Select site","formControlName","site",2,"padding","10px","width","100","border","1px solid #ccc","border-radius","6px","cursor","pointer","margin-top","10px","font-family","Poppins"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-div",2,"display","flex","flex-direction","column","align-items","center"],[2,"color","#4272BF","margin-bottom","10px"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group"],[1,"example-radio-button",3,"value"],["style","display: flex;flex-direction: column;",4,"ngIf"],[4,"ngIf","ngIfElse"],["noLocalPurchase",""],[1,"text-area-section"],["name","","id","","cols","30","rows","5","formControlName","remarks"],[1,"button-list"],["class","pending",4,"ngIf"],["style","padding: 8px;width: 120px;background-color: #35B568;color: #fff;border-radius: 5px;border-color: lightgrey;font-size: 14px;font-family: 'Poppins';",4,"ngIf"],["style","padding: 8px;width: 120px;background-color: #C7323B;color: #233A61;border: 1px solid #94A3B8;border-radius: 5px;font-size: 14px;font-family: 'Poppins';",4,"ngIf"],[3,"value"],[2,"display","flex","flex-direction","column"],["placeholder","Enter Vendor",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9F9F9F","cursor","pointer","margin-top","10px","font-family","Poppins",3,"readonly","value"],[1,"scroll-bar1"],[2,"direction","ltr !important","border-left","2px solid #000 !important"],["style","background-color: #F4F4F5;",4,"ngFor","ngForOf"],[2,"background-color","#F4F4F5"],[2,"text-align","center"],[2,"color","#000"],[2,"direction","ltr !important","border-left","2px solid #000 !important","width","100%"],[1,"pending"],[2,"padding","8px","width","120px","background-color","#35B568","color","#fff","border-radius","5px","border-color","lightgrey","font-size","14px","font-family","Poppins"],[2,"padding","8px","width","120px","background-color","#C7323B","color","#233A61","border","1px solid #94A3B8","border-radius","5px","font-size","14px","font-family","Poppins"]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Summary "),t.qZA(),t._UZ(5,"span",4),t.qZA(),t.TgZ(6,"div"),t._UZ(7,"hr",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7)(10,"div"),t._UZ(11,"img",8),t.qZA(),t.TgZ(12,"span",9),t._uU(13,"Purchase\xa0request"),t.qZA(),t.TgZ(14,"div"),t._UZ(15,"mat-divider",10),t.qZA()(),t.TgZ(16,"div",11)(17,"div"),t._UZ(18,"img",12),t.qZA(),t.TgZ(19,"span",13),t._uU(20,"Approvals"),t.qZA(),t.TgZ(21,"div"),t._UZ(22,"mat-divider",10),t.qZA()(),t.TgZ(23,"div",11)(24,"div"),t._UZ(25,"img",14),t.qZA(),t.TgZ(26,"span",13),t._uU(27,"Rate\xa0Comparative"),t.qZA(),t.TgZ(28,"div"),t._UZ(29,"mat-divider",10),t.qZA()(),t.TgZ(30,"div",11)(31,"div"),t._UZ(32,"img",12),t.qZA(),t.TgZ(33,"span",13),t._uU(34,"Rate\xa0Approvals"),t.qZA(),t.TgZ(35,"div"),t._UZ(36,"mat-divider",15),t.qZA()(),t.TgZ(37,"div",11)(38,"div"),t._UZ(39,"img",16),t.qZA(),t.TgZ(40,"span",13),t._uU(41,"Purchase\xa0orders"),t.qZA()()(),t.TgZ(42,"form",17)(43,"mat-card",18)(44,"div",19)(45,"div",20)(46,"label",21),t._uU(47,"Request title "),t.qZA(),t._UZ(48,"input",22),t.qZA(),t.TgZ(49,"div",20)(50,"label",21),t._uU(51,"Request date"),t.qZA(),t.TgZ(52,"mat-form-field",23),t._UZ(53,"input",24)(54,"mat-datepicker-toggle",25)(55,"mat-datepicker",null,26),t.qZA()(),t.TgZ(57,"div",27)(58,"label",28),t._uU(59," Required by "),t.TgZ(60,"span",29),t._uU(61,"*"),t.qZA()(),t.TgZ(62,"div",30)(63,"mat-form-field",23),t._UZ(64,"input",31)(65,"mat-datepicker-toggle",25)(66,"mat-datepicker",null,32),t.qZA()()(),t.TgZ(68,"div",20)(69,"label",21),t._uU(70,"Purchase request no "),t.qZA(),t._UZ(71,"input",33),t.qZA(),t.TgZ(72,"div",20)(73,"label",21),t._uU(74,"Site name "),t.TgZ(75,"span",29),t._uU(76,"*"),t.qZA()(),t.TgZ(77,"mat-select",34),t.YNc(78,ht,2,2,"mat-option",35),t.qZA()(),t.TgZ(79,"div",36)(80,"label",37),t._uU(81,"Local Purchase "),t.TgZ(82,"span",29),t._uU(83,"*"),t.qZA()(),t.TgZ(84,"mat-radio-group",38)(85,"mat-radio-button",39),t._uU(86," Yes "),t.qZA(),t.TgZ(87,"mat-radio-button",39),t._uU(88," No "),t.qZA()()(),t.YNc(89,ft,4,2,"div",40),t.qZA()(),t.YNc(90,Zt,24,1,"div",41),t.YNc(91,bt,21,1,"ng-template",null,42,t.W1O),t.TgZ(93,"div",43)(94,"label",21),t._uU(95,"Remarks "),t.qZA(),t._UZ(96,"textarea",44),t.qZA(),t.TgZ(97,"div",45),t.YNc(98,vt,2,0,"button",46),t.YNc(99,yt,2,0,"button",47),t.YNc(100,At,2,0,"button",48),t.qZA()()),2&e){const o=t.MAs(56),a=t.MAs(67),p=t.MAs(92);t.xp6(9),t.Q6J("routerLink",t.DdM(22,Tt)),t.xp6(7),t.Q6J("routerLink",t.DdM(23,Ct)),t.xp6(7),t.Q6J("routerLink",t.DdM(24,wt)),t.xp6(7),t.Q6J("routerLink",t.DdM(25,Pt)),t.xp6(7),t.Q6J("routerLink",t.DdM(26,Ut)),t.xp6(5),t.Q6J("formGroup",n.purchaseRequestForm),t.xp6(6),t.Q6J("readonly",!0),t.xp6(5),t.Q6J("matDatepicker",o)("readonly",!0),t.xp6(1),t.Q6J("for",o),t.xp6(10),t.Q6J("matDatepicker",a)("readonly",!0),t.xp6(1),t.Q6J("for",a),t.xp6(13),t.Q6J("ngForOf",n.siteList),t.xp6(7),t.Q6J("value","yes"),t.xp6(2),t.Q6J("value","no"),t.xp6(2),t.Q6J("ngIf","yes"==(null==n.details?null:n.details.local_purchase)),t.xp6(1),t.Q6J("ngIf","yes"==(null==n.details?null:n.details.local_purchase))("ngIfElse",p),t.xp6(8),t.Q6J("ngIf","pending"==n.details.status),t.xp6(1),t.Q6J("ngIf","approved"==n.details.status),t.xp6(1),t.Q6J("ngIf","rejected"==n.details.status)}},dependencies:[C.ey,f.KE,f.R9,w.a8,g.Mq,g.hl,g.nW,v.d,y.Nt,Z.VQ,Z.U0,P.gD,A.Ye,h.sg,h.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,d.rH,d.Od],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:100%;height:auto;font-family:Poppins;box-shadow:none;border:1px solid #ccc;border-radius:4px}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;font-size:14px;margin-bottom:20px;margin-right:20px;margin-top:8px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}form[_ngcontent-%COMP%]{padding:10px 20px}.scroll-bar1[_ngcontent-%COMP%]{height:auto;width:calc(100% - 25px);margin-left:25px;margin-bottom:10px;margin-top:50px;overflow:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background-color:"Transparent"}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 0 20px;float:right;gap:10px}.text-area-section[_ngcontent-%COMP%]{width:100%;height:auto;margin:30px 0 0}.text-area-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:100%}.flex-div[_ngcontent-%COMP%]{width:31%}.mat-form-field[_ngcontent-%COMP%]{display:block}.pending[_ngcontent-%COMP%]{padding:8px;width:120px;background-color:#ccc;color:#333;font-size:14px;font-family:Poppins;height:50px;border:none}.main-container[_ngcontent-%COMP%]{margin:10px 20px 0 15px}']}),i})();var Nt=u(8898),L=u(7489);function It(i,s){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.Udp("color",n.getRemainingDays(e.expected_delivery_date)>=0?"green":"red"),t.xp6(1),t.hij(" \xa0 ",n.getRemainingDays(e.expected_delivery_date)>=0?n.getRemainingDays(e.expected_delivery_date)+" days left":"Delayed by "+-1*n.getRemainingDays(e.expected_delivery_date)+" days"," ")}}function Rt(i,s){1&i&&t._UZ(0,"td",47)}const Mt=function(i){return{"background-color":i}},Lt=function(i){return["/procurement/update",i]};function Ft(i,s){if(1&i&&(t.TgZ(0,"tr")(1,"td",39),t._uU(2),t.qZA(),t._UZ(3,"hr",40),t.TgZ(4,"td",41),t._uU(5),t.qZA(),t._UZ(6,"hr",40),t.TgZ(7,"td",42),t._uU(8),t.qZA(),t._UZ(9,"hr",40),t.YNc(10,It,2,3,"td",43),t.YNc(11,Rt,1,0,"td",44),t.TgZ(12,"td",45),t._uU(13," View\xa0details "),t.qZA(),t.TgZ(14,"td",46)(15,"mat-icon"),t._uU(16," arrow_forward_ios "),t.qZA()()()),2&i){const e=s.$implicit,n=t.oxw(2);t.xp6(2),t.hij("Request\xa0no\xa0 ",e.purchase_request_number,""),t.xp6(3),t.hij("Title \xa0 ",e.title,""),t.xp6(3),t.hij("Site \xa0 ",e.siteData.site_name," "),t.xp6(2),t.Q6J("ngIf",void 0!==n.getRemainingDays(e.expected_delivery_date)&&n.getRemainingDays(e.expected_delivery_date)<=2),t.xp6(1),t.Q6J("ngIf",void 0===n.getRemainingDays(e.expected_delivery_date)||n.getRemainingDays(e.expected_delivery_date)>2),t.xp6(1),t.Q6J("ngStyle",t.VKq(7,Mt,"new"==n.requestType?"#233A61":"#1abcfe"))("routerLink",t.VKq(9,Lt,e._id))}}function Ot(i,s){1&i&&(t.TgZ(0,"div",48),t._UZ(1,"img",49),t.TgZ(2,"span"),t._uU(3," No record found"),t.qZA()())}function Jt(i,s){if(1&i&&(t.ynx(0),t.TgZ(1,"div",35)(2,"table",36)(3,"tbody"),t.YNc(4,Ft,17,11,"tr",37),t.qZA()(),t.YNc(5,Ot,4,0,"div",38),t.qZA(),t.BQk()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.purchaseList),t.xp6(1),t.Q6J("ngIf",!(e.purchaseList&&e.purchaseList.length>0))}}function Dt(i,s){1&i&&(t.TgZ(0,"h3",50),t._uU(1,"You don't have permissions to view."),t.qZA())}const Qt=function(){return["/procurement"]},St=function(){return["/procurement/prlist"]},jt=function(){return["/rate-comparative"]},Yt=function(){return["/rate-approval"]},Bt=function(){return["/purchase-order"]},F=function(i){return[i]};let $t=(()=>{class i{constructor(e,n,o){this.router=e,this.httpService=n,this.snack=o,this.filter_by="status",this.filter_value="pending",this.requestType="new",this.originalPurchaseList=[],this.getList({filter_by:this.filter_by,filter_value:this.filter_value})}getList(e){this.httpService.GET(c.Fj,e).subscribe({next:n=>{this.originalPurchaseList=n.data,this.purchaseList=n.data},error:n=>{if(n.errors&&!(0,L.isEmpty)(n.errors)){let o="<ul>";for(let a in n.errors)o+=`<li>${n.errors[a][0]}</li>`;o+="</ul>",this.snack.notifyHtml(o,2)}else this.snack.notify(n.message,2)}})}getRemainingDays(e){const n=new Date(e),o=new Date;n.setHours(0,0,0,0),o.setHours(0,0,0,0);const a=n.getTime()-o.getTime();return Math.floor(a/864e5)}dateFilter(e){this.originalPurchaseList&&this.originalPurchaseList.length>0&&(this.purchaseList=e.value?this.originalPurchaseList.filter(n=>new Date(n.date)==new Date(e.value)):this.originalPurchaseList)}search(e,n){this.originalPurchaseList&&this.originalPurchaseList.length>0&&(this.purchaseList="site"==n?e.target.value?this.originalPurchaseList.filter(o=>o.siteData.site_name.toLowerCase().includes(e.target.value.toLowerCase())):this.originalPurchaseList:e.target.value?this.originalPurchaseList.filter(o=>o.title.toLowerCase().includes(e.target.value.toLowerCase())):this.originalPurchaseList)}changeRequestType(e){this.requestType=e,"new"==e?(this.filter_value="pending",this.getList({filter_by:this.filter_by,filter_value:this.filter_value})):(this.filter_value="revised",this.getList({filter_by:this.filter_by,filter_value:this.filter_value}))}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.permissions=this.permissions.permissions[0].ParentChildchecklist[10]}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(d.F0),t.Y36(q.s),t.Y36(b.o))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-purchase-request-list"]],decls:73,vars:20,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","40px","margin-left","20px"],["src","./assets/images/preq.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","20px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/app.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/rc.svg"],["src","./assets/images/approval.svg"],["src","./assets/images/po.svg"],[2,"display","flex","flex-direction","row","gap","10px"],[2,"margin-left","40px","width","100%","margin-top","30px"],["appearance","outline",1,"searchbar"],["matSuffix",""],["matInput","","type","search","placeholder","search title",1,"search-input",3,"input"],[2,"margin-right","600px","margin-top","30px","display","flex","gap","10px"],[2,"margin-top","15px","color","#94A3B8","margin-left","30px"],["appearance","outline",1,"datebar"],["matInput","","placeholder","Date",3,"matDatepicker","dateChange","click"],["matSuffix","",3,"for"],["startPicker",""],[2,"margin-top","30px","display","flex","position","relative","right","570px","gap","10px"],[2,"margin-top","15px","color","#94A3B8","margin-left","-10px"],["matInput","","placeholder","Site",3,"input"],[2,"margin-top","50px","position","relative","right","520px"],[2,"cursor","pointer",3,"ngClass","click"],[4,"ngIf","ngIfElse"],["noView",""],[1,"scroll-bar1",2,"width","93%"],[2,"direction","ltr !important","margin-top","-20px"],[4,"ngFor","ngForOf"],["class","no-record-found",4,"ngIf"],[2,"color","#4272BF","width","300px","text-align","left","padding","10px"],[2,"border","1px solid #D9D9D9","height","30px"],[2,"color","#4272BF","width","200px"],[2,"color","#4272BF","width","800px","text-align","left","padding","10px"],["style","width:200px;",3,"color",4,"ngIf"],["style","width:200px;",4,"ngIf"],[2,"color","#fff","width","150px","cursor","pointer",3,"ngStyle","routerLink"],[2,"width","100px"],[2,"width","200px"],[1,"no-record-found"],["src","./assets/images/inbox_empty.png","alt",""],[2,"display","flex","justify-content","center","margin-top","2%","font-size","160%","font-weight","bolder","color","grey"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Purchase request list"),t.qZA(),t._UZ(5,"span",4),t.qZA(),t.TgZ(6,"div"),t._UZ(7,"hr",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7)(10,"div"),t._UZ(11,"img",8),t.qZA(),t.TgZ(12,"span",9),t._uU(13,"Purchase\xa0request"),t.qZA(),t.TgZ(14,"div"),t._UZ(15,"mat-divider",10),t.qZA()(),t.TgZ(16,"div",11)(17,"div"),t._UZ(18,"img",12),t.qZA(),t.TgZ(19,"span",13),t._uU(20,"Approvals"),t.qZA(),t.TgZ(21,"div"),t._UZ(22,"mat-divider",10),t.qZA()(),t.TgZ(23,"div",11)(24,"div"),t._UZ(25,"img",14),t.qZA(),t.TgZ(26,"span",9),t._uU(27,"Rate\xa0Comparative"),t.qZA(),t.TgZ(28,"div"),t._UZ(29,"mat-divider",10),t.qZA()(),t.TgZ(30,"div",11)(31,"div"),t._UZ(32,"img",15),t.qZA(),t.TgZ(33,"span",9),t._uU(34,"Rate\xa0Approvals"),t.qZA(),t.TgZ(35,"div"),t._UZ(36,"mat-divider",10),t.qZA()(),t.TgZ(37,"div",11)(38,"div"),t._UZ(39,"img",16),t.qZA(),t.TgZ(40,"span",9),t._uU(41,"Purchase\xa0orders"),t.qZA()()(),t.TgZ(42,"div",17)(43,"div",18)(44,"mat-form-field",19)(45,"mat-icon",20),t._uU(46,"search"),t.qZA(),t.TgZ(47,"input",21),t.NdJ("input",function(p){return n.search(p,"title")}),t.qZA()()(),t.TgZ(48,"div",22)(49,"div",23)(50,"span"),t._uU(51,"Filter\xa0by"),t.qZA()(),t.TgZ(52,"div")(53,"mat-form-field",24)(54,"input",25),t.NdJ("dateChange",function(p){return n.dateFilter(p)})("click",function(){t.CHM(o);const p=t.MAs(57);return t.KtG(p.open())}),t.qZA(),t._UZ(55,"mat-datepicker-toggle",26)(56,"mat-datepicker",null,27),t.qZA()()(),t.TgZ(58,"div",28)(59,"div",29)(60,"span"),t._uU(61,"Filter\xa0by"),t.qZA()(),t.TgZ(62,"div")(63,"mat-form-field",24)(64,"input",30),t.NdJ("input",function(p){return n.search(p,"site")}),t.qZA()()()(),t.TgZ(65,"div",31)(66,"span",32),t.NdJ("click",function(){return n.changeRequestType("new")}),t._uU(67,"New\xa0request\xa0|"),t.qZA(),t.TgZ(68,"span",32),t.NdJ("click",function(){return n.changeRequestType("revise")}),t._uU(69,"\xa0Revised\xa0request"),t.qZA()()(),t.YNc(70,Jt,6,2,"ng-container",33),t.YNc(71,Dt,2,0,"ng-template",null,34,t.W1O)}if(2&e){const o=t.MAs(57),a=t.MAs(72);t.xp6(9),t.Q6J("routerLink",t.DdM(11,Qt)),t.xp6(7),t.Q6J("routerLink",t.DdM(12,St)),t.xp6(7),t.Q6J("routerLink",t.DdM(13,jt)),t.xp6(7),t.Q6J("routerLink",t.DdM(14,Yt)),t.xp6(7),t.Q6J("routerLink",t.DdM(15,Bt)),t.xp6(17),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(11),t.Q6J("ngClass",t.VKq(16,F,"new"==n.requestType?"active":"inactive")),t.xp6(2),t.Q6J("ngClass",t.VKq(18,F,"revise"==n.requestType?"active":"inactive")),t.xp6(2),t.Q6J("ngIf",n.permissions.childList[0].isSelected)("ngIfElse",a)}},dependencies:[f.KE,f.R9,g.Mq,g.hl,g.nW,v.d,I.Hw,y.Nt,A.Ye,h.mk,h.sg,h.O5,h.PC,d.rH,d.Od],styles:[".mat-form-field-appearance-outline .mat-form-field-infix{padding:.6em;width:250px}mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.searchbar[_ngcontent-%COMP%]{width:350px;border-radius:20px;font-family:Poppins}.active[_ngcontent-%COMP%]{color:#233a61}.inactive[_ngcontent-%COMP%]{color:#94a3b8}.datebar[_ngcontent-%COMP%]{width:140px;border-radius:20px;font-family:Poppins}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:separate;border-spacing:0 25px;text-align:left;width:100%;font-size:14px;margin-left:30px;margin-bottom:20px;margin-right:-10px}td[_ngcontent-%COMP%]{border:none;text-align:center;padding:8px 1px;color:#233a61;font-style:normal;font-size:14px}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f4f4f5!important}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f4f4f5!important}.scroll-bar1[_ngcontent-%COMP%]{height:600px;width:93%;margin-left:20px;margin-bottom:100px;margin-top:10px;overflow:auto;direction:rtl;overflow-x:hidden}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.no-record-found[_ngcontent-%COMP%]{text-align:center;display:flex;gap:10px;flex-direction:column;align-items:center;justify-content:center}.no-record-found[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:188px}"]}),i})();var O=u(5861);function Et(i,s){if(1&i&&(t.TgZ(0,"mat-option",47),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.site_name," ")}}function zt(i,s){if(1&i&&(t.TgZ(0,"mat-option",47),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.vendor_name," ")}}function Vt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",20)(1,"label",21),t._uU(2,"Vendor"),t.TgZ(3,"span",22),t._uU(4,"*"),t.qZA()(),t.TgZ(5,"mat-select",48),t.NdJ("selectionChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.onVendorSelection(o))}),t.YNc(6,zt,2,2,"mat-option",36),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(6),t.Q6J("ngForOf",e.vendorList)}}function Gt(i,s){if(1&i&&(t.TgZ(0,"mat-option",47),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.item_name," ")}}function Kt(i,s){if(1&i&&(t.TgZ(0,"mat-option",47),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.brand_name," ")}}function Ht(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"a",65),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,a=t.oxw(2);return t.KtG(a.delete(o))}),t._UZ(1,"i",66),t.qZA()}}function Wt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr",54)(1,"td",55),t._uU(2),t.qZA(),t.ynx(3,56),t.TgZ(4,"td")(5,"mat-select",57),t.NdJ("selectionChange",function(o){const p=t.CHM(e).index,l=t.oxw(2);return t.KtG(l.selectedItem(o,p))}),t.YNc(6,Gt,2,2,"mat-option",36),t.qZA()(),t.TgZ(7,"td",58),t._uU(8),t.qZA(),t.TgZ(9,"td",58),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._UZ(14,"input",59),t.qZA(),t.TgZ(15,"td"),t._UZ(16,"input",60),t.qZA(),t.TgZ(17,"td")(18,"mat-select",61),t.YNc(19,Kt,2,2,"mat-option",36),t.qZA()(),t.TgZ(20,"td"),t._UZ(21,"input",62),t.qZA(),t.TgZ(22,"td")(23,"div",63),t.YNc(24,Ht,2,0,"a",64),t.qZA()(),t.BQk(),t.qZA()}if(2&i){const e=s.$implicit,n=s.index,o=t.oxw(2);let a,p,l;t.xp6(2),t.hij(" ",n+1," "),t.xp6(1),t.Q6J("formGroupName",n),t.xp6(3),t.Q6J("ngForOf",o.filteredItemList),t.xp6(2),t.hij(" ",null==(a=e.get("category"))?null:a.value," "),t.xp6(2),t.hij(" ",null==(p=e.get("subCategory"))?null:p.value," "),t.xp6(2),t.hij(" ",null==(l=e.get("uom"))?null:l.value," "),t.xp6(7),t.Q6J("ngForOf",o.brandList),t.xp6(5),t.Q6J("ngIf",n>0)}}function Xt(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",49)(2,"table",50)(3,"tr")(4,"th"),t._uU(5,"S\xa0No"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Item*"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Category"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Sub\xa0category"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Uom*"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Quantity*"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Rate"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Brand Name"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Remarks"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Action"),t.qZA()(),t.TgZ(24,"tbody"),t.YNc(25,Wt,25,8,"tr",51),t.qZA()()(),t.TgZ(26,"div",52)(27,"div")(28,"button",53),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addItem())}),t._uU(29," Add Item + "),t.qZA()()(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(25),t.Q6J("ngForOf",e.purchaseRequestForm.get("items").controls)}}function te(i,s){if(1&i&&(t.TgZ(0,"mat-option",47),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.item_name," ")}}function ee(i,s){if(1&i&&(t.TgZ(0,"mat-option",47),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.brand_name," ")}}function ne(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"a",65),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,a=t.oxw(2);return t.KtG(a.delete(o))}),t._UZ(1,"i",66),t.qZA()}}function ie(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr",54)(1,"td",55),t._uU(2),t.qZA(),t.ynx(3,56),t.TgZ(4,"td")(5,"mat-select",57),t.NdJ("selectionChange",function(o){const p=t.CHM(e).index,l=t.oxw(2);return t.KtG(l.selectedItem(o,p))}),t.YNc(6,te,2,2,"mat-option",36),t.qZA()(),t.TgZ(7,"td",58),t._uU(8),t.qZA(),t.TgZ(9,"td",58),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._UZ(14,"input",59),t.qZA(),t.TgZ(15,"td")(16,"mat-select",61),t.YNc(17,ee,2,2,"mat-option",36),t.qZA()(),t.TgZ(18,"td"),t._UZ(19,"input",62),t.qZA(),t.TgZ(20,"td")(21,"div",63),t.YNc(22,ne,2,0,"a",64),t.qZA()(),t.BQk(),t.qZA()}if(2&i){const e=s.$implicit,n=s.index,o=t.oxw(2);let a,p,l;t.xp6(2),t.hij(" ",n+1," "),t.xp6(1),t.Q6J("formGroupName",n),t.xp6(3),t.Q6J("ngForOf",o.itemList),t.xp6(2),t.hij(" ",null==(a=e.get("category"))?null:a.value," "),t.xp6(2),t.hij(" ",null==(p=e.get("subCategory"))?null:p.value," "),t.xp6(2),t.hij(" ",null==(l=e.get("uom"))?null:l.value," "),t.xp6(5),t.Q6J("ngForOf",o.brandList),t.xp6(5),t.Q6J("ngIf",n>0)}}function re(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",49)(1,"table",50)(2,"tr")(3,"th"),t._uU(4,"S\xa0No"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Item*"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Category"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Sub\xa0category"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Uom*"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Quantity*"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Brand Name"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Remarks"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Action"),t.qZA()(),t.TgZ(21,"tbody"),t.YNc(22,ie,23,8,"tr",51),t.qZA()()(),t.TgZ(23,"div",52)(24,"div")(25,"button",53),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addItem())}),t._uU(26," Add Item + "),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(22),t.Q6J("ngForOf",e.purchaseRequestForm.get("items").controls)}}const oe=function(){return["/procurement"]},ae=function(){return["/procurement/prlist"]},se=function(){return["/rate-comparative"]},pe=function(){return["/rate-approval"]},le=function(){return["/purchase-order"]};let ce=(()=>{class i{constructor(e,n,o,a,p,l){this.router=e,this.route=n,this.httpService=o,this.snack=a,this.formBuilder=p,this.http=l,this.requredByMinDate=new Date,this.load=!1,this.purchaseRequestForm=new r.cw({title:new r.NI("",r.kI.required),date:new r.NI(x().format("DD-MM-YYYY"),r.kI.required),expected_delivery_date:new r.NI(x().add(1,"days").format("DD-MM-YYYY"),r.kI.required),purchase_request_number:new r.NI(""),site:new r.NI("",r.kI.required),local_purchase:new r.NI("yes",r.kI.required),remarks:new r.NI(""),items:this.formBuilder.array([]),_id:new r.NI(""),vendor:new r.NI("")})}handleLocalPurchaseChange(){this.purchaseRequestForm.get("items").clear(),this.addItem()}onVendorSelection(e){if(console.log(e),null==e.value)return;const n=this.vendorList.find(o=>o._id===e.value);n?this.filteredItemList=this.itemList.filter(o=>{const a=n.category.some(l=>l===o.category),p=n.SubCategory.some(l=>l===o.sub_category);return a&&p}):(console.warn("No matching vendor found for the selected ID."),this.filteredItemList=[]),e.value!==this.initialVendor.vendor&&(this.purchaseRequestForm.get("items").clear(),this.addItem())}createItemArrayForm(){return new r.cw({item_id:new r.NI("",r.kI.required),rate:new r.NI("",r.kI.required),qty:new r.NI("",r.kI.required),category:new r.NI(null),subCategory:new r.NI(null),attachment:new r.NI(null),remark:new r.NI(null),uom:new r.NI(null),itemName:new r.NI(null),brandName:new r.NI(null)})}onSubmit(){if(this.load||(console.log(this.purchaseRequestForm),console.log(this.purchaseRequestForm.valid),!this.purchaseRequestForm.valid))return;let e=this.purchaseRequestForm.value;e.date=x(e.date,"DD-MM-YYYY").toDate(),e.expected_delivery_date=new Date(e.expected_delivery_date),e.status="revised",this.load=!0,this.httpService.PUT(c.Fj,e).subscribe({next:n=>{this.load=!1,this.snack.notify("Record has been updated.",1),this.router.navigate(["/procurement"])},error:n=>{if(this.load=!1,n.errors&&!(0,L.isEmpty)(n.errors)){let o="<ul>";for(let a in n.errors)o+=`<li>${n.errors[a][0]}</li>`;o+="</ul>",this.snack.notifyHtml(o,2)}else this.snack.notify(n.message,2)}})}getList(){var e=this;return(0,O.Z)(function*(){const n=e.http.get(`${_.N.api_path}${c.PE}`),o=e.http.get(`${_.N.api_path}${c.o7}`),a=e.http.get(`${_.N.api_path}${c.S3}`),p=e.http.get(`${_.N.api_path}${c.ds}`),l=e.http.get(`${_.N.api_path}${c.Lk}`);try{const m=yield e.httpService.multipleRequests([n,o,a,p,l],{}).toPromise();m&&(e.uomList=m[0].data,e.itemList=m[1].data,e.siteList=m[2].data,e.vendorList=m[3].data,e.brandList=m[4].data)}catch(m){console.error("Error fetching data:",m)}})()}selectedItem(e,n){let o=this.itemList.filter(l=>l._id==e.value)[0]?.categoryDetail.name,a=this.itemList.filter(l=>l._id==e.value)[0]?.subCategoryDetail.subcategory_name,p=this.itemList.filter(l=>l._id==e.value)[0]?.uomDetail.uom_name;this.items.at(n).patchValue({category:o,subCategory:a,uom:p})}createItem(e){return new r.cw(e?{item_id:new r.NI(e.item_id,r.kI.required),qty:new r.NI(e.qty,r.kI.required),rate:new r.NI(e.rate),category:new r.NI(e.categoryDetail.name),subCategory:new r.NI(e.subCategoryDetail.subcategory_name),attachment:new r.NI(e.attachment),remark:new r.NI(e.remark),uom:new r.NI(e.uomDetail.uom_name),brandName:new r.NI(e.brandName)}:{item_id:new r.NI("",r.kI.required),qty:new r.NI("",r.kI.required),rate:new r.NI(""),category:new r.NI(""),subCategory:new r.NI(""),attachment:new r.NI,remark:new r.NI(""),uom:new r.NI(""),brandName:new r.NI("")})}delete(e){this.purchaseRequestForm.get("items").removeAt(e)}patchData(e){this.purchaseRequestForm.patchValue({title:e.title,date:e.date,expected_delivery_date:e.expected_delivery_date,purchase_request_number:e.purchase_request_number,site:e.site,local_purchase:e.local_purchase,remarks:e.remarks,_id:e._id,vendor:e.vendor}),e.items&&e.items.length>0&&e.items.map(n=>{this.addItems(n)}),this.purchaseRequestForm.controls.remarks.disable()}addItem(){this.items=this.purchaseRequestForm.get("items"),this.items.push(this.createItem())}addItems(e){this.items=this.purchaseRequestForm.get("items"),e&&this.items.push(this.createItem(e))}ngOnInit(){var e=this;this.route.params.subscribe(n=>{n.id&&this.httpService.GET(`${c.Fj}/detail`,{_id:n.id}).subscribe(function(){var o=(0,O.Z)(function*(a){yield e.getList(),e.initialVendor=a.data[0],e.onVendorSelection({value:e.initialVendor.vendor}),e.patchData(a.data[0])});return function(a){return o.apply(this,arguments)}}())})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(d.F0),t.Y36(d.gz),t.Y36(q.s),t.Y36(b.o),t.Y36(r.qu),t.Y36(T.eN))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-revise-purchase-request"]],decls:103,vars:22,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","40px","margin-left","20px"],["src","./assets/images/preq.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/prl.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],["src","./assets/images/rc.svg"],[2,"width","100px","margin-left","10px","margin-top","10px","border","1px dashed"],["src","./assets/images/po.svg"],[3,"formGroup","ngSubmit"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","40px","width","1000px"],[2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],[1,"star"],["placeholder","Enter title","formControlName","title",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9F9F9F","cursor","pointer","margin-top","10px","font-family","Poppins"],[2,"display","flex","flex-direction","column","margin-left","100px"],[1,"custom-form-control"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Enter base Line Start Date",3,"matDatepicker","click"],["matSuffix","",3,"for"],["date",""],[1,"custom-form-group"],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter base Line Start Date",3,"matDatepicker","min","click"],["requiredByStartDate",""],["placeholder","Auto generate","formControlName","purchase_request_number","readonly","",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9F9F9F","cursor","pointer","margin-top","10px","font-family","Poppins"],["id","site","placeholder","Select site","formControlName","site",2,"padding","10px","width","200px","border","1px solid #9F9F9F","border-radius","6px","cursor","pointer","margin-top","10px","font-family","Poppins"],[3,"value",4,"ngFor","ngForOf"],[2,"color","#4272BF"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group",3,"change"],[1,"example-radio-button",3,"value"],["style","display: flex;flex-direction: column;",4,"ngIf"],[4,"ngIf","ngIfElse"],["noLocalPurchase",""],[1,"row","text-area-section"],["name","","id","","cols","30","rows","10","formControlName","remarks"],[1,"row","button-list"],[2,"padding","8px","width","auto","background-color","#233A61","color","#fff","border-radius","5px","border-color","lightgrey","font-size","14px","font-family","Poppins"],[3,"value"],["id","site","placeholder","Select Vendor","formControlName","vendor",2,"padding","10px","width","200px","border","1px solid #ccc","border-radius","6px","cursor","pointer","font-family","Poppins",3,"selectionChange"],[1,"scroll-bar1"],[1,"items-table",2,"direction","ltr !important","border-left","2px solid #000 !important"],["style","background-color: #F4F4F5;","formArrayName","items",4,"ngFor","ngForOf"],[2,"display","flex","flex-direction","row","gap","40px","margin-left","38px","margin-bottom","100px","margin-top","100px","top","-50px","position","relative"],[2,"padding","8px","width","120px","background-color","#fff","cursor","pointer","border","0.5px solid #94A3B8","border-radius","5px","font-size","14px","font-family","Poppins",3,"click"],["formArrayName","items",2,"background-color","#F4F4F5"],[2,"text-align","center"],[3,"formGroupName"],["id","itemName","placeholder","Select Item","formControlName","item_id",1,"select-form-field",3,"selectionChange"],[2,"color","#000"],["type","text","placeholder","Enter","digitOnly","","formControlName","qty",1,"pr-form-field"],["type","text","placeholder","Enter","digitOnly","","formControlName","rate",1,"pr-form-field"],["id","brandName","placeholder","Select Brand","formControlName","brandName",1,"select-form-field"],["placeholder","Enter","formControlName","remark",1,"pr-form-field"],[1,"action-btn-wrapper"],["class","action-btn","title","Delete",3,"click",4,"ngIf"],["title","Delete",1,"action-btn",3,"click"],[1,"fa","fa-trash"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Revise purchase request "),t.qZA(),t._UZ(5,"span",4),t.qZA(),t.TgZ(6,"div"),t._UZ(7,"hr",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7)(10,"div"),t._UZ(11,"img",8),t.qZA(),t.TgZ(12,"span",9),t._uU(13,"Purchase\xa0request"),t.qZA(),t.TgZ(14,"div"),t._UZ(15,"mat-divider",10),t.qZA()(),t.TgZ(16,"div",11)(17,"div"),t._UZ(18,"img",12),t.qZA(),t.TgZ(19,"span",13),t._uU(20,"Approvals"),t.qZA(),t.TgZ(21,"div"),t._UZ(22,"mat-divider",10),t.qZA()(),t.TgZ(23,"div",11)(24,"div"),t._UZ(25,"img",14),t.qZA(),t.TgZ(26,"span",13),t._uU(27,"Rate\xa0Comparative"),t.qZA(),t.TgZ(28,"div"),t._UZ(29,"mat-divider",10),t.qZA()(),t.TgZ(30,"div",11)(31,"div"),t._UZ(32,"img",12),t.qZA(),t.TgZ(33,"span",13),t._uU(34,"Rate\xa0Approvals"),t.qZA(),t.TgZ(35,"div"),t._UZ(36,"mat-divider",15),t.qZA()(),t.TgZ(37,"div",11)(38,"div"),t._UZ(39,"img",16),t.qZA(),t.TgZ(40,"span",13),t._uU(41,"Purchase\xa0orders"),t.qZA()()(),t.TgZ(42,"form",17),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(43,"mat-card",18)(44,"div",19)(45,"div",20)(46,"label",21),t._uU(47,"Request title "),t.TgZ(48,"span",22),t._uU(49,"*"),t.qZA()(),t._UZ(50,"input",23),t.qZA(),t.TgZ(51,"div",24)(52,"label",21),t._uU(53,"Request date"),t.qZA(),t.TgZ(54,"div",25)(55,"mat-form-field",26)(56,"input",27),t.NdJ("click",function(){t.CHM(o);const p=t.MAs(59);return t.KtG(p.open())}),t.qZA(),t._UZ(57,"mat-datepicker-toggle",28)(58,"mat-datepicker",null,29),t.qZA()()(),t.TgZ(60,"div",30)(61,"label",31),t._uU(62," Required by "),t.TgZ(63,"span",22),t._uU(64,"*"),t.qZA()(),t.TgZ(65,"div",25)(66,"mat-form-field",26)(67,"input",32),t.NdJ("click",function(){t.CHM(o);const p=t.MAs(70);return t.KtG(p.open())}),t.qZA(),t._UZ(68,"mat-datepicker-toggle",28)(69,"mat-datepicker",null,33),t.qZA()()(),t.TgZ(71,"div",20)(72,"label",21),t._uU(73,"Purchase request no "),t.qZA(),t._UZ(74,"input",34),t.qZA(),t.TgZ(75,"div",24)(76,"label",21),t._uU(77,"Site name "),t.TgZ(78,"span",22),t._uU(79,"*"),t.qZA()(),t.TgZ(80,"mat-select",35),t.YNc(81,Et,2,2,"mat-option",36),t.qZA()(),t.TgZ(82,"div",24)(83,"label",37),t._uU(84,"Local Purchase "),t.TgZ(85,"span",22),t._uU(86,"*"),t.qZA()(),t.TgZ(87,"mat-radio-group",38),t.NdJ("change",function(){return n.handleLocalPurchaseChange()}),t.TgZ(88,"mat-radio-button",39),t._uU(89," Yes "),t.qZA(),t.TgZ(90,"mat-radio-button",39),t._uU(91," No "),t.qZA()()(),t.YNc(92,Vt,7,1,"div",40),t.qZA()(),t.YNc(93,Xt,30,1,"ng-container",41),t.YNc(94,re,27,1,"ng-template",null,42,t.W1O),t.TgZ(96,"div",43)(97,"label",21),t._uU(98,"Remarks "),t.qZA(),t._UZ(99,"textarea",44),t.qZA(),t.TgZ(100,"div",45)(101,"button",46),t._uU(102,"Update Material Request"),t.qZA()()()}if(2&e){const o=t.MAs(59),a=t.MAs(70),p=t.MAs(95);let l,m;t.xp6(9),t.Q6J("routerLink",t.DdM(17,oe)),t.xp6(7),t.Q6J("routerLink",t.DdM(18,ae)),t.xp6(7),t.Q6J("routerLink",t.DdM(19,se)),t.xp6(7),t.Q6J("routerLink",t.DdM(20,pe)),t.xp6(7),t.Q6J("routerLink",t.DdM(21,le)),t.xp6(5),t.Q6J("formGroup",n.purchaseRequestForm),t.xp6(14),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(10),t.Q6J("matDatepicker",a)("min",n.requredByMinDate),t.xp6(1),t.Q6J("for",a),t.xp6(13),t.Q6J("ngForOf",n.siteList),t.xp6(7),t.Q6J("value","yes"),t.xp6(2),t.Q6J("value","no"),t.xp6(2),t.Q6J("ngIf","yes"===(null==(l=n.purchaseRequestForm.get("local_purchase"))?null:l.value)),t.xp6(1),t.Q6J("ngIf","yes"===(null==(m=n.purchaseRequestForm.get("local_purchase"))?null:m.value))("ngIfElse",p)}},dependencies:[C.ey,f.KE,f.R9,w.a8,g.Mq,g.hl,g.nW,v.d,y.Nt,Z.VQ,Z.U0,P.gD,A.Ye,h.sg,h.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,r.x0,r.CE,R.L,d.rH,d.Od],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:1110px;height:auto;margin-left:30px;margin-top:30px;box-shadow:0 2px 12px #00000040;font-family:Poppins}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;font-size:14px;margin:8px 20px 20px 10px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;width:1000px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}.scroll-bar1[_ngcontent-%COMP%]{height:auto;width:auto;margin-left:25px;margin-bottom:100px;margin-top:50px;overflow:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background:none}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.text-area-section[_ngcontent-%COMP%]{width:1334px;height:auto;margin-left:30px}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 30px 20px 0;float:right;gap:10px}']}),i})();function ue(i,s){if(1&i&&(t.TgZ(0,"mat-option",50),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.site_name," ")}}function de(i,s){if(1&i&&(t.TgZ(0,"div",39)(1,"label",22),t._uU(2,"Vendor "),t.TgZ(3,"span",31),t._uU(4,"*"),t.qZA()(),t._UZ(5,"input",51),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.Q6J("readonly",!0)("value",e.selectedVendor)}}function _e(i,s){if(1&i&&(t.TgZ(0,"tr",55)(1,"td",56),t._uU(2),t.qZA(),t.ynx(3),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",57),t._uU(7),t.qZA(),t.TgZ(8,"td",57),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td",57),t._uU(13),t.qZA(),t.TgZ(14,"td",57),t._uU(15),t.qZA(),t.TgZ(16,"td",57),t._uU(17),t.qZA(),t.TgZ(18,"td",57),t._uU(19),t.qZA(),t.BQk(),t.qZA()),2&i){const e=s.$implicit,n=s.index,o=t.oxw(2);t.xp6(2),t.hij(" ",n+1," "),t.xp6(3),t.hij(" ",o.getItemName(e.item_id)," "),t.xp6(2),t.hij(" ",e.categoryDetail.name," "),t.xp6(2),t.hij(" ",e.subCategoryDetail.subcategory_name," "),t.xp6(2),t.hij(" ",e.uomDetail.uom_name," "),t.xp6(2),t.hij(" ",e.qty," "),t.xp6(2),t.hij(" ",o.myBrandName(e.brandName)," "),t.xp6(2),t.hij(" ",e.rate," "),t.xp6(2),t.hij(" ",e.remark," ")}}function me(i,s){if(1&i&&(t.TgZ(0,"div",52)(1,"table",53)(2,"tr")(3,"th"),t._uU(4,"S\xa0No"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Item*"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Category"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Sub\xa0category"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Uom*"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Quantity*"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Brand Name"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Rate"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Remarks"),t.qZA()(),t.TgZ(21,"tbody"),t.YNc(22,_e,20,9,"tr",54),t.qZA()()()),2&i){const e=t.oxw();t.xp6(22),t.Q6J("ngForOf",null==e.details?null:e.details.items)}}function ge(i,s){if(1&i&&(t.TgZ(0,"tr",55)(1,"td",56),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",57),t._uU(6),t.qZA(),t.TgZ(7,"td",57),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",57),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA()()),2&i){const e=s.$implicit,n=s.index,o=t.oxw(2);t.xp6(2),t.hij(" ",n+1," "),t.xp6(2),t.hij(" ",o.getItemName(e.item_id)," "),t.xp6(2),t.hij(" ",e.categoryDetail.name," "),t.xp6(2),t.hij(" ",e.subCategoryDetail.subcategory_name," "),t.xp6(2),t.hij(" ",e.uomDetail.uom_name," "),t.xp6(2),t.hij(" ",e.qty," "),t.xp6(2),t.hij(" ",o.myBrandName(e.brandName)," "),t.xp6(2),t.hij(" ",e.remark," ")}}function he(i,s){if(1&i&&(t.TgZ(0,"div",52)(1,"table",53)(2,"tr")(3,"th"),t._uU(4,"S\xa0No"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Item*"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Category"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Sub\xa0category"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Uom*"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Quantity*"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Brand Name"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Remarks"),t.qZA()(),t.TgZ(19,"tbody"),t.YNc(20,ge,17,8,"tr",54),t.qZA()()()),2&i){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",null==e.details?null:e.details.items)}}const fe=function(){return["/procurement"]},xe=function(){return["/procurement/prlist"]},Ze=function(){return["/rate-comparative"]},qe=function(){return["/rate-approval"]},be=function(){return["/purchase-order"]},ve=[{path:"",component:gt},{path:"prlist",component:$t},{path:"details/:id",component:kt},{path:"update/:id",component:(()=>{class i{constructor(e,n,o,a,p,l){this.router=e,this.httpService=n,this.snack=o,this.formBuilder=a,this.route=p,this.http=l,this.load=!1,this.purchaseRequestForm=new r.cw({title:new r.NI("",r.kI.required),date:new r.NI("",r.kI.required),expected_delivery_date:new r.NI("",r.kI.required),purchase_request_number:new r.NI(""),site:new r.NI({value:"",disabled:!0},r.kI.required),local_purchase:new r.NI({value:"",disabled:!0},r.kI.required),remarks:new r.NI(""),items:this.formBuilder.array([]),_id:new r.NI}),this.details={},this.getList()}getList(){const e=this.http.get(`${_.N.api_path}${c.PE}`),n=this.http.get(`${_.N.api_path}${c.o7}`),o=this.http.get(`${_.N.api_path}${c.S3}`),a=this.http.get(`${_.N.api_path}${c.Lk}`);this.httpService.multipleRequests([e,n,o,a],{}).subscribe(p=>{p&&(this.uomList=p[0].data,this.itemList=p[1].data,this.siteList=p[2].data,this.brandList=p[3].data)})}patchData(e){this.purchaseRequestForm.patchValue({title:e.title,date:e.date,expected_delivery_date:e.expected_delivery_date,purchase_request_number:e.purchase_request_number,site:e.site,local_purchase:e.local_purchase,remarks:e.remarks})}createItemArrayForm(){return new r.cw({item_id:new r.NI("",r.kI.required),qty:new r.NI("",r.kI.required),category:new r.NI(""),subCategory:new r.NI(""),attachment:new r.NI(""),remark:new r.NI("",r.kI.required),uom:new r.NI("",r.kI.required),brandName:new r.NI("",r.kI.required)})}addItems(e){this.items=this.purchaseRequestForm.get("items"),e&&this.items.push(this.createItem(e))}createItem(e){if(e)return new r.cw({item_id:new r.NI(e.item_id,r.kI.required),qty:new r.NI(e.qty,r.kI.required),category:new r.NI(e.categoryDetail.name),subCategory:new r.NI(e.subCategoryDetail.subcategory_name),attachment:new r.NI(e.attachment),remark:new r.NI(e.remark,r.kI.required),uom:new r.NI(e.uomDetail._id,r.kI.required),brandName:new r.NI(e.brandName,r.kI.required)})}myBrandName(e){if(console.log(e),null==this.brandList)return;let n=this.brandList.filter(o=>o._id==e);return console.log(n),n[0].brand_name}getSiteList(){this.httpService.GET(c.S3,{}).subscribe(e=>{this.siteList=e})}getItemName(e){if(this.itemList&&e)return this.itemList.filter(n=>n._id==e)[0].item_name}updateRequest(e){this.httpService.PUT(c.Fj,{_id:this.details._id,status:e,remarks:this.purchaseRequestForm.value.remarks}).subscribe(n=>{this.router.navigate(["/procurement/prlist"])})}getVendorList(){if(null!=this.details.vendor){const e=this.http.get(`${_.N.api_path}${c.Iy}?_id=${this.details.vendor}`);this.httpService.multipleRequests(e,{}).subscribe(n=>{n&&(this.selectedVendor=n[0].data[0].vendor_name)})}}ngOnInit(){this.route.params.subscribe(e=>{e.id&&this.httpService.GET(`${c.Fj}/detail`,{_id:e.id}).subscribe({next:n=>{this.details=n.data[0],this.getVendorList(),this.patchData(n.data[0])},error:n=>{this.router.navigate(["/procurement/prlist"])}})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(d.F0),t.Y36(q.s),t.Y36(b.o),t.Y36(r.qu),t.Y36(d.gz),t.Y36(T.eN))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-update-pr-status"]],decls:104,vars:24,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","40px","margin-left","20px"],["src","./assets/images/approval.svg","height","45px"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/app.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/rc.svg"],["src","./assets/images/approval.svg"],[2,"width","100px","margin-left","10px","margin-top","10px","border","1px dashed"],["src","./assets/images/po.svg"],[3,"formGroup"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","40px","width","1000px"],[2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],["placeholder","Enter title","formControlName","title",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9F9F9F","cursor","pointer","margin-top","10px","font-family","Poppins",3,"readonly"],[2,"display","flex","flex-direction","column","margin-left","100px"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Auto generate Request Date",3,"matDatepicker","readonly"],["matSuffix","",3,"for"],["date",""],[1,"custom-form-group"],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],[1,"star"],[1,"custom-form-control"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by",3,"matDatepicker","readonly"],["requiredByStartDate",""],["placeholder","Auto generate","formControlName","purchase_request_number","readonly","",2,"width","200px","padding","10px","border-radius","6px","border","1px solid #9F9F9F","cursor","pointer","margin-top","10px","font-family","Poppins"],["id","site","placeholder","Select site","formControlName","site",2,"padding","10px","width","200px","border","1px solid #9F9F9F","border-radius","6px","cursor","pointer","margin-top","10px","font-family","Poppins"],[3,"value",4,"ngFor","ngForOf"],["class","flex-div","style","display: flex; flex-direction: column;",4,"ngIf"],[1,"flex-div",2,"display","flex","flex-direction","column"],[2,"color","#4272BF"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group"],[1,"example-radio-button",3,"value"],["class","scroll-bar1",4,"ngIf","ngIfElse"],["noLocalPurchase",""],[1,"row","text-area-section"],["name","","id","","cols","30","rows","10","formControlName","remarks"],[1,"row","button-list"],[2,"padding","8px","width","120px","background-color","#233A61","color","#fff","border-radius","5px","border-color","lightgrey","font-size","14px","font-family","Poppins",3,"click"],[2,"padding","8px","width","120px","background-color","#fff","color","#233A61","border","1px solid #94A3B8","border-radius","5px","font-size","14px","font-family","Poppins",3,"click"],[3,"value"],["placeholder","Enter Vendor",2,"padding","10px","width","75%","border","1px solid #ccc","border-radius","6px","cursor","pointer","font-family","Poppins",3,"readonly","value"],[1,"scroll-bar1"],[2,"direction","ltr !important","border-left","2px solid #000 !important"],["style","background-color: #F4F4F5;",4,"ngFor","ngForOf"],[2,"background-color","#F4F4F5"],[2,"text-align","center"],[2,"color","#000"]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Requisition Approvals"),t.qZA(),t._UZ(5,"span",4),t.qZA(),t.TgZ(6,"div"),t._UZ(7,"hr",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7)(10,"div"),t._UZ(11,"img",8),t.qZA(),t.TgZ(12,"span",9),t._uU(13,"Purchase\xa0request"),t.qZA(),t.TgZ(14,"div"),t._UZ(15,"mat-divider",10),t.qZA()(),t.TgZ(16,"div",11)(17,"div"),t._UZ(18,"img",12),t.qZA(),t.TgZ(19,"span",13),t._uU(20,"Approvals"),t.qZA(),t.TgZ(21,"div"),t._UZ(22,"mat-divider",10),t.qZA()(),t.TgZ(23,"div",11)(24,"div"),t._UZ(25,"img",14),t.qZA(),t.TgZ(26,"span",9),t._uU(27,"Rate\xa0Comparative"),t.qZA(),t.TgZ(28,"div"),t._UZ(29,"mat-divider",10),t.qZA()(),t.TgZ(30,"div",11)(31,"div"),t._UZ(32,"img",15),t.qZA(),t.TgZ(33,"span",9),t._uU(34,"Rate\xa0Approvals"),t.qZA(),t.TgZ(35,"div"),t._UZ(36,"mat-divider",16),t.qZA()(),t.TgZ(37,"div",11)(38,"div"),t._UZ(39,"img",17),t.qZA(),t.TgZ(40,"span",9),t._uU(41,"Purchase\xa0orders"),t.qZA()()(),t.TgZ(42,"form",18)(43,"mat-card",19)(44,"div",20)(45,"div",21)(46,"label",22),t._uU(47,"Request title "),t.qZA(),t._UZ(48,"input",23),t.qZA(),t.TgZ(49,"div",24)(50,"label",22),t._uU(51,"Request date"),t.qZA(),t.TgZ(52,"mat-form-field",25),t._UZ(53,"input",26)(54,"mat-datepicker-toggle",27)(55,"mat-datepicker",null,28),t.qZA()(),t.TgZ(57,"div",29)(58,"label",30),t._uU(59," Required by "),t.TgZ(60,"span",31),t._uU(61,"*"),t.qZA()(),t.TgZ(62,"div",32)(63,"mat-form-field",25),t._UZ(64,"input",33)(65,"mat-datepicker-toggle",27)(66,"mat-datepicker",null,34),t.qZA()()(),t.TgZ(68,"div",21)(69,"label",22),t._uU(70,"Purchase request no "),t.qZA(),t._UZ(71,"input",35),t.qZA(),t.TgZ(72,"div",24)(73,"label",22),t._uU(74,"Site name "),t.TgZ(75,"span",31),t._uU(76,"*"),t.qZA()(),t.TgZ(77,"mat-select",36),t.YNc(78,ue,2,2,"mat-option",37),t.qZA()(),t.YNc(79,de,6,2,"div",38),t.TgZ(80,"div",39)(81,"label",40),t._uU(82,"Local Purchase "),t.TgZ(83,"span",31),t._uU(84,"*"),t.qZA()(),t.TgZ(85,"mat-radio-group",41)(86,"mat-radio-button",42),t._uU(87," Yes "),t.qZA(),t.TgZ(88,"mat-radio-button",42),t._uU(89," No "),t.qZA()()()()(),t.YNc(90,me,23,1,"div",43),t.YNc(91,he,21,1,"ng-template",null,44,t.W1O),t.TgZ(93,"div",45)(94,"label",22),t._uU(95,"Remarks "),t.qZA(),t._UZ(96,"textarea",46),t.qZA()(),t.TgZ(97,"div",47)(98,"button",48),t.NdJ("click",function(){return n.updateRequest("approved")}),t._uU(99,"Approved"),t.qZA(),t.TgZ(100,"button",49),t.NdJ("click",function(){return n.updateRequest("rejected")}),t._uU(101,"Rejected"),t.qZA(),t.TgZ(102,"button",49),t.NdJ("click",function(){return n.updateRequest("revise")}),t._uU(103,"Revise request"),t.qZA()()),2&e){const o=t.MAs(56),a=t.MAs(67),p=t.MAs(92);t.xp6(9),t.Q6J("routerLink",t.DdM(19,fe)),t.xp6(7),t.Q6J("routerLink",t.DdM(20,xe)),t.xp6(7),t.Q6J("routerLink",t.DdM(21,Ze)),t.xp6(7),t.Q6J("routerLink",t.DdM(22,qe)),t.xp6(7),t.Q6J("routerLink",t.DdM(23,be)),t.xp6(5),t.Q6J("formGroup",n.purchaseRequestForm),t.xp6(6),t.Q6J("readonly",!0),t.xp6(5),t.Q6J("matDatepicker",o)("readonly",!0),t.xp6(1),t.Q6J("for",o),t.xp6(10),t.Q6J("matDatepicker",a)("readonly",!0),t.xp6(1),t.Q6J("for",a),t.xp6(13),t.Q6J("ngForOf",n.siteList),t.xp6(1),t.Q6J("ngIf","yes"==(null==n.details?null:n.details.local_purchase)),t.xp6(7),t.Q6J("value","yes"),t.xp6(2),t.Q6J("value","no"),t.xp6(2),t.Q6J("ngIf","yes"==(null==n.details?null:n.details.local_purchase))("ngIfElse",p)}},dependencies:[C.ey,f.KE,f.R9,w.a8,g.Mq,g.hl,g.nW,v.d,y.Nt,Z.VQ,Z.U0,P.gD,A.Ye,h.sg,h.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,d.rH,d.Od],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.flex-div[_ngcontent-%COMP%]{width:31%}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:1110px;height:auto;margin-left:30px;margin-top:30px;box-shadow:0 2px 12px #00000040;font-family:Poppins}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;font-size:14px;margin:8px 20px 20px 10px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;width:1000px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}.scroll-bar1[_ngcontent-%COMP%]{height:auto;width:auto;margin-left:25px;margin-bottom:100px;margin-top:50px;overflow:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background-color:"Transparent"}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 30px 20px 0;float:right;gap:10px}.text-area-section[_ngcontent-%COMP%]{width:1334px;height:auto;margin-left:30px}']}),i})()},{path:"revise/:id",component:ce}];let ye=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[Nt.S,h.ez,r.UX,J.Z,[d.Bz.forChild(ve)]]}),i})()}}]);