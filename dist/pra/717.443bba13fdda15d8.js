"use strict";(self.webpackChunkpra=self.webpackChunkpra||[]).push([[717],{3717:(ie,U,d)=>{d.r(U),d.d(U,{RateComparativeModule:()=>ne});var f=d(6895),u=d(9299),S=d(1283),i=d(4006),_=d(8608),P=d(7489),M=d(2340),V=d(5439),t=d(4650),Z=d(2126),y=d(529),N=d(6104),T=d(3238),x=d(9549),L=d(4859),w=d(4850),R=d(7392),A=d(4144),q=d(4385),k=d(3683);function Y(r,s){if(1&r&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&r){const e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.label)}}const F=function(r){return["/rate-comparative/update",r]};function B(r,s){if(1&r&&(t.TgZ(0,"td",54),t._uU(1,"Create\xa0Comparative"),t.qZA()),2&r){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,F,e._id))}}const Q=function(r){return["/rate-comparative/details",r]};function z(r,s){if(1&r&&(t.TgZ(0,"td",55),t._uU(1,"Approved Vendors"),t.qZA()),2&r){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,Q,e._id))}}function j(r,s){if(1&r&&(t.TgZ(0,"td",56),t._uU(1,"Rejected Rates"),t.qZA()),2&r){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,Q,e._id))}}function E(r,s){if(1&r&&(t.TgZ(0,"td",58),t._uU(1,"Revise\xa0Comparative"),t.qZA()),2&r){const e=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,F,e._id))}}function G(r,s){if(1&r&&(t.ynx(0),t.YNc(1,E,2,3,"td",57),t.BQk()),2&r){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf","revise"==e.status&&"rate_comparitive"==o.stage)}}function K(r,s){1&r&&(t.TgZ(0,"td",60),t._uU(1,"No Permission to Revise Comparative"),t.qZA())}function H(r,s){if(1&r&&t.YNc(0,K,2,0,"td",59),2&r){const e=t.oxw().$implicit,o=t.oxw(2);t.Q6J("ngIf","revise"==e.status&&"rate_comparitive"==o.stage)}}function W(r,s){if(1&r&&(t.TgZ(0,"tr")(1,"td",42),t._uU(2," Request\xa0no\xa0 "),t.TgZ(3,"span",43),t._uU(4),t.qZA()(),t._UZ(5,"hr",44),t.TgZ(6,"td",45),t._uU(7),t.qZA(),t._UZ(8,"hr",44),t.TgZ(9,"td",46),t._uU(10,"Title\xa0"),t.TgZ(11,"span",43),t._uU(12),t.qZA()(),t._UZ(13,"hr",44),t.TgZ(14,"td",47),t._uU(15," Site\xa0"),t.TgZ(16,"span",43),t._uU(17),t.qZA()(),t.YNc(18,B,2,3,"td",48),t.YNc(19,z,2,3,"td",49),t.YNc(20,j,2,3,"td",50),t.YNc(21,G,2,1,"ng-container",51),t.YNc(22,H,1,1,"ng-template",null,52,t.W1O),t.TgZ(24,"td",53)(25,"mat-icon"),t._uU(26," arrow_forward_ios "),t.qZA()()()),2&r){const e=s.$implicit,o=t.MAs(23),n=t.oxw(2);t.xp6(4),t.Oqu(n.reqNo(e.purchase_request_id)),t.xp6(3),t.hij("Requested on: ",e.date,""),t.xp6(5),t.Oqu(e.title),t.xp6(5),t.Oqu(e.siteData.site_name),t.xp6(1),t.Q6J("ngIf","pending"==e.status&&"rate_comparitive"==n.stage),t.xp6(1),t.Q6J("ngIf","rate_approval"==n.stage),t.xp6(1),t.Q6J("ngIf","rejected"==e.status&&"rate_comparitive"==n.stage),t.xp6(1),t.Q6J("ngIf",n.editPermission)("ngIfElse",o)}}function X(r,s){1&r&&(t.TgZ(0,"div",61),t._UZ(1,"img",62),t.TgZ(2,"span"),t._uU(3," No record found"),t.qZA()())}function tt(r,s){if(1&r){const e=t.EpF();t.ynx(0,20),t.TgZ(1,"div",21)(2,"div",22)(3,"mat-form-field",23)(4,"mat-icon",24),t._uU(5,"search"),t.qZA(),t.TgZ(6,"input",25),t.NdJ("input",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.search(n,"title"))}),t.qZA()()(),t._UZ(7,"div",26),t.TgZ(8,"div",27)(9,"div",28)(10,"span"),t._uU(11,"Filter\xa0by"),t.qZA()(),t.TgZ(12,"div")(13,"mat-form-field",29)(14,"input",30),t.NdJ("input",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.search(n,"site"))}),t.qZA()()()(),t.TgZ(15,"div",31)(16,"div",32)(17,"span"),t._uU(18,"Filter by Status"),t.qZA()(),t.TgZ(19,"div",33)(20,"mat-form-field",34)(21,"mat-select",35),t.NdJ("selectionChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.onStatusChange(n))}),t.YNc(22,Y,2,2,"mat-option",36),t.qZA()()()()(),t.TgZ(23,"div",37)(24,"table",38)(25,"tbody"),t.YNc(26,W,27,9,"tr",39),t.qZA()(),t.YNc(27,X,4,0,"div",40),t.qZA(),t.BQk()}if(2&r){const e=t.oxw();t.xp6(21),t.Q6J("formControl",e.statusOption),t.xp6(1),t.Q6J("ngForOf",e.statusList),t.xp6(4),t.Q6J("ngForOf",e.rateComparativeList),t.xp6(1),t.Q6J("ngIf",!(e.rateComparativeList&&e.rateComparativeList.length>0))}}function et(r,s){1&r&&(t.TgZ(0,"h3",63),t._uU(1,"You don't have permissions to view."),t.qZA())}const ot=function(){return["/procurement"]},nt=function(){return["/procurement/prlist"]},rt=function(){return["/rate-comparative"]},it=function(){return["/rate-approval"]},at=function(){return["/purchase-order"]};let st=(()=>{class r{constructor(e,o,n){this.httpService=e,this.http=o,this.snack=n,this.statusOption=new i.NI("pending"),this.statusList=[{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"revise",label:"Revise"}],this.filter_by="status",this.filter_value="pending",this.requestType="new",this.originalRateComparativeList=[],this.stage="rate_comparitive",this.purchaseList=[],this.getList({filter_by:this.filter_by,filter_value:this.filter_value,stage:"rate_comparitive"})}getList(e){this.httpService.GET(_.lu,e).subscribe({next:o=>{if(o.data.forEach(n=>{n.date=V(n.date).format("YYYY-MM-DD")}),console.log(o.data),"superadmin"===this.permissions.user.role)this.originalRateComparativeList=o.data,this.rateComparativeList=o.data;else{const a=o.data.filter(l=>this.siteList.some(p=>p._id===l.site));console.log(a),this.originalRateComparativeList=a,this.rateComparativeList=a}},error:o=>{if(o.errors&&!(0,P.isEmpty)(o.errors)){let n="<ul>";for(let a in o.errors)n+=`<li>${o.errors[a][0]}</li>`;n+="</ul>",this.snack.notifyHtml(n,2)}else this.snack.notify(o.message,2)}})}getReqNO(){const e=this.http.get(`${M.N.api_path}${_.Fj}`);this.httpService.multipleRequests([e],{}).subscribe(o=>{o&&(this.purchaseList=o[0].data)})}reqNo(e){return this.purchaseList.filter(n=>n._id===e)[0].purchase_request_number}onStatusChange(e){let o;"pending"==e.value||"revise"==e.value||"rejected"==e.value?(o="rate_comparitive",this.getList({filter_by:this.filter_by,filter_value:e.value,stage:o})):(o="rate_approval",this.getList({filter_by:this.filter_by,stage:o})),this.stage=o}dateFilter(e){this.originalRateComparativeList&&this.originalRateComparativeList.length>0&&(this.rateComparativeList=e.value?this.originalRateComparativeList.filter(o=>new Date(o.date)==new Date(e.value)):this.originalRateComparativeList)}search(e,o){this.originalRateComparativeList&&this.originalRateComparativeList.length>0&&(this.rateComparativeList="site"==o?e.target.value?this.originalRateComparativeList.filter(n=>n.siteData.site_name.toLowerCase().includes(e.target.value.toLowerCase())):this.originalRateComparativeList:e.target.value?this.originalRateComparativeList.filter(n=>n.title.toLowerCase().includes(e.target.value.toLowerCase())):this.originalRateComparativeList)}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:n=>{this.viewPermission=n.dashboard_permissions[0].ParentChildchecklist[20].childList[0].isSelected,this.addPermission=n.dashboard_permissions[0].ParentChildchecklist[20].childList[1].isSelected,this.editPermission=n.dashboard_permissions[0].ParentChildchecklist[20].childList[2].isSelected},error:n=>{console.log(n)}}),this.getReqNO(),this.siteList=this.permissions.user.sites,console.log("SiteSelect",this.siteList)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(Z.s),t.Y36(y.eN),t.Y36(N.o))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-rate-comparative-list"]],decls:48,vars:12,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","50px","margin-left","20px"],["src","./assets/images/ratehead.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],["mat-icon-button","",2,"margin-right","40px"],[2,"margin-top","40px"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],["src","./assets/images/ratedown.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/po.svg"],["class","section-body",4,"ngIf","ngIfElse"],["noView",""],[1,"section-body"],[2,"display","flex","flex-direction","row","gap","10px","width","100%"],[2,"margin-left","40px","width","100%","margin-top","30px"],["appearance","outline",1,"searchbar"],["matSuffix",""],["matInput","","type","search","placeholder","search title",1,"search-input",3,"input"],[2,"margin-right","600px","margin-top","30px","display","flex","gap","10px","width","100%"],[2,"margin-top","30px","display","flex","position","relative","right","570px","gap","10px","width","100%"],[2,"margin-top","15px","color","#94A3B8"],["appearance","outline",1,"datebar"],["matInput","","placeholder","Site",3,"input"],[2,"margin-top","30px","display","flex","position","relative","right","570px","gap","10px"],[2,"margin-top","15px","color","#94A3B8","width","110px"],[1,"custom-form-control",2,"position","relative"],["appearance","outline"],[3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"scroll-bar1",2,"width","96%"],[2,"direction","ltr !important","margin-top","-20px"],[4,"ngFor","ngForOf"],["class","no-record-found",4,"ngIf"],[3,"value"],[2,"color","#4272BF","width","200px","text-align","left","padding","10px","font-size","15px"],[2,"color","#000000"],[2,"border","1px solid #D9D9D9","height","30px"],[2,"color","#4272BF","width","500px"],[2,"color","#4272BF","width","300px","font-size","15px","padding","10px"],[2,"color","#4272BF","width","700px","text-align","left","padding","10px","font-size","15px"],["style","background-color: #233A61;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],["style","background-color: #54AA52;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],["style","background-color: #C7323B;color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],[4,"ngIf","ngIfElse"],["noEditPermission",""],[2,"width","100px"],[2,"background-color","#233A61","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],[2,"background-color","#54AA52","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],[2,"background-color","#C7323B","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],["style","background-color: rgb(26, 188, 254); color:#fff;width:200px;font-size: 14px;cursor: pointer;",3,"routerLink",4,"ngIf"],[2,"background-color","rgb(26, 188, 254)","color","#fff","width","200px","font-size","14px","cursor","pointer",3,"routerLink"],["style","background-color: rgb(26, 188, 254); color:#fff;width:200px;font-size: 14px;cursor: pointer;","disabled","",4,"ngIf"],["disabled","",2,"background-color","rgb(26, 188, 254)","color","#fff","width","200px","font-size","14px","cursor","pointer"],[1,"no-record-found"],["src","./assets/images/inbox_empty.png","alt",""],[2,"display","flex","justify-content","center","margin-top","2%","font-size","160%","font-weight","bolder","color","grey"]],template:function(e,o){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Rate comparative"),t.qZA(),t._UZ(5,"span",4),t.TgZ(6,"button",5)(7,"mat-icon",6),t._uU(8,"notifications"),t.qZA()()(),t.TgZ(9,"div"),t._UZ(10,"hr",7),t.qZA(),t.TgZ(11,"div",8)(12,"div",9)(13,"div"),t._UZ(14,"img",10),t.qZA(),t.TgZ(15,"span",11),t._uU(16,"Purchase\xa0request"),t.qZA(),t.TgZ(17,"div"),t._UZ(18,"mat-divider",12),t.qZA()(),t.TgZ(19,"div",13)(20,"div"),t._UZ(21,"img",14),t.qZA(),t.TgZ(22,"span",11),t._uU(23,"Approvals"),t.qZA(),t.TgZ(24,"div"),t._UZ(25,"mat-divider",12),t.qZA()(),t.TgZ(26,"div",13)(27,"div"),t._UZ(28,"img",15),t.qZA(),t.TgZ(29,"span",16),t._uU(30,"Rate\xa0Comparative"),t.qZA(),t.TgZ(31,"div"),t._UZ(32,"mat-divider",12),t.qZA()(),t.TgZ(33,"div",13)(34,"div"),t._UZ(35,"img",14),t.qZA(),t.TgZ(36,"span",11),t._uU(37,"Rate\xa0Approvals"),t.qZA(),t.TgZ(38,"div"),t._UZ(39,"mat-divider",12),t.qZA()(),t.TgZ(40,"div",13)(41,"div"),t._UZ(42,"img",17),t.qZA(),t.TgZ(43,"span",11),t._uU(44,"Purchase\xa0orders"),t.qZA()()(),t.YNc(45,tt,28,4,"ng-container",18),t.YNc(46,et,2,0,"ng-template",null,19,t.W1O)),2&e){const n=t.MAs(47);t.xp6(12),t.Q6J("routerLink",t.DdM(7,ot)),t.xp6(7),t.Q6J("routerLink",t.DdM(8,nt)),t.xp6(7),t.Q6J("routerLink",t.DdM(9,rt)),t.xp6(7),t.Q6J("routerLink",t.DdM(10,it)),t.xp6(7),t.Q6J("routerLink",t.DdM(11,at)),t.xp6(5),t.Q6J("ngIf",o.viewPermission)("ngIfElse",n)}},dependencies:[f.sg,f.O5,u.rH,u.Od,T.ey,x.KE,x.R9,L.lW,w.d,R.Hw,A.Nt,q.gD,k.Ye,i.JJ,i.oH],styles:[".mat-form-field-appearance-outline .mat-form-field-infix{padding:.6em;width:250px}mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}input[type=text][_ngcontent-%COMP%]{width:60%;border-radius:8px;padding:12px 20px;margin:8px 0;box-sizing:border-box;border:.5px solid #94A3B8;transition:.5s;outline:none;font-family:Poppins;font-size:15px}.requests[_ngcontent-%COMP%]{height:40px;width:1120px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:15px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:15px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:15px;display:flex;align-items:center;justify-content:center}.searchbar[_ngcontent-%COMP%]{width:350px;border-radius:20px;font-family:Poppins}.datebar[_ngcontent-%COMP%]{width:180px;border-radius:20px;font-family:Poppins}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:separate;border-spacing:0 25px;text-align:left;width:100%;font-size:12px;margin-left:30px;margin-bottom:20px;margin-right:-10px}td[_ngcontent-%COMP%]{border:none;text-align:center;padding:8px 1px;color:#233a61;font-style:normal;font-size:medium}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f4f4f5!important}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f4f4f5!important}.scroll-bar1[_ngcontent-%COMP%]{height:600px;width:93%;margin-left:20px;margin-bottom:100px;margin-top:10px;overflow:auto;direction:rtl;overflow-x:hidden}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1E293B;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.no-record-found[_ngcontent-%COMP%]{text-align:center;display:flex;gap:10px;flex-direction:column;align-items:center;justify-content:center}.no-record-found[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:188px}"]}),r})();var b=d(5938),lt=d(7009);let pt=(()=>{class r{constructor(e,o,n,a){this._snackBar=e,this.formBuilder=o,this.dialogRef=n,this.data=a,this.formSubmitted=!1,this.showVendorRate=!1,this.vendorRates=[],this.load=!1}ngOnInit(){}onSave(){this.vendorItemsForm.valid?(this.showVendorRate=!0,this.vendorRates=this.calculateVendorRates()):this._snackBar.open("Please fill all the required fields","Close",{duration:3e3})}calculateVendorRates(){return[]}onNoClick(){this.dialogRef.close()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(lt.ux),t.Y36(i.qu),t.Y36(b.so),t.Y36(b.WI))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-rate-comparative-vendors"]],decls:0,vars:0,template:function(e,o){},styles:[".mat-mdc-dialog-title[_ngcontent-%COMP%]{border-bottom:0;padding:14px;background:#f3f3f3;display:flex;justify-content:space-between;align-items:center;font-style:normal;font-weight:400;font-size:14px;line-height:16px;text-transform:capitalize;color:#28313b}.mat-mdc-dialog-content-cstm[_ngcontent-%COMP%]{padding-top:10px}.cancel-btn[_ngcontent-%COMP%]{background:#f3f3f3;color:#333}.space-btn[_ngcontent-%COMP%]{margin:0 5px}.mat-mdc-dialog-content[_ngcontent-%COMP%]{margin:0;padding:0 15px}.close-icon[_ngcontent-%COMP%]{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:13px;width:0px;margin-top:-5px;cursor:pointer}.vendor_list_table[_ngcontent-%COMP%]{border:1px solid #ccc;width:100%;overflow:hidden}.vendor_list_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;padding:10px 20px;font-weight:400}.vendor_list_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 20px}.vendor_list_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#eee}.cstm-btn[_ngcontent-%COMP%]{border:0;border-radius:4px;padding:10px 23px;outline:none}.cstm-btn.theme-btn-color[_ngcontent-%COMP%]{background-color:#233a61;color:#fff}.footer-template[_ngcontent-%COMP%]{text-align:center;border-top:1px solid #ccc;margin:30px 0 0;padding-top:22px;display:flex;align-items:center;justify-content:center;gap:10px}.cstm-input[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;padding:5px 10px}.td-subtitle[_ngcontent-%COMP%]{font-size:11px;font-weight:400}.header-subtitle[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.empty-input[_ngcontent-%COMP%]{border:1px solid red}.invalid-input[_ngcontent-%COMP%]{border:2px solid red}"]}),r})();var J=d(4961),D=d(3546),h=d(9602),C=d(1948);function dt(r,s){if(1&r&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&r){const e=s.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function ct(r,s){if(1&r&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&r){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.site_name," ")}}function mt(r,s){1&r&&(t.TgZ(0,"div"),t._uU(1," No vendor available "),t.qZA())}function gt(r,s){if(1&r&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&r){const e=s.$implicit,o=t.oxw(2);t.xp6(1),t.hij(" ",o.detailsOfVendor(e,"topview",0)," ")}}function ut(r,s){if(1&r&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.YNc(6,mt,2,0,"div",53),t.YNc(7,gt,2,1,"p",44),t.qZA()()),2&r){const e=s.$implicit,o=t.oxw();t.xp6(2),t.Oqu(e.categoryDetail.name),t.xp6(2),t.Oqu(e.subCategoryDetail.subcategory_name),t.xp6(2),t.Q6J("ngIf",0===o.isVendorSelected(e).length),t.xp6(1),t.Q6J("ngForOf",o.isVendorSelected(e))}}function _t(r,s){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr")(2,"td",54),t._uU(3),t.qZA(),t.TgZ(4,"td",54),t._uU(5),t.qZA(),t.TgZ(6,"td",54),t._uU(7),t.qZA(),t.TgZ(8,"td")(9,"a",55),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.ItemData(a))}),t._uU(10," Items Rates"),t.qZA()()(),t.BQk()}if(2&r){const e=s.$implicit,o=s.index,n=t.oxw();t.xp6(3),t.hij(" ",n.detailsOfVendor(e,"name",o)," "),t.xp6(2),t.hij(" ",(null==e.items[0]||null==e.items[0].item||null==e.items[0].item.categoryDetail?null:e.items[0].item.categoryDetail.name)||"N/A"," "),t.xp6(2),t.hij(" ",(null==e.items[0]||null==e.items[0].item||null==e.items[0].item.subCategoryDetail?null:e.items[0].item.subCategoryDetail.subcategory_name)||"N/A"," ")}}const ft=function(){return["/procurement"]},xt=function(){return["/procurement/prlist"]},ht=function(){return["/rate-comparative"]},vt=function(){return["/rate-approval"]},bt=function(){return["/purchase-order"]},Ct=function(r){return{"background-color":r}};let Zt=(()=>{class r{constructor(e,o,n,a,l,p,c){this.router=e,this.httpService=o,this.dialog=n,this.formBuilder=a,this.route=l,this.userService=p,this.http=c,this.load=!1,this.finalVendorArray=[],this.VendorItems=this.formBuilder.array([]),this.purchaseRequestForm=new i.cw({title:new i.NI("",i.kI.required),date:new i.NI("",i.kI.required),expected_delivery_date:new i.NI("",i.kI.required),handle_by:new i.NI({value:"",disabled:!0},i.kI.required),rate_approval_number:new i.NI(""),site:new i.NI({value:"",disabled:!0},i.kI.required),local_purchase:new i.NI({value:"",disabled:!0},i.kI.required),remarks:new i.NI("",[]),items:this.formBuilder.array([]),_id:new i.NI}),this.details={},this.vendorsList=[],this.vendorAssociatedData=[],this.getSiteList(),this.getBrandList(),this.userService.getUserss().subscribe(g=>{this.users=g})}vendorData(e){let o=e._id;$(`.vendor-detail-button-${o}`).hasClass("collapsed")?($(`.vendor-detail-button-${o}`).removeClass("collapsed"),$(`.vendor-detail-${o}`).removeClass("cl-show")):($(`.vendor-detail-button-${o}`).addClass("collapsed"),$(`.vendor-detail-${o}`).addClass("cl-show"))}createItemArrayForm(){return new i.cw({item_id:new i.NI("",i.kI.required),qty:new i.NI("",i.kI.required),category:new i.NI(""),subCategory:new i.NI(""),attachment:new i.NI(""),remark:new i.NI("",i.kI.required),uom:new i.NI("",i.kI.required)})}createItem(e){if(e)return new i.cw({item_id:new i.NI(e.item_id,i.kI.required),qty:new i.NI(e.qty,i.kI.required),category:new i.NI(e.categoryDetail.name),subCategory:new i.NI(e.subCategoryDetail.subcategory_name),attachment:new i.NI(e.attachment),remark:new i.NI(e.remark,i.kI.required),uom:new i.NI(e.uomDetail._id,i.kI.required)})}ItemData(e){console.log("==dataObj==",e),this.dialog.open(pt,{data:{dataObj:e.Vendor,vendorsList:this.vendorsList,items:this.details?.items,filledData:e,brandList:this.brandList,type:"detailsPage"}}).afterClosed().subscribe(n=>{})}objectBackToFormGroup(){this.VendorItems.clear();for(let e=0;e<this.details.vendorItems.length;e++){const o={Vendor:this.details.vendorItems[e].Vendor,category:"GST",subCategory:"GST",items:this.details.vendorItems[e].items},n=this.formBuilder.group({Vendor:[o.Vendor,i.kI.required],category:[o.category,i.kI.required],subCategory:[o.subCategory,i.kI.required],items:this.formBuilder.array([])});this.VendorItems.push(n)}}patchData(e){this.purchaseRequestForm.patchValue({title:e.title,date:e.date,expected_delivery_date:e.expected_delivery_date,rate_approval_number:e.rate_approval_number,handle_by:e.handle_by,site:e.site,local_purchase:e.local_purchase,remarks:e.remarks}),this.purchaseRequestForm.controls.remarks.disable()}getSiteList(){this.httpService.GET(_.S3,{}).subscribe(e=>{this.siteList=e.data})}isVendorSelected(e){return this.details.vendorItems.filter(n=>n.category==e.categoryDetail._id&&n.subCategory==e.subCategoryDetail._id)}detailsOfVendor(e,o,n){return this.vendorsList.find(l=>l._id==e.Vendor).vendor_name}getBrandList(){this.httpService.GET(_.Lk,{}).subscribe(e=>{this.brandList=e.data})}ngOnInit(){this.route.params.subscribe(e=>{e.id&&this.httpService.GET(`${_.bG}`,{_id:e.id}).subscribe({next:o=>{this.details=o.data.details,this.objectBackToFormGroup(),this.vendorsList=o.data.vendorsList,this.vendorsList.map(a=>(this.vendorAssociatedData[a._id]=a,a));let n=[];this.filteredItems=this.details?.items.filter(a=>{let l=a.categoryDetail._id+"$"+a.subCategoryDetail._id;return!n.includes(l)&&(n.push(l),!0)}),this.patchData(o.data.details)},error:o=>{this.router.navigate(["/rate-comparative"])}})})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(u.F0),t.Y36(Z.s),t.Y36(b.uw),t.Y36(i.qu),t.Y36(u.gz),t.Y36(J.f),t.Y36(y.eN))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-rate-comparative-details"]],decls:137,vars:26,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","50px","margin-left","20px"],["src","./assets/images/RA.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],["mat-icon-button","",2,"margin-right","40px"],[2,"margin-top","40px"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],["src","./assets/images/ratedown.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/po.svg"],[3,"formGroup"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","10px","max-width","100%"],[1,"flex-div",2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],["placeholder","Enter title","formControlName","title","readonly","",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","3px","font-family","Poppins","height","50px"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Auto generate Request Date","readonly","",3,"matDatepicker"],["matSuffix","",3,"for"],["date",""],[1,"flex-div","custom-form-group"],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],[1,"star"],[1,"custom-form-control"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by","readonly","",3,"matDatepicker"],["requiredByStartDate",""],["matInput","","formControlName","handle_by"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Auto generate","formControlName","rate_approval_number","readonly","",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","10px","font-family","Poppins"],["id","site","placeholder","Select site","formControlName","site",2,"padding","10px","width","100","border","1px solid #ccc","border-radius","6px","cursor","pointer","margin-top","10px","font-family","Poppins"],[1,"flex-div",2,"display","flex","flex-direction","column","align-items","center"],[2,"color","#4272BF","margin-bottom","10px"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group"],[1,"example-radio-button",3,"value"],[1,"topcard",2,"margin-top","40px"],[1,"scroll-bar1"],[4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center"],[1,"p-btns-button",3,"disabled"],[2,"direction","ltr !important","border-left","2px solid #000 !important"],[1,"text-area-section"],["name","","id","","cols","30","rows","5","formControlName","remarks"],[1,"button-list"],[1,"p-btns-button",3,"ngStyle","disabled"],[3,"value"],[4,"ngIf"],[2,"text-align","center"],[1,"p-btns",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Rate approvals details"),t.qZA(),t._UZ(5,"span",4),t.TgZ(6,"button",5)(7,"mat-icon",6),t._uU(8,"notifications"),t.qZA()()(),t.TgZ(9,"div"),t._UZ(10,"hr",7),t.qZA(),t.TgZ(11,"div",8)(12,"div",9)(13,"div"),t._UZ(14,"img",10),t.qZA(),t.TgZ(15,"span",11),t._uU(16,"Purchase\xa0request"),t.qZA(),t.TgZ(17,"div"),t._UZ(18,"mat-divider",12),t.qZA()(),t.TgZ(19,"div",13)(20,"div"),t._UZ(21,"img",14),t.qZA(),t.TgZ(22,"span",11),t._uU(23,"Approvals"),t.qZA(),t.TgZ(24,"div"),t._UZ(25,"mat-divider",12),t.qZA()(),t.TgZ(26,"div",13)(27,"div"),t._UZ(28,"img",15),t.qZA(),t.TgZ(29,"span",16),t._uU(30,"Rate\xa0Comparative"),t.qZA(),t.TgZ(31,"div"),t._UZ(32,"mat-divider",12),t.qZA()(),t.TgZ(33,"div",13)(34,"div"),t._UZ(35,"img",14),t.qZA(),t.TgZ(36,"span",11),t._uU(37,"Rate\xa0Approvals"),t.qZA(),t.TgZ(38,"div"),t._UZ(39,"mat-divider",12),t.qZA()(),t.TgZ(40,"div",13)(41,"div"),t._UZ(42,"img",17),t.qZA(),t.TgZ(43,"span",11),t._uU(44,"Purchase\xa0orders"),t.qZA()()(),t.TgZ(45,"form",18)(46,"mat-card",19)(47,"div",20)(48,"div",21)(49,"label",22),t._uU(50,"Request title "),t.qZA(),t._UZ(51,"input",23),t.qZA(),t.TgZ(52,"div",21)(53,"label",22),t._uU(54,"Request date"),t.qZA(),t.TgZ(55,"mat-form-field",24),t._UZ(56,"input",25)(57,"mat-datepicker-toggle",26)(58,"mat-datepicker",null,27),t.qZA()(),t.TgZ(60,"div",28)(61,"label",29),t._uU(62," Required by "),t.TgZ(63,"span",30),t._uU(64,"*"),t.qZA()(),t.TgZ(65,"div",31)(66,"mat-form-field",24),t._UZ(67,"input",32)(68,"mat-datepicker-toggle",26)(69,"mat-datepicker",null,33),t.qZA()()(),t.TgZ(71,"div",28)(72,"label",29),t._uU(73," Handle by "),t.TgZ(74,"span",30),t._uU(75,"*"),t.qZA()(),t.TgZ(76,"div",31)(77,"mat-form-field",24)(78,"mat-select",34),t.YNc(79,dt,2,2,"mat-option",35),t.qZA()()()(),t.TgZ(80,"div",21)(81,"label",22),t._uU(82,"Request no "),t.qZA(),t._UZ(83,"input",36),t.qZA(),t.TgZ(84,"div",21)(85,"label",22),t._uU(86,"Site name "),t.TgZ(87,"span",30),t._uU(88,"*"),t.qZA()(),t.TgZ(89,"mat-select",37),t.YNc(90,ct,2,2,"mat-option",35),t.qZA()(),t.TgZ(91,"div",38)(92,"label",39),t._uU(93,"Local Purchase "),t.TgZ(94,"span",30),t._uU(95,"*"),t.qZA()(),t.TgZ(96,"mat-radio-group",40)(97,"mat-radio-button",41),t._uU(98," Yes "),t.qZA(),t.TgZ(99,"mat-radio-button",41),t._uU(100," No "),t.qZA()()()()(),t.TgZ(101,"mat-card",42)(102,"form")(103,"div",43)(104,"table")(105,"tr")(106,"th"),t._uU(107,"Category"),t.qZA(),t.TgZ(108,"th"),t._uU(109,"Sub Category"),t.qZA(),t.TgZ(110,"th"),t._uU(111,"Vendor"),t.qZA()(),t.YNc(112,ut,8,4,"tr",44),t.qZA()(),t.TgZ(113,"div",45)(114,"button",46),t._uU(115,"Save"),t.qZA()()()(),t.TgZ(116,"div",43)(117,"table",47)(118,"tr")(119,"th"),t._uU(120,"Vendor*"),t.qZA(),t.TgZ(121,"th"),t._uU(122,"Category"),t.qZA(),t.TgZ(123,"th"),t._uU(124,"Sub\xa0category"),t.qZA(),t.TgZ(125,"th"),t._uU(126,"Item"),t.qZA()(),t.TgZ(127,"tbody"),t.YNc(128,_t,11,3,"ng-container",44),t.qZA()()(),t.TgZ(129,"div",48)(130,"label",22),t._uU(131,"Remarks "),t.qZA(),t._UZ(132,"textarea",49),t.qZA(),t.TgZ(133,"div",50)(134,"button",51)(135,"span"),t._uU(136,"Approved"),t.qZA()()()()),2&e){const n=t.MAs(59),a=t.MAs(70);t.xp6(12),t.Q6J("routerLink",t.DdM(19,ft)),t.xp6(7),t.Q6J("routerLink",t.DdM(20,xt)),t.xp6(7),t.Q6J("routerLink",t.DdM(21,ht)),t.xp6(7),t.Q6J("routerLink",t.DdM(22,vt)),t.xp6(7),t.Q6J("routerLink",t.DdM(23,bt)),t.xp6(5),t.Q6J("formGroup",o.purchaseRequestForm),t.xp6(11),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(10),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(11),t.Q6J("ngForOf",o.users),t.xp6(11),t.Q6J("ngForOf",o.siteList),t.xp6(7),t.Q6J("value","yes"),t.xp6(2),t.Q6J("value","no"),t.xp6(13),t.Q6J("ngForOf",o.filteredItems),t.xp6(2),t.Q6J("disabled",!0),t.xp6(14),t.Q6J("ngForOf",null==o.details?null:o.details.vendorItems),t.xp6(6),t.Q6J("ngStyle",t.VKq(24,Ct,"approved"==o.details.status?"#54AA52":"rejected"==o.details.status?"#C7323B":"#233A61"))("disabled",o.load)}},dependencies:[f.sg,f.O5,f.PC,u.rH,u.Od,T.ey,x.KE,x.R9,L.lW,D.a8,h.Mq,h.hl,h.nW,w.d,R.Hw,A.Nt,C.VQ,C.U0,q.gD,k.Ye,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:100%;height:auto;font-family:Poppins;box-shadow:none;border:1px solid #ccc;border-radius:4px}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;width:100%;font-size:14px;margin-bottom:20px;margin-right:20px;margin-top:8px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}form[_ngcontent-%COMP%]{padding:10px 20px}.scroll-bar1[_ngcontent-%COMP%]{margin-top:50px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background-color:"Transparent"}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 0 20px;float:right;gap:10px}.text-area-section[_ngcontent-%COMP%]{width:100%;height:auto;margin:30px 0 0}.text-area-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:100%}.flex-div[_ngcontent-%COMP%]{width:31%}.mat-form-field[_ngcontent-%COMP%]{display:block}.pending[_ngcontent-%COMP%]{padding:8px;width:120px;background-color:#ccc;color:#333;font-size:14px;font-family:Poppins;height:50px;border:none}.p-btns[_ngcontent-%COMP%]{background:#233a61;padding:5px 10px;border-radius:4px;font-size:12px;cursor:pointer}.p-btns[_ngcontent-%COMP%]:hover{opacity:.7}.p-btns-button[_ngcontent-%COMP%]{background:#233a61;padding:7px 40px;border-radius:4px;font-size:12px;cursor:pointer;color:#fff;opacity:.7}.vendor-wapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:40px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-name-cl[_ngcontent-%COMP%]{padding:6px 15px;background:#233a61;color:#fff}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:rgba(7,59,76,.0509803922);padding:6px 15px;margin-bottom:10px;gap:10px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80px;border:1px solid #ccc;border-radius:2px;padding:5px;outline:none}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-label[_ngcontent-%COMP%]{min-width:144px}input[readonly=true][_ngcontent-%COMP%], input[readonly][_ngcontent-%COMP%], .mat-select-disabled[_ngcontent-%COMP%]{opacity:.6}.vendor-detail[_ngcontent-%COMP%]{display:none}.vendor-detail.cl-show[_ngcontent-%COMP%]{display:table-row}']}),r})();function yt(r,s){if(1&r&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&r){const e=s.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function Tt(r,s){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function wt(r,s){if(1&r&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&r){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.site_name," ")}}function At(r,s){1&r&&(t.TgZ(0,"div"),t._uU(1," No vendor available "),t.qZA())}function qt(r,s){if(1&r&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&r){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",null==e?null:e.vendor_name," ")}}function kt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",56)(1,"mat-form-field",57)(2,"mat-label"),t._uU(3,"Select Vendors"),t.qZA(),t.TgZ(4,"mat-select",58),t.NdJ("selectionChange",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.handleVendorChange())}),t.YNc(5,qt,2,2,"mat-option",33),t.qZA()()()}if(2&r){const e=t.oxw().$implicit,o=t.oxw();t.xp6(5),t.Q6J("ngForOf",o.isVendorSelected(e))}}function It(r,s){if(1&r&&(t.TgZ(0,"tr",53)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.YNc(6,At,2,0,"div",50),t.YNc(7,kt,6,1,"ng-template",54,55,t.W1O),t.qZA()()),2&r){const e=s.$implicit,o=s.index,n=t.MAs(8),a=t.oxw();t.xp6(2),t.Oqu(e.categoryDetail.name),t.xp6(2),t.Oqu(e.subCategoryDetail.subcategory_name),t.xp6(2),t.Q6J("ngIf",0===a.isVendorSelected(e).length)("ngIfElse",n),t.xp6(1),t.Q6J("formGroupName",o)}}function Ot(r,s){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"th",69)(2,"label")(3,"input",70),t.NdJ("change",function(n){const l=t.CHM(e).index,p=t.oxw(2);return t.KtG(p.toggleVendorPreferred(l,n))}),t.qZA(),t._uU(4),t.qZA()(),t.BQk()}if(2&r){const e=s.$implicit,o=s.index,n=t.oxw(2);t.xp6(3),t.Q6J("checked",n.vendorItemsTables[0].totals[n.getVendorKeys()[o]].preferred),t.xp6(1),t.hij(" ",e," ")}}function Ut(r,s){1&r&&(t.ynx(0),t.TgZ(1,"th",71),t._uU(2,"Available Qty"),t.qZA(),t.TgZ(3,"th",71),t._uU(4,"Rate (\u20b9)"),t.qZA(),t.TgZ(5,"th",71),t._uU(6,"Sub Total (\u20b9)"),t.qZA(),t.BQk())}const Pt=function(r){return{"lowest-amount":r}};function Mt(r,s){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"td")(2,"input",75),t.NdJ("input",function(){const a=t.CHM(e).$implicit,l=t.oxw().$implicit,p=t.oxw().index,c=t.oxw(2);return t.KtG(c.updateQty(l,a,p))}),t.qZA()(),t.TgZ(3,"td")(4,"input",75),t.NdJ("input",function(){const a=t.CHM(e).$implicit,l=t.oxw().$implicit,p=t.oxw().index,c=t.oxw(2);return t.KtG(c.updateAmount(l,a,p))}),t.qZA()(),t.TgZ(5,"td",76),t._uU(6),t.qZA(),t.BQk()}if(2&r){const e=s.$implicit,o=t.oxw().$implicit,n=t.oxw().index,a=t.oxw(2);t.xp6(2),t.Q6J("formControl",a.getFormControl(n,o.item_id,e,"requiredQty")),t.uIk("data-control-name","table_"+n+"_item_"+o.item_id+"_vendor_"+e+"_requiredQty"),t.xp6(2),t.Q6J("formControl",a.getFormControl(n,o.item_id,e,"rate")),t.uIk("data-control-name","table_"+n+"_item_"+o.item_id+"_vendor_"+e+"_rate"),t.xp6(1),t.Q6J("ngClass",t.VKq(6,Pt,a.isSaved&&a.isLowestAmount(n,o.item_id,e))),t.xp6(1),t.hij(" ",a.getFormControl(n,o.item_id,e,"amount").value||"0"," ")}}function Nt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td",72),t._uU(2),t.qZA(),t.TgZ(3,"td",73),t._uU(4),t.qZA(),t.TgZ(5,"td",73),t._uU(6),t.qZA(),t.TgZ(7,"td",71),t._uU(8),t.qZA(),t.TgZ(9,"td",71),t._uU(10),t.qZA(),t.TgZ(11,"td",71),t._uU(12),t.qZA(),t.YNc(13,Mt,7,8,"ng-container",63),t.TgZ(14,"td")(15,"input",74),t.NdJ("input",function(){const a=t.CHM(e).$implicit,l=t.oxw().index,p=t.oxw(2);return t.KtG(p.updateStatus(a,l))}),t.qZA()()()}if(2&r){const e=s.$implicit,o=t.oxw(),n=o.$implicit,a=o.index,l=t.oxw(2);t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.category),t.xp6(2),t.Oqu(e.subCategory),t.xp6(2),t.Oqu(e.uom),t.xp6(2),t.Oqu(e.quantity),t.xp6(2),t.Oqu(e.gst),t.xp6(1),t.Q6J("ngForOf",l.getVendorIds(n)),t.xp6(2),t.Q6J("formControl",l.getFormControl(a,e.item_id,"","remarks")),t.uIk("data-control-name","table_"+a+"_item_"+e.item_id+"_remarks")}}function Lt(r,s){if(1&r&&(t.ynx(0),t.YNc(1,Nt,16,9,"tr",63),t.BQk()),2&r){const e=s.$implicit;t.xp6(1),t.Q6J("ngForOf",e.items)}}function Rt(r,s){if(1&r&&(t.ynx(0),t.TgZ(1,"td",77),t._uU(2),t.qZA(),t.BQk()),2&r){const e=s.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu((null==o.vendorItemsTables[0].totals[e]?null:o.vendorItemsTables[0].totals[e].totalAmount)||"0")}}function Ft(r,s){if(1&r&&(t.ynx(0),t.TgZ(1,"td",77),t._uU(2),t.qZA(),t.BQk()),2&r){const e=s.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu((null==o.vendorItemsTables[0].totals[e]?null:o.vendorItemsTables[0].totals[e].gstAmount)||"0")}}function Qt(r,s){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"td",78)(2,"input",75),t.NdJ("input",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateTotals(0))}),t.qZA()(),t.BQk()}if(2&r){const e=s.$implicit,o=t.oxw(2);t.xp6(2),t.Q6J("formControl",o.getFormControl(0,"",e,"freight")),t.uIk("data-control-name","table_0_vendor_"+e+"_freight")}}function Jt(r,s){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"td",78)(2,"input",75),t.NdJ("input",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateTotals(0))}),t.qZA()(),t.BQk()}if(2&r){const e=s.$implicit,o=t.oxw(2);t.xp6(2),t.Q6J("formControl",o.getFormControl(0,"",e,"freightGst")),t.uIk("data-control-name","table_0_vendor_"+e+"_freightGst")}}const Dt=function(r){return{"lowest-grand-total":r}};function St(r,s){if(1&r&&(t.ynx(0),t.TgZ(1,"td",79),t._uU(2),t.qZA(),t.BQk()),2&r){const e=s.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(2,Dt,o.isSaved&&o.isLowestGrandTotal(e))),t.xp6(1),t.hij(" ",(null==o.vendorItemsTables[0].totals[e]?null:o.vendorItemsTables[0].totals[e].grandTotal)||"0"," ")}}function $t(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"table",59)(2,"thead")(3,"tr")(4,"th",60),t._uU(5,"Item"),t.qZA(),t.TgZ(6,"th",61),t._uU(7,"Category"),t.qZA(),t.TgZ(8,"th",61),t._uU(9,"Sub-Category"),t.qZA(),t.TgZ(10,"th",62),t._uU(11,"UOM"),t.qZA(),t.TgZ(12,"th",62),t._uU(13,"Quantity"),t.qZA(),t.TgZ(14,"th",62),t._uU(15,"GST %"),t.qZA(),t.YNc(16,Ot,5,2,"ng-container",63),t.TgZ(17,"th",62),t._uU(18,"Add Remarks"),t.qZA()(),t.TgZ(19,"tr"),t.YNc(20,Ut,7,0,"ng-container",63),t.qZA()(),t.TgZ(21,"tbody"),t.YNc(22,Lt,2,1,"ng-container",63),t.qZA(),t.TgZ(23,"tfoot")(24,"tr"),t._UZ(25,"td",64),t.TgZ(26,"td",65),t._uU(27,"Total Amount (\u20b9)"),t.qZA(),t.YNc(28,Rt,3,1,"ng-container",63),t._UZ(29,"td",66),t.qZA(),t.TgZ(30,"tr"),t._UZ(31,"td",64),t.TgZ(32,"td",65),t._uU(33,"GST Amount (\u20b9)"),t.qZA(),t.YNc(34,Ft,3,1,"ng-container",63),t._UZ(35,"td",66),t.qZA(),t.TgZ(36,"tr"),t._UZ(37,"td",64),t.TgZ(38,"td",65),t._uU(39,"Freight (\u20b9)"),t.qZA(),t.YNc(40,Qt,3,2,"ng-container",63),t._UZ(41,"td",66),t.qZA(),t.TgZ(42,"tr"),t._UZ(43,"td",64),t.TgZ(44,"td",65),t._uU(45,"Freight GST (%)"),t.qZA(),t.YNc(46,Jt,3,2,"ng-container",63),t._UZ(47,"td",66),t.qZA(),t.TgZ(48,"tr"),t._UZ(49,"td",64),t.TgZ(50,"td",65),t._uU(51,"Grand Total (\u20b9)"),t.qZA(),t.YNc(52,St,3,4,"ng-container",63),t._UZ(53,"td",66),t.qZA()()(),t.TgZ(54,"div",67)(55,"button",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.saveAndHighlight())}),t._uU(56,"Save Rates"),t.qZA()()()}if(2&r){const e=t.oxw();t.xp6(16),t.Q6J("ngForOf",e.vendorItemsTables[0].vendors),t.xp6(4),t.Q6J("ngForOf",e.vendorItemsTables[0].vendors),t.xp6(2),t.Q6J("ngForOf",e.vendorItemsTables),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(6),t.Q6J("ngForOf",e.getVendorIds(e.vendorItemsTables[0])),t.xp6(3),t.Q6J("disabled",e.isSaved)}}function Vt(r,s){1&r&&(t.TgZ(0,"span"),t._uU(1,"Submit"),t.qZA())}function Yt(r,s){1&r&&(t.TgZ(0,"span"),t._uU(1,"Please wait..."),t.qZA())}function Bt(r,s){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.updateRequest())}),t.YNc(2,Vt,2,0,"span",34),t.YNc(3,Yt,2,0,"span",34),t.qZA(),t.BQk()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.load),t.xp6(1),t.Q6J("ngIf",!e.load),t.xp6(1),t.Q6J("ngIf",e.load)}}function zt(r,s){1&r&&(t.TgZ(0,"span"),t._uU(1,"No Permission to Submit"),t.qZA())}function jt(r,s){if(1&r&&(t.TgZ(0,"button",80),t.YNc(1,zt,2,0,"span",34),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.load)}}const Et=function(){return["/procurement"]},Gt=function(){return["/procurement/prlist"]},Kt=function(){return["/rate-comparative"]},Ht=function(){return["/rate-approval"]},Wt=function(){return["/purchase-order"]};let Xt=(()=>{class r{constructor(e,o,n,a,l,p,c,g){this.router=e,this.httpService=o,this.snack=n,this.formBuilder=a,this.route=l,this.dialog=p,this.http=c,this.userService=g,this.load=!1,this.flag=!1,this.finalVendorArray=[],this.VendorItems=[],this.vendorItemsTables=[],this.isButtonDisabled=!0,this.isSelectDisabled=!1,this.isSaved=!1,this.ItemwiseVendorRate=new Map,this.rateComparativeForm=new i.cw({title:new i.NI("",i.kI.required),date:new i.NI("",i.kI.required),expected_delivery_date:new i.NI("",i.kI.required),handle_by:new i.NI({value:"",disabled:!0},i.kI.required),rate_approval_number:new i.NI(""),site:new i.NI({value:"",disabled:!0},i.kI.required),local_purchase:new i.NI({value:"",disabled:!0},i.kI.required),remarks:new i.NI("",[]),_id:new i.NI}),this.details={},this.vendorsList=[],this.vendorAssociatedData=[],this.filteredItems=[],this.vendorForm=this.formBuilder.group({vendor:this.formBuilder.array([])}),this.getBrandList(),this.vendorItemsForm=this.formBuilder.group({}),this.getList(),this.userService.getUserss().subscribe(m=>{this.users=m})}getList(){const e=this.http.get(`${M.N.api_path}${_.S3}`);this.httpService.multipleRequests([e],{}).subscribe(o=>{o&&(this.siteList=o[0].data)})}patchData(e){let o=JSON.parse(localStorage.getItem("loginData"));this.rateComparativeForm.patchValue({title:e.title,date:e.date,expected_delivery_date:e.expected_delivery_date,rate_approval_number:e.rate_approval_number,handle_by:o.user._id,site:e.site,local_purchase:e.local_purchase})}createItemArrayForm(){return new i.cw({item_id:new i.NI("",i.kI.required),qty:new i.NI("",i.kI.required),category:new i.NI(""),subCategory:new i.NI(""),attachment:new i.NI(""),remark:new i.NI("",i.kI.required),uom:new i.NI("",i.kI.required)})}createItem(e){if(e)return new i.cw({item_id:new i.NI(e.item_id,i.kI.required),qty:new i.NI(e.qty,i.kI.required),category:new i.NI(e.categoryDetail.name),subCategory:new i.NI(e.subCategoryDetail.subcategory_name),attachment:new i.NI(e.attachment),remark:new i.NI(e.remark,i.kI.required),uom:new i.NI(e.uomDetail._id,i.kI.required)})}getSiteList(){this.httpService.GET(_.S3,{}).subscribe(e=>{this.siteList=e})}convertTotalsToVendorsTotal(){return Object.keys(this.vendorItemsTables[0].totals).map(o=>{const n=this.vendorItemsTables[0].totals[o];return{vendor_id:o,subtotal:n.totalAmount,total_tax:n.gstAmount,freight_charges:n.freight,freight_tax:n.freightGst,total_amount:n.grandTotal,preferred:n.preferred}})}updateRequest(){if(this.VendorItems.some(n=>""===n))return void this.snack.notify("Some items rates are pending",2);if(!this.rateComparativeForm.valid)return;let e=JSON.parse(localStorage.getItem("loginData")),o=this.rateComparativeForm.value;o._id=this.details._id,o.items=this.details.items,o.stage="rate_approval",o.handle_by=e.user._id,o.vendorItems=this.vendorItemsTables[0].items,o.vendorRatesVendorWise=this.vendorItemsTables,o.vendors_total=this.convertTotalsToVendorsTotal(),console.log("there, checking payload",o),this.httpService.PUT(_.lu,o).subscribe({next:n=>{this.snack.notify("Detail has been updated",1),this.router.navigate(["/rate-comparative"]),this.load=!1},error:n=>{if(this.load=!1,n.errors&&!(0,P.isEmpty)(n.errors)){let a="<ul>";for(let l in n.errors)a+=`<li>${n.errors[l][0]}</li>`;a+="</ul>",this.snack.notifyHtml(a,2)}else this.snack.notify(n.message,2)}})}isVendorSelected(e){let o=this.vendorsList.filter(n=>n.category.includes(e.categoryDetail._id)&&n.SubCategory.includes(e.subCategoryDetail._id));return console.log("checking vendor",o),o}get vendorArray(){return this.vendorForm.get("vendor")}handleVendorChange(){this.flag=!1,this.isButtonDisabled=!1}getBrandList(){this.httpService.GET(_.Lk,{}).subscribe(e=>{this.brandList=e.data})}save(){let e=0;this.flag=!0,this.isButtonDisabled=!0,this.isSelectDisabled=!0,this.finalVendorArray.length=0,this.VendorItems.length=0,this.vendorItemsTables.length=0;for(let o of this.vendorArray.controls){const n=o.get("Item_category").value._id,a=o.get("Item_subCategory").value._id;let l={items:[],vendors:[],totals:{}};for(let p of o.get("selectedVendors").value){this.finalVendorArray.push([p,e]),l.vendors.push(this.detailsOfVendor(p)),l.totals[p]={totalAmount:0,gstAmount:0,freight:0,freightGst:0,grandTotal:0,preferred:!1};const c=new i.cw({Vendor:new i.NI(p,i.kI.required),category:new i.NI(n,i.kI.required),subCategory:new i.NI(a,i.kI.required),items:this.formBuilder.array([])}),g=this.details.items;for(let m of g){const v=this.formBuilder.group({item:new i.NI(m),RequiredQuantity:new i.NI(m.qty,i.kI.required),Rate:new i.NI("",[i.kI.required,i.kI.pattern("^[-+]?[0-9]*\\.?[0-9]+$")]),SubTotalAmount:new i.NI("",i.kI.required),Freight:new i.NI(0,i.kI.required),Total:new i.NI("",i.kI.required)});c.get("items").push(v),l.items.find(O=>O.item_id===m._id)||l.items.push({item_id:m._id,name:m.item_name,category:m.categoryDetail.name,subCategory:m.subCategoryDetail.subcategory_name,uom:m.uomDetail.uom_name,quantity:m.qty,gst:m.tax.amount,remark:"",vendors:{}});const I=l.items.find(O=>O.item_id===m._id);I&&(I.vendors[p]={requiredQty:I.quantity,rate:"",amount:""})}this.VendorItems.push(c),e++}this.vendorItemsTables.push(l)}this.createFormControls()}createFormControls(){this.vendorItemsTables.forEach((e,o)=>{e.items.forEach(n=>{Object.keys(n.vendors).forEach(l=>{const c=`table_${o}_item_${n.item_id}_vendor_${l}_requiredQty`,g=`table_${o}_item_${n.item_id}_vendor_${l}_amount`;this.vendorItemsForm.addControl(`table_${o}_item_${n.item_id}_vendor_${l}_rate`,new i.NI("",i.kI.required)),this.vendorItemsForm.addControl(c,new i.NI(n.quantity,i.kI.required)),this.vendorItemsForm.addControl(g,new i.NI("",i.kI.required))}),this.vendorItemsForm.addControl(`table_${o}_item_${n.item_id}_remarks`,new i.NI(""))}),Object.keys(e.totals).forEach(n=>{const l=`table_${o}_vendor_${n}_freightGst`;this.vendorItemsForm.addControl(`table_${o}_vendor_${n}_freight`,new i.NI(0,i.kI.required)),this.vendorItemsForm.addControl(l,new i.NI(0,i.kI.required))})}),this.updateTotals(0),console.log(this.vendorItemsForm)}getFormControl(e,o,n,a){let l;return l="rate"===a||"amount"===a||"requiredQty"===a?`table_${e}_item_${o}_vendor_${n}_${a}`:"remarks"===a?`table_${e}_item_${o}_${a}`:`table_${e}_vendor_${n}_${a}`,this.vendorItemsForm.get(l)||(console.error(`Control not found: ${l}`),new i.NI(""))}updateStatus(e,o){const n=this.getFormControl(o,e.item_id,"","remarks"),l=this.vendorItemsTables[o].items.find(p=>p.item_id===e.item_id);l&&(l.remark=n.value)}updateQty(e,o,n){const a=this.getFormControl(n,e.item_id,o,"requiredQty"),l=parseFloat(a.value)||0,c=this.vendorItemsTables[n].items.find(g=>g.item_id===e.item_id);c&&(c.vendors[o].requiredQty=l),console.log("Checking for quanity",this.vendorItemsTables[0].items)}updateAmount(e,o,n){const a=this.getFormControl(n,e.item_id,o,"rate"),l=this.getFormControl(n,e.item_id,o,"amount");if(a&&l){const c=(parseFloat(a.value)||0)*e.quantity;l.setValue(c.toFixed(2),{emitEvent:!1});const m=this.vendorItemsTables[n].items.find(v=>v.item_id===e.item_id);m&&(m.vendors[o].rate=a.value,m.vendors[o].amount=c.toFixed(2)),console.log(`Table: ${n}, Item: ${e.item_id}, Vendor: ${o}, Rate: ${a.value}, Amount: ${c.toFixed(2)}`),this.updateTotals(n)}}updateTotals(e){const o=this.vendorItemsTables[e];Object.keys(o.totals).forEach(n=>{let a=0,l=0;o.items.forEach(g=>{const m=this.getFormControl(e,g.item_id,n,"amount"),v=parseFloat(m.value)||0;a+=v,l+=v*(g.gst/100)}),o.totals[n].totalAmount=a,o.totals[n].gstAmount=l;const p=this.getFormControl(e,"",n,"freight"),c=this.getFormControl(e,"",n,"freightGst");o.totals[n].freight=parseFloat(p.value)||0,o.totals[n].freightGst=parseFloat(c.value)||0,o.totals[n].grandTotal=o.totals[n].totalAmount+o.totals[n].gstAmount+o.totals[n].freight+o.totals[n].freight*(o.totals[n].freightGst/100)})}saveAndHighlight(){this.isSaved=!0}isLowestAmount(e,o,n){const a=parseFloat(this.getFormControl(e,o,n,"amount").value)||1/0,l=this.getVendorIds(this.vendorItemsTables[e]).map(p=>parseFloat(this.getFormControl(e,o,p,"amount").value)||1/0);return a===Math.min(...l)}isLowestGrandTotal(e){const o=this.vendorItemsTables[0];if(!o||!o.totals)return console.error("Vendor items table or totals not found"),!1;const n=o.totals[e]?.grandTotal||1/0,l=Object.values(o.totals).map(c=>c.grandTotal);return n===Math.min(...l)}toggleVendorPreferred(e,o){const a=Object.keys(this.vendorItemsTables[0].totals)[e];this.vendorItemsTables[0].totals[a].preferred=o.target.checked}getVendorKeys(){return Object.keys(this.vendorItemsTables[0].totals)}getVendorIds(e){return Object.keys(e.totals)}detailsOfVendor(e){return this.vendorsList.find(n=>n._id==e).vendor_name}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:n=>{this.viewPermission=n.dashboard_permissions[0].ParentChildchecklist[20].childList[0].isSelected,this.addPermission=n.dashboard_permissions[0].ParentChildchecklist[20].childList[1].isSelected,this.editPermission=n.dashboard_permissions[0].ParentChildchecklist[20].childList[2].isSelected},error:n=>{console.log(n)}}),this.vendorItemsForm=new i.cw({}),this.route.params.subscribe(n=>{n.id&&this.httpService.GET(`${_.bG}`,{_id:n.id}).subscribe({next:a=>{this.details=a.data.details,this.vendorsList=a.data.vendorsList,this.vendorsList.map(p=>(this.vendorAssociatedData[p._id]=p,p));let l=[];this.filteredItems=this.details?.items.filter(p=>{let c=p.categoryDetail._id+"$"+p.subCategoryDetail._id;return!l.includes(c)&&(l.push(c),!0)}),this.filteredItems.forEach(p=>{let c=this.formBuilder.group({Item_category:p.categoryDetail,Item_subCategory:p.subCategoryDetail,selectedVendors:new i.NI([])});this.vendorForm.get("vendor").push(c)}),this.patchData(a.data.details)},error:a=>{}})})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(u.F0),t.Y36(Z.s),t.Y36(N.o),t.Y36(i.qu),t.Y36(u.gz),t.Y36(b.uw),t.Y36(y.eN),t.Y36(J.f))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-rate-comparative-update"]],decls:121,vars:25,consts:[[2,"height","100px","background-color","#fff"],[2,"margin-top","50px","margin-left","20px"],["src","./assets/images/RA.svg"],[2,"font-family","Poppins","margin-top","40px","font-style","normal","font-weight","600","font-size","30px","color","#1E293B","margin-left","10px"],[1,"example-spacer"],[2,"width","1130px","border","2px solid #C5C5C5","margin-left","30px"],[2,"display","flex","flex-direction","row","font-family","Poppins","font-weight","600"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","30px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/box.svg"],[2,"color","#97989D","margin-left","5px","font-size","14px"],[2,"width","90px","margin-left","10px","margin-top","10px","border","1px dashed"],["routerLinkActive","active-link",2,"margin-top","20px","margin-left","10px","display","flex","cursor","pointer",3,"routerLink"],["src","./assets/images/approval.svg"],["src","./assets/images/ratedown.svg"],[2,"color","#233A61","margin-left","5px","font-size","14px"],["src","./assets/images/po.svg"],[3,"formGroup"],[1,"topcard"],[2,"display","flex","flex-wrap","wrap","gap","10px","max-width","100%"],[1,"flex-div",2,"display","flex","flex-direction","column"],[2,"color","#4272BF","font-size","14px"],["placeholder","Enter title","formControlName","title","readonly","",2,"width","100%","padding","10px","border-radius","6px","border","1px solid #ccc","cursor","pointer","margin-top","3px","font-family","Poppins","height","50px"],["appearance","outline"],["matInput","","formControlName","date","placeholder","Auto generate Request Date","readonly","",3,"matDatepicker"],["matSuffix","",3,"for"],["date",""],[1,"flex-div","custom-form-group"],["for","",1,"custom-label",2,"color","#4272BF","font-size","14px"],[1,"star"],[1,"custom-form-control"],["matInput","","formControlName","expected_delivery_date","placeholder","Enter Required by","readonly","",3,"matDatepicker"],["requiredByStartDate",""],["matInput","","formControlName","handle_by"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"custom-form-control","flex-div"],["id","site","placeholder","Select site","matInput","","formControlName","site"],[1,"flex-div",2,"display","flex","flex-direction","column","margin-left","10px"],[2,"color","#4272BF","margin-bottom","10px"],["aria-labelledby","example-radio-group-label","color","primary","formControlName","local_purchase",1,"example-radio-group"],[1,"example-radio-button",2,"margin-right","10px",3,"value"],[1,"example-radio-button",3,"value"],[1,"topcard",2,"margin-top","40px"],[1,"scroll-bar1"],["formArrayName","vendor",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center"],[1,"p-btns-button",3,"click"],[1,"text-area-section"],["name","","id","","cols","30","rows","5","formControlName","remarks"],[1,"button-list"],[4,"ngIf","ngIfElse"],["noAddPermission",""],[3,"value"],["formArrayName","vendor"],[3,"formGroupName"],["Option",""],[1,"col-md-3"],["appearance","outline",2,"width","max-content"],["matInput","","multiple","","formControlName","selectedVendors",3,"selectionChange"],[1,"table","table-bordered"],["rowspan","2",2,"text-align","center","width","300px","vertical-align","middle"],["rowspan","2",2,"text-align","center","width","250px","vertical-align","middle"],["rowspan","2",2,"text-align","center","vertical-align","middle"],[4,"ngFor","ngForOf"],["colspan","4",2,"border-color","white","border-right","0.5px solid"],["colspan","2",2,"text-align","right","border","0.5px solid"],[2,"border-color","white"],[2,"display","flex","justify-content","left","padding-top","20px"],[1,"p-btns-button",3,"disabled","click"],["colspan","3",2,"text-align","center","vertical-align","middle"],["type","checkbox",3,"checked","change"],[2,"text-align","center","vertical-align","middle"],[2,"text-align","center","width","300px","vertical-align","middle"],[2,"text-align","center","width","250px","vertical-align","middle"],["type","text",1,"inputBoxes",3,"formControl","input"],["type","number",1,"inputBoxes",3,"formControl","input"],[2,"text-align","center","vertical-align","middle","width","150px",3,"ngClass"],["colspan","3",2,"height","50px","border","0.5px solid"],["colspan","3",2,"height","40px","border","0.5px solid"],["colspan","3",2,"height","50px","border","0.5px solid",3,"ngClass"],["disabled","",1,"p-btns-button"]],template:function(e,o){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"Rate comparative "),t.qZA(),t._UZ(5,"span",4),t.qZA(),t.TgZ(6,"div"),t._UZ(7,"hr",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7)(10,"div"),t._UZ(11,"img",8),t.qZA(),t.TgZ(12,"span",9),t._uU(13,"Purchase\xa0request"),t.qZA(),t.TgZ(14,"div"),t._UZ(15,"mat-divider",10),t.qZA()(),t.TgZ(16,"div",11)(17,"div"),t._UZ(18,"img",12),t.qZA(),t.TgZ(19,"span",9),t._uU(20,"Approvals"),t.qZA(),t.TgZ(21,"div"),t._UZ(22,"mat-divider",10),t.qZA()(),t.TgZ(23,"div",11)(24,"div"),t._UZ(25,"img",13),t.qZA(),t.TgZ(26,"span",14),t._uU(27,"Rate\xa0Comparative"),t.qZA(),t.TgZ(28,"div"),t._UZ(29,"mat-divider",10),t.qZA()(),t.TgZ(30,"div",11)(31,"div"),t._UZ(32,"img",12),t.qZA(),t.TgZ(33,"span",9),t._uU(34,"Rate\xa0Approvals"),t.qZA(),t.TgZ(35,"div"),t._UZ(36,"mat-divider",10),t.qZA()(),t.TgZ(37,"div",11)(38,"div"),t._UZ(39,"img",15),t.qZA(),t.TgZ(40,"span",9),t._uU(41,"Purchase\xa0orders"),t.qZA()()(),t.TgZ(42,"form",16)(43,"mat-card",17)(44,"div",18)(45,"div",19)(46,"label",20),t._uU(47,"Request title "),t.qZA(),t._UZ(48,"input",21),t.qZA(),t.TgZ(49,"div",19)(50,"label",20),t._uU(51,"Request date"),t.qZA(),t.TgZ(52,"mat-form-field",22),t._UZ(53,"input",23)(54,"mat-datepicker-toggle",24)(55,"mat-datepicker",null,25),t.qZA()(),t.TgZ(57,"div",26)(58,"label",27),t._uU(59," Required by "),t.TgZ(60,"span",28),t._uU(61,"*"),t.qZA()(),t.TgZ(62,"div",29)(63,"mat-form-field",22),t._UZ(64,"input",30)(65,"mat-datepicker-toggle",24)(66,"mat-datepicker",null,31),t.qZA()()(),t.TgZ(68,"div",26)(69,"label",27),t._uU(70," Handle by "),t.TgZ(71,"span",28),t._uU(72,"*"),t.qZA()(),t.TgZ(73,"div",29)(74,"mat-form-field",22)(75,"mat-select",32),t.YNc(76,yt,2,2,"mat-option",33),t.qZA(),t.YNc(77,Tt,2,0,"mat-error",34),t.qZA()()(),t.TgZ(78,"div",35)(79,"label",20),t._uU(80,"Site name "),t.TgZ(81,"span",28),t._uU(82,"*"),t.qZA()(),t.TgZ(83,"mat-form-field",22)(84,"mat-select",36),t.YNc(85,wt,2,2,"mat-option",33),t.qZA()()(),t.TgZ(86,"div",37)(87,"label",38),t._uU(88,"Local Purchase "),t.TgZ(89,"span",28),t._uU(90,"*"),t.qZA()(),t.TgZ(91,"mat-radio-group",39)(92,"mat-radio-button",40),t._uU(93," Yes "),t.qZA(),t.TgZ(94,"mat-radio-button",41),t._uU(95," No "),t.qZA()()()()(),t.TgZ(96,"mat-card",42),t._uU(97," Select your vendor for each Category and Subcategory "),t.TgZ(98,"form",16)(99,"div",43)(100,"table")(101,"tr")(102,"th"),t._uU(103,"Category"),t.qZA(),t.TgZ(104,"th"),t._uU(105,"Sub Category"),t.qZA(),t.TgZ(106,"th"),t._uU(107,"Vendor"),t.qZA()(),t.YNc(108,It,9,5,"tr",44),t.qZA()(),t.TgZ(109,"div",45)(110,"button",46),t.NdJ("click",function(){return o.save()}),t._uU(111,"Enter Vendor Rates"),t.qZA()()()(),t.YNc(112,$t,57,9,"div",34),t.TgZ(113,"div",47)(114,"label",20),t._uU(115,"Remarks "),t.qZA(),t._UZ(116,"textarea",48),t.qZA(),t.TgZ(117,"div",49),t.YNc(118,Bt,4,3,"ng-container",50),t.YNc(119,jt,2,1,"ng-template",null,51,t.W1O),t.qZA()()),2&e){const n=t.MAs(56),a=t.MAs(67),l=t.MAs(120);t.xp6(9),t.Q6J("routerLink",t.DdM(20,Et)),t.xp6(7),t.Q6J("routerLink",t.DdM(21,Gt)),t.xp6(7),t.Q6J("routerLink",t.DdM(22,Kt)),t.xp6(7),t.Q6J("routerLink",t.DdM(23,Ht)),t.xp6(7),t.Q6J("routerLink",t.DdM(24,Wt)),t.xp6(5),t.Q6J("formGroup",o.rateComparativeForm),t.xp6(11),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(10),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(11),t.Q6J("ngForOf",o.users),t.xp6(1),t.Q6J("ngIf",null==o.rateComparativeForm.controls.handle_by.errors?null:o.rateComparativeForm.controls.handle_by.errors.required),t.xp6(8),t.Q6J("ngForOf",o.siteList),t.xp6(7),t.Q6J("value","yes"),t.xp6(2),t.Q6J("value","no"),t.xp6(4),t.Q6J("formGroup",o.vendorForm),t.xp6(10),t.Q6J("ngForOf",o.filteredItems),t.xp6(4),t.Q6J("ngIf",o.vendorItemsTables&&o.vendorItemsTables.length>0),t.xp6(6),t.Q6J("ngIf",o.addPermission||o.editPermission)("ngIfElse",l)}},dependencies:[f.mk,f.sg,f.O5,u.rH,u.Od,T.ey,x.TO,x.KE,x.hX,x.R9,D.a8,h.Mq,h.hl,h.nW,w.d,A.Nt,C.VQ,C.U0,q.gD,k.Ye,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.oH,i.sg,i.u,i.x0,i.CE],styles:['mat-toolbar[_ngcontent-%COMP%]{height:100px;background-color:#fff}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.p-btns-button[_ngcontent-%COMP%]{height:50px;font-size:18px;padding:5px;text-align:center}.lowest-amount[_ngcontent-%COMP%], .lowest-rate[_ngcontent-%COMP%], .lowest-grand-total[_ngcontent-%COMP%]{color:brown;font-size:18px;font-weight:700}.inputBoxes[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:6px;border:1px solid #ccc;cursor:pointer;font-family:Poppins}.requests[_ngcontent-%COMP%]{height:40px;width:1140px;background-color:#d9d9d9;display:flex;justify-content:space-around;align-items:center;margin-top:20px;margin-left:30px;font-size:14px}.innerreq[_ngcontent-%COMP%]{color:#233a61;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px}.createreq[_ngcontent-%COMP%]{background-color:#233a61;color:#fff;height:40px;width:250px;margin-left:-80px;font-family:Poppins;font-weight:600;font-style:normal;font-size:14px;display:flex;align-items:center;justify-content:center}.topcard[_ngcontent-%COMP%]{width:100%;height:auto;font-family:Poppins;box-shadow:none;border:1px solid #ccc;border-radius:4px}table[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important;border-collapse:collapse;width:100%;font-size:14px;margin-bottom:20px;margin-right:20px;margin-top:8px}th[_ngcontent-%COMP%]{background-color:#233a61;border:1px solid #94a3b8;text-align:left;padding:10px 40px!important;color:#fff;font-weight:100;font-size:14px;font-style:normal}td[_ngcontent-%COMP%]{border:1px solid #94a3b8;text-align:left;padding:20px;color:#233a61;font-style:normal;font-size:14px;font-family:Poppins}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e5e6eb!important}form[_ngcontent-%COMP%]{padding:10px 20px}.scroll-bar1[_ngcontent-%COMP%]{margin-top:50px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;height:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:1px solid lightgrey;border-radius:5px;background-color:#d3d3d3}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e293b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:lightblue}.pr-form-field[_ngcontent-%COMP%]{width:120px;padding:10px;border-radius:6px;border:1px solid #9f9f9f;cursor:pointer;background-color:"Transparent"}.select-form-field[_ngcontent-%COMP%]{padding:10px;width:150px;border:1px solid #9f9f9f;border-radius:20px;cursor:pointer;background-color:"Transparent "!important}.action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}.button-list[_ngcontent-%COMP%]{display:inline-flex;margin:15px 0 20px;float:right;gap:10px}.text-area-section[_ngcontent-%COMP%]{width:100%;height:auto;margin:30px 0 0}.text-area-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:100%}.flex-div[_ngcontent-%COMP%]{width:31%}.mat-form-field[_ngcontent-%COMP%]{display:block}.pending[_ngcontent-%COMP%]{padding:8px;width:120px;background-color:#ccc;color:#333;font-size:14px;font-family:Poppins;height:50px;border:none}.p-btns[_ngcontent-%COMP%]{background:#233a61;padding:5px 10px;border-radius:4px;font-size:12px;cursor:pointer}.p-btns[_ngcontent-%COMP%]:hover{opacity:.7}.p-btns-button[_ngcontent-%COMP%]{background:#233a61;border:1px solid #233a61;padding:7px 40px;border-radius:4px;font-size:12px;cursor:pointer;color:#fff}.p-btns-button[_ngcontent-%COMP%]:hover{opacity:.7}.vendor-wapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:40px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-name-cl[_ngcontent-%COMP%]{padding:6px 15px;background:#233a61;color:#fff}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:rgba(7,59,76,.0509803922);padding:6px 15px;margin-bottom:10px;gap:10px}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-cont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80px;border:1px solid #ccc;border-radius:2px;padding:5px;outline:none}.vendor-wapper[_ngcontent-%COMP%]   .vendor-value-label[_ngcontent-%COMP%]{min-width:144px}input[readonly=true][_ngcontent-%COMP%], input[readonly][_ngcontent-%COMP%], .mat-select-disabled[_ngcontent-%COMP%]{opacity:.6}']}),r})();var te=d(8898),ee=d(9836);const oe=[{path:"",component:st},{path:"details/:id",component:Zt},{path:"update/:id",component:Xt}];let ne=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[f.ez,u.Bz,te.S,i.UX,ee.w,S.Z,[u.Bz.forChild(oe)]]}),r})()}}]);