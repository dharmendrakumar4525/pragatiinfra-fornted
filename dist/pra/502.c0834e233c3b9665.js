"use strict";(self.webpackChunkpra=self.webpackChunkpra||[]).push([[502],{3502:(_t,I,m)=>{m.r(I),m.d(I,{ItemModule:()=>pt});var h=m(6895),a=m(4006),g=m(8608),_=m(2340),f=m(7489),t=m(4650),b=m(9299),Z=m(2126),T=m(6104),A=m(529),M=m(3238),C=m(9549),v=m(4859),q=m(4144),P=m(4385);function S(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function L(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function U(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"mat-option",22),t.NdJ("onSelectionChange",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.categoryChange(s._id))}),t._uU(1),t.qZA()}if(2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function F(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function k(i,r){if(1&i&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.subcategory_name," ")}}function w(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function J(i,r){if(1&i&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.uom_name," ")}}function E(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function Y(i,r){if(1&i&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.gst_percentage," ")}}function $(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function j(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}let Q=(()=>{class i{constructor(e,n,o,s,l){this.router=e,this.httpService=n,this.snack=o,this.route=s,this.gstList=[],this.uomList=[],this.subCategoryList=[],this.categoryList=[],this.addForm=new a.cw({item_name:new a.NI("",a.kI.required),item_number:new a.NI("",a.kI.required),category:new a.NI("",a.kI.required),sub_category:new a.NI("",a.kI.required),uom:new a.NI("",a.kI.required),gst:new a.NI("",a.kI.required),specification:new a.NI("",a.kI.required)}),this.allSubCategoryList=[];const p=l.get(`${_.N.api_path}${g.PE}`),d=l.get(`${_.N.api_path}${g.eC}`),O=l.get(`${_.N.api_path}${g.jz}`),N=l.get(`${_.N.api_path}${g.cy}`);this.httpService.multipleRequests([p,d,O,N],{}).subscribe(c=>{this.uomList=c[0].data,this.subCategoryList=c[1].data,this.allSubCategoryList=c[1].data,this.categoryList=c[2].data,this.gstList=c[3].data},c=>{if(c.errors&&!(0,f.isEmpty)(c.errors)){let u="<ul>";for(let y in c.errors)u+=`<li>${c.errors[y][0]}</li>`;u+="</ul>",this.snack.notifyHtml(u,2)}else this.snack.notify(c.message,2)})}saveData(){this.addForm.valid?this.httpService.POST(g.o7,this.addForm.value).subscribe(e=>{this.snack.notify("Data has been saved sucessfully.",1),this.router.navigate(["item"])},e=>{if(e.errors&&!(0,f.isEmpty)(e.errors)){let n="<ul>";for(let o in e.errors)n+=`<li>${e.errors[o][0]}</li>`;n+="</ul>",this.snack.notifyHtml(n,2)}else this.snack.notify(e.message,2)}):this.addForm.markAllAsTouched()}list(){this.router.navigate(["item"])}categoryChange(e){this.subCategoryList=this.allSubCategoryList.filter(n=>n.category==e)}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.F0),t.Y36(Z.s),t.Y36(T.o),t.Y36(b.gz),t.Y36(A.eN))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-data"]],decls:60,vars:12,consts:[[1,"section-wrapper"],[1,"section-header"],[1,"header-left"],[1,"header-right"],[1,"buttons-containers"],["mat-button","",1,"submit-btn",3,"click"],["mat-button","",1,"cancel-btn",3,"click"],[1,"section-body"],[3,"formGroup"],[1,"row"],[1,"col-md-3"],["appearance","outline"],["matInput","","formControlName","item_name"],[4,"ngIf"],["matInput","","formControlName","item_number"],["matInput","","formControlName","category"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],["matInput","","formControlName","sub_category"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","uom"],["matInput","","formControlName","gst"],["matInput","","formControlName","specification"],[3,"value","onSelectionChange"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4,"Add Item"),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"button",5),t.NdJ("click",function(){return n.saveData()}),t._uU(8,"Submit"),t.qZA(),t.TgZ(9,"button",6),t.NdJ("click",function(){return n.list()}),t._uU(10,"Cancel"),t.qZA()()()(),t.TgZ(11,"div",7)(12,"form",8)(13,"div",9)(14,"div",10)(15,"mat-form-field",11)(16,"mat-label"),t._uU(17,"Name"),t.qZA(),t._UZ(18,"input",12),t.YNc(19,S,2,0,"mat-error",13),t.qZA()(),t.TgZ(20,"div",10)(21,"mat-form-field",11)(22,"mat-label"),t._uU(23,"Item Number"),t.qZA(),t._UZ(24,"input",14),t.YNc(25,L,2,0,"mat-error",13),t.qZA()(),t.TgZ(26,"div",10)(27,"mat-form-field")(28,"mat-label"),t._uU(29,"Category"),t.qZA(),t.TgZ(30,"mat-select",15),t.YNc(31,U,2,2,"mat-option",16),t.qZA(),t.YNc(32,F,2,0,"mat-error",13),t.qZA()(),t.TgZ(33,"div",10)(34,"mat-form-field")(35,"mat-label"),t._uU(36,"Sub Category"),t.qZA(),t.TgZ(37,"mat-select",17),t.YNc(38,k,2,2,"mat-option",18),t.qZA(),t.YNc(39,w,2,0,"mat-error",13),t.qZA()(),t.TgZ(40,"div",10)(41,"mat-form-field")(42,"mat-label"),t._uU(43,"UOM"),t.qZA(),t.TgZ(44,"mat-select",19),t.YNc(45,J,2,2,"mat-option",18),t.qZA(),t.YNc(46,E,2,0,"mat-error",13),t.qZA()(),t.TgZ(47,"div",10)(48,"mat-form-field")(49,"mat-label"),t._uU(50,"GST"),t.qZA(),t.TgZ(51,"mat-select",20),t.YNc(52,Y,2,2,"mat-option",18),t.qZA(),t.YNc(53,$,2,0,"mat-error",13),t.qZA()(),t.TgZ(54,"div",10)(55,"mat-form-field",11)(56,"mat-label"),t._uU(57,"Specification"),t.qZA(),t._UZ(58,"input",21),t.YNc(59,j,2,0,"mat-error",13),t.qZA()()()()()()),2&e&&(t.xp6(12),t.Q6J("formGroup",n.addForm),t.xp6(7),t.Q6J("ngIf",null==n.addForm.controls.item_name.errors?null:n.addForm.controls.item_name.errors.required),t.xp6(6),t.Q6J("ngIf",null==n.addForm.controls.item_number.errors?null:n.addForm.controls.item_number.errors.required),t.xp6(6),t.Q6J("ngForOf",n.categoryList),t.xp6(1),t.Q6J("ngIf",null==n.addForm.controls.category.errors?null:n.addForm.controls.category.errors.required),t.xp6(6),t.Q6J("ngForOf",n.subCategoryList),t.xp6(1),t.Q6J("ngIf",null==n.addForm.controls.sub_category.errors?null:n.addForm.controls.sub_category.errors.required),t.xp6(6),t.Q6J("ngForOf",n.uomList),t.xp6(1),t.Q6J("ngIf",null==n.addForm.controls.uom.errors?null:n.addForm.controls.uom.errors.required),t.xp6(6),t.Q6J("ngForOf",n.gstList),t.xp6(1),t.Q6J("ngIf",null==n.addForm.controls.gst.errors?null:n.addForm.controls.gst.errors.required),t.xp6(6),t.Q6J("ngIf",null==n.addForm.controls.specification.errors?null:n.addForm.controls.specification.errors.required))},dependencies:[M.ey,C.TO,C.KE,C.hX,v.lW,q.Nt,P.gD,h.sg,h.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".section-wrapper[_ngcontent-%COMP%]{padding:0 15px}.section-wrapper[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{border-bottom:2px solid #C5C5C5;display:flex;align-items:center;justify-content:space-between;padding:18px 0}.section-wrapper[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.buttons-containers[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.submit-btn[_ngcontent-%COMP%]{background:#233a61;color:#fff}.cancel-btn[_ngcontent-%COMP%]{background:#ccc}.section-body[_ngcontent-%COMP%]{padding:20px 0 0}mat-form-field[_ngcontent-%COMP%]{display:block}"]}),i})();function z(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function G(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function H(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"mat-option",22),t.NdJ("onSelectionChange",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.categoryChange(s._id))}),t._uU(1),t.qZA()}if(2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function B(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function K(i,r){if(1&i&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.subcategory_name," ")}}function X(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function R(i,r){if(1&i&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.uom_name," ")}}function V(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function W(i,r){if(1&i&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.gst_percentage," ")}}function tt(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}function et(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required. "),t.qZA())}let nt=(()=>{class i{constructor(e,n,o,s,l){this.router=e,this.httpService=n,this.snack=o,this.route=s,this.gstList=[],this.uomList=[],this.subCategoryList=[],this.categoryList=[],this.allSubCategoryList=[],this.editForm=new a.cw({item_name:new a.NI("",a.kI.required),item_number:new a.NI("",a.kI.required),category:new a.NI("",a.kI.required),sub_category:new a.NI("",a.kI.required),uom:new a.NI("",a.kI.required),gst:new a.NI("",a.kI.required),specification:new a.NI("",a.kI.required),_id:new a.NI});const p=l.get(`${_.N.api_path}${g.PE}`),d=l.get(`${_.N.api_path}${g.eC}`),O=l.get(`${_.N.api_path}${g.jz}`),N=l.get(`${_.N.api_path}${g.cy}`);this.httpService.multipleRequests([p,d,O,N],{}).subscribe(c=>{this.uomList=c[0].data,this.subCategoryList=c[1].data,this.allSubCategoryList=c[1].data,this.categoryList=c[2].data,this.gstList=c[3].data},c=>{if(c.errors&&!(0,f.isEmpty)(c.errors)){let u="<ul>";for(let y in c.errors)u+=`<li>${c.errors[y][0]}</li>`;u+="</ul>",this.snack.notifyHtml(u,2)}else this.snack.notify(c.message,2)}),this.route.params.subscribe(c=>{console.log(c),console.log(c.id),c.id?this.httpService.GET(`${g.o7}/detail`,{_id:c.id}).subscribe(u=>{console.log("TTTTTTttt"),console.log(u),u&&this.patchValue(u.data[0])},u=>{if(u.errors&&!(0,f.isEmpty)(u.errors)){let y="<ul>";for(let x in u.errors)y+=`<li>${u.errors[x][0]}</li>`;y+="</ul>",this.snack.notifyHtml(y,2)}else this.snack.notify(u.message,2)}):this.list()})}patchValue(e){this.editForm.patchValue({item_name:e.item_name,item_number:e.item_number,category:e.category,sub_category:e.sub_category,uom:e.uom,gst:e.gst,specification:e.specification,_id:e._id})}saveData(){this.editForm.valid?this.httpService.PUT(g.o7,this.editForm.value).subscribe(e=>{this.snack.notify("item data has been saved sucessfully.",1),this.router.navigate(["item"])},e=>{if(e.errors&&!(0,f.isEmpty)(e.errors)){let n="<ul>";for(let o in e.errors)n+=`<li>${e.errors[o][0]}</li>`;n+="</ul>",this.snack.notifyHtml(n,2)}else this.snack.notify(e.message,2)}):this.editForm.markAllAsTouched()}list(){this.router.navigate(["item"])}categoryChange(e){this.subCategoryList=this.allSubCategoryList.filter(n=>n.category==e)}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.F0),t.Y36(Z.s),t.Y36(T.o),t.Y36(b.gz),t.Y36(A.eN))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-edit-data"]],decls:60,vars:12,consts:[[1,"section-wrapper"],[1,"section-header"],[1,"header-left"],[1,"header-right"],[1,"buttons-containers"],["mat-button","",1,"submit-btn",3,"click"],["mat-button","",1,"cancel-btn",3,"click"],[1,"section-body"],[3,"formGroup"],[1,"row"],[1,"col-md-3"],["appearance","outline"],["matInput","","formControlName","item_name"],[4,"ngIf"],["matInput","","formControlName","item_number"],["matInput","","formControlName","category"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],["matInput","","formControlName","sub_category"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","uom"],["matInput","","formControlName","gst"],["matInput","","formControlName","specification"],[3,"value","onSelectionChange"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4,"Edit Item"),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"button",5),t.NdJ("click",function(){return n.saveData()}),t._uU(8,"Submit"),t.qZA(),t.TgZ(9,"button",6),t.NdJ("click",function(){return n.list()}),t._uU(10,"Cancel"),t.qZA()()()(),t.TgZ(11,"div",7)(12,"form",8)(13,"div",9)(14,"div",10)(15,"mat-form-field",11)(16,"mat-label"),t._uU(17,"Name"),t.qZA(),t._UZ(18,"input",12),t.YNc(19,z,2,0,"mat-error",13),t.qZA()(),t.TgZ(20,"div",10)(21,"mat-form-field",11)(22,"mat-label"),t._uU(23,"Item Number"),t.qZA(),t._UZ(24,"input",14),t.YNc(25,G,2,0,"mat-error",13),t.qZA()(),t.TgZ(26,"div",10)(27,"mat-form-field")(28,"mat-label"),t._uU(29,"Category"),t.qZA(),t.TgZ(30,"mat-select",15),t.YNc(31,H,2,2,"mat-option",16),t.qZA(),t.YNc(32,B,2,0,"mat-error",13),t.qZA()(),t.TgZ(33,"div",10)(34,"mat-form-field")(35,"mat-label"),t._uU(36,"Sub Category"),t.qZA(),t.TgZ(37,"mat-select",17),t.YNc(38,K,2,2,"mat-option",18),t.qZA(),t.YNc(39,X,2,0,"mat-error",13),t.qZA()(),t.TgZ(40,"div",10)(41,"mat-form-field")(42,"mat-label"),t._uU(43,"UOM"),t.qZA(),t.TgZ(44,"mat-select",19),t.YNc(45,R,2,2,"mat-option",18),t.qZA(),t.YNc(46,V,2,0,"mat-error",13),t.qZA()(),t.TgZ(47,"div",10)(48,"mat-form-field")(49,"mat-label"),t._uU(50,"GST"),t.qZA(),t.TgZ(51,"mat-select",20),t.YNc(52,W,2,2,"mat-option",18),t.qZA(),t.YNc(53,tt,2,0,"mat-error",13),t.qZA()(),t.TgZ(54,"div",10)(55,"mat-form-field",11)(56,"mat-label"),t._uU(57,"Specification"),t.qZA(),t._UZ(58,"input",21),t.YNc(59,et,2,0,"mat-error",13),t.qZA()()()()()()),2&e&&(t.xp6(12),t.Q6J("formGroup",n.editForm),t.xp6(7),t.Q6J("ngIf",null==n.editForm.controls.item_name.errors?null:n.editForm.controls.item_name.errors.required),t.xp6(6),t.Q6J("ngIf",null==n.editForm.controls.item_number.errors?null:n.editForm.controls.item_number.errors.required),t.xp6(6),t.Q6J("ngForOf",n.categoryList),t.xp6(1),t.Q6J("ngIf",null==n.editForm.controls.category.errors?null:n.editForm.controls.category.errors.required),t.xp6(6),t.Q6J("ngForOf",n.subCategoryList),t.xp6(1),t.Q6J("ngIf",null==n.editForm.controls.sub_category.errors?null:n.editForm.controls.sub_category.errors.required),t.xp6(6),t.Q6J("ngForOf",n.uomList),t.xp6(1),t.Q6J("ngIf",null==n.editForm.controls.uom.errors?null:n.editForm.controls.uom.errors.required),t.xp6(6),t.Q6J("ngForOf",n.gstList),t.xp6(1),t.Q6J("ngIf",null==n.editForm.controls.gst.errors?null:n.editForm.controls.gst.errors.required),t.xp6(6),t.Q6J("ngIf",null==n.editForm.controls.specification.errors?null:n.editForm.controls.specification.errors.required))},dependencies:[M.ey,C.TO,C.KE,C.hX,v.lW,q.Nt,P.gD,h.sg,h.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".section-wrapper[_ngcontent-%COMP%]{padding:0 15px}.section-wrapper[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{border-bottom:2px solid #C5C5C5;display:flex;align-items:center;justify-content:space-between;padding:18px 0}.section-wrapper[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.buttons-containers[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.submit-btn[_ngcontent-%COMP%]{background:#233a61;color:#fff}.cancel-btn[_ngcontent-%COMP%]{background:#ccc}.section-body[_ngcontent-%COMP%]{padding:20px 0 0}mat-form-field[_ngcontent-%COMP%]{display:block}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]}),i})();var it=m(5861),D=m(8739),ot=m(9715),rt=m(4465),at=m(445);function st(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",19),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td")(18,"div",20)(19,"a",21),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.edit(s._id))}),t._UZ(20,"i",22),t.qZA(),t.TgZ(21,"a",23),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.delete(s._id))}),t._UZ(22,"i",24),t.qZA()()()()}if(2&i){const e=r.$implicit,n=r.index;t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(e.item_number),t.xp6(2),t.Oqu(e.item_name),t.xp6(2),t.Oqu(null==e||null==e.categoryDetail?null:e.categoryDetail.name),t.xp6(2),t.Oqu(null==e||null==e.subCategoryDetail?null:e.subCategoryDetail.subcategory_name),t.xp6(2),t.Oqu(null==e||null==e.uomDetail?null:e.uomDetail.uom_name),t.xp6(2),t.Oqu(null==e||null==e.gstDetail?null:e.gstDetail.gst_name),t.xp6(2),t.Oqu(e.specification)}}const lt=function(){return[]};function ct(i,r){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",3)(2,"div",4)(3,"h2"),t._uU(4,"Item Master"),t.qZA()(),t.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"mat-form-field",9)(10,"input",10),t.NdJ("input",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.search(o))}),t.qZA()()()(),t.TgZ(11,"button",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.add())}),t._uU(12,"Add New"),t.qZA(),t.TgZ(13,"button",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportXlSX())}),t._uU(14,"Export"),t.qZA()()()(),t.TgZ(15,"div",13)(16,"table",14)(17,"thead")(18,"tr")(19,"th",15),t._uU(20,"SN."),t.qZA(),t.TgZ(21,"th",15),t._uU(22,"Item Number"),t.qZA(),t.TgZ(23,"th",15),t._uU(24,"Item Name"),t.qZA(),t.TgZ(25,"th",15),t._uU(26,"Category"),t.qZA(),t.TgZ(27,"th",15),t._uU(28,"Sub Category"),t.qZA(),t.TgZ(29,"th",15),t._uU(30,"UOM"),t.qZA(),t.TgZ(31,"th",15),t._uU(32,"GST"),t.qZA(),t.TgZ(33,"th",15),t._uU(34,"Specification"),t.qZA(),t.TgZ(35,"th",15),t._uU(36,"Action "),t.qZA()()(),t.TgZ(37,"tbody"),t.YNc(38,st,23,8,"tr",16),t.qZA()(),t.TgZ(39,"mat-paginator",17,18),t.NdJ("page",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.onPageChange(o))}),t.qZA()(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(38),t.Q6J("ngForOf",e.itemList),t.xp6(1),t.Q6J("length",e.length)("pageSize",e.pageSize)("disabled",e.disabled)("showFirstLastButtons",e.showFirstLastButtons)("pageSizeOptions",e.showPageSizeOptions?e.pageSizeOptions:t.DdM(8,lt))("hidePageSize",e.hidePageSize)("pageIndex",e.pageIndex)}}function mt(i,r){1&i&&(t.TgZ(0,"h3",25),t._uU(1,"You don't have permissions to view."),t.qZA())}let ut=(()=>{class i{constructor(e,n,o,s,l,p,d){this.router=e,this.httpService=n,this.excelService=o,this.snack=s,this.route=l,this.http=p,this.toast=d,this.subCategoryList=[],this.itemList=[],this.pageSizeOptions=[5,10,20],this.pageSize=10,this.length=50,this.pageIndex=0,this.disabled=!1,this.showPageSizeOptions=!1,this.showFirstLastButtons=!0,this.hidePageSize=!1,this.pagestore=0}ngOnInit(){this.permissions=JSON.parse(localStorage.getItem("loginData")),this.httpService.GET(`/roles/role/${this.permissions.user.role}`,{}).subscribe({next:o=>{this.addPermission=o.dashboard_permissions[0].ParentChildchecklist[11].childList[0].isSelected,this.editPermission=o.dashboard_permissions[0].ParentChildchecklist[11].childList[1].isSelected,this.deletePermission=o.dashboard_permissions[0].ParentChildchecklist[11].childList[2].isSelected,this.viewPermission=o.dashboard_permissions[0].ParentChildchecklist[11].childList[3].isSelected},error:o=>{console.log(o)}}),this.getList()}getList(){const e=this.http.get(`${_.N.api_path}${g.eC}`),n=this.http.get(`${_.N.api_path}${g.jz}`);this.httpService.multipleRequests([e,n],{}).subscribe(o=>{o&&(this.subCategoryList=o[0].data,console.log("Sub Category : ",this.subCategoryList),this.categoryList=o[1].data)},o=>{if(o.errors&&!(0,f.isEmpty)(o.errors)){let s="<ul>";for(let l in o.errors)s+=`<li>${o.errors[l][0]}</li>`;s+="</ul>",this.snack.notifyHtml(s,2)}else this.snack.notify(o.message,2)}),this.fetchItemList(0,this.pageSize),this.httpService.GET(g.o7,{}).subscribe(o=>{o&&o.data&&(this.list=o.data,this.length=o.data.length)},o=>{if(o.errors&&!(0,f.isEmpty)(o.errors)){let s="<ul>";for(let l in o.errors)s+=`<li>${o.errors[l][0]}</li>`;s+="</ul>",this.snack.notifyHtml(s,2)}else this.snack.notify(o.message,2)})}fetchItemList(e,n){const o={page:e+1,per_page:n};this.pagestore=o.page,console.log("L",this.pagestore),this.httpService.GET(g.o7,o).subscribe(s=>{console.log("res+++",s),s&&s.data&&(this.itemList=s.data)},s=>{if(s.errors&&!(0,f.isEmpty)(s.errors)){let l="<ul>";for(let p in s.errors)l+=`<li>${s.errors[p][0]}</li>`;l+="</ul>",this.snack.notifyHtml(l,2)}else this.snack.notify(s.message,2)})}getCategory(e){return this.categoryList.filter(n=>n._id==e)[0]?.name}getSubCategory(e){return this.subCategoryList.filter(n=>n._id==e)[0]?.subcategory_name}edit(e){if(!this.editPermission)return void this.toast.openSnackBar("Access to Item Master editing is restricted for your account.");let n="item/edit/"+e;console.log(n),this.router.navigateByUrl(n)}add(){this.addPermission?this.router.navigateByUrl("item/add"):this.toast.openSnackBar("Access to Item Master add is restricted for your account.")}delete(e){this.deletePermission?this.httpService.DELETE(g.o7,{_id:e}).subscribe(n=>{n&&(this.snack.notify("item record has been deleted sucessfully.",1),this.getList())},n=>{if(n.errors&&!(0,f.isEmpty)(n.errors)){let o="<ul>";for(let s in n.errors)o+=`<li>${n.errors[s][0]}</li>`;o+="</ul>",this.snack.notifyHtml(o,2)}else this.snack.notify(n.message,2)}):this.toast.openSnackBar("Access to Item Master deleting is restricted for your account.")}search(e){e.target.value?this.itemList=this.list.filter(n=>n.item_name.toLowerCase().includes(e.target.value.toLowerCase())):this.fetchItemList(this.pagestore-1,this.pageSize)}exportXlSX(){var e=this;return(0,it.Z)(function*(){let n=e.itemList.map(d=>(d.categoryName=d.categoryDetail?.name,d.subCategoryName=d.subCategoryDetail?.subcategory_name,d.uomName=d.uomDetail?.uom_name,d.gstValue=d.gstDetail?.gst_percentage,d));e.excelService.mapArrayToExcel("Item",["Item Number","Item Name","Category Name","Sub Category Name","UOM","GST","Specification"],["item_number","item_name","categoryName","subCategoryName","uomName","gstValue","specification"],["string","string","string","string","string","string","string"],n)})()}onPageChange(e){console.log(e),this.fetchItemList(e.pageIndex,e.pageSize)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.F0),t.Y36(Z.s),t.Y36(ot.x),t.Y36(T.o),t.Y36(b.gz),t.Y36(A.eN),t.Y36(rt.k))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-listing"]],viewQuery:function(e,n){if(1&e&&t.Gf(D.NW,5),2&e){let o;t.iGM(o=t.CRH())&&(n.paginator=o.first)}},decls:4,vars:2,consts:[[1,"section-wrapper"],[4,"ngIf","ngIfElse"],["noView",""],[1,"section-header"],[1,"header-left"],[1,"header-right"],[1,"buttons-containers"],[1,"filter-con"],["dir","ltr",1,"labeled-outlined-field-wrapper"],["appearance","outline",1,"full-width","drop-down","outline-filter-field","hide-form-bottom-field"],["matInput","","placeholder","Search by name",3,"input"],["mat-button","",1,"submit-btn",3,"click"],["mat-button","",1,"other-btn",3,"click"],[1,"section-body"],[1,"table","pragati-table"],["scope","col"],[4,"ngFor","ngForOf"],["aria-label","Select page",1,"demo-paginator",3,"length","pageSize","disabled","showFirstLastButtons","pageSizeOptions","hidePageSize","pageIndex","page"],["paginator",""],["scope","row"],[1,"action-btn-wrapper"],["title","Edit",1,"action-btn",3,"click"],[1,"fa","fa-edit"],["title","Delete",1,"action-btn",3,"click"],[1,"fa","fa-trash"],[2,"display","flex","justify-content","center","margin-top","2%","font-size","160%","font-weight","bolder","color","grey"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,ct,41,9,"ng-container",1),t.YNc(2,mt,2,0,"ng-template",null,2,t.W1O),t.qZA()),2&e){const o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",n.viewPermission)("ngIfElse",o)}},dependencies:[at.Lv,C.KE,v.lW,q.Nt,D.NW,h.sg,h.O5],styles:[".section-wrapper[_ngcontent-%COMP%]{padding:0 15px}.section-wrapper[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{border-bottom:2px solid #C5C5C5;display:flex;align-items:center;justify-content:space-between;padding:18px 0}.section-wrapper[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.buttons-containers[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.submit-btn[_ngcontent-%COMP%]{background:#233a61;color:#fff;font-size:12px;padding-left:23px;padding-right:23px}.submit-btn[_ngcontent-%COMP%]:hover{opacity:.7}.cancel-btn[_ngcontent-%COMP%]{background:#ccc;font-size:12px;padding-left:23px;padding-right:23px}.cancel-btn[_ngcontent-%COMP%]:hover{opacity:.7}.other-btn[_ngcontent-%COMP%]{background:#525252;color:#fff;font-size:12px;padding-left:23px;padding-right:23px}.other-btn[_ngcontent-%COMP%]:hover{opacity:.7}.section-body[_ngcontent-%COMP%]{padding:20px 0 0}mat-form-field[_ngcontent-%COMP%]{display:block}.pragati-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;background:#233A61;color:#fff;font-weight:400;font-size:12px;border:.5px solid #94A3B8;text-align:center;vertical-align:middle}.pragati-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:.5px solid #94A3B8;border-right:.5px solid #94A3B8;font-weight:400;font-size:12px;background:#F4F4F5;text-align:center;vertical-align:middle}.pragati-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n)   td[_ngcontent-%COMP%]{background:#D9DADE}.pragati-table[_ngcontent-%COMP%]   .action-btn-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.pragati-table[_ngcontent-%COMP%]   .action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.pragati-table[_ngcontent-%COMP%]   .action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#233a61;opacity:.8;font-size:13px}.pragati-table[_ngcontent-%COMP%]   .action-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.7}"]}),i})();var gt=m(8898);const dt=[{path:"add",component:Q},{path:"",component:ut},{path:"edit/:id",component:nt}];let pt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[gt.S,h.ez,a.UX,[b.Bz.forChild(dt)]]}),i})()}}]);