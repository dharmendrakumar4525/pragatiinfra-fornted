<mat-toolbar style="height: 100px;background-color: #fff;">
  <div style="margin-top: 50px;margin-left: 20px;">
    <img src="./assets/images/ratehead.svg">
  </div>
  <span
    style="font-family: 'Poppins';margin-top: 40px;font-style: normal;font-weight:600;font-size: 30px;color:#1E293B;margin-left: 10px;">Rate
    comparative</span>
  <span class="example-spacer"></span>
  <button mat-icon-button style="margin-right: 40px;">
    <mat-icon style="margin-top: 40px;">notifications</mat-icon>
  </button>

</mat-toolbar>
<div>
  <hr style="width: 1130px;border: 2px solid #C5C5C5;margin-left: 30px;">
</div>
<div style="display: flex;flex-direction: row;font-family: 'Poppins';font-weight: 600;">

  <div style="margin-top: 20px;margin-left: 30px;display: flex;cursor: pointer;" [routerLink]="['/procurement']" routerLinkActive="active-link">

    <div><img src="./assets/images/box.svg"></div>
    <span style="color: #97989D;margin-left: 5px;font-size: 14px;">Purchase&nbsp;request</span>
    <div><mat-divider style="width: 90px;margin-left: 10px;margin-top: 10px;border:1px dashed"></mat-divider></div>
  </div>
  <div style="margin-top: 20px;margin-left: 10px;display: flex;cursor: pointer;" [routerLink]="['/procurement/prlist']" routerLinkActive="active-link">

    <div> <img src="./assets/images/approval.svg"></div>
    <span style="color: #97989D;margin-left: 5px;font-size: 14px;">Approvals</span>
    <div><mat-divider style="width: 90px;margin-left: 10px;margin-top: 10px;border:1px dashed"></mat-divider></div>
  </div>
  <div style="margin-top: 20px;margin-left: 10px;display: flex;cursor: pointer;" [routerLink]="['/rate-comparative']" routerLinkActive="active-link">
    <div> <img src="./assets/images/ratedown.svg"></div>
    <span style="color: #233A61;margin-left: 5px;font-size: 14px;">Rate&nbsp;Comparative</span>
    <div><mat-divider style="width: 90px;margin-left: 10px;margin-top: 10px;border:1px dashed"></mat-divider></div>
  </div>
  <div style="margin-top: 20px;margin-left: 10px;display: flex;cursor: pointer;" [routerLink]="['/rate-approval']" routerLinkActive="active-link">
    <div> <img src="./assets/images/approval.svg"></div>
    <span style="color: #97989D;margin-left: 5px;font-size: 14px;">Rate&nbsp;Approvals</span>
    <div><mat-divider style="width: 90px;margin-left: 10px;margin-top: 10px;border:1px dashed"></mat-divider></div>
  </div>
  <div style="margin-top: 20px;margin-left: 10px;display: flex;cursor: pointer;" [routerLink]="['/purchase-order']" routerLinkActive="active-link">
    <div><img src="./assets/images/po.svg"></div>
    <span style="color: #97989D;margin-left: 5px;font-size: 14px;">Purchase&nbsp;orders</span>
  </div>
</div>

<!-- <div class="requests">
  <div class="createreq">Rate comparative</div>
  <div class="innerreq">Approved request</div>
  <div class="innerreq">Rejected request</div>
  <div class="innerreq">Revised rates</div>
</div> -->

<ng-container class="section-body" *ngIf="permissions.childList[0].isSelected; else noView">
  <div style="display: flex;flex-direction: row;gap:10px;width: 100%;">
    <div style="margin-left: 40px;width:100%;margin-top: 30px;">
      <mat-form-field appearance="outline" class="searchbar">
        <mat-icon matSuffix>search</mat-icon>
        <input matInput type="search" placeholder="search title" class="search-input" (input)="search($event,'title')">
  
      </mat-form-field>
    </div>
    <div style=" margin-right: 600px;margin-top: 30px;display: flex;gap:10px;width: 100%;">
      <div style="margin-top: 15px;color: #94A3B8;margin-left: 40px;"> <span>Filter&nbsp;by</span></div>
      <div> <mat-form-field appearance="outline" class="datebar">
          <input matInput [matDatepicker]="startPicker" placeholder="Date" (click)="startPicker.open()"
            (dateChange)="dateFilter( $event)" />
          <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
          <mat-datepicker #startPicker></mat-datepicker>
        </mat-form-field></div>
    </div>
    <div style="margin-top: 30px;display: flex;position: relative;right:570px;gap:10px;width: 100%;">
      <div style="margin-top: 15px;color: #94A3B8;"> <span>Filter&nbsp;by</span></div>
      <div> <mat-form-field appearance="outline" class="datebar">
          <input matInput placeholder="Site" (input)="search($event,'site')" />
        </mat-form-field></div>
    </div>
  
    <div style="margin-top: 30px;display: flex;position: relative;right:570px;gap:10px">
  
      <div style="margin-top: 15px;color: #94A3B8;width: 110px;"> <span>Filter by Status</span></div>
      <div class="custom-form-control" style="position: relative;">
  
        <mat-form-field appearance="outline">
          <mat-select [formControl]="statusOption" (selectionChange)="onStatusChange($event)">
            <mat-option [value]="item.value" *ngFor="let item of statusList">{{item.label}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
  
  </div>
  
  <div class="scroll-bar1" style="width: 93%;">
    <table style="direction: ltr !important;margin-top: -20px;">
      <tbody>
        <tr *ngFor="let obj of rateComparativeList;let index = index">
          <td style="color: #4272BF;width:300px;text-align: left;padding: 10px;font-size: 15px;">
            Request&nbsp;no&nbsp; <span style="color: #000000;">{{index+1}}</span>
          </td>
          <hr style="border: 1px solid #D9D9D9;height: 30px;">
          <td style="color: #4272BF;width:200px;font-size: 15px;">Title&nbsp;<span
              style="color: #000000;">{{obj.title}}</span> </td>
          <hr style="border: 1px solid #D9D9D9;height: 30px;">
          <td style="color: #4272BF;width:800px;text-align: left;padding: 10px;font-size: 15px;">
            Site&nbsp;<span style="color: #000000;">{{obj.siteData.site_name}}</span></td>
          <td style="background-color: #233A61;color:#fff;width:200px;font-size: 14px;cursor: pointer;"
            *ngIf="obj.status=='pending' && stage=='rate_comparitive'" [routerLink]="['/rate-comparative/update',obj._id]">Create&nbsp;Comparative</td>
          <td style="background-color: #54AA52;color:#fff;width:200px;font-size: 14px;cursor: pointer;"
            *ngIf="stage=='rate_approval' " [routerLink]="['/rate-comparative/details',obj._id]">Approved Vendors</td>
          <td style="background-color: #C7323B;color:#fff;width:200px;font-size: 14px;cursor: pointer;"
            *ngIf="obj.status =='rejected'  && stage=='rate_comparitive' " [routerLink]="['/rate-comparative/details',obj._id]">Rejected Rates</td>
            <td style="background-color: rgb(26, 188, 254); color:#fff;width:200px;font-size: 14px;cursor: pointer;"
            *ngIf="obj.status=='revise' && stage=='rate_comparitive'" [routerLink]="['/rate-comparative/update',obj._id]">Revise&nbsp;Comparative</td>
            <!-- *ngIf="stage=='rate_comparitive' -->
          <td style="width: 100px;"><mat-icon>
              arrow_forward_ios
            </mat-icon></td>
        </tr>
      </tbody>
    </table>
    <div class="no-record-found" *ngIf="!(rateComparativeList && rateComparativeList.length>0)">
      <img src="./assets/images/inbox_empty.png" alt="">
      <span> No record found</span>
    </div>
  </div>
</ng-container>

<ng-template #noView>
  <h3 style="display: flex; justify-content: center;">You don't have permissions to view.</h3>
</ng-template>